{"config":{"lang":["es"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Presentaci\u00f3n","text":"<p> <p></p>"},{"location":"#introduccion","title":"Introducci\u00f3n","text":"<p>El aspecto de la placa es el que vemos en la imagen siguiente:</p> <p> <p> Aspecto de la placa micro:STEAMakers</p> <p></p> <p>La placa est\u00e1 equipada con 520 KB de memoria din\u00e1mica, 4 MB de memoria flash y un procesador de doble n\u00facleo de 240 MHz. Adem\u00e1s, incorpora Bluetooth de bajo consumo (BLE) y WiFi, capacidades excelentes para la comunicaci\u00f3n inal\u00e1mbrica.</p> <p>Esta placa tambi\u00e9n integra diversos sensores, como el sensor de temperatura y humedad; El giroscopio aceler\u00f3metro de seis ejes que permite obtener movimientos y aceleraci\u00f3n; El sensor de luz para capturar la intensidad de la luz ambiente; La interfaz para tarjeta microSD para guardar datos; El micr\u00f3fono para detectar el sonido ambiente, y el zumbador que puede reproducir m\u00fasica; Los botones A y B y el bot\u00f3n t\u00e1ctil; La matriz de 5x5 puntos RGB para muestra de n\u00fameros, letras y patrones con desplazamiento continuo.</p> <p>Por lo tanto, se puede aplicar para la ense\u00f1anza STEAM, IoT, proyectos de control inteligente, y una variedad de trabajos creativos de tipo maker.</p>"},{"location":"#partes-microsteamakers","title":"Partes micro:STEAMakers","text":"<p>En la imagen siguiente observamos la descripci\u00f3n gr\u00e1fica de partes de la cara frontal.</p> <p> <p> Hardware de la cara frontal</p> <p></p> <p>En la imagen siguiente observamos la descripci\u00f3n gr\u00e1fica de partes de la cara posterior.</p> <p> <p> Hardware de la cara posterior</p> <p></p>"},{"location":"#pines-gpio","title":"Pines GPIO","text":"<p>La placa ESP32 micro:STEAMakers est\u00e1 equipada con pines de expansi\u00f3n tipo gold-finger, incluyendo todos los pines IO, 19 puertos digitales, 7 puertos anal\u00f3gicos, interfaces I2C, UART y SPI. En la imagen siguiente tenemos la descripci\u00f3n de pines de la placa.</p> <p> <p> Pinout del conector de borde</p> <p></p> <p>Esta placa es compatible con una gran variedad de lenguajes de programaci\u00f3n, incluyendo arduinoblocks, MicroBlocks, Arduino, MicroPython y KidsBlock3.0. Es adecuada para usuarios con diferentes niveles de programaci\u00f3n.</p>"},{"location":"#especificaciones-tecnicas","title":"Especificaciones t\u00e9cnicas","text":"<ul> <li>Alimentaci\u00f3n: USB; conector JST PH2.0; puerto I/O gold-finger</li> <li>Tensi\u00f3n de funcionamiento: 3.3V</li> <li>Corriente de funcionamiento: 100mA</li> <li>Placa de control principal ESP32: <ul> <li>Procesador: ESP32-D0WDQ6 (doble n\u00facleo)</li> <li>Frecuencia b\u00e1sica: hasta 240MHZ</li> <li>SRAM:520KB</li> <li>Flash:4MB</li> <li>Protocolo WiFi: 802.11 b/g/n (802.11n, r\u00e1pido hasta 150 Mbps)</li> <li>Rango de frecuencia de funcionamiento WiFi: 2412 ~ 2484 MHz</li> <li>Protocolo Bluetooth: cumple los est\u00e1ndares Bluetooth v4.2BR /EDR y BLE RF</li> <li>Bluetooth: receptor NZIF con sensibilidad de -97 dBm</li> <li>Audio Bluetooth: Audio CVSD y SBC</li> </ul> </li> <li>Recursos incorporados: <ul> <li>2 botones digitales (botones A y B)</li> <li>Giroscopio acelerometro de seis ejes MPU6050 con Velocidad m\u00e1xima de rotaci\u00f3n de 2000\u00b0/s y un Rango de aceleraci\u00f3n de \u00b12g\uff0c\u00b14g\uff0c\u00b18g\uff0c\u00b116g *Sensor de luz: fototransistor ALS-PT19-315C Micr\u00f3fono: 4013-SMD Zumbador: MLT-8530AAC3V 25 RGB: WS2812-2020 RGB-LED Sensor de temperatura y humedad: AHT20 Interfaz de expansi\u00f3n de tarjeta microSD M\u00f3dulo de detecci\u00f3n de consumo de corriente de alimentaci\u00f3n: INA180A1IDBVR Puerto de expansi\u00f3n I2C</li> </ul> </li> <li>Interface de extensi\u00f3n: <ul> <li>19 puertos de E/S digital (multiplexado parcialmente con recursos de a bordo)</li> <li>2 DAC de 8 bits (io25, io26)</li> <li>7 pines t\u00e1ctiles (io2, io4, io12, io13, io15, io27, io32)</li> <li>13 pines PWM (io2, io4, io5, io12, io15, io16, io18, io19, io23, io25, io26, io27, io32)</li> <li>Dispositivo UART de 3 v\u00edas (cualquier pin), soporta control de flujo por hardware y DMA</li> <li>2 dispositivos I2C (cualquier pin), soporta modo host o esclavo</li> <li>Control remoto IR (cualquier pin) Transceptor IR de 8 canales, soporta diferentes est\u00e1ndares de forma de onda.</li> </ul> </li> </ul>"},{"location":"#i2c-en-la-microsteamakers","title":"I2C en la micro:STEAMakers","text":"<p>La placa ESP32 micro:STEAMakers incorpora un puerto de expansi\u00f3n I2C localizado en un conector hembra de 4 pines de 100mils (2,54mm) de separaci\u00f3n entre pines.</p> <p> <p> Conector de expansi\u00f3n I2C</p> <p></p> <p>Adem\u00e1s la placa incorpora dos dispositivos que son I2C y que es conveniente tener claro cuales son y que direcciones f\u00edsicas utilizan para que no interfiramos con los mismo desde lo que conectemos externamente al puerto de expansi\u00f3n I2C de la placa que sea de tipo I2C. Son los siguientes:</p> <ul> <li>Sensor de temperatura y humedad AHT20.</li> </ul> <p> <p> Localizaci\u00f3n Sensor de temperatura y humedad AHT20</p> <p></p> <ul> <li>Aceler\u00f3metro, giroscopio de 6 ejes MPU-6050.</li> </ul> <p> <p> Localizaci\u00f3n aceler\u00f3metro y giroscopio MPU-6050</p> <p></p> <p>Observamos en este caso que el dispositivo tiene posibilidad de configurar la direcci\u00f3n I2C del mismo entre dos posibilidades:</p> <ul> <li>Direcci\u00f3n 0x68 configurada por defecto al estar unidos los dos pads de configuraci\u00f3n mediante una resistencia de cero ohmios.</li> <li>Direcci\u00f3n 0x69 que podemos configurar desoldando la resistencia de la 0x68 y soldandola en los dos pads de la 0x69. Aunque no es una operaci\u00f3n muy compleja no se recomienda acometerla si no tenemos experiencia trabajando con soldadura en este tipo de placas y componentes y en cualquier caso no se recomienda a no ser que resulte totalmente imprescindible.</li> </ul> <p>A continuaci\u00f3n vamos a ver un ejemplo en el que averiguamos las direcciones f\u00edsicas de estos dos dispositivos I2C.</p> <p> <p> Obtenci\u00f3n de la direcci\u00f3n I2C de los dispositivos conectados</p> <p></p> <p>Cargamos el programa en la placa, conectamos la consola serie y tras hacer un reset f\u00edsico en la micro:STEAMakers nos aparece la siguiente informaci\u00f3n:</p> <p> <p> Resultados obtenci\u00f3n de la direcci\u00f3n I2C de los dispositivos conectados</p> <p></p> <p>El bloque 'Escanear lo encontramos en 'Entrada/Salida' en I2C:</p> <p> <p> Bloque Escaner I2C</p> <p></p>"},{"location":"CO2/","title":"Conceptos sobre CO2 y VOC","text":"<p>En general vamos a dar unas pautas de lo que son, por que son perjudiciales para la salud, que valores podemos tomar como referencia para determinar la calidad del aire y sus fuentes principales de emisi\u00f3n en entornos de trabajo no industriales (oficinas, locutorios, etc) y aulas escolares. Veremos al final el sensor que vamos a usar y algunas cosas interesantes sobre el mismo.</p>"},{"location":"CO2/#sobre-el-co2","title":"Sobre el CO2","text":"<p>El di\u00f3xido de carbono es un gas inodoro e incoloro. Bajo presi\u00f3n puede encontrarse en estado l\u00edquido o estado s\u00f3lido (hielo seco).</p> <p>En el enlace podemos encontrar mas definiciones de t\u00e9rminos usuales dadas por el Departamento de Salud de New Jersey.</p>"},{"location":"CO2/#necesidad-de-vigilar-los-niveles-de-co2","title":"Necesidad de vigilar los niveles de CO2","text":"<p>De manera muy resumida diremos que al respirar aire con mucho CO2, aumenta su concentraci\u00f3n en sangre, baja el pH de la misma, y esto dispara la sensaci\u00f3n de asfixia.</p> <p>En la p\u00e1gina 8 de la Ficha T\u00e9cnica de Seguridad n\u00famero 300000000020 se indican claramente los efecto perjudiciales del CO2 que relacionamos a continuaci\u00f3n.</p> <p>Efectos debido a la inhalaci\u00f3n:</p> <ul> <li>Una concentraci\u00f3n de CO2 superior o igual al 10% puede causar p\u00e9rdida de consciencia o muerte.</li> <li>El bi\u00f3xido de carbono tiene la capacidad de provocar la muerte, incluso si se mantienen los niveles normales de ox\u00edgeno (20 a 21%).</li> <li>El bi\u00f3xido de carbono es fisiol\u00f3gicamente activo, afecta la circulaci\u00f3n y la respiraci\u00f3n.</li> <li>A concentraciones de 2 a 10%, el bi\u00f3xido de carbono puede ocasionar n\u00e1usea, mareo, dolor de cabeza, confusi\u00f3n, aumento de la presi\u00f3n arterial y la frecuencia respiratoria.</li> <li>A elevadas concentraciones puede causar asfixia.</li> <li>Los s\u00edntomas pueden incluir la p\u00e9rdida de la consciencia o de la movilidad.</li> <li>La v\u00edctima puede no haberse dado cuenta de la asfixia. La asfixia puede causar la inconsciencia tan inadvertida y r\u00e1pidamente que la v\u00edctima puede ser incapaz de protegerse.</li> </ul> <p>S\u00edntomas:</p> <ul> <li>V\u00e9rtigo.</li> <li>Salivaci\u00f3n.</li> <li>N\u00e1usea.</li> <li>V\u00f3mitos.</li> <li>P\u00e9rdida de movilidad/consciencia.</li> <li>Escalofr\u00edos.</li> <li>Sudor.</li> <li>Visi\u00f3n borrosa.</li> <li>Dolor de cabeza.</li> <li>Aumento de pulsaciones.</li> <li>Insuficiencia respiratoria.</li> <li>Respiraci\u00f3n r\u00e1pida.</li> </ul> <p>Toxicidad aguda por inhalaci\u00f3n:</p> <ul> <li>Un nivel de CO2 del 5% act\u00faa de manera sin\u00e9rgica e incrementa la toxicidad de otros gases (CO, NO2).</li> <li>El CO2 incrementa la producci\u00f3n de carboxihemoglobina o metahemoglobina ocasionada por estos gases, probablemente debido a los efectos estimulantes del bi\u00f3xido de carbono en los sistemas respiratorio y circulatorio.</li> </ul> <p>Podemos consultar mas datos sobre el CO2 en la Ficha de seguridad oficial.</p> <p>En la entrada Di\u00f3xido de carbono del Instituto para la Salud Geoambiental podemos leer:</p> <p>Efectos en la salud:</p> <p>El principal efecto que produce el CO2 es la asfixia por desplazamiento del ox\u00edgeno, pero esto se produce por concentraciones muy altas capaces de desplazar el ox\u00edgeno y reducir su concentraci\u00f3n por debajo del 20%. En concentraciones altas, cercanas a la 30.000 ppm, puede causar dolores de cabeza, falta de concentraci\u00f3n, somnolencia, mareos y problemas respiratorios. En entornos laborales, como oficinas, se comienzan a tener quejas de olores a partir de las 800-1000 ppm.</p> <p>Colegios y CO2</p> <p>Es importante se\u00f1alar que las personas con problemas de asma o SQM deben proveerse de un aire con bajas concentraciones de CO2.</p> <p>Vamos a considerar solamente, y a efectos de estas notas, la \u00faltima reglamentaci\u00f3n RITE sin referirnos al RITE o NTE anteriores. C\u00f3mo se indica mas abajo el RITE, o Reglamento de Instalaciones T\u00e9rmicas en los Edificios y sus IT (Instrucciones T\u00e9cnicas) contempla que el nivel de CO2 aconsejable en el interior de edificios, seg\u00fan los estudios y normas de referencia, se recomienda que se mantenga en niveles entre las 400 ppm y las 800 ppm. Teniendo en cuenta que el RITE se publica en su primera versi\u00f3n por el Real Decreto 1027/2007, de 20 de julio, por el que se aprueba el Reglamento de Instalaciones T\u00e9rmicas en los Edificios (BOE 29/08/2007) y que tiene varias correcciones de errores y modificado de art\u00edculos hasta su Versi\u00f3n consolidada del Real Decreto 1027/2007, de 20 de julio por el que se aprueba el Reglamento de instalaciones t\u00e9rmicas en los edificios es muy posible que la mayor\u00eda de los centros educativos de construcci\u00f3n anterior a estas fechas no tengan adecuadas sus instalaciones para cumplir esta reglamentaci\u00f3n, cosa que por otra parte ser\u00eda muy deseable y que de seguro se habr\u00eda logrado con una normativa espec\u00edfica para estos locales.</p> <p>Un grupo a tener en cuenta especialmente son los ni\u00f1os en los colegios. En Espa\u00f1a no hay normativa espec\u00edfica que regule el nivel de CO2 en los colegios, como si lo tienen por ejemplo en Francia, y es bien conocida la relaci\u00f3n entre el bajo rendimiento escolar y los altos niveles de CO2. Adem\u00e1s los ni\u00f1os debido a su metabolismo y actividad producen mucho m\u00e1s CO2 que los adultos.</p> <p>A ra\u00edz de la pandemia, que a d\u00eda de hoy (mayo de 2021) nos sigue acompa\u00f1ando se han publicado multitud de gu\u00edas y recomendaciones para indicar la necesidad de ventilaci\u00f3n en las aulas, que con las medidas anti-covid establecidas en los centros y el gran compromiso adquirido por todo el personal relacionado con la vida de los centros y el propio alumnado, hemos de decir que los centros educativos han sido capaces de mantener un nivel de contagios que ha permitido mantenerlos en funcionamiento. A t\u00edtulo de ejemplo tenemos la Gu\u00eda para ventilaci\u00f3n en aulas del Instituto de Diagn\u00f3stico Ambiental y Estudios del Agua, IDAEA-CSIC, Mesura en su VERSI\u00d3N 3 de 6 de noviembre de 2020.</p> <p>Principales Fuentes:</p> <p>La principal fuente en ambientes interiores es la respiraci\u00f3n humana. Se deben considerar otras posibles fuentes debidas a combusti\u00f3n en casos de altos niveles de concentraci\u00f3n.</p> <p>Niveles habituales:</p> <p>Los niveles habituales que podamos encontrar en un ambiente interior estar\u00e1 relacionado con las diferentes variables que afectan a este factor como son: Niveles en aire exterior, fuentes interiores, niveles de ocupaci\u00f3n y tasas de ventilaci\u00f3n.</p> <p>En la legislaci\u00f3n existente no hay un valor concreto que se d\u00e9 como bueno. Existen diferentes recomendaciones y valores l\u00edmite ocupacionales. En el RITE por ejemplo en funci\u00f3n del nivel de calidad de aire exigible al local los valores de concentraci\u00f3n van desde las 400 ppm hasta m\u00e1s de 1.000 ppm. El valor l\u00edmite de exposici\u00f3n profesional para exposiciones de 8 horas que vemos en las Gu\u00edas del INSHT es de 5.000 ppm si bien este valor no se puede aplicar a entornos no industriales. Recordemos que en espacios como oficinas a partir de 800 ppm se producen quejas por olores y se recomienda no superar las 1.000 ppm.</p> <p>Lo ideal es que el cociente entre exterior e interior sea lo m\u00e1s cercano a 1 posible.</p> <p>En el art\u00edculo de la International Journal of Emergency Medicine dado en la webgraf\u00eda se pueden consultar mas datos relativos al tema del CO2 y en el de Centro Canadiense de Seguridad y Salud Ocupacional (CCSSO) tenemos respuestas a diversas cuestiones sobre el CO2.</p>"},{"location":"CO2/#riesgos-de-transmision-de-covid-19-en-distintas-situaciones","title":"Riesgos de transmisi\u00f3n de covid-19 en distintas situaciones","text":"<p>En la figura 3 del art\u00edculo Editorial de BMJ dado en la webgraf\u00eda podemos leer que la gr\u00e1fica exponer el Riesgo de transmisi\u00f3n del SARS-CoV-2 de personas asintom\u00e1ticas en diferentes entornos y para diferentes tiempos de ocupaci\u00f3n, ventilaci\u00f3n y niveles de hacinamiento (ignorando la variaci\u00f3n en la susceptibilidad y las tasas de diseminaci\u00f3n viral). Las calificaciones son indicativas de riesgo relativo cualitativo y no representan una medida cuantitativa. Es posible que tambi\u00e9n deban tenerse en cuenta otros factores no presentados en estas tablas al considerar el riesgo de transmisi\u00f3n, incluida la carga viral de una persona infectada y la susceptibilidad de las personas a la infecci\u00f3n. Toser o estornudar, incluso si se deben a irritaci\u00f3n o alergias mientras est\u00e9 asintom\u00e1tico, agravar\u00eda el riesgo de exposici\u00f3n en un espacio interior, independientemente de la ventilaci\u00f3n.</p> <p>Reproducimos aqu\u00ed la gr\u00e1fica en formato original traducida para que nos sirva de gu\u00eda.</p> <p> <p> Gr\u00e1fica de riesgos de transmisi\u00f3n Clic para ver ampliada</p> <p></p>"},{"location":"CO2/#unidades-de-medida-del-co2","title":"Unidades de medida del CO2","text":"<p>Las formas m\u00e1s habituales de indicar la concentraci\u00f3n de un contaminante atmosf\u00e9rico son las ppb (partes por bill\u00f3n) y las ppm (partes por mill\u00f3n), los \u00b5g/m\u00b3 (microgramos por metro c\u00fabico) y los mg/m\u00b3 (miligramos por metro c\u00fabico).</p> <p>Las ppb y las ppm se suelen utilizar cuando se trata de un gas, y en este caso se sobreentiende que se expresa en volumen. Muchas veces se puede encontrar escrito como ppbv o ppmv, donde la \u201cv\u201d final indica precisamente que la concentraci\u00f3n es en volumen.</p> <p>De esta forma, 1 ppm es unidad de volumen de contaminante en un mill\u00f3n de unidades de volumen de aire. Para concentraciones altas de CO2 se usa el porcentaje volum\u00e9trico (unidades de volumen de CO2 en 100 unidades de volumen de aire), es decir que 10.000 ppm = 1%.</p> <p>Es importante tener en cuenta que el bill\u00f3n de estas ppb es un bill\u00f3n anglosaj\u00f3n, esto es, 1000 millones de vol\u00famenes (\\(10^9\\)). En Europa un bill\u00f3n es 1 mill\u00f3n de millones, \\(10^{12}\\), por lo que la equivalencia es: 1ppm = 1000ppb</p> <p>Otras dos formas habituales de expresar la concentraci\u00f3n de los contaminantes atmosf\u00e9ricos son los \u00b5g/m\u00b3 (microgramos por metro c\u00fabico) y los mg/m\u00b3 (miligramos por metro c\u00fabico). La equivalencia es similar a las de ppm y ppb:</p> <p>1 mg/m\u00b3 = 1000 \u00b5g/m\u00b3</p> <p>Para convertir las ppb en \u00b5g/m\u00b3 tenemos que tener en cuenta que dicha conversi\u00f3n depende del tipo de contaminante, y de una presi\u00f3n y una temperatura que tomemos como referencia. Para ver esto, tomemos una concentraci\u00f3n de 1 ppb de un contaminante M. Esto implica que tenemos 1 m\u00b3 de M en \\(10^9\\) m\u00b3 de aire. O lo que es lo mismo, \\(10^{\u22129}\\) m\u00b3 de M en 1 m\u00b3 de aire.</p> <p>La forma habitual de expresar la concentraci\u00f3n de CO2 es en mg/m\u00b3 (miligramos por metro c\u00fabico). Para convertir las ppm en mg/m\u00b3 tenemos que tener en cuenta que dicha conversi\u00f3n depende del tipo de gas, y de una presi\u00f3n y una temperatura que tomemos como referencia.</p> <p>Teniendo en cuenta la ecuaci\u00f3n general de los gases ideales, para el CO2 (con peso molecular 44,01 g/mol), y tomando como referencia P = 1 atm y T = 298,16 K (25 \u00baC), tenemos (R = 0,08205746 atm\u00b7L/mol\u00b7K):</p> <p> <p>\\(\\dfrac{10^{6}\\cdot 44,01\\hspace{0.1cm} g/mol\\cdot 1\\hspace{0.1cm}atm\\cdot 10^{-6}}{0,08205746\\cdot 298,16\\hspace{0.1cm}K}=1,798\\hspace{0.1cm}mg\\hspace{0.1cm}\\approx\\hspace{0.1cm}1,8\\hspace{0.1cm}mg\\)</p> <p></p> <p>Luego:</p> <p> <p>\\(\\boxed{1\\hspace{0.1cm}ppm=1,8\\hspace{0.1cm}mg/m^{3}\\hspace{1cm}(CO_{2}\\hspace{0.2cm}@\\hspace{0.2cm}1\\hspace{0.2cm}atm.\\hspace{0.2cm} 25\\hspace{0.2cm}\u00baC)}\\)</p> <p></p> <p>Que ser\u00e1 la relaci\u00f3n a usar para convertir entre unidades de CO2.</p> <p>Tambi\u00e9n se puede expresar como:</p> <p> <p>\\(\\boxed{1\\hspace{0.1cm}ppb=1800\\hspace{0.1cm}\\mu g/m^{3}\\hspace{1cm}(CO_{2}\\hspace{0.2cm}@\\hspace{0.2cm}1\\hspace{0.2cm}atm.\\hspace{0.2cm} 25\\hspace{0.2cm}\u00baC)}\\)</p> <p></p>"},{"location":"CO2/#valores-de-referencia-para-el-co2","title":"Valores de referencia para el CO2","text":"<p>En la tabla siguientes damos los valores que vamos a considerar en nuestro caso. En la columna color se establece cual ser\u00e1 el color que se ilumine en un posible sem\u00e1foro.</p> <p> CO2 (ppm) CO2 (\\(mg / m ^{3}\\)) Ambiente Mensaje Color de 0 a 500 de 0 a 900 Muy bueno Aconsejado Apagado de 501 a 1000 de 901 a 1800 Bueno Bueno Verde de 1001 a 1500 de 1801 a 2700 Moderado ventilar Amarillo de 1501 a 2000 de 2701 a 3600 Muy malo VENTILAR Rojo fijo mas de 2000 mas de 3600 Inaceptable Desalojar Rojo intermitente <p></p>"},{"location":"CO2/#fuentes-emisoras-de-co2-en-personas","title":"Fuentes emisoras de CO2 en personas","text":"<p>En el ambiente que nos ocupa la principal fuente de emisi\u00f3n de CO2 va a ser el ser humano a trav\u00e9s de la respiraci\u00f3n, la sudoraci\u00f3n, la transpiraci\u00f3n y el sudor.</p>"},{"location":"CO2/#sobre-los-voc","title":"Sobre los VOC","text":"<p>VOC (Volatile Organic Compounds) es la abreviatura inglesa para los compuestos org\u00e1nicos vol\u00e1tiles (COV) que hay en el aire en forma de gas o de vapor a temperatura ambiente. Los VOC tienen muy diversa procedencia pero nos interesa en este caso los generados en los procesos biol\u00f3gicos de las personas que los emiten a trav\u00e9s de la respiraci\u00f3n y de la piel.</p> <p>Los efectos sobre la salud a corto plazo pueden ser:</p> <ul> <li> <p>Irritaci\u00f3n de ojos, garganta y nariz</p> </li> <li> <p>N\u00e1useas</p> </li> <li> <p>Dolor de cabeza</p> </li> <li> <p>V\u00f3mito de sangre</p> </li> <li> <p>Reacciones al\u00e9rgicas e hinchazones</p> </li> <li> <p>Mareos</p> </li> <li> <p>Dolores estomacales e intestinales</p> </li> <li> <p>Fatiga</p> </li> <li> <p>Manchas en la piel.</p> </li> </ul> <p>A largo plazo pueden da\u00f1ar el h\u00edgado, los ri\u00f1ones o el sistema nervioso central. Tambi\u00e9n pueden ser carcin\u00f3genos, como por ejemplo el benceno.</p>"},{"location":"CO2/#valores-de-referencia-para-voc","title":"Valores de referencia para VOC","text":"<p>En la tabla siguiente damos los valores que vamos a considerar en nuestro caso.</p> <p> VOC (ppb) Ambiente Mensaje Color de 0 a 200 Muy bueno Aconsejado Apagado de 201 a 600 Bueno Bueno Verde de 601 a 1000 Moderado ventilar Amarillo de 1001 a 2000 Muy malo VENTILAR Rojo fijo mas de 2000 Inaceptable Desalojar Rojo intermitente <p></p>"},{"location":"CO2/#fuentes-emisoras-de-voc-en-personas","title":"Fuentes emisoras de VOC en personas","text":"<p>En el ser humano se producen diferentes gases VOC a trav\u00e9s de la respiraci\u00f3n (acetona, etanol, isopreno), la sudoraci\u00f3n, la transpiraci\u00f3n, el sudor, por flato (metano), los cosm\u00e9ticos (Limoneno, eucaliptol), el mobiliaario (alcoholes), la combusti\u00f3n de motores y calderas (hidrocarburos) y los ordenadores, impresoras o fotocopiadoras (benceno, estireno, fenol).</p>"},{"location":"CO2/#el-sensor-ccs811","title":"El sensor CCS811","text":"<p>Es un sensor de gas digital que puede detectar una amplia gama de compuestos org\u00e1nicos vol\u00e1tiles. En este caso se denominan TVOC, pues el sensor no distingue unos de otros y la medida la totaliza. Tambi\u00e9n detecta niveles equivalentes de di\u00f3xido de carbono que se denominan eCO2.</p> <p>Los rangos de medida son:</p> <ul> <li> <p>eCO2: de 400 a 29206 ppm (partes por millon).</p> </li> <li> <p>TVOC: de 0 a 32768 ppb (partes por bill\u00f3n).</p> </li> </ul>"},{"location":"MiCS4514/","title":"Sensor MiCS4514 de NO2 y CO","text":""},{"location":"MiCS4514/#el-sensor","title":"El sensor","text":"<p>El MiCS4514 es un sensor con tiempos de respuesta cortos y adecuado para monitorizar la calidad del aire, para detecci\u00f3n de fugas de gas y detecci\u00f3n de contaminaci\u00f3n. Es un sensor de silicio para gases que tiene un diafragma micromaquinado de precisi\u00f3n con una resistencia de calentamiento integrada y la capa de detecci\u00f3n en la parte superior. Su tiempo de respuesta es inferior a 10 segundos y opera dentro de un rango de temperatura de -30 \u00baC a 85 \u00baC.</p> <p>Especificaciones:</p> <ul> <li>Sensor MOS (Metal \u00d3xido Semiconductor)</li> <li>Tecnolog\u00eda MEMS (MicroElectroMechanical Systems)</li> <li>Tiempo de respuesta: menos de 10 segundos</li> <li>Rango de temperatura de funcionamiento: de -30\u00baC a 85\u00baC</li> <li>Gases detectables MiCS-4514:</li> </ul> <p>\u25e6 Mon\u00f3xido de carbono (1-1000ppm) \u25e6 Di\u00f3xido de nitr\u00f3geno (0.05-10ppm) \u25e6 Hidr\u00f3geno (1-1000ppm) \u25e6 Etanol (10-500ppm) \u25e6 Amoniaco (1-500ppm) \u25e6 Metano (mayor de 1000 ppm)  </p> <p>El aspecto del sensor lo vemos en la imagen siguiente:</p> <p> <p> Sensor MiCS4514</p> <p></p> <p>Aunque el sensor se comercializa como tal, a nosotros nos interesa un m\u00f3dulo, placa o PCB en el que venga montado con los elementos auxiliares necesarios para hacerlo funcionar. Esta PCB existe comercialmente, se denomina CJMCU-4541 y tiene el siguiente aspecto:</p> <p> <p> PCB CJMCU-4541 con sensor MiCS4514</p> <p></p> <p>Aviso</p> <p>La PCB CJMCU-4514 es utilizable directamente en sistemas modulares pero para formato EASY Plug es necesario utilizar la shield que vemos seguidamente.</p>"},{"location":"MiCS4514/#shield-cjmcu-4514-a-easy-plug","title":"Shield CJMCU-4514 a EASY Plug","text":"<p>La Shield MiCS4514 es un desarrollo de INNOVA DIDACTIC creado para el proyecto Educacont del a\u00f1o 2019. La placa montada tiene el aspecto de la imagen siguinete:</p> <p> <p> Shield MiCS4514</p> <p></p> <p>A continuaci\u00f3n vemos una imagen descriptiva de las partes de esta shield:</p> <p> <p> Partes shield MiCS4514</p> <p></p> <p>Los pines marcados D8, A0 y A1 son los correspondientes a la placa de control Easy Plug Control board V2.0. Para otras aplicaciones habr\u00e1 que adaptarlos a la placa que se est\u00e9 utilizando.</p> <p>Los pines macho se han colocado para dar funcionalidad extra a la PCB y tener otras opciones de conex\u00edon disponibles por si resulta necesario, pero inicialmente no ser\u00e1n usados.</p> <p>La shield est\u00e1 equipada con la interfaz RJ11 6P6C, compatible con la placa de control keyestudio EASY plug. Si disponemos de placas de otras marcas con este tipo de conexi\u00f3n debemos verificar el orden de pines antes de conectarlas.</p>"},{"location":"SD/","title":"Tarjeta microSD","text":"<p>La placa ESP32 microSTEAMakers incorpora un lector de tarjetas microSD conectada mediante el bus SPI para comunicarse con el micro controlador.</p> <p>El lector se conecta utilizando los pines:</p> <ul> <li>io5 - CS o Chip Select</li> <li>io23 - MOSI o Master Output Slave Input: Salida de datos del Master y entrada de datos al Esclavo.</li> <li>io19 - MISO o Master Input Slave Output: Salida de datos del Esclavo y entrada al Master.</li> <li>io18 - SCK o Clock</li> </ul> <p>En la Presentaci\u00f3n, apartado Introducci\u00f3n podemos apreciar la posici\u00f3n del lecto SD en la parte posterior de la placa. En la imagen siguiente vemos destacado el lector SD.</p> <p> <p> Lector de tarjetas microSD</p> <p></p>"},{"location":"giroscopio/","title":"Aceler\u00f3metro + giroscopio","text":"<p>La ESP32 micro:STEAMakers monta un chip MPU-6050 de InvenSense que es un dispositivo MEMS de 6 ejes (giroscopio + aceler\u00f3metro). El t\u00e9rmino MEMS, del ingl\u00e9s MicroElectroMechanical Systems, se refiere a la tecnolog\u00eda electromec\u00e1nica de dispositivos microsc\u00f3picos o sistemas microelectromec\u00e1nicos.</p> <p>Los dispositivos MPU-6050 combinan un giroscopio de 3 ejes y un aceler\u00f3metro de 3 ejes en el mismo chip, junto con un procesador digital (Digital Motion Processor\u2122 o DMP) integrado, que procesa algoritmos complejos de 6 ejes. El dispositivo puede acceder a magnet\u00f3metros externos u otros sensores a trav\u00e9s de un bus I\u00b2C maestro auxiliar, lo que permite a los dispositivos recopilar un conjunto completo de datos de sensores sin intervenci\u00f3n del procesador del sistema.</p> <p>Para un seguimiento preciso de los movimientos r\u00e1pidos y lentos, el chip incorpora un giroscopio programable por el usuario con una escala completa de \u00b1250, \u00b1500, \u00b11000 y \u00b12000 \u00b0/seg (dps), y un aceler\u00f3metro programable por el usuario con una escala completa de \u00b12g, \u00b14g, \u00b18g y \u00b116g. Otras caracter\u00edsticas son un sensor de temperatura integrado con una variaci\u00f3n del \u00b11% en el rango de temperatura de funcionamiento.</p> <p>En arduinoblocks se implementa el bloque del sensor con las aceleraciones y giros en los ejes X, Y y Z que vemos en la imagen siguiente:</p> <p> <p> Bloque Accel+Gyro</p> <p></p> <p>A continuaci\u00f3n vamos a analizar la posici\u00f3n de los ejes X, Y, Z con la micro:STEAMakers vista por su cara frontal con el conector USB-C en la parte superior. La forma habitual en que vemos la pantalla de LEDs RGB.</p> <p>Analizando la imagen siguiente:</p> <p> <p> Analisis de la posici\u00f3n de los ejes</p> <p></p> <p>Fijamos la posici\u00f3n de los ejes que vemos en la imagen siguiente:</p> <p> <p> Posici\u00f3n de los ejes</p> <p></p> <p>Tal y como vemos en la imagen siguiente, un programa en el que asignamos al plotter las aceleraciones en los tres ejes nos devuelve como resultado que cuando movemos la placa en el eje X habitual responde la aceleraci\u00f3n en Y (marr\u00f3n oscuro) y al moverlo en Y responde la de X (magenta claro). La tercera gr\u00e1fica corresponde al eje Z.</p> <p> <p> Cambios de ejes X e Y</p> <p></p> <p>Como veremos en la actividad correspondiente el problema en muy sencillo de solucionar para que las direcciones del movimiento sean la que habitualmente utilizamos en los ejes coordenados.</p> <p>En la imagen siguiente se analiza la aceleraci\u00f3n en el eje Z:</p> <p> <p> Aceleraci\u00f3n eje Z</p> <p></p> <p>El problema se repite cuando trabajamos con los datos de giro.</p>"},{"location":"microf/","title":"Micr\u00f3fonos","text":"<p>Un micr\u00f3fono es un dispositivo de entrada que sirve para transformar ondas sonoras en energia electrica y vicerversa en procesos de grabaci\u00f3n.</p> <p>Existe multitud de tipos de micr\u00f3fonos para distintas aplicaciones en las que no vamos a entrar. En el enlace tienes un amplio art\u00edculo sobre los mismos.</p> <p>Existe un tipo denominado MEMs (\"Microelectromechanical systems\" en ingl\u00e9s) que tambi\u00e9n se denominan chips microf\u00f3nicos y son variantes del micr\u00f3fono a condensador. El diafragma sensible est\u00e1 grabado sobre la oblea de silicio y suelen integrarse con un amplificador incorporado.</p> <p>La micro:STEAMakers tiene un micr\u00f3fono integrado. Puede usarse como una entrada simple (encender luces cuando se aplaude) o tambien se puede medir la cantidad de sonido, por lo que puede hacer un medidor de nivel de ruido o son\u00f3metro b\u00e1sico Tambien podemos hacer que las luces se enciendan en modo disco, al comp\u00e1s de la m\u00fasica. Un micr\u00f3fono funciona como un transductor o sensor electroac\u00fastico y convierte el sonido (ondas sonoras) en una se\u00f1al el\u00e9ctrica para aumentar su intensidad, transmitirla y registrarla.</p> <p>El micr\u00f3fono est\u00e1 en la parte delantera de la micro:STEAMakers y tiene el aspecto que vemos en la imagen siguiente:</p> <p> <p> Aspecto del micr\u00f3fono en la micro:STEAMakers</p> <p></p> <p>Un circuito de aplicaci\u00f3n t\u00edpica lo vemos a continuaci\u00f3n. En el mismo podemos observar que la capsula microf\u00f3nica incluye su propia circuiteria amplificadora.</p> <p> <p> Esquema circuito altavoz</p> <p></p>"},{"location":"zumbador/","title":"Zumbador o buzzer","text":"<p>Antes de entrar en descripciones t\u00e9cnicas de componentes vamos a hablar un poco del sonido, sin entrar en profundidad, y como reproducirlo con una micro:STEAMakers.</p> <p>Uno de los par\u00e1metros que caracterizan a un sonido es su frecuencia de emisi\u00f3n, siendo la frecuencia el n\u00famero de veces que se repite por unidad de tiempo (segundo). La transmisi\u00f3n del sonido se realiza por ondas a trav\u00e9s en cualquier medio (s\u00f3lido, l\u00edquido o gaseoso) excepto en el vac\u00edo. La frecuencia de un sonido nos indica cuantos ciclos por segundo tiene una onda.</p> <p>En la imagen y la tabla siguientes vemos un dibujo con un fragmento de las teclas de un piano estando todo referido a una nota est\u00e1ndar, la nota \"La\" central que tiene una frecuencia de 440 Hz. Podemos ver la nota musical que reproduce, en las dos notaciones m\u00e1s comunes de los sonidos (Ingl\u00e9s: C D E F G A B, Alem\u00e1n: C D E F G A H, Espa\u00f1ol, italiano y franc\u00e9s: Do Re Mi Fa Sol La Si) y adem\u00e1s se encuentra la frecuencia que produce esa nota musical.</p> <p> <p> Secci\u00f3n de piano y notas</p> <p></p> <p>Otro de los par\u00e1metros que caracterizan al sonido es su nivel y en sonido se caracteriza con los decibelios (dB) que es la forma de medir la intensidad del sonido. La percepci\u00f3n del sonido depende de factores como la intensidad, el tiempo que dura, las frecuencias o tonos y el entorno donde estamos. Vamos a introducir brevemente como medir la intensidad del sonido.</p> <p>Los decibelios (dB) son la unidad de medida de presi\u00f3n ac\u00fastica. Medimos presi\u00f3n, luego estamos midiendo una fuerza y mas concretamente una fuerza por unidad de superficie. Un sonido pierde intensidad seg\u00fan nos alejamos de la fuente y lo hace a un ritmo de unos 6 dB cada que vez que se duplica la distancia. Vemos un ejemplo: supongamos que escuchamos un sonido de 45 dB a una distancia de un metro, cuando nos pongamos a dos metros escucharemos 39 dB, cuando estemos a 4 metros, ser\u00e1 de 33 dB y cuando estemos a 8 metros, de 27 dB.</p> <p>La escala de medida en dB no es lineal, es logaritmica porque representa mejor la forma en que sentimos los cambios de la intensidad del sonido con nuestro oido. Algunos datos para reflexionar sobre el ruido:</p> <ul> <li>El sonido se vuelve da\u00f1ino para el ser humano a partir de los 75 dB.</li> <li>Alrededor de los 120 dB causa dolor. Una exposici\u00f3n de dos horas a 100 dB necesita un d\u00eda completo para que el oido compense la exposici\u00f3n.</li> <li>Sonido en torno a 180 dB pueden ocasionar la muerte.</li> </ul> <p>En la tabla vemos algunos ejemplos del d\u00eda a d\u00eda:</p> <p> nivel de sonido Percepci\u00f3n Situaci\u00f3n 0 dB Muy bajo Nivel de audici\u00f3n humano 10 a 30 dB Nivel bajo Conversaci\u00f3n tranquila. Biblioteca 30 a 50 dB Nivel bajo Conversaci\u00f3n normal. Motor frigorifico. Agua saliendo del grifo 55 a 75 dB Nivel considerable Aspirador. Calle con trafico denso. Despertador. Batidora 75 a 100 dB Nivel alto Sensaci\u00f3n molesta. Atasco de tr\u00e1fico. Sirena de policia 100 a 120 dB Muy alto Taladro/claxon/concierto R&amp;R = 120 dB. Interior discoteca = 110 dB mas de 120 dB Dolor Avi\u00f3n despegando a 25 metros. Petardo a un metro <p></p> <p>Una equivalencia que nos puede ayudar a familiarizarnos con esta unidad es la tabla de equivalencias entre potencias y dBm (decibelios milivatio):</p> <p> P (mW) dBm P (mW) dBm P (mW) dBm P (mW) dBm 1 0 16 12 250 24 4 W 36 1.3 1 20 13 315 25 5 W 37 1.6 2 25 14 400 26 6 W 38 2 3 32 15 500 27 8 W 39 2.5 4 40 16 630 28 10 W 40 3.2 5 50 17 800 29 13 W 41 4 6 64 18  1 W 30 16 W 42 5 7 80 19 1.3 W 31 20 W 43 6 8 100 20 1.6 W 32 25 W 44 8 9 125 21 2 W 33 32 W 45 10 10 158 22 2.5 W 34 40 W 46 13 11 200 23 3 W 35 50 W 47 <p> </p> <p>Si observamos cuidadosamente la tabla veremos que la potencia se duplica o divide por dos, seg\u00fan recorramos la tabla, cada 3 dB.</p>"},{"location":"zumbador/#zumbador-pasivo","title":"Zumbador pasivo","text":"<p>Un zumbador o buzzer pasivo no es mas que un peque\u00f1o altavoz que nos sirve para convertir una se\u00f1al el\u00e9ctrica en una onda de sonido. Son dispositivos que no disponen de ning\u00fan tipo de electr\u00f3nica interna, por lo que tenemos que proporcionar una se\u00f1al el\u00e9ctrica para conseguir el sonido deseado.</p> <p>Normalmente (como componente) estos dispositivos se incluyen en un m\u00f3dulo que incorpora un transistor y una resistencia de polarizaci\u00f3n del mismo para hacer funcionar al altavoz que act\u00faa como carga.</p> <p>Un buzzer se basa en un transductor piezoel\u00e9ctrico que es capaz de variar su volumen con el paso de la corriente el\u00e9ctrica, fen\u00f3meno que se aprovecha para hacer vibrar la membrana del altavoz. Esquem\u00e1ticamente vemos esto en la figura siguiente:</p> <p> <p> Funcionamiento y aspecto de un buzzer pasivo</p> <p></p> <p>Un zumbador pasivo requiere para su funcionamiento una se\u00f1al de tipo PWM para poder indicarle la frecuencia y la duraci\u00f3n de la se\u00f1al.</p> <p>El aspecto de un buzzer cl\u00e1sico visto por ambos lados nos ayudar\u00e1 a distinguirlo del activo.</p> <p> <p> Aspecto de un buzzer pasivo t\u00edpico</p> <p></p> <p>El que incorpora la ESP32 micro:STEAMakers es de tipo 'montaje superficial' y tiene el aspecto de la imagen siguiente:</p> <p> <p> Aspecto del buzzer pasivo en la micro:STEAMakers</p> <p></p>"},{"location":"zumbador/#zumbador-activo","title":"Zumbador activo","text":"<p>Este tipo de zumbador incluye un oscilador que genera una frecuencia audible fija y que se conoce como zumbador pasivo y,  en realidad, es el que de forma correcta se puede denominar como zumbador. Este es mucho mas sencillo de usar ya que basta con conectarlo a un pin digital y cuando pongamos a nivel alto este pin el zumbador generar\u00e1 su zumbido caracter\u00edstico durante el tiempo que establezcamos. Con este tipo de zumbador no se pueden generar melod\u00edas.</p> <p>Cuando est\u00e1 nuevo se distingue del zumbador pasivo o altavoz por la pegatina de protecci\u00f3n que lo acompa\u00f1a, pero esta hay que quitarla para oir el zumbido y sin ella es dif\u00edcil distinguir un tipo del otro, salvo por su reverso. Es aconsejable marcar alguno de los dos cuando podemos distinguirlos, sobre todo si van a ir montados sobre una PCB. Una buena idea puede ser utilizar la propia pegatina en el lateral del mismo para distinguirlo a primera vista.</p> <p>Un zumbador activo produce un tono audible fijo con tan solo aplicarle tensi\u00f3n.</p> <p>El aspecto por ambos lados de uno t\u00edpico nos ayudar\u00e1 a distinguirlo del pasivo.</p> <p> <p> Aspecto de un buzzer activo t\u00edpico</p>"},{"location":"EasyPlug/EP1_1/","title":"Shield EASY Plug 1.1","text":"<p>Se trata de una placa que inicialmente est\u00e1 pensada para la placa micro:bit, que es una placa de desarrollo dise\u00f1ada por la BBC para la ense\u00f1anza de programaci\u00f3n a adolescentes. Podemos hacer actividades con la placa de micro:STEAMakers utilizando la Shield EASY Plug que nos sirve para extender los pines de borde de placa a conectores Easy Plugs (RJ11 6P6C) donde podemos conectar de forma r\u00e1pida sensores y actuadores.</p> <p>La Shield viene con cuatro LEDs WS2812 (controlados desde P9), un zumbador (controlado por P0). Hay un interruptor (Power Switch) que sirve para control de la alimentaci\u00f3n externa y otro (Voltmeter_Switch) que se utiliza para control del voltaje (3,3V, 5V) de Easy Plug.</p> <p>El aspecto de la placa por la cara frontal es:</p> <p> <p> Cara frontal</p> <p></p> <p>Y por la cara posterior es:</p> <p> <p> Cara posterior</p> <p></p> <p>Los puertos EASY Plug tienen 6 pines que se serigrafian en la cara posterior con respecto a los puertos IO de la placa. La nomenclatura es la siguiente:</p> <ul> <li>G: GND</li> <li>V: Alimentaci\u00f3n controlada por (Voltmeter_Switch) que ser\u00e1 3.3V o 5V siempre y cuando tengamos la alimentaci\u00f3n externa conectada a una fuente de entre 6 y 10V. Sin alimentaci\u00f3n externa los puertos EASY Plug no disponen de tensi\u00f3n positiva de alimentaci\u00f3n.</li> </ul>"},{"location":"EasyPlug/EP1_1/#analisis-alimentacion-shield","title":"An\u00e1lisis alimentaci\u00f3n Shield","text":"<p>En la imagen siguiene vemos destacadas las zonas que vamos a analizar:</p> <p> <p> Alimentaci\u00f3n Shield</p> <p></p> <p>Vemos que entre otros elementos est\u00e1n los dos circuitos integrados destacados. Veamos que son estos circuitos:</p> <p>ASM1117 <p>Es un regulador de baja ca\u00edda en formato SOT-223 capaz de entregar hasta 1A de corriente. En este caso se utiliza como regulador lineal de 5 a 3.3V con un circuito seguramente muy similar al circuito de apllicaci\u00f3n que aparece en el datasheet del ASM1117 y que vemos en la imagen siguiente:</p> <p> <p> Regulador ASM1117</p> <p></p> <p>LM2596 <p>Se trata de un regulador reductor de tensi\u00f3n de salida ajustable, en formato TO-263 KTT, capaz de entregar hasta 3A. El circuito de aplicaci\u00f3n t\u00edpico que indica su datasheet lo vemos a continuaci\u00f3n. Podemos observar como est\u00e1n los componentes en la placa junto al conector de entrada externa de alimentaci\u00f3n. Este va a ser el encargado de regular la tensi\u00f3n externa al valor de tensi\u00f3n seleccionado en la placa con el interruptor Voltimeter-Switch.</p> <p> <p> Regulador LM2596</p> <p></p> <p>Uso sin alimentaci\u00f3n externa</p> <p>Sin alimentaci\u00f3n externa los puertos EASY Plug no disponen de tensi\u00f3n positiva de alimentaci\u00f3n. Por lo tanto no tiene sentido utilizar la Shield con la micro:STEAMakers sin dotarla de una alimentaci\u00f3n entre 6 y 10V a trav\u00e9s de su conector JST POWER.</p>"},{"location":"EasyPlug/EP1_1/#diagrama-de-pines","title":"Diagrama de pines","text":"<p>En la figura siguiente podemos observar la relaci\u00f3n de los puertos de la Shield con los pines de la micro:STEAMakers</p> <p> <p> Pinout Shield Clic sobre la imagen para ampliarla</p> <p></p> <p>Un an\u00e1lisis de la gr\u00e1fica nos devuelve una serie de conclusiones a tener en cuenta para el trabajo con esta Shield:</p> <ul> <li>1. Sensores micro:STEAMakers: Los pines io36 (sensor de corriente), io35 (micr\u00f3fono), io39 (sensor de luz) e io33 (Buzzer) no est\u00e1n utilizados en la Shield por lo que el uso de sus elementos asociados no tiene restricciones.</li> <li>2. I2C (SDA - io21; SCL - io22): El conector I2C est\u00e1 tambi\u00e9n disponible en formato EASY Plug y podemos conectar elementos a cualquiera de los conectores sin mas restricciones que las direcciones f\u00edsicas y el n\u00famero de elementos. Su interfaz de conexiones es:</li> </ul> <p> <p> </p> <p></p> <ul> <li>3. P12 (io15): El puerto P12 (io15) se puede usar sin restricciones. Su interfaz de conexiones es:</li> </ul> <p> <p> </p> <p></p> <p>En la pr\u00e1ctica esta interfaz de conexi\u00f3n es la que tienen todos los sensores y actuadores de tipo EASY Plug que requieren, adem\u00e1s de los pines de alimentaci\u00f3n, de un s\u00f3lo pin para los datos digitales o anal\u00f3gicos. Por tanto a este tipo de puerto podemos conectar gran cantidad de elementos.</p> <ul> <li>4. P5 y P11: Puertos asociados a los botones de la micro:STEAMakers no utilizables para otros prop\u00f3sitos.</li> <li>5. P6+P7 (P6 - io2; P7 - io25): Conector con dos puertos con la siguiente interfaz de conexionado de sus pines:</li> </ul> <p> <p> </p> <p></p> <p>En la pr\u00e1ctica esta interfaz de conexi\u00f3n la podemos considerar como la de P12 si solamente tenemos en cuenta el puerto P7 ignorando el P6. L\u00f3gicamente ser\u00eda utilizable con cualquier dispositivo que tuviese la misma interfaz de conexionado.</p> <ul> <li>6. P10 (io26): El puerto P10 (io26) se puede usar sin restricciones. Su interfaz de conexiones es:</li> </ul> <p> <p> </p> <p></p> <ul> <li>7. P0 (io12): El puerto P0 (io12) se puede usar pero con la restricci\u00f3n de que al mismo est\u00e1 conectado el altavoz con la que est\u00e1 equipada la Shield. Su interfaz de conexiones es:</li> </ul> <p> <p> </p> <p></p> <ul> <li>8. P1+P2 (P1 - io14; P2 - io32): Conector con dos puertos con la siguiente interfaz de conexionado de sus pines:</li> </ul> <p> <p> </p> <p></p> <p>En la pr\u00e1ctica esta interfaz de conexi\u00f3n la podemos considerar como la de P12 si solamente tenemos en cuenta el puerto P1 ignorando el P2. L\u00f3gicamente ser\u00eda utilizable con cualquier dispositivo que tuviese la misma interfaz de conexionado.</p> <ul> <li>9. P3+P4+P8 (P3 - io13; P4 - io27; P8 - io4): Conector con tres puertos con la siguiente interfaz de conexionado de sus pines:</li> </ul> <p> <p> </p> <p></p> <p>Como limitaciones de uso debemos tener en cuenta que el puerto P3 est\u00e1 conectado al pin de control de la matriz de 4x4 LEDs RGB de la Shield y que el pin P4 es el mismo que del sensor t\u00e1ctil de la micro:STEAMakers.</p> <p>En la pr\u00e1ctica esta interfaz de conexi\u00f3n la podemos considerar como la de P12 si solamente tenemos en cuenta el puerto P8 ignorando los otros dos. L\u00f3gicamente ser\u00eda utilizable con cualquier dispositivo que tuviese la misma interfaz de conexionado o una interfaz en la que utilice una combinaci\u00f3n de pines como P8 y P4..</p> <ul> <li>10. SPI (SCK-P13; MISO-P14; MOSI-P15; CS-P16): Conector con cuatro puertos dedicado al lector microSD con la siguiente interfaz de conexionado de sus pines:</li> </ul> <p> <p></p> <p></p> <ul> <li>11. P9 (io16): Se trata del pin al que est\u00e1n conectados los 4 LEDs RGB direccionables con los que cuenta la Shield. Veremos como programarlos en las actividades.</li> </ul> <p>En resumen, podemos usar sin restricciones, adem\u00e1s de dispositivos I2C, los puertos P12 (io15), P7 (io25), P10 (io26), P1 (io14) y P8 (io4). Para el resto debemos tener en cuenta las restricciones vistas.</p>"},{"location":"Miscelanea/about/","title":"Autoria","text":"<ul> <li>Placa distribuida por Innova Didactic</li> </ul> <p> <p></p> <p></p> <ul> <li>Programas realizados con arduinoblocks</li> </ul> <p> <p></p> <p></p> <ul> <li>Autor de la web: Federico Coca</li> </ul> <p></p> <ul> <li>GitHub</li> <li>X</li> <li>Instagram</li> <li>Mas informaci\u00f3n</li> </ul>"},{"location":"Miscelanea/lic/","title":"Licencias","text":"<ul> <li> <p>Licencia MIT incluida en la creaci\u00f3n del repositorio.</p> </li> <li> <p>Creative Commons Atribuci\u00f3n-CompartirIgual 4.0 International (\"CC BY-SA\"). CC BY-SA 4.0 </p> </li> </ul> <p> <p> </p> <p></p>"},{"location":"Miscelanea/soft/","title":"Software utilizado","text":"<ul> <li> <p>Dibujo 3D FreeCAD</p> </li> <li> <p>Sistema operativo: Ubuntu 22.04.4 LTS</p> </li> <li> <p>Paquete ofim\u00e1tico de referencia: LibreOffice</p> </li> <li> <p>Libreria Material para MkDocs</p> </li> <li> <p>Visual Studio Code</p> </li> <li> <p>Creaci\u00f3n de GIF animados para Ubuntu Peek</p> </li> <li> <p>Sistema principal de capturas de pantalla: Shutter</p> </li> <li> <p>Dibujo 2D vectorial Inkscape</p> </li> <li> <p>Retoque de im\u00e1genes GIMP</p> </li> <li> <p>Programaci\u00f3n por bloques con ArduinoBlocks</p> </li> <li> <p>Programaci\u00f3n por bloques con MicroBlocks</p> </li> <li> <p>Programaci\u00f3n mediante el IDE de Arduino</p> </li> </ul>"},{"location":"Miscelanea/webgrafia/","title":"Webgraf\u00eda y bibliograf\u00eda","text":"<ul> <li> <p>FreeBook Book (online &amp; updated) de arduinoblocks</p> </li> <li> <p>Libros &amp; Documentaci\u00f3n de arduinoblocks</p> </li> <li> <p>Playlist ESP32 micro:STEAMakers con arduinoblocks</p> </li> <li> <p>Impresionante Documentaci\u00f3n y manual de programaci\u00f3n de Innova Didactic</p> </li> <li> <p>Impresionante documentaci\u00f3n de Francisco Soldado: Ardutaller</p> </li> <li> <p>Guia de trabajo para micro:bit </p> </li> <li> <p>Git hub de Pedro Ruiz</p> </li> <li> <p>Wikipedia</p> </li> <li> <p>Carburos met\u00e1licos, p\u00e1ginas 8 y 9 de la Ficha T\u00e9cnica de Seguridad n\u00famero 300000000020</p> </li> <li> <p>Definiciones de t\u00e9rminos usuales del Departamento de Salud de New Jersey.</p> </li> <li> <p>Ficha de seguridad oficial del CO2</p> </li> <li> <p>Instituto para la Salud Geoambiental, El di\u00f3xido de carbono</p> </li> <li> <p>Art\u00edculo de la International Journal of Emergency Medicine Carbon dioxide poisoning: a literature review of an often forgotten cause of intoxication in the emergency department</p> </li> <li> <p>Art\u00edculo del Centro Canadiense de Seguridad y Salud Ocupacional (CCSSO) sobre Di\u00f3xido de Carbono - Efectos en la Salud</p> </li> </ul>"},{"location":"actividadesAB/A01/","title":"A01-Hola Mundo","text":"<p>En esta actividad haremos que al inicio se muestre durante 3 segundo una carita triste que cambiar\u00e1, tambien a los 3 segundo, a carita alegre para pasar a ver de forma permanente un coraz\u00f3n latiendo a raz\u00f3n de una pulsaci\u00f3n cada segundo.</p> <p>En la imagen siguiente tenemos el programa.</p> <p> <p> A01-Hola Mundo</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A01-Hola Mundo funcionando</p> <p></p>"},{"location":"actividadesAB/A02/","title":"A02-Medio relleno","text":"<p>Se trata de hacer un programa que con el bloque l\u00ednea nos cree un patr\u00f3n de relleno del color que deseemos en el tri\u00e1ngulo formado desde la diagonal (0,0) a (4,4) hacia la derecha.</p> <p>En la imagen siguiente tenemos el programa.</p> <p> <p> A02-Medio relleno</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A02-Medio relleno funcionando</p> <p></p>"},{"location":"actividadesAB/A03/","title":"A03-Pixel de color aleatorio","text":"<p>Se trata de hacer un programa que muestre iluminado un pixel aleatorio de un color tambi\u00e9n aleatorio.</p> <p>En la imagen siguiente tenemos el programa.</p> <p> <p> A03-Pixel de color aleatorio</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A03-Pixel de color aleatorio funcionando</p> <p></p>"},{"location":"actividadesAB/A04/","title":"A04-Botones","text":"<p>Los ejemplos vistos hasta ahora han permitido que la micro:STEAMakers nos muestre algo. Esto es lo que se conoce como salida. Ahora bien, es evidente que necesitamos tambi\u00e9n que la micro:STEAMakers reaccione a cosas externas, y estas cosas se denominan entradas. Para que sea f\u00e1cil de recordar:</p> <ul> <li>Salida es lo que micro:bit nos muestra</li> <li>Entrada es lo que recibe la micro:bit para procesarlo</li> </ul> <p>Aunque existen otros sistemas, por ahora nos vamos a centrar en los botones de la micro:STEAMakers, recordando que disponemos adem\u00e1s de un tercer bot\u00f3n, en este caso tactil, que est\u00e1 marcado en la placa. En la imagen vemos estos botones.</p> <p> <p> Botones en la micro:STEAMakers</p> <p></p>"},{"location":"actividadesAB/A04/#a04_1-mostrar-el-boton-pulsado","title":"A04_1-Mostrar el bot\u00f3n pulsado","text":"<p>Se trata de mostrar en la pantalla el bot\u00f3n que estamos pulsando mientras lo mantengamos accionado. El programa es el siguiente:</p> <p> <p> A04_1-Mostrar el bot\u00f3n pulsado</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A04_1-Mostrar el bot\u00f3n pulsado funcionando</p> <p></p>"},{"location":"actividadesAB/A04/#a04_2-check-y-flechas","title":"A04_2-Check y flechas","text":"<p>Crear un programa que se est\u00e9 ejecutando en un bucle infinito y que responda, seg\u00fan pulsemos los botones, de la forma siguiente:</p> <ul> <li>Si pulsamos simultaneamente A y B en la pantalla aparecer\u00e1 el caracter\u00edstico s\u00edmbolo de check en color verde.</li> <li>Si pulsamos el bot\u00f3n A mostrar\u00e1 una flecha apuntando a la izquierda en color magenta.</li> <li>Si pulsamos el bot\u00f3n B mostrar\u00e1 una flecha apuntando a la derecha en color rojo.</li> <li>Si pulsamos el bot\u00f3n t\u00e1ctil en la pantalla veremos un aspa de color azul.</li> <li>Si no pulsamos nada dejaremos la pantalla estar\u00e1 en negro.</li> </ul> <p>El programa es el siguiente:</p> <p> <p> A04_2-Check y flechas</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A04_2-Check y flechas funcionando</p> <p></p>"},{"location":"actividadesAB/A04/#a04_3-botones-como-texto","title":"A04_3-Botones como texto","text":"<p>Crear un programa que se est\u00e9 ejecutando en un bucle infinito y que responda, seg\u00fan pulsemos los botones, de la forma siguiente:</p> <ul> <li>Si pulsamos el bot\u00f3n A mostrar\u00e1 'BOTON A' en color magenta.</li> <li>Si pulsamos el bot\u00f3n B mostrar\u00e1 'BOTON B' en color AZUL.</li> <li>Si pulsamos el bot\u00f3n t\u00e1ctil en la pantalla veremos 'TACTIL' en color amarillo.</li> <li>Si no pulsamos nada dejaremos la pantalla estar\u00e1 en negro.</li> </ul> <p>El programa es el siguiente:</p> <p> <p> A04_3-Botones como texto</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A04_3-Botones como texto funcionando</p> <p></p> <p>NO interrupci\u00f3n ejecuci\u00f3n durante scroll</p> <p>Al final observamos como el scroll no interrumpe la ejecuci\u00f3n y podemos activar cualquier bot\u00f3n en el momento que necesitemos.</p>"},{"location":"actividadesAB/A04/#a04_4-botones-y-rellenos","title":"A04_4-Botones y rellenos","text":"<p>Crear un programa que se est\u00e9 ejecutando en un bucle infinito y que responda, seg\u00fan pulsemos los botones, de la forma siguiente:</p> <ul> <li>Si pulsamos el bot\u00f3n A mostrar\u00e1 un cuadrado relleno de 3x3 pixeles en color magenta.</li> <li>Si pulsamos el bot\u00f3n B mostrar\u00e1 un rellenos completo en colores aleatorios.</li> <li>Si pulsamos el bot\u00f3n t\u00e1ctil la pantalla estar\u00e1 apagada.</li> </ul> <p>El programa es el siguiente:</p> <p> <p> A04_4-Botones y rellenos</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A04_4-Botones y rellenos</p> <p></p> <p>Bot\u00f3n t\u00e1ctil en pines de expansi\u00f3n</p> <p>Podemos observar como el sensor t\u00e1ctil se encuentra justo en el pin que hay a la derecha del 0 en los pines de borde de placa.</p>"},{"location":"actividadesAB/A05/","title":"A05-Sensores integrados","text":"<p>En esta actividad vamos a ver ejemplos de uso sencillo de los sensores que incorpora la ESP32 micro:STEAMakers programando su comportamiento con arduinoblocks.</p> <p>Los veremos en el orden en que est\u00e1n los bloques y utilizaremos el puerto serie para mostrar los datos obtenidos de los mismos. En algunos ejemplos iremos mezclando elementos para su creaci\u00f3n.</p>"},{"location":"actividadesAB/A05/#a05_1-nivel-de-luz-como-datos","title":"A05_1-Nivel de luz como datos","text":"<p>El programa de prueba que vamos a crear consiste en mostrar en el monitor serie los datos de nivel de luz recibidos en sus dos formatos posibles, porcentaje y num\u00e9rico. El programa es el siguiente:</p> <p> <p> A05_1-Nivel de luz como datos</p> <p></p> <p>En la imagen siguiente vemos el resultado obtenido a partir de una fuente de luz a la que se acerca el sensor y se va alejando y/o tapando parcial o totalmente para variar la cantidad de luz que incide en el mismo.</p> <p> <p> Resultados A05_1-Nivel de luz como datos</p> <p></p>"},{"location":"actividadesAB/A05/#a05_2-nivel-de-luz-grafico","title":"A05_2-Nivel de luz grafico","text":"<p>Crear un datalogger con el nivel de luz. El programa es el siguiente:</p> <p> <p> A05_2-Nivel de luz grafico</p> <p></p> <p>En la imagen siguiente vemos el resultado obtenido a partir de una fuente de luz a la que se acerca el sensor y se va alejando y/o tapando parcial o totalmente para variar la cantidad de luz que incide en el mismo.</p> <p> <p> Resultados A05_2-Nivel de luz grafico</p> <p></p>"},{"location":"actividadesAB/A05/#a05_3-temperatura-y-humedad","title":"A05_3-Temperatura y humedad","text":"<p>La actividad consistir\u00e1 en enviar los dos datos de manera ordenada, con indicaci\u00f3n de la unidad de medida, a la consola serie al tiempo que se muestran en la pantalla dos iconos, uno para frio y otro para calor (dentro de las posibilidades de dibujo que tenemos) en funci\u00f3n de si se supera o no un determinado valor de temperatura.</p> <p> <p> A05_3-Temperatura y humedad</p> <p></p> <p>A continuaci\u00f3n vemos el funcionamiento del programa. Cuando se pone el dedo por detr\u00e1s de la placa en realidad se pone en contacto con el sensor para variar aunque sea minimamente su temperatura y que supere el umbral establecido. Cuando se retira el dedo se observa como la temperatura vuelve a su valor ambiente.</p> <p> <p> A05_3-Temperatura y humedad funcionando</p> <p></p> <p>En la imagen siguiente podemos observar los datos en la consola serie y como se producen los cambios de temperatura. Tambi\u00e9n observamos los cambios en la humedad.</p> <p> <p> Resultados A05_3-Temperatura y humedad</p> <p></p>"},{"location":"actividadesAB/A05/#a05_4-nivel-de-sonido","title":"A05_4-Nivel de sonido","text":"<p>El programa que vamos a crear para la actividad consiste en mostrar en el monitor serie los datos de nivel de sonido recibidos en sus dos formatos posibles, porcentaje y num\u00e9rico. El programa es el siguiente:</p> <p> <p> A05_4-Nivel de sonido</p> <p></p> <p>En la imagen siguiente vemos el resultado obtenido creando variaciones de sonido en base a una reproducci\u00f3n musical {Oscar D'Leon - LLoraras} acercando y alejando la tarjeta del altavoz.</p> <p> <p> Resultados A05_4-Nivel de sonido</p> <p></p>"},{"location":"actividadesAB/A05/#a05_5-datalogger-con-todos","title":"A05_5-Datalogger con todos","text":"<p>Esta actividad consiste simplemente en reproducir el ejemplo que Juanjo desarrolla en el video micro:STEAMakers 03 - Sensores integrados.</p> <p>El programa es el siguiente:</p> <p> <p> A05_5-Datalogger con todos</p> <p></p> <p>A continuaci\u00f3n vemos el funcionamiento:</p> <p> <p> A05_5-Datalogger con todos funcionando</p> <p></p>"},{"location":"actividadesAB/A05/#a05_6-consumo","title":"A05_6-Consumo","text":"<p>Utilizaremos el plotter serie para observar los cambios que se producen en la corriente de consumo cuando activamos y desactivamos la pantalla a diferentes niveles de brillo.</p> <p>El programa es el siguiente:</p> <p> <p> A05_6-Consumo</p> <p></p> <p>A continuaci\u00f3n vemos el funcionamiento:</p> <p> <p> A05_6-Consumo funcionando</p> <p></p> <p>En la gr\u00e1fica podemos observar dos momentos diferentes:</p> <ol> <li>El momento de la conexi\u00f3n del plotter y las partes planas de la gr\u00e1fica se produce un diente de sierra de unos 10 microamperios de pico a pico. Esto se debe a las variaciones de consumo en reposo de la placa.</li> <li>Los cambios entre unos 6mA a unos 30mA en el primer escalon debido a la pulsaci\u00f3n del bot\u00f3n B. Un segundo escal\u00f3n has unos 50mA debido a la pulsaci\u00f3n del bot\u00f3n A. La vuelta a 6mA se produce al tocar el bot\u00f3n t\u00e1ctil.</li> </ol>"},{"location":"actividadesAB/A06/","title":"A06-Actuadores integrados","text":"<p>En esta actividad vamos a ver ejemplos de uso sencillo de los bloques para el control del zumbador.</p>"},{"location":"actividadesAB/A06/#a06_1-escala-musical","title":"A06_1-Escala musical","text":"<p>El programa de prueba que vamos a crear consiste en crear la escala musical y hacer que suene cuando activamos el pulsador t\u00e1ctil. El programa es el siguiente:</p> <p> <p> A06_1-Escala musical</p> <p></p>"},{"location":"actividadesAB/A06/#a06_2-melodia","title":"A06_2-Melodia","text":"<p>Reproducir la melod\u00eda de la imagen siguiente sabiendo que las negras tienen una duraci\u00f3n de 500ms, las negras con un puntito 750ms y las blancas 1000ms.</p> <p> <p> A06_2-Melodia: Himno a la alegria</p> <p></p> <p>El programa es el siguiente:</p> <p> <p> A06_2-Melodia</p> <p></p>"},{"location":"actividadesAB/A06/#a06_3-rtttl","title":"A06_3-RTTTL","text":"<p>La actividad consistir\u00e1 en reproducir diferentes melod\u00edas a partir de los bloques RTTTL (Ring Tone Text Transfer Language o lenguaje de tonos de llamada) en funci\u00f3n del bot\u00f3n que pulsemos.</p> <p> <p> A06_3-RTTTL</p> <p></p>"},{"location":"actividadesAB/A07/","title":"A07-Aceler\u00f3metro y giroscopio","text":"<p>En esta actividad vamos a ver ejemplos de uso sencillo del bloque para el control de la posici\u00f3n de la placa.</p>"},{"location":"actividadesAB/A07/#a07_1-acelerometro","title":"A07_1-Aceler\u00f3metro","text":"<p>El programa de prueba que vamos a crear consiste simplemente en asignar la acelaraci\u00f3n en cada eje al plotter para visualizar los movimientos.</p> <p>Reasignar ejes</p> <p>Tendremos en cuenta lo indicado en la explicaci\u00f3n acerca de los ejes X e Y.</p> <p> <p> A07_1-Aceler\u00f3metro</p> <p></p> <p>En la animaci\u00f3n vemos el funcionamiento del programa.</p> <p> <p> A07_1-Aceler\u00f3metro funcionando</p> <p></p>"},{"location":"actividadesAB/A07/#a07_2-giroscopio","title":"A07_2-Giroscopio","text":"<p>El programa de prueba que vamos a crear consiste simplemente en asignar el giro en cada eje al plotter para visualizar los movimientos.</p> <p>Reasignar ejes</p> <p>Tendremos en cuenta lo indicado en la explicaci\u00f3n acerca de los ejes X e Y.</p> <p> <p> A07_2-Giroscopio</p> <p></p> <p>En la animaci\u00f3n vemos el funcionamiento del programa.</p> <p> <p> A07_2-Giroscopio funcionando</p> <p></p>"},{"location":"actividadesAB/A08/","title":"A08-Tarjeta microSD","text":"<p>En esta actividad vamos a ver ejemplos de uso sencillo de los bloques para entender el manejo de los mismos.</p>"},{"location":"actividadesAB/A08/#a08_1-registro-y-lectura-basicos","title":"A08_1-Registro y lectura b\u00e1sicos","text":"<p>El programa de prueba que vamos a crear consta de dos partes: la primera consiste en grabar los datos de temperatura y humedad medidos con el sensor integrado cada 5 segundos. Dejaremos transcurrir un tiempo para que el archivo tenga varios datos. Ahora grabamos el segundo programa y veremos los resultados en la consola serie.</p> <p> <p> A08_1a-Grabar datos microSD</p> <p></p> <p>Transcurrido un tiempo cargamos en la micro:STEAMakers el ejemplo siguiente, abrimos la consola serie y vemos los datos grabado en la microSD.</p> <p> <p> A08_1b-Leer datos microSD</p> <p></p> <p>En la consola veremos algo similar a lo siguiente:</p> <p> <p> A08_1b-Resultado de leer datos microSD</p> <p></p>"},{"location":"actividadesAB/A08/#a08_2-lectura-de-datos-mejorada","title":"A08_2-Lectura de datos mejorada","text":"<p>El programa anterior no nos muestra los datos medidos con el formato dato, pero es f\u00e1cil cambiar esto haciendo simplemente el programa siguiente:</p> <p> <p> A08_2-Lectura de datos mejorada</p> <p></p> <p>En este caso el resultado obtenido es el siguiente:</p> <p> <p> A08_2-Resultado de lectura de datos mejorada</p> <p></p>"},{"location":"actividadesAB/A08/#a08_3-datos-con-formato-csv","title":"A08_3-Datos con formato CSV","text":"<p>Vamos a a\u00f1adir a los datos de temperatura y humedad de las actividades anteriores el dato de nivel de luz, pero dando a los datos el formato CSV. El ejemplo lo vemos a continuaci\u00f3n:</p> <p> <p> A08_3-Datos con formato CSV</p> <p></p> <p>Cuando abrimos el archivo generado con una hoja de c\u00e1lculo como Calc de LibreOffice y nos aseguramos que el caracter delimitador es el correcto:</p> <p> <p> A08_3-Importar datos con formato CSV</p> <p></p> <p>Obtenemos un resultado como el siguiente:</p> <p> <p> A08_3-Importar datos con formato CSV</p> <p></p> <p>A partir de estos datos podemos darles formato, filtrarlos, crear gr\u00e1ficas, etc.</p>"},{"location":"actividadesEP/A01EP/","title":"A01-LEDs y pantalla","text":"<p>En esta primera actividad vamos a conectar dos diodos LEDs a los puertos P7 y P12 y haremos un programa que al pulsar el bot\u00f3n A muestre en la pantalla el texto \"Boton A\" desplazandose y mientras esto ocurre uno de los LED debe estar parpadeando. Cuando pulsemos el bot\u00f3n B aparecer\u00e1 la letra B en scroll en la pantalla y se encender\u00e1 y apagar\u00e1 el otro LED de forma progresiva (control PWM).</p> <p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>El programa es el siguiente:</p> <p> <p> A01-LEDs y pantalla</p> <p></p>"},{"location":"actividadesEP/A02EP/","title":"A02-Mostrar datos del DHT22","text":"<p>Vamos a ver varias actividades con formas diferentes de visualizaci\u00f3n de los datos obtenidos de un sensor DHT22 conectado al puerto P10.</p> <p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p>"},{"location":"actividadesEP/A02EP/#a02_1-datos-dht22-por-consola","title":"A02_1-Datos DHT22 por consola","text":"<p>Env\u00edar a la consola los valores de temperatura y humedad obtenidos del DHT22 cada 3 segundos. En la consola debe aparecer: T_DHT22: X \u00baC seguido de H_DHT22: X %. Para cumplimentar la pr\u00e1ctica mediremos tambi\u00e9n los datos del sensor AHT20 de la micro:STEAMakers para compararlos. En la imagen siguiente vemos el programa:</p> <p> <p> A02_1-Mostrar datos del DHT22</p> <p></p> <p>En la imagen siguiente vemos algunos resultados:</p> <p> <p> A02_1-Resultados de mostrar datos del DHT22</p> <p></p>"},{"location":"actividadesEP/A02EP/#a02_2-datalogger-dht22","title":"A02_2-Datalogger DHT22","text":"<p>Env\u00edar al plotter los valores de temperatura y humedad obtenidos del DHT22 cada 3 segundos. En la imagen siguiente vemos el programa:</p> <p> <p> A02_2-Datalogger DHT22</p> <p></p> <p>En la imagen siguiente vemos los resultados:</p> <p> <p> A02_2-Resultados de Datalogger DHT22</p> <p></p>"},{"location":"actividadesEP/A02EP/#a02_3-datos-en-oled-del-dht22","title":"A02_3-Datos en OLED del DHT22","text":"<p>Mostrar en una pantalla OLED I2C EASY Plug los valores de temperatura y humedad obtenidos del DHT22 actualizando el dato cada 5 segundos. En la imagen siguiente vemos el programa:</p> <p> <p> A02_3-Datos en OLED del DHT22</p> <p></p> <p>En la imagen siguiente vemos los resultados:</p> <p> <p> A02_3-Resultados datos en OLED del DHT22</p> <p></p>"},{"location":"actividadesEP/A03EP/","title":"A03-Servomotor","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p>"},{"location":"actividadesEP/A03EP/#el-servomotor","title":"El servomotor","text":"<p>Un servomotor o abreviado servo es un motor especial que puede posicionar su eje en un \u00e1ngulo determinado y lo puede mantener en esta posici\u00f3n. Los servos est\u00e1ndar suelen girar 180\u00ba, pero es habitual encontrar servos que giran 90\u00ba y otros 360\u00ba, que son los conocidos como servos de rotaci\u00f3n continua. En el interior del mismo est\u00e1n ubicados tanto la electr\u00f3nica de control como los engranajes reductores que a su vez pueden llevar o no topes f\u00edsicos que marquen el \u00e1ngulo de giro. Para su funcionamiento s\u00f3lo necesitan ser alimentados (conexiones GND y VCC o 5V) y una se\u00f1al de control.</p> <p>Su aspecto es el siguiente:</p> <p> <p> Aspecto servo 180 grados</p> <p></p> <p>Vemos claramente que el conector no es EASY Plug sino con un conector hembra de tres pines para tres cables de conexi\u00f3n, que se distinguen por los colores marr\u00f3n, rojo y naranja (diferentes marcas pueden tener diferentes colores).</p>"},{"location":"actividadesEP/A03EP/#principio-basico-de-funcionamiento","title":"Principio b\u00e1sico de funcionamiento","text":"<p>La electr\u00f3nica de control del servomotor tiene un circuito de referencia incorporado que emite la se\u00f1al de referencia, que es un ciclo de 20 ms con un ancho de pulso de 1,5 ms. Se compara la tensi\u00f3n de control recibida con la de referencia y se genera una diferencia de tensi\u00f3n. El circuito de control en la placa decidir\u00e1 la direcci\u00f3n de rotaci\u00f3n en consecuencia y accionar\u00e1 el motor. El sistema de engranajes o reductora convierten el giro del motor en un par de fuerza a trav\u00e9s del eje. El sensor detecta que se ha alcanzado la posici\u00f3n enviada de acuerdo con la se\u00f1al de retroalimentaci\u00f3n. Cuando la diferencia de tensi\u00f3n existe el motor gira y cuando la diferencia se reduce a cero, el motor se detiene. Normalmente, el \u00e1ngulo de rotaci\u00f3n es de 0 a 180 grados.</p> <p>El \u00e1ngulo de rotaci\u00f3n del servomotor se controla regulando el ciclo de trabajo de la se\u00f1al PWM cuyo est\u00e1ndar es de 20 ms (50 Hz).</p>"},{"location":"actividadesEP/A03EP/#conexion-servo-easy-plug","title":"Conexi\u00f3n servo EASY Plug","text":"<p>Para poder conectar un servomotor a la placa EASY Plug debemos utilizar el adaptador que vemos en la imagen siguiente:</p> <p> <p> Adaptador servo de modular a EASY Plug</p> <p></p> <p>Hay que tener mucho cuidado de posicionar el conector del servo (porque es reversible) en los tres pines macho del adaptador para hacerlo en el orden correcto o seguramente romperemos algo de manera irreversible."},{"location":"actividadesEP/A03EP/#bloques-de-programacion","title":"Bloques de programaci\u00f3n","text":"<p>En el apartado de bloques de programaci\u00f3n, se encuentra en \"Motor \u2192&gt; Servo\":</p> <p> <p> Bloques Servo</p> <p></p> <p>Para controlar el servomotor, indicamos los grados de rotaci\u00f3n (\u00c1ngulo de giro) que queremos y el tiempo de retardo, o tiempo que tarda en ir de una posici\u00f3n a otra.</p>"},{"location":"actividadesEP/A03EP/#posicion-0o-u-origen","title":"Posici\u00f3n 0\u00ba u origen","text":"<p>Previo a cualquier actividad con un servo es averiguar cual es su posici\u00f3n 0\u00ba u origen. Un sencillo programa nos permite programar por primera vez el \u00e1ngulo a 0\u00ba para descubrir el punto de origen y a partir de aqu\u00ed montar alguna pala de las que vienen con el servo para poder visualizar la rotaci\u00f3n del eje. El programa es el de la imagen siguiente:</p> <p> <p> Encontrar el origen del servo</p> <p></p>"},{"location":"actividadesEP/A03EP/#a03_1-servo-0-a-180-grados","title":"A03_1-Servo 0 a 180 grados","text":"<p>El primer programa, una vez encontrado el origen del servo, va a consistir en hacerlo cambiar entre sus posiciones extremas a intervalos de un segundo. El programa es el siguiente:</p> <p> <p> A03_1-Servo 0 a 180 grados</p> <p></p>"},{"location":"actividadesEP/A03EP/#a03_2-barrera-aparcamiento","title":"A03_2-Barrera aparcamiento","text":"<p>Actividad para mover el servo de su posici\u00f3n de reposo a otra de 90\u00ba, la primera corresponde a la barrera bajada por lo que el acceso est\u00e1 cerrado y el sem\u00e1foro (pantalla) estar\u00e1 en rojo y la segunda equivale a barrera subida, el acceso estar\u00e1 abierto y el sem\u00e1foro estar\u00e1 en verde. La posici\u00f3n de la barrera por defecto ser\u00e1 bajada y el sem\u00e1foro estar\u00e1 apagado. Cuando se pulsa A el semaforo estar\u00e1 rojo, la barrera bajada y estar\u00e1 en ese estado hasta que se accione el pulsador B que pone el semaforo en verde y sube la barrera. En posici\u00f3n de barrera subida debe permanecer 5 segundos y despu\u00e9s bajar la barrera y apagarse hasta una nueva pulsaci\u00f3n de A. El programa es el siguiente:</p> <p> <p> A03_2-Barrera aparcamiento</p> <p></p> <p>A continuaci\u00f3n vemos el sistema funcionando:</p> <p> <p> A03_2-Funcionamiento barrera aparcamiento</p> <p></p>"},{"location":"actividadesEP/A03EP/#a03_3-barrera-aparcamiento-mejorada","title":"A03_3-Barrera aparcamiento mejorada","text":"<p>Mejora del programa de la actividad anterior a\u00f1adiendo una pantalla OLED que muestra indicaciones a seguir para hacer funcionar la barrera. El programa es el siguiente:</p> <p> <p> A03_3-Barrera aparcamiento mejorada</p> <p></p> <p>A continuaci\u00f3n vemos el sistema funcionando:</p> <p> <p> A03_3-Funcionamiento barrera aparcamiento mejorada</p> <p></p>"},{"location":"actividadesEP/A04EP/","title":"A04-Motor DC","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>Actividad en la que vamos a controlar un motor de corriente continua o DC como el de la imagen siguiente:</p> <p> <p> Motor DC ventilador</p> <p></p> <p>El m\u00f3dulo motor con ventilador utiliza el controlador L9110 para controlar la rotaci\u00f3n de la h\u00e9lice hacia izquierda y hacia derecha. Necesita por lo tanto dos pines para su control. Debe conectarse al puerto digital doble con una sola l\u00ednea, bastante pr\u00e1ctico.</p> <p>La parte posterior del m\u00f3dulo presenta la serigraf\u00eda que vemos en la imagen siguiente:</p> <p> <p> Cara posterior del m\u00f3dulo motor DC ventilador</p> <p></p> <p>Tal y como se advierte en la nota de la conclusi\u00f3n 5 que podemos ver en Pinout, la serigrafia posterior del m\u00f3dulo es exactamente igual que la del puerto P6+P7. Esto quiere decir que el motor con ventilador lo podemos conectar a esa pareja de puertos mediante un solo cable para hacerlo funcionar.</p> <p>Si buscamos en la entrada \"Motor \u2192&gt; DC motor\" no encontraremos ning\u00fan bloque adecuado para hacer funcionar el m\u00f3dulo ventilador, por lo que inicialmente haremos la programaci\u00f3n escribiendo directamente en los pines afectados.</p> <p>El programa siguiente hace que el ventilador gire en un sentido, se para, gire en el otro sentido, se pare y asi sucesivamente.</p> <p> <p> A04-Motor DC</p> <p></p> <p>La actividad la podemos hacer utilizando el bloque \"Motor ventilador\" que tenemos disponible en la entrada \"Actuadores\" sin mas que configurar los pines de manera adecuada. En la imagen vemos el programa realizado con el bloque:</p> <p> <p> A04-Motor DC con bloque \"Motor ventilador\"</p> <p></p> <p>Una mejora r\u00e1pida del programa ser\u00eda ponerlo en marcha y paralo utilizando los botones. El programa ser\u00eda ahora:</p> <p> <p> A04-Motor DC controlado por botones</p> <p></p>"},{"location":"actividadesEP/A05EP/","title":"A05-Matriz de 8x8 LEDs","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>El objetivo es conocer la LEDMatrix 8x8 o tambi\u00e9n llamada matriz de LEDs. La matriz de LEDs es una pantalla peque\u00f1a que tiene 64 LEDs con el aspecto de la Figura siguiente y se conecta al puerto de comunicaci\u00f3n I2C.</p> <p> <p> Aspecto matriz 8x8</p> <p></p> <p>En esta pantalla podemos programar diferentes s\u00edmbolos o elementos, como: caras, iconos, letras... Hay opciones predise\u00f1adas desde ArduinoBlocks y tambi\u00e9n, existe la opci\u00f3n de crearlos personalizados.</p> <p>En el apartado de bloques de programaci\u00f3n, se encuentra en \"LedMatrix 8x8\". Existen diferentes opciones de programaci\u00f3n, seg\u00fan nuestro objetivo.</p> <p> <p> Bloques programaci\u00f3n matriz 8x8</p> <p></p> <p>La primera tarea que debemos realizar cuando queremos hacer uso de la pantalla, es inicializarla. En la Figura siguiente vemos el primer bloque en el que pone: iniciar I2C.</p> <p> <p> Bloques para inicializar matriz 8x8</p> <p></p> <p>Se ha destacado la direcci\u00f3n f\u00edsica por defecto (0x70) porque esta es configurable a trav\u00e9s de los microinterruptores de que dispone el m\u00f3dulo. Las posibilidades de configuraci\u00f3n de la direcci\u00f3n las vemos en la tabla siguiente:</p> <p> 1 2 3 0x70 OFF (0) OFF (0) OFF (0) 0x71 ON (1) OFF (0) OFF (0) 0x72 OFF (0) ON (1) OFF (0) 0x73 ON (1) ON (1) OFF (0) 0x74 OFF (0) OFF (0) ON (1) 0x75 ON (1) OFF (0) ON (1) 0x76 OFF (0) ON (1) ON (1) 0x77 ON (1) ON (1) ON (1) <p></p>"},{"location":"actividadesEP/A05EP/#a05_1-caritas-y-flechas","title":"A05_1-Caritas y flechas","text":"<p>La pantalla LedMatrix muestra diferentes caras, una flecha hacia arriba y una flecha hacia abajo a intervalos de un segundo. El programa es el siguiente:</p> <p> <p> A05_1-Caritas y flechas</p> <p></p>"},{"location":"actividadesEP/A05EP/#a05_2-simbolos-personalizados","title":"A05_2-S\u00edmbolos personalizados","text":"<p>Cuando se pulse el pulsador, en la pantalla debe aparecer un s\u00edmbolo personalizado durante dos segundos y despu\u00e9s otro distinto. La actividad se puede resolver de dos formas. Para la primera de ellas el programa es el siguiente:</p> <p> <p> A05_2-S\u00edmbolos personalizados</p> <p></p> <p>La segunda forma consiste en crear los \u015bimbolos utilizando la herramienta LedMatrix - Bitmap editor y copiar el dato binario generado en el bloque correspondiente. En la imagen vemos la creaci\u00f3n de los s\u00edmbolos:</p> <p> <p> rear s\u00edmbolos personalizados</p> <p></p> <p>Para esta segunda forma el programa es el siguiente:</p> <p> <p> A05_2-S\u00edmbolos personalizados</p> <p></p>"},{"location":"actividadesEP/A05EP/#a05_3ep-piedra-papel-o-tijera","title":"A05_3EP-Piedra papel o tijera","text":"<p>En esta tercera actividad recrearemos el famoso y conocido juego \"Piedra, papel, tijera\". Tambi\u00e9n utilizaremos el pulsador para activar el juego y creamos una variable que elija aleatoriamente uno de los tres s\u00edmbolos del juego. Cuando se pulse el pulsador, la pantalla muestra, de forma aleatoria, uno de los tres s\u00edmbolos: piedra, papel o tijeras.</p> <p>Lo primero que vamos a hacer es crear los tres s\u00edmbolos: utilizando el \"Bitmap\". Para seleccionar los LEDs que queremos en estado ON:</p> <p> <p> Piedra, papel, tijeras</p> <p></p> <p>El programa es el siguiente:</p> <p> <p> A05_3-Piedra papel o tijera</p> <p></p>"},{"location":"actividadesEP/A06EP/","title":"A06-Neopixels Shield","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>En el momento de realizar este tutorial no existen bloques para trabajar con LEDs direccionables salvo los propios de la micro:STEAMakers y en estos no se puede configurar el pin P9 como puerto al que est\u00e1n conectados los LEDs.</p> <p>Para solventar el problema vamos a crear un proyecto para ESP32 STEAMakers y vamos a poner en la mochila los tres bloques marcados en la imagen siguiente:</p> <p> <p> Bloques neopixels de otra placa</p> <p></p> <p>Si no sabes utilizar la mochila el corto Uso mochila para pasar bloques entre proyectos de diferntes placas en Arduinoblocks. Uno a ESP32 de Ardutaller te explica claramente como hacerlo.</p> <p>Una vez que tenemos los bloques necesarios creamos el programa siguiente:</p> <p> <p> A06-Neopixels Shield</p> <p></p> <p>El programa ilumina durante un segundo un numero aleatorio de LEDs en un color tambi\u00e9n aleatorio.</p> <p>En la la imagen anterior se destacan los bloques traidos de un proyecto de otra placa.</p> <p>A continuaci\u00f3n vemos el programa funcionando:</p> <p> <p> Funcionamiento A06-Neopixels Shield</p> <p></p>"},{"location":"actividadesEP/A07EP/","title":"A07-Sensor de CO2","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>En esta actividad vamos a necesitar conectar dos dipsotivos al puerto I2C de la shield por lo que vamos a necesitar un expansor o hub. Un Hub ser\u00eda como un \"ladr\u00f3n\", que nos permite conectar varios dispositivos a la vez. Ser\u00eda como el de la imagen siguiente:</p> <p> <p> Hub I2C</p> <p></p> <p>Aviso</p> <p>Se aconseja leer la entrada Conceptos sobre CO2 y VOC para poder entender correctamente el programa siguiente:</p> <p> <p> A07-Sensor de CO2</p> <p></p> <p>A continuaci\u00f3n vemos el programa en un momento de su funcionamiento:</p> <p> <p> Funcionamiento A07-Sensor de CO2</p> <p></p>"},{"location":"actividadesEP/A08EP/","title":"A08-Particulas","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>Vamos a trabajar con un sensor que mide la materia particulada (PM) en el aire. Sensor imprescindible si estamos monitorizando la calidad del aire.</p> <p>Su funcionamiento se fundamenta en la dispersi\u00f3n laser. Se utiliza un l\u00e1ser para irradiar las part\u00edculas en el aire haciendo que estas dispersen la luz. El sensor recoge la luz dispersa registrando su intensidad a lo largo del tiempo. Un procesador interno calcula el tama\u00f1o de particula equivalente y el n\u00famero de part\u00edculas de diferentes tama\u00f1os. El mismo procesador convierte los datos en valores de concentraci\u00f3n que transmite por interfaz I2C.</p> <p>Destacar entre sus especificaciones:</p> <ul> <li>Respuesta en tiempo real y adquisici\u00f3n continua de datos.</li> <li>Tama\u00f1o m\u00ednimo reconocible de part\u00edculas de 0,3 \u00b5m.</li> <li>Voltaje de trabajo: 3,3 V ~ 5 V</li> <li>Corriente m\u00e1xima de trabajo: 100 mA</li> <li>Corriente en espera: &lt;= 2 mA</li> <li>Rango de medici\u00f3n de part\u00edculas: 0,3 ~ 1,0 \u00b5m; 1,0 ~ 2,5 \u00b5m; 2,5 ~ 10 \u00b5m</li> <li>Eficiencia de conteo de part\u00edculas: 50% @ 0,3 \u00b5m 98% @ &gt;= 0,5 \u00b5m</li> <li>Resoluci\u00f3n de concentraci\u00f3n de masa de part\u00edculas: 1 \u00b5g/m\u00b3</li> <li>Volumen est\u00e1ndar: 0,1 L</li> <li>Rango de temperatura de trabajo: -10 ~ +60 \u00baC</li> <li>Rango de humedad de trabajo: 0 ~ 95% (sin condensaci\u00f3n)</li> </ul> <p>Su aspecto es el que vemos en la imagen siguiente:</p> <p> <p> Sensor de part\u00edculas EASY Plug I2C</p> <p></p>"},{"location":"actividadesEP/A08EP/#a08_1-concentracion-pm25-y-pm10","title":"A08_1-Concentraci\u00f3n PM2.5 y PM10","text":"<p>Medimos y mostramos la concentraci\u00f3n de part\u00edculas de esos dos tama\u00f1os tomando la medida en ug/m3. El programa es el siguiente:</p> <p> <p> A08_1-Concentraci\u00f3n PM2.5 y PM10</p> <p></p> <p>A continuaci\u00f3n vemos el programa en un momento de su funcionamiento:</p> <p> <p> Funcionamiento A08_1-Concentraci\u00f3n PM2.5 y PM10</p> <p></p>"},{"location":"actividadesEP/A08EP/#a08_2-numero-de-particulas","title":"A08_2-N\u00famero de particulas","text":"<p>Contamos el n\u00famero de part\u00edculas de tama\u00f1o mayor o igual que 2.5 micrometros (um) por cada 0.1 L de aire (volumen de aire de la c\u00e1mara de medida). El programa es el siguiente:</p> <p> <p> A08_2-N\u00famero de particulas</p> <p></p>"},{"location":"actividadesEP/A09EP/","title":"A09-Sensor MiCS4114 (NO2 y CO)","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>La actividad que vamos a realizar consistir\u00e1 en medir ambos par\u00e1metros y presentar los resultados, que en este caso se har\u00e1 en la consola serie y en la pantalla OLED. El programa es el siguiente:</p> <p> <p> A09-Sensor MiCS4114</p> <p></p> <p>A continuaci\u00f3n vemos una captura de la consola:</p> <p> <p> Consola A09-Sensor MiCS4114</p> <p></p>"},{"location":"actividadesMOD/A01MOD/","title":"A01-Temperatura y Humedad con DHT11","text":"<p>Alimentaci\u00f3n Shield</p> <p>1. Si no tenemos alimentaci\u00f3n externa los jumpers deben estar en la posici\u00f3n 3.3V y los sensores y/o actuadores conectados tienen que poder trabajar a esa tensi\u00f3n. 2. Si tenemos alimentaci\u00f3n externa uno los jumpers pueden estar en la posici\u00f3n 3.3V para los dispositivos de esta tensi\u00f3n y el otro en la de 5V para los sensores de esta otra tensi\u00f3n. Cada tipo conectado seg\u00fan la posici\u00f3n de los jumpers.</p> <p>Inicialmente el objetivo es montar un sensor externo conectado a la shield para testar su funcionamiento, que lo haremos enviando los datos a la consola serie en una primera instancia.</p> <p>otros sensores y actuadores</p> <p>Con la \u00fanica limitaci\u00f3n de los pines disponibles, podemos conectar a la shield muchos mas dispositivos y, si disponemos de los mismos, hacer las actividades desarrolladas para EASY Plug.</p> <p>El programa es el siguiente:</p> <p> <p> A01-Temperatura_Humedad_DHT11</p> <p></p>"},{"location":"actividadesMOD/A02MOD/","title":"A02-Temperatura y Humedad con DHT11 via web","text":"<p>Alimentaci\u00f3n Shield</p> <p>1. Si no tenemos alimentaci\u00f3n externa los jumpers deben estar en la posici\u00f3n 3.3V y los sensores y/o actuadores conectados tienen que poder trabajar a esa tensi\u00f3n. 2. Si tenemos alimentaci\u00f3n externa uno los jumpers pueden estar en la posici\u00f3n 3.3V para los dispositivos de esta tensi\u00f3n y el otro en la de 5V para los sensores de esta otra tensi\u00f3n. Cada tipo conectado seg\u00fan la posici\u00f3n de los jumpers.</p>"},{"location":"actividadesMOD/A02MOD/#actividad","title":"Actividad","text":"<p>En esta ocasi\u00f3n lo que vamos a hacer es visualizar los datos de la actividad anterior en formato web. Vamos a ver primero el programa y su funcionamiento para despues ir describiendo los pasos de programaci\u00f3n para mejor entendimiento de la actividad. El programa es:</p> <p> <p> A02-Temperatura y Humedad con DHT11 via web</p> <p></p> <p>Lo que va a ocurrir es que, cuando carguemos en nuestro navegador la direcci\u00f3n IP de nuestro servidor web se va a mostrar una pantalla como la siguiente. L\u00f3gicamente antes nos hemos conectado a la red con SSID micro:STEAMakers.</p> <p> <p> Punto de acceso WiFi</p> <p></p> <p>A continuaci\u00f3n vemos lo que ocurre tanto en el navegador como en la micro:STEAMakers:</p> <p> <p> Interaccionando desde punto de acceso WiFi</p> <p></p> <p>Vemos como al pulsar sobre el enlace o los botones la petici\u00f3n se refleja en la placa.</p>"},{"location":"actividadesMOD/A02MOD/#explicacion-del-programa","title":"Explicaci\u00f3n del programa","text":"<p>Ahora vamos a ver el programa por partes omitiendo lo referente a la pantalla RGB que ya se ha tratado en otras actividades.</p> <ul> <li>Creaci\u00f3n del punto de acceso WiFi. Creamos nuestra propia red WiFi (punto de acceso) en la placa micro:STEAMakers donde nos podemos conectar con dispositivos como ordenador, tablet o m\u00f3viles.</li> </ul> <p> <p> Creaci\u00f3n del punto de acceso WiFi</p> <p></p> <p>Una vez creado el punto de acceso iniciamos el servidor en el puerto 80. Este puerto es el utilizado por el protocolo HTPP para transferencia de hipertexto y es el que se utiliza para acceder a todas las p\u00e1ginas web.</p> <p>Hay que tener en cuenta que este punto de acceso nos permite conectarnos con la placa, pero no tendr\u00e1 conexi\u00f3n a internet.</p> <ul> <li>Documento HTML. Todo documento HTML tiene como m\u00ednimo dos partes, el head y el body. En el head debe estar la informaci\u00f3n descriptiva del sitio, como t\u00edtulo, matadatos y estilos, mientras que en el body estar\u00e1 toda la informaci\u00f3n visible de la web. Para facilitar el trabajo en la actividad el documento HTML lo vamos a guardar en una variable de texto que hemos nombrado \"html_cabecera\". De esta forma podremos invocar todo el documento llamando a esta variable.</li> </ul> <p> <p> Documento HTML Imagen intencionadamente recortada por la derecha</p> <p></p> <p>La parte Head viene definida con el bloque HTML Document y lo \u00fanico que hemos tocado ha sido el t\u00edtulo y el color de fondo.</p> <p> <p> Documento HTML - Head Imagen intencionadamente recortada por la derecha</p> <p></p> <p>Para el Body creamos un texto con las partes que vemos en la imagen siguiente. Aqu\u00ed hemos dado alg\u00fan formato a los distintos elemento con el fin de destacarlos unos de otros. Sin entrar en detalles que podemos consultar buscando informaci\u00f3n sobre html, hemos establecido tipos de fuente, tama\u00f1o y color de la misma, nivel de indice, formatos como subrayado y negrita, dibujo de l\u00edneas horizontales, saltos de l\u00ednea y l\u00f3gicamente enlaces de texto y tipo bot\u00f3n donde se ha establecido el texto y la URL del enlace.</p> <p> <p> Documento HTML - Body Imagen intencionadamente recortada por la izquierda</p> <p></p> <p>Ahora debemos crear los bloques para atender las peticiones \"get\" y que en la web y la micro:STEAMakers se reflejen las interacciones. Pero antes se aconseja consultar el apartado Peticiones HTTP.</p> <ul> <li>Solicitud get / con la acci\u00f3n \"/\" para indicar que no hay ninguna petici\u00f3n. La respuesta que vamos a enviar es que se establezca como contenido el de la variable definida \"html_cabecera\", es decir, que aparezcan los textos y botones definidos en el bloque \"Inicializar\".</li> </ul> <p> <p> Solicitud get / </p> <p></p> <ul> <li>Solicitud get/pant_ON. Cuando se hace clic en el bot\u00f3n \"Encender pantalla\" (cuando se invoca esta petici\u00f3n) la pantalla se va a iluminar en un color aleatorio y como respuesta se env\u00eda la misma que en el caso anterior. De esta forma cada vez que hagamos clic en el bot\u00f3n cambiar\u00e1 el color y la pantalla en el navegador permacer\u00e1 inalterable.</li> </ul> <p> <p> Solicitud get/pant_ON </p> <p></p> <ul> <li>Solicitud get/pant_OFF. Cuando se hace clic en el bot\u00f3n \"Apagar pantalla\" (cuando se invoca esta petici\u00f3n) la pantalla se va a iluminar en color negro y como respuesta se env\u00eda la misma que en el caso anterior.</li> </ul> <p> <p> Solicitud get/pant_OFF </p> <p></p> <ul> <li>Solicitud get/Leer_DHT11. Esta solicitud se hace desde una enlace de texto y en la misma se leen los valores del sensor, se envia a la pantalla el texto \"DHT11\" en color rojo (se espera mientras se realiza el scroll) y para enviar la respuesta a la petici\u00f3n se configura el \"Contenido\" de la misma como un documento HTML con su Head y su Body. En el Body se crea un texto con todo lo que contiene la varible que estamos utilizando, se agregan l\u00ednea horizontal y salto de l\u00ednea y los texto y valores de los datos que pretendemos visualizar.</li> </ul> <p> <p> Solicitud get/Leer_DHT11 </p> <p></p>"},{"location":"actividadesMOD/A03MOD/","title":"A03-Temperatura y Humedad con Telegram","text":"<p>Alimentaci\u00f3n Shield</p> <p>1. Si no tenemos alimentaci\u00f3n externa los jumpers deben estar en la posici\u00f3n 3.3V y los sensores y/o actuadores conectados tienen que poder trabajar a esa tensi\u00f3n. 2. Si tenemos alimentaci\u00f3n externa uno los jumpers pueden estar en la posici\u00f3n 3.3V para los dispositivos de esta tensi\u00f3n y el otro en la de 5V para los sensores de esta otra tensi\u00f3n. Cada tipo conectado seg\u00fan la posici\u00f3n de los jumpers.</p> <p>Actividad en la que vamos a mostrar mismos datos de la actividad A02-Temperatura y Humedad con DHT11 via web mas los del sensor incorporado en la micro:STEAMakers tanto por el puerto serie como a trav\u00e9s de un bot de Telegram. Los datos se obtienen cuando son demandados.</p> <p>Ponemos el programa en dos partes para que la imagen se visualice mejor. La primera ser\u00e1 de inicializaciones y trabajo con el puerto serie y la segunda para el evento de Telegram.</p> <p> <p> </p> <p> </p> <p>A03-Temperatura y Humedad con Telegram</p> <p></p> <p>En la imagen siguiente vemos el resultado que se obtiene por la consola de arduinoblocks con aclaraciones de como realizar las consultas.</p> <p> <p> A03-Temperatura y Humedad con Telegram</p> <p></p> <p>Esta otra imagen nos muestra los resultados en el bot creado para esta actividad.</p> <p> <p> A03-Temperatura y Humedad con Telegram</p> <p></p>"},{"location":"actividadesMOD/A04MOD/","title":"A04-Temperatura y Humedad con Thingspeak","text":"<p>Alimentaci\u00f3n Shield</p> <p>1. Si no tenemos alimentaci\u00f3n externa los jumpers deben estar en la posici\u00f3n 3.3V y los sensores y/o actuadores conectados tienen que poder trabajar a esa tensi\u00f3n. 2. Si tenemos alimentaci\u00f3n externa uno los jumpers pueden estar en la posici\u00f3n 3.3V para los dispositivos de esta tensi\u00f3n y el otro en la de 5V para los sensores de esta otra tensi\u00f3n. Cada tipo conectado seg\u00fan la posici\u00f3n de los jumpers.</p> <p>Actividad en la que vamos a mostrar mismos datos de la actividad A03-Temperatura y Humedad con Telegram esta vez en el broker de Thingspeak.</p> <p>El programa es el siguiente</p> <p> <p> A04-Temperatura y Humedad con Thingspeak</p> <p></p> <p>En la imagen siguiente vemos el resultado que se obtiene en el broker transcurrido un tiempo:</p> <p> <p> A04-Temperatura y Humedad con Thingspeak</p> <p></p>"},{"location":"actividadesMOD/A05MOD/","title":"A05-ESP-NOW","text":"<p>Se realizan varias actividades comunicando placas micro:STEAMakers entre si por ESP_NOW.</p> <p>Las direcciones MAC van a ser:</p> <ul> <li>Nodo 1: 4C:11:AE:D3:99:18</li> <li>Nodo 2: 34:98:7A:A9:D1:A8</li> <li>Nodo 3: 4C:11:AE:D3:98:C8</li> </ul>"},{"location":"actividadesMOD/A05MOD/#a05_1-unidireccional-1-a-1","title":"A05_1-Unidireccional 1 a 1","text":"<p>Se trata de implementar la comunicaci\u00f3n mas simple posible, un emisor y un receptor. Hacemos un contador de segundos en la placa emisora que ser\u00e1n mostrados en una pantalla OLED en la placa receptora.</p> <p>Los nodos van a actuar de la siguiente forma:</p> <ul> <li>Emisor: Nodo 2</li> <li>Receptor: Nodo 1</li> </ul> <p>El programa emisor es:</p> <p> <p> A05_1-Unidireccional 1 a 1</p> <p></p> <p>El programa receptor es:</p> <p> <p> A05_1-Unidireccional 1 a 1</p> <p></p> <p>En la imagen siguiente vemos el resultado de la comunicaci\u00f3n:</p> <p> <p> Funcionamiento A05_1-Unidireccional 1 a 1</p> <p></p>"},{"location":"actividadesMOD/A05MOD/#a05_2-unidireccional-encriptada-1-a-1","title":"A05_2-Unidireccional encriptada 1 a 1","text":"<p>Es el mismo ejemplo que en la actividad anterior, pero podemos comprobar que simplemente con activar la encriptaci\u00f3n, poner las claves y dejando los programas tal cual est\u00e1n el sistema no funciona. Los programas siguientes no dan resultado alguno:</p> <ul> <li>Programa emisor:</li> </ul> <p> <p> A05_1-Unidireccional encriptada 1 a 1</p> <p></p> <ul> <li>Programa receptor:</li> </ul> <p> <p> A05_2-Unidireccional encriptada 1 a 1</p> <p></p> <p>Una vez subidos los programas comprobamos como el contador del receptor (OLED) no cambia y siempre se mantiene en el mismo estado. Es evidente que si el receptor recibe datos encriptados, por el mismo protocolo de seguridad, debe saber quien se los env\u00eda por lo que la soluci\u00f3n es bien simple, hay que emparejar ambos nodos. </p> <p>IMPORTANTE</p> <p>Si encriptamos la informaci\u00f3n, aunque el env\u00edo sea en una direcci\u00f3n debemos emparejar tambi\u00e9n al nodo emisor con el receptor.</p> <p>Los programas funcionales los vemos a continuaci\u00f3n:</p> <p>El programa emisor es:</p> <p> <p> A05_2-Unidireccional encriptada 1 a 1</p> <p></p> <p>El programa receptor es:</p> <p> <p> A05_2-Unidireccional encriptada 1 a 1</p> <p></p> <p>El funcionamiento es id\u00e9ntico al de la actividad A05_1.</p>"},{"location":"actividadesMOD/A05MOD/#a05_3-unidireccional-1-a-2-json","title":"A05_3-Unidireccional 1 a 2 + JSON","text":"<p>En esta actividad seguimos con la comunicaci\u00f3n unidireccional de datos, pero los enviaremos desde un emisor a dos receptores, enviaremos mas de un datos y les daremos para ello formato JSON (JavaScript Object Notation). En mi caso concreto en un nodo voy a mostrar los datos recibidos en una OLED y en el otro en la consola serie. El programa permite utilizar uno u otro sin cambiar nada, es decir cargamos el mismo programa a todos los nodos receptores.</p> <p>La codificaci\u00f3n JSON encapsula los datos en forma de clave-valor (key-value) de una forma sencilla de tratar en arduinoblocks. Si quieres aprender mas sobre JSON en arduinoblocks aqu\u00ed tienes el enlace al tema An\u00e1lisis b\u00e1sico de datos en formato JSON.</p> <p>El programa emisor es el siguiente:</p> <p> <p> A05_3-Unidireccional 1 a 2 + JSON</p> <p></p> <p>El programa receptor es el siguiente:</p> <p> <p> A05_3-Unidireccional 1 a 2 + JSON</p> <p></p> <p>A continuaci\u00f3n vemos los resultados en uno y otro modo:</p> <p> <p> A05_3-Unidireccional 1 a 2 + JSON</p> <p></p>"},{"location":"actividadesMOD/A05MOD/#a05_4-unidireccional-2-a-1-json","title":"A05_4-Unidireccional 2 a 1 + JSON","text":"<p>En esta actividad construimos un datalogger con dos nodos distribuidos que envian periodicamente informaci\u00f3n a un nodo receptor que registra los datos recibidos en formato CSV (Comma Separated Values) que posteriormente podremos leer y visualizar en una hoja de c\u00e1lculo. Para saber mas consultar Tarjeta microSD y la actividad A08-Tarjeta microSD.</p> <p>El programa para los emisores es el siguiente:</p> <p>Nota</p> <p>Debemos recordar asignar un n\u00famero de nodo diferente a cada emisor o no podremos saber de donde viene el dato.</p> <p> <p> A05_4-Unidireccional 2 a 1 + JSON</p> <p></p> <p>El programa receptor es:</p> <p> <p> A05_4-Unidireccional 2 a 1 + JSON</p> <p></p> <p>El resultado que muestra la consola es:</p> <p> <p> Consola A05_4-Unidireccional 2 a 1 + JSON</p> <p></p> <p>Si extraemos la tarjeta microSD de su z\u00f3calo y abrimos el archivo en una hoja de c\u00e1lculo podremos ver los mismos datos que en la consola.</p>"},{"location":"actividadesMOD/A05MOD/#a05_5-latidos","title":"A05_5-Latidos","text":"<p>En esta actividad haremos que cuando en un nodo emisor pulsamos A o B se muestre en pantalla una A o una B y cuando tocamos el bot\u00f3n t\u00e1ctil que se vea un coraz\u00f3n latiendo.</p> <p>El programa para emisor es el siguiente:</p> <p> <p> A05_5-Latidos</p> <p></p> <p>El programa receptor es:</p> <p> <p> A05_5-Latidos</p> <p></p>"},{"location":"actividadesMOD/A05MOD_Mesh/","title":"A05-WiFiMesh","text":"<p>Se realizan varias actividades comunicando placas micro:STEAMakers entre si por WiFi Mesh.</p> <p>\u00a1\u00a1 ADVERTENCIA !!</p> <p>WiFiMesh presente, en algunas ocasiones, un problema, y es se pierden m\u00e1s mensajes de los que deber\u00edan, y a veces a unos les llegan y a otros no, o incluso no le llegan a ning\u00fan nodo. Es posible que en el momento que leas esto los bloques para WiFiMesh de arduinoblocks est\u00e9n considerados como obsoletos (deprecated) y por lo tanto est\u00e9n desabilitados. Pero las mismas o similares actividades se pueden realizar con ESPNOW.</p>"},{"location":"actividadesMOD/A05MOD_Mesh/#a05_1-wifimesh-un-emisor-a-varios-receptores","title":"A05_1-WiFiMesh un emisor a varios receptores","text":"<p>Se trata de hacer que una placa micro:STEAMakers act\u00fae como emisor de mensajes diferentes seg\u00fan se pulse bot\u00f3n A, bot\u00f3n B o ambos:</p> <ul> <li>Bot\u00f3n A -&gt; se emite el mensaje \"blanco\" y se iluminan todos los LEDs RGB en ese color.</li> <li>Bot\u00f3n B - &gt; se emite el mensaje \"magenta\" y se iluminan todos los LEDs en ese color.</li> <li>Bot\u00f3n A + Bot\u00f3n B -&gt; se emite el mensaje \"OFF\" y se apagan todos los LEDs RGB.</li> </ul> <p>Las placas que act\u00faan de receptores reciben esos mensajes y tras una breve espera tendr\u00e1n que repetir lo que ha enviado la placa emisora.</p> <p>El programa de la placa emisora es:</p> <p> <p> A05_1-WiFiMesh un emisor a varios receptores</p> <p></p> <p>El programa de las placas receptoras es:</p> <p> <p> A05_1-WiFiMesh un emisor a varios receptores</p> <p></p> <p>A continuaci\u00f3n vemos el funcionamiento de los programas entre una placa emisora y dos receptoras. Debemos tener presente que al principio puede darnos la impresi\u00f3n de que el sistema no funciona, pero si damos unos segundos de tiempo a que se difundan las redes creadas todo comenzar\u00e1 a funcionar. </p> <p> <p> Funcionamiento A05_1-WiFiMesh un emisor a varios receptores</p> <p></p> <p>Observese que para el mensaje OFF hay que mantener pulsado un segundo o mas ambos pulsadores o prevalecer\u00e1 el mensaje del bot\u00f3n que se pulse primero.</p> <p>Podemos ampliar el sistema a una tercera placa de otro tipo, en este caso un conjunto ESP32 STEAMakers + TdR STEAM con LCD, en la que haremos funcionar al LED RGB de la misma forma que a las pantallas y adem\u00e1s pondremos en la LCD los mensajes recibidos. El programa receptor en este caso es:</p> <p> <p> A05_1-WiFiMesh un emisor a varios receptores, uno STEAMakers</p> <p></p> <p>A continuaci\u00f3n vemos el sistema en funcionamiento:</p> <p> <p> Funcionamiento A05_1-WiFiMesh un emisor a varios receptores, uno STEAMakers</p> <p></p> <p>Ya nos podemos ir imaginando la cantidad de posibilidades que nos ofrece el sistema.</p>"},{"location":"actividadesMOD/A05MOD_Mesh/#a05_2-mensaje-y-datos","title":"A05_2-Mensaje y datos","text":"<p>En esta ocasi\u00f3n vamos a utilizar el bloque que combina un mensaje con un dato para hacer que una pantalla OLED I2C conectada en la placa receptora nos muestre la informaci\u00f3n remitida por la placa emisora. Vamos a enviar la temperatura mientras se enciende en blanco la pantalla y se emite un sonido que va de menos a mas agudo. Cuando se recibe el dato en otra placa, esta ilumina su pantalla en blanco y muestra el valor de la temperatura en una pantalla OLED I2C conectada a ella.</p> <p>El programa emisor es:</p> <p> <p> A05_2-Mensaje y datos</p> <p></p> <p>Y el programa receptor es:</p> <p> <p> A05_2-Mensaje y datos</p> <p></p> <p>En la animaci\u00f3n siguiente vemos lo que ocurre cuando pulsamos el bot\u00f3n A y para hacerlo mas evidente hay unos instantes en que se sujeta la placa emisora tocando el sensor para que suba la temperatura.</p> <p> <p> Funcionamiento de A05_2-Mensaje y datos</p> <p></p>"},{"location":"actividadesMOD/A05MOD_Mesh/#a05_3-todas-emisores-y-receptores","title":"A05_3-Todas emisores y receptores","text":"<p>Haremos que todas las placas sean emisoras y receptoras con un s\u00f3lo programa. Vamos a mandar dos mensajes diferentes, uno ser\u00e1 \"color\" con el nombre del color como \"Dato\" y el otro ser\u00e1 \"temp\" con el dato temperatura del sensor de la micro:STEAMakers, las placas receptoras deben mostrar el la temperatura por la pantalla como un texto con scroll y cuando finalice emitir 3 pitidos. El programa que debemos subir a todas las placas es el siguiente:</p> <p> <p> A05_3-Todas emisores y receptores</p> <p></p> <p>A continuaci\u00f3n se muestra una animaci\u00f3n donde se puede apreciar que hay mensajes que no llegan o que llegan mal a su destino. Incluso, aunque en la animaci\u00f3n no se escucha el sonido, hay momentos en que el conjunto se vuelve inestable y no deja de repetir los pitidos sin responder a otras acciones.</p> <p> <p> Funcionamiento de A05_3-Todas emisores y receptores</p> <p></p>"},{"location":"ayuda/ayuda/","title":"Ayuda","text":"<p>Esta es una secci\u00f3n de ayuda para iniciar una web con la plantilla y para cuando tengas problemas escribiendola. \u00dasalo como consulta mientras la est\u00e1s redactando (la web), pero recuerda comentarlo en el <code>mkdocs.yml</code> para que no aparezca en tu web.</p>"},{"location":"ayuda/ayuda/#resumen-del-proceso-a-seguir","title":"Resumen del proceso a seguir","text":"<p>Crear repositorio en la nube     \u2022 Le ponemos nombre y descripci\u00f3n     \u2022 Le a\u00f1adimos README.md.     \u2022 Le a\u00f1adimos Licencia MIT     \u2022 Le a\u00f1adimos .gitignore     \u2022 Arreglamos README.md y ponemos Acceso a contenidos con la direcci\u00f3n web que nos da en Settings \u2192 Pages     \u2022 Le a\u00f1adimos rama gh-pages Nos dirigimos al directorio en el que vamos a trabajar y hacemos      \u2022 $ git clone \u2026 (a\u00f1adimos la direcci\u00f3n https que obtenemos de Code) Copiamos de Plantilla:     \u2022 Carpeta docs     \u2022 mkdocs.yml     \u2022 Pipfile     \u2022 .gitignore     \u2022 requirements.txt     \u2022 LICENSE     \u2022 guia</p> <p>Tenemos que preparar el equipo para trabajar con la plantilla. Nos situamos en la carpeta con la que vamos a trabajar, abrimos una terminal y creamos el entorno virtual e instalamos todas las dependencias con:</p> <pre><code>\u2022 Creamos el entorno virtual: python3 -m venv env\n\u2022 Activamos el entorno virtual: source env/bin/activate\n\u2022 Instalamos las dependencias: pip install -r requirements.txt\n</code></pre> <p>Abrimos VSCode y configuramos mkdocs.yml para tener un \u00edndice operativo comentando todo lo pendiente.</p> <p>Trabajamos el directorio Miscelanea y sus archivos para dejarlo todo funcionando.</p> <pre><code>\u2022 Activar el entorno virtual si no est\u00e1 activado: source env/bin/activate\n\u2022 Correr el servidor: mkdocs serve. Si se genera el error -- ERROR   -  Config value 'plugins': The \"glightbox\" plugin is not installed \u2013 procedemos a instalar el plugin con \u2018pip install mkdocs-glightbox\u2019.\n</code></pre> <p>Cerrar Server para hacer el primer despliegue y comprobar que todo es correcto con: pipenv run mkdocs gh-deploy</p>"},{"location":"ayuda/ayuda/#aspecto-final-del-navegador","title":"Aspecto final del navegador","text":"<p><code>mkdocs.yml</code> -&gt; Debe quedar el punto 4 m\u00e1s o menos as\u00ed</p> <pre><code>...\n\n# 4. Navegaci\u00f3n\nnav:\n  - Manual de Sanp\u00a1:\n    - 1. Bloques, Scripts y Sprites: index.md\n    - 1.1. Sprites y paralelismo: 1/1_1.md\n    - 1.2. Anidamiento de Sprites. Anclajes y Partes: 1/1_2.md\n    - 1.3. Bloques informadores y expresiones: 1/1_3.md\n    - 1.4. Predicados y evaluaci\u00f3n condicional: 1/1_4.md\n    - 1.5. Variables: 1/1_5.md\n  - 2. Salvando y cargando proyectos y media:\n    ...\n\n#- Ayuda:\n    #- Chuleta: /ayuda/ayuda.md\n    #- Chuleta de Markdown: ayuda/markdown.md\n    #- Chuleta de Material Design: ayuda/material.md\n\n - Miscelanea:\n    - Autor: Miscelanea/about.md \n    - Licencias: Miscelanea/lic.md\n    - Webgrafia/Bibliograf\u00eda: Miscelanea/webgrafia.md\n    - Software utilizado: Miscelanea/soft.md\n\n...\n</code></pre> <p>Tienes una ayuda b\u00e1sica para desenvolverte con Markdown. Y otra para poder sacarle m\u00e1s partido al tema Material Design:</p> <ol> <li>Escribir Markdown</li> <li>Sacarle jugo al tema Material Design</li> </ol>"},{"location":"ayuda/ayuda/#guia-con-mi-formato-y-otras-cosas","title":"Guia con mi formato y otras cosas","text":"<p>Establecer color, tama\u00f1o y negrita con html:</p> <p>aa <p>Colores para los tres primeros niveles del \u00edndice:</p>"},{"location":"ayuda/ayuda/#nivel-indice-1","title":"Nivel indice 1","text":""},{"location":"ayuda/ayuda/#nivel-indice-2","title":"Nivel indice 2","text":""},{"location":"ayuda/ayuda/#nivel-indice-3","title":"Nivel indice 3","text":"<p>Idea base para im\u00e1gnes y gif animados:</p> <p> <p> aa</p> <p></p> <p>Idea b\u00e1sica para im\u00e1genes y gif mas acceso a programa, enlace, etc:</p> <p> <p> aa Aqui ponemos acceso a programa, enlace u otra cosa</p> <p></p> <p>Como crear un \u00edndice de enlaces internos con html</p> <p></p> <p>Entrada 1 Entrada 2 Entrada 3 Entrada 4</p> <p>[Volver](#item00 </p>"},{"location":"ayuda/markdown/","title":"Chuleta de Markdown","text":"<p>Esta es solo una chuleta de Markdown b\u00e1sico. En esta web tienes una referencia muy buena -&gt; Web de Markdown.</p> <p>Para escribir Markdown se recomienda usar como editor VSCode o VSCodium con las extensiones:</p> <ul> <li>Markdown All in One</li> <li>Markdownlint</li> </ul>"},{"location":"ayuda/markdown/#titulos","title":"T\u00edtulos","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-1-usar-solo-al-principio-del-fichero","title":"Esto es un t\u00edtulo 1 -&gt; Usar solo al principio del fichero","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-2-usar-para-dividir-en-secciones","title":"Esto es un t\u00edtulo 2 -&gt; Usar para dividir en secciones","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-3-usar-para-dividir-en-subsecciones","title":"Esto es un t\u00edtulo 3 -&gt; Usar para dividir en subsecciones","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-4-no-recomendado-su-uso","title":"Esto es un t\u00edtulo 4 -&gt; No recomendado su uso","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-5-no-recomendado-su-uso","title":"Esto es un t\u00edtulo 5 -&gt; No recomendado su uso","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-6-no-recomendado-su-uso","title":"Esto es un t\u00edtulo 6 -&gt; No recomendado su uso","text":""},{"location":"ayuda/markdown/#textos","title":"Textos","text":"<p>Texto en negrita. Texto en cursiva.  </p> <p>Para poner un salto de linea tienes que poner dos espacios en blanco despu\u00e9s del punto. Esta l\u00ednea est\u00e1 debajo. Pero esta sale seguido.</p> <p>O debes de poner una l\u00ednea vac\u00eda entre medias.</p>"},{"location":"ayuda/markdown/#enlaces","title":"Enlaces","text":"<p>As\u00ed se pone un enlace a una p\u00e1gina de Internet.</p> <p>As\u00ed se pone un enlace a una p\u00e1gina del propio taller.</p>"},{"location":"ayuda/markdown/#imagenes","title":"Im\u00e1genes","text":"<p>As\u00ed se pone una imagen desde Internet</p> <p></p> <p>Y as\u00ed se pone una imagen desde el propio taller</p> <p></p>"},{"location":"ayuda/markdown/#listas","title":"Listas","text":"<p>Listas sin orden con <code>*</code>, ejemplo:</p> <ul> <li>Esto es una lista</li> <li>Lista sin orden.</li> </ul> <p>Listas ordenadas con <code>1.</code>, ejemplo:</p> <ol> <li>Esto es una</li> <li>Lista ordenada</li> </ol>"},{"location":"ayuda/markdown/#citas","title":"Citas","text":"<p>Si quieres poner una cita tienes que usar <code>&gt;</code> delante del texto, ejemplo:</p> <p>Esto es una cita</p> <p>Esto es una cita anidada</p> <p>Esto es una cita doblemente anidada</p>"},{"location":"ayuda/markdown/#regla-horizontal","title":"Regla horizontal","text":"<p>Se hace para poner una l\u00ednea que divisa visualmente una secci\u00f3n de otra.</p> <p>Aqu\u00ed hay una.</p>"},{"location":"ayuda/markdown/#tablas","title":"Tablas","text":"<p>En este ejemplo tienes una tabla con 3 columnas:</p> <ul> <li>La primera tiene el texto fijado a la izquierda.</li> <li>La segunda tiene el texto fijado al centro.</li> <li>La tercera tiene el texto fijado a la derecha.</li> </ul> Texto a la izquierda Texto en el centro Texto en la derecha En un lugar de la mancha, de cuyo nombre no quiero acordarme, no ha mucho tiempo que vivia un hidalgo de los de lanza en astillero, adarga antigua, roc\u00edn flaco y galgo corredor..."},{"location":"ayuda/markdown/#lineas-de-codigo","title":"L\u00edneas de c\u00f3digo","text":"<p>Para poner c\u00f3digo en l\u00ednea, tienes que ponerlo entre las comillas `.</p> <p>Aqu\u00ed tienes <code>un ejemplo de c\u00f3digo</code> en l\u00ednea.</p> <p>Si quisieras poner un bloque de c\u00f3digo tienes que poner 3 comillas `, debajo el c\u00f3digo, y una \u00faltima l\u00ednea con otras 3 comillas. Puedes incluso espec\u00edficarle el lenguaje del c\u00f3digo para que te lo coloree. Ah\u00ed va un ejemplo en Python:</p> <pre><code>import antigravity\n\nprint('Hola mundo')\n</code></pre>"},{"location":"ayuda/material/","title":"Material Design","text":"<p>Esta chuleta es un copia-pega modificado de esta p\u00e1gina. B\u00e1sicamente es un Markdown espec\u00edfico para poder ser usado con el tema Material Design y sacarle m\u00e1s partido.</p>"},{"location":"ayuda/material/#enlaces","title":"Enlaces","text":"<p>Existe la posibilidad de utilizar referencias a enlaces que se definen posteriormente. En ese caso unicamente incluimos el n\u00famero de enlace. M\u00e1s adelante es necesario definir el enlace que corresponde con cada n\u00famero y, opcionalmente, un texto descriptivo.</p> <pre><code>:::markdown\nPodemos comprar un ordenador (Dell)[1] o (Apple)[2].\n\n[1]: http://dell.com/   \"Comprar en Dell\"\n[2]: http://apple.com/  \"Comprar en Apple\"\n</code></pre> <p>Podemos comprar un ordenador Dell o Apple.</p>"},{"location":"ayuda/material/#imagenes","title":"Imagenes","text":"<p>Tambi\u00e9n es posible utilizar referencias que es necesario definir posteriormente.</p> <pre><code>:::markdown\n![texto alternativo][id]\n\n[id]: /img/md-logo.png \"Titulo opcional\"\n</code></pre> <p></p>"},{"location":"ayuda/material/#secuencias-de-escape","title":"Secuencias de escape","text":"<p>Puede ocurrir que alguno de los caracteres especiales utilizados en markdown aparezcan de forma fortuita en el texto y originen efectos no deseados. Para evitarlo podemos utilizar las secuencias de escape para especificar que deseamos utilizar el caracter como texto sin que tenga ning\u00fan efecto colateral. Podemos utilizar el caracter '\\' junto con cualquiera de los siguientes para crear una secuencia de escape.</p> <pre><code>\\ backslash\n` backtick\n* asterisco\n_ underscore\n{} curly braces\n[] square brackets\n() parentheses\n# hash mark\n+ plus sign\n- minus sign (hyphen)\n. dot\n! exclamation mark\n</code></pre>"},{"location":"ayuda/material/#codigo","title":"C\u00f3digo","text":"<p>Para marcar texto como c\u00f3digo es necesario indentar cada l\u00ednea del bloque con cuatro espacios o una tabulaci\u00f3n. Si el c\u00f3digo va embebido en un p\u00e1rrafo, es neceario rodearlo por comillas simples invertidas. Consultar la secci\u00f3n de CodeHilite y de InlineHilite para funcionalidades extendidas.</p>"},{"location":"ayuda/material/#extensiones","title":"Extensiones","text":""},{"location":"ayuda/material/#admonition","title":"Admonition","text":"<p>Extensi\u00f3n incluida en la librer\u00eda est\u00e1ndar de Markdown que permite incluir contenido adicional en cajas de color con un t\u00edtulo y un icono. Por ejemplo para res\u00famenes, notas, consejos o avisos.</p> <pre><code>!!! note\n    Esto es un ejemplo de nota (note, seealso).\n</code></pre> <p>Note</p> <p>Esto es un ejemplo de nota (note, seealso).</p> <pre><code>!!! note \"Esta es una nota con t\u00edtulo\"\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n    Nulla et euismod nulla. Curabitur feugiat, tortor non\n    consequat finibus, justo purus auctor massa, nec semper\n    lorem quam in massa.\n</code></pre> <p>Esta es una nota con t\u00edtulo</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <pre><code>!!! note \"\"\n    Esta nota va sin t\u00edtulo.\n</code></pre> <p>Esta nota va sin t\u00edtulo.</p> <p>En vez de note es posible utilizar las siguientes etiquetas: summary, info, tip, success, question, warning, failure, danger, bug y quote.</p> <p>Summary</p> <p>Esto es un ejemplo de sumario (summary, tldr).</p> <p>Info</p> <p>Esto es un ejemplo de bloque informativo (info, todo).</p> <p>Tip</p> <p>Esto es un ejemplo de consejo o truco (tip, hint, important).</p> <p>Success</p> <p>Esto es un ejemplo de bloque de \u00e9xito (success, check, done).</p> <p>Question</p> <p>Esto es un ejemplo de pregunta (question, help, faq).</p> <p>Warning</p> <p>Esto es un ejemplo de precauci\u00f3n (warning, caution, attention).</p> <p>Failure</p> <p>Esto es un ejemplo de fallo (failure, fail, missing).</p> <p>Danger</p> <p>Esto es un ejemplo de peligro (danger, error).</p> <p>Bug</p> <p>Esto es un ejemplo de error (bug).</p> <p>Quote</p> <p>Esto es un ejemplo de cita (quote, cite).</p>"},{"location":"ayuda/material/#details","title":"Details","text":"<p>Para crear bloques colapsables que puedan ocultar su contenido.</p> <p>Ejemplo: <pre><code>??? \"Bloque cerrado. Abreme !!!\"\n    Ahora lo has abierto.\n</code></pre> Resultado:</p> Bloque cerrado. Abreme !!! <p>Ahora lo has abierto.</p> <p>Ejemplo: <pre><code>???+ \"Bloque abierto inicialmente\"\n\n    ??? \"Bloque dentro de otro bloque\"\n        Algo de contenido.\n</code></pre> Resultado:</p> Bloque abierto inicialmente Bloque dentro de otro bloque <p>Algo de contenido.</p> <p>Ejemplo: <pre><code>??? danger \"Bloque con tema de peligro\"\n    Algo de contenido.\n</code></pre> Resultado:</p> Bloque con tema de peligro <p>Algo de contenido.</p> Bloque con tema de precauci\u00f3n <p>Algo de contenido.</p> Bloque con tema de \u00e9xito <p>Algo de contenido.</p>"},{"location":"ayuda/material/#codehilite","title":"CodeHilite","text":"<p>Extensi\u00f3n incluida en la librer\u00eda est\u00e1ndar de Markdown que permite resaltar la sintaxis de los bloques de c\u00f3digo. Como lenguajes soportados est\u00e1n entre otros: markdown, python, c, cpp, csharp, html, javascript, JSON, XML.</p> <p>Ejemplo utilizando comillas simples.</p> <pre><code>``` python\nimport tensorflow as tf\n```\n</code></pre> <p>Resultado:</p> <pre><code>import tensorflow as tf\n</code></pre> <p>Ejemplo utilizando bloque tabulado con cuatro espacios:</p> <pre><code>    :::python\n    \"\"\" Bubble sort \"\"\"\n    def bubble_sort(items):\n        for i in range(len(items)):\n            for j in range(len(items) - 1 - i):\n                if items[j] &gt; items[j + 1]:\n                    items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Resultado:</p> <pre><code>:::python\n\"\"\" Bubble sort \"\"\"\ndef bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Ejemplo utilizando bloque tabulado y n\u00fameros de l\u00ednea:</p> <pre><code>    #!python\n    \"\"\" Bubble sort \"\"\"\n    def bubble_sort(items):\n        for i in range(len(items)):\n            for j in range(len(items) - 1 - i):\n                if items[j] &gt; items[j + 1]:\n                    items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Resultado:</p> <pre><code>#!python\n\"\"\" Bubble sort \"\"\"\ndef bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Es posible resaltar l\u00edneas concretas de c\u00f3digo con hl_lines.</p> <pre><code>    #!python hl_lines=\"3 4\"\n</code></pre> <p>Resultado:</p> <pre><code>#!python hl_lines=\"3 4\"\n\"\"\" Bubble sort \"\"\"\ndef bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre>"},{"location":"ayuda/material/#inlinehilite","title":"InlineHilite","text":"<p>Permite embeber c\u00f3digo en el texto mediante <code>#!languaje code</code> o bien <code>:::languaje code</code> entre comillas simples inversas.</p> <p>Ejemplo: <pre><code>Aqui se presenta este c\u00f3digo `#!c #include &lt;stdio.h&gt;` embebido en el texto.\n</code></pre> Resultado:</p> <p>Aqui se presenta este c\u00f3digo <code>#include &lt;stdio.h&gt;</code> embebido en el texto.</p> <p>Ejemplo: <pre><code>Aqui se presenta este otro c\u00f3digo `:::c #include &lt;stdlib.h&gt;` embebido en el texto.\n</code></pre> Resultado:</p> <p>Aqui se presenta este otro c\u00f3digo <code>#include &lt;stdlib.h&gt;</code> embebido en el texto.</p> <p>Ejemplo: <pre><code>C\u00f3digo javascript: `#!js function pad(v){return ('0'+v).split('').reverse().splice(0,2).reverse().join('')}`.\n</code></pre> Resultado:</p> <p>C\u00f3digo javascript: <code>function pad(v){return ('0'+v).split('').reverse().splice(0,2).reverse().join('')}</code>.</p>"},{"location":"ayuda/material/#mark","title":"Mark","text":"<p>Permite marcar texto en amarillo fosforito.</p> <p>La anterior frase se ha generado as\u00ed: <pre><code>Permite marcar texto en ==amarillo fosforito==.\n</code></pre></p> <ul> <li>This was marked (highlight)</li> <li>This was inserted (underline)</li> <li>This was deleted (strikethrough)</li> </ul>"},{"location":"ayuda/material/#footnotes","title":"Footnotes","text":"<p>Otra extensi\u00f3n de la libreria est\u00e1ndar para incluir notas al pie de p\u00e1gina. Se inserta una referencia en el texto, la cual puede ser definida en cualquier parte del documento. La definici\u00f3n aparecer\u00e1 en el pie de p\u00e1gina. La referencia consiste en un sombrerete seguido de un identificador num\u00e9rico [1, 2, 3, ...] o bien de nombres [Cuartas et al. 2012].</p> <p>Ejemplo:</p> <pre><code>Lorem ipsum[^1] dolor sit amet, consectetur adipiscing elit.[^2]\n</code></pre> <p>Resultado:</p> <p>Lorem ipsum<sup>1</sup> dolor sit amet, consectetur adipiscing elit.<sup>2</sup></p> <p>La definici\u00f3n de los contenidos de la nota al pie puede realizarse en una \u00fanica l\u00ednea si el texto es corto:</p> <pre><code>[^1]: Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</code></pre> <p>o bien en un bloque de texto indentado cuatro espacios, que comienze en la siguiente l\u00ednea de la etiqueta, si el texto es largo.</p> <pre><code>[^2]:\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod\n    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor\n    massa, nec semper lorem quam in massa.\n</code></pre>"},{"location":"ayuda/material/#arithmatex-mathjax","title":"Arithmatex MathJax","text":"<p>Basado en MathJax. Permite introducir equaciones escritas en TeX dentro de bloques o en l\u00ednea con el texto. Ver este hilo para una r\u00e1pida referencia sobre la sintaxis TeX.</p> <p>Ejemplo: <pre><code>$$\\frac{n!}{k!(n-k)!} = \\binom{n}{k}$$\n\n$$\\sum_{i=0}^n i^2 = \\frac{(n^2+n)(2n+1)}{6}$$\n</code></pre> Resultado:</p> \\[\\frac{n!}{k!(n-k)!} = \\binom{n}{k}\\] \\[\\sum_{i=0}^n i^2 = \\frac{(n^2+n)(2n+1)}{6}\\] <p>Ejemplo: <pre><code>Lorem ipsum dolor sit amet: $p(x|y) = \\frac{p(y|x)p(x)}{p(y)}$\n</code></pre></p> <p>Resultado:</p> <p>Lorem ipsum dolor sit amet: \\(p(x|y) = \\frac{p(y|x)p(x)}{p(y)}\\)</p>"},{"location":"ayuda/material/#letras-griegas","title":"Letras griegas","text":"<p><code>$\\alpha, \\beta, ..., \\omega$</code></p> <p>\\(\\alpha, \\beta, ..., \\omega\\)</p> <p><code>$\\Gamma, \\Delta, ..., \\Omega$</code></p> <p>\\(\\Gamma, \\Delta, ..., \\Omega\\)</p>"},{"location":"ayuda/material/#superindices-y-subindices","title":"Superindices y subindices","text":"<p><code>$x_i^2  \\log_2 x$</code></p> <p>\\(x_i^2  \\log_2 x\\)</p>"},{"location":"ayuda/material/#grupos","title":"Grupos","text":"<p>Super\u00edndices, sub\u00edndices y otras operaciones aplican solamente al siguiente \"grupo\". Un \"grupo\" es un \u00fanico s\u00edmbolo o un cualquier f\u00f3rmula ubicada entre llaves {...}</p> <p><code>$10^10$</code></p> <p>\\(10^10\\)</p> <p><code>$10^{10}$</code></p> <p>\\(10^{10}\\)</p> <p><code>${x^y}^z$</code></p> <p>\\({x^y}^z\\)</p> <ol> <li> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.\u00a0\u21a9</p> </li> <li> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.\u00a0\u21a9</p> </li> </ol>"},{"location":"modular/modV2/","title":"Sensor shield modular V2","text":""},{"location":"modular/modV2/#introduccion","title":"Introducci\u00f3n","text":"<p>Se trata de un escudo con conexi\u00f3n r\u00e1pida de sensores para la versi\u00f3n V2 de micro:bit. Su aspecto lo vemos en la imagen siguiente:</p> <p> <p> Aspecto de la shield</p> <p></p> <p>La shield V2 convierte todos los puertos PIO de la placa de control micro:STEAMakers en una interfaz de tres pines (GND, VCC, Se\u00f1al), muy f\u00e1cil para conectar la placa de control y m\u00f3dulos sensores.</p> <p>Por otra parte, tambi\u00e9n dispone pines hembra para interfaz de comunicaci\u00f3n serie y pines macho de comunicaci\u00f3n I2C y SPI. De modo que esta shield permitir\u00e1 la comunicaci\u00f3n entre la placa de control micro:STEAMakers y otros dispositivos de comunicaci\u00f3n. La placa se puede alimentar a trav\u00e9s de un jack DC negro (DC 7-9V) o un puerto USB micro (DC 5V). Cuando alimentemos a trav\u00e9s de la shield, se puede seleccionar el voltaje de alimentaci\u00f3n V1 y V2 a 3.3V o 5V a trav\u00e9s de los jumpers V1 y V2.</p>"},{"location":"modular/modV2/#seleccion-y-analisis-de-tensiones","title":"Selecci\u00f3n y an\u00e1lisis de tensiones","text":"<p>Las combinaciones posibles las vemos en la tabla siguiente:</p> <p> Posici\u00f3n V2 (V) V1 (V) Posici\u00f3n V2 (V) V1 (V) 3.3 3.3 5 5 5 3.3 3.3 5 <p></p> <p>En la shield observamos como seg\u00fan estos selectores en los pines de alimentaci\u00f3n positiva (rojos) estar\u00e1 presente una u otra tensi\u00f3n.</p> <p>Aviso</p> <p>Sin alimentaci\u00f3n externa de la shield en V1 y/o V2 no habr\u00e1 5V aunque alimentemos externamente a la placa micro:STEAMakers. Alimentando la shield la tensi\u00f3n en V1 y/o V2 depende de la posici\u00f3n de su jumper y ser\u00e1 de 5V si la alimentamos a trav\u00e9s del conector micro USB o a trav\u00e9s del Jack de alimentaci\u00f3n.</p> <p>La shield va dotada de dos reguladores de tensi\u00f3n un ASM1117 para 3.3V y un 117-5 para 5V, ambos en encapsulado SOT-223. Ambos reguladores se configuran facilmente con muy pocos componentes externos para, junto con los jumpers, cumplir con su misi\u00f3n en la placa.</p>"},{"location":"modular/modV2/#detalles-tecnicos","title":"Detalles t\u00e9cnicos","text":"<p>Los principales detalles t\u00e9cnicos de la shield son:</p> <ul> <li>Entrada de alimentaci\u00f3n externa: jack negro DC (DC 7-9V) o puerto micro USB (DC 5V)</li> <li>Tensi\u00f3n de salida: seleccionable a 3.3V o 5V a trav\u00e9s de los jumpera V1/V2</li> <li>Indicador de alimentaci\u00f3n externa.</li> <li>Convierte la interfaz de pines PIO de micro:STEAMakers a conectores de tres pines.</li> <li>Pines de comunicaci\u00f3n serie.</li> <li>Pines de comunicaci\u00f3n I2C.</li> <li>Pines de comunicaci\u00f3n SPI.</li> <li>Dimensiones: 65mm x 58mm x 12mm.</li> </ul>"},{"location":"modular/modV2/#diagrama-de-pines","title":"Diagrama de pines","text":"<p>En la imagen siguiente podemos ver el diagrama de pines original de esta placa:</p> <p> <p> Pinout original</p> <p></p> <p>Pero debemos tener muy presente que esta shield es para una placa micro:bit y no para un micro:STEAMakers por lo que la numeraci\u00f3n impresa en la misma no es la correcta para nuestros prop\u00f3sitos. Por ello se ha estudiado la correspondencia de pines del borde de la micro:STEAMakers con esta shield obteniendo el siguiente pinout:</p> <p> <p> Pinout micro:STEAMakers vs Shield Clic sobre la imagen para ampliarla</p> <p></p>"},{"location":"program/RTTTL/","title":"Formato RTTTL","text":"<p>Ring Tone Text Transfer Language (RTTTL) es un formato basado en texto que fue desarrollado por Nokia para transferir tonos de llamada entre tel\u00e9fonos m\u00f3viles Nokia.</p> <p>El formato RTTTL es una cadena dividida en tres secciones: \"nombre\", \"valor predeterminado\" y \"datos\".</p> <p>La secci\u00f3n \"nombre\" es una cadena que describe el nombre del tono de llamada. No puede tener m\u00e1s de 10 caracteres y no puede contener dos puntos \":\".</p> <p>La secci\u00f3n \"valor predeterminado\" es un conjunto de valores separados por comas, donde cada valor contiene una clave y un valor separados por un car\u00e1cter =, que describe ciertos valores por defecto que deben respetarse durante la ejecuci\u00f3n del tono. Los nombres posibles son:</p> <ul> <li>d - duraci\u00f3n</li> <li>o - octava</li> <li>b - beat, tempo.</li> </ul> <p>La secci\u00f3n \"datos\" es un conjunto de cadenas de caracteres separadas por comas, donde cada cadena contiene una duraci\u00f3n, afinaci\u00f3n, octava y un punto opcional, que si se pone aumenta la duraci\u00f3n de la nota en una mitad.</p> <p>Por ejemplo, la siguiente cadena de texto se corresponde con la Intro de Donkey Kong:</p> <p>Intro Donkey Kong</p> <p>d=4,o=5,b=140:8a#,8p,8d6,16p,16f.6,16g.6,16f.6,8a#,8p,8d6,16p,16f.6,16g.6,16f.6,8a#,8p,8d6,16p,16f.6,16g.6,16f.6, 8a#,8p,8d6,16p,16f.6,16g.6,16f.6</p> <p>Lo \u00fanico que tenemos que hacer para reproducir la melodia es pegar la cadena en la zona de texto del bloque.</p> <p>Arduinoblocks nos suministra informaci\u00f3n y enlaces referentes al tema accediendo desde nuestro proyecto a 'herramientas' y escogiendo 'RTTTL Info', tal y como vemos en la imagen siguiente:</p> <p> <p> Acceso a RTTTL Info</p> <p></p> <p>En la imagen siguiente tenemos desplegada la informaci\u00f3n que nos ofrece esta herramienta.</p> <p> <p> Informaci\u00f3n RTTTL</p> <p></p>"},{"location":"program/RTTTL/#bloques-rtttl","title":"Bloques RTTTL","text":"<p>El bloque de la imagen permite reproducir cualquier melodia RTTTL que peguemos en el campo 'song'.</p> <p> <p> Bloque Zumbador Reproducir RTTTL</p> <p></p> <p>Existen un bloque en el que est\u00e1n definidas varias melodias t\u00edpicas y es el que vemos en la imagen siguiente:</p> <p> <p> Bloque Zumbador Reproducir RTTTL con listado de melodias</p> <p></p>"},{"location":"program/espnow/","title":"ESP-NOW","text":"<p>Los contenidos de este apartado van a estar basados en:</p> <ul> <li>Manual Comunicaci\u00f3n ESP-NOW con ESP32 STEAMakers creado por Juanjo L\u00f3pez.</li> <li>Apuntes ESP-NOW de Pedro Ruiz.</li> <li>Wireless Communication Protocol (ESP-NOW) de Espressif.</li> <li>Getting Started with ESP-NOW (ESP32 with Arduino IDE) de Random Nerd Tutorials.</li> </ul>"},{"location":"program/espnow/#introduccion-a-esp-now","title":"Introducci\u00f3n a ESP-NOW","text":"<p>ESP-NOW es un protocolo de comunicaci\u00f3n inal\u00e1mbrica desarrollado por Espressif para los microcontroladores ESP32, que permte que varios dispositivos se comuniquen entre s\u00ed sin utilizar una red Wi-Fi. Trabaja con baja potencia y baja latencia en la banda de 2.4 GHz para transmitir peque\u00f1os paquetes de datos directamente entre dispositivos ESP32.</p> <p>Este funcionamiento permite la comunicaci\u00f3n directa entre m\u00faltiples dispositivos, formando una red red inal\u00e1mbrica descentralizada ad-hoc (todos los dispositivos est\u00e1n en igualdad de condiciones), y soporta tanto unicast (direcci\u00f3n destino a un \u00fanico destino) como multicast (direcci\u00f3n destino a multiples destinos), permitiendo la transmisi\u00f3n de datos a uno o varios dispositivos simult\u00e1neamente.</p> <p>Es necesario el emparejamiento entre dispositivos antes de establecer su comunicaci\u00f3n. Una vez realizado el emparejamiento, la conexi\u00f3n es segura y de igual a igual, sin necesidad de mas presentaciones. Esto significa que despu\u00e9s de emparejar un dispositivo con otro, la conexi\u00f3n es persistente. En otras palabras, si de repente una de tus placas pierde potencia o se reinicia, al reiniciarse se conectar\u00e1 autom\u00e1ticamente a su par para continuar la comunicaci\u00f3n.</p> <p> <p> Logotipo ESP-NOW</p> <p></p>"},{"location":"program/espnow/#caracteristicas-de-esp-now","title":"Caracter\u00edsticas de ESP-NOW","text":"<ul> <li>Comunicaci\u00f3n unididireccional encriptada y no encriptada;</li> <li>Dispositivos emparejados encriptados y no encriptados;</li> <li>Puede transportarse una carga \u00fatil de hasta 250 bytes;</li> <li>Funci\u00f3n de devoluci\u00f3n de llamada al env\u00edo que puede configurarse para informar a la capa de aplicaci\u00f3n del \u00e9xito o fracaso de la transmisi\u00f3n.</li> </ul> <p>ESP-NOW es un protocolo de comunicaci\u00f3n inal\u00e1mbrica basado en la capa de enlace de datos, que reduce las cinco capas del modelo OSI a una sola.</p> <p> <p> Logotipo ESP-NOW</p> <p></p>"},{"location":"program/espnow/#ventajas-e-inconvenientes","title":"Ventajas e inconvenientes","text":""},{"location":"program/espnow/#ventajas","title":"Ventajas","text":"<ul> <li>Coexistencia con WiFi y Bluetooth LE.</li> <li>Ocupa menos recursos de memoria flash y de CPU.</li> <li>Aplicaciones en tiempo real por la transmisi\u00f3n de datos casi instant\u00e1nea, con una latencia muy baja.</li> <li>Algoritmos ECDH y AES de encriptaci\u00f3n de datos mediante claves precompartidas, asegurando la comunicaci\u00f3n.</li> <li>Gran eficiencia energ\u00e9tica.</li> <li>Facil de implementar dada su simplicidad.</li> <li>Proyectos colaborativos dado que m\u00faltiples robots pueden comunicarse entre s\u00ed de manera eficiente.</li> <li>El no depende de una infraestructura WiFi le dota de una gran portabilidad y flexibilidad.</li> </ul>"},{"location":"program/espnow/#inconvenientes","title":"Inconvenientes","text":"<ul> <li>N\u00famero limitado de pares cifrados.</li> <li>Se admiten 10 pares cifrados como m\u00e1ximo.</li> <li>Se admiten varios pares no cifrados, pero su n\u00famero total debe ser inferior a 20, incluidos los pares cifrados.</li> <li>La carga \u00fatil est\u00e1 limitada a 250 bytes.</li> </ul> <p>Resumiendo:</p> <p>ESP-NOW es un protocolo de comunicaci\u00f3n r\u00e1pida que se puede utilizar para intercambiar mensajes peque\u00f1os (hasta 250 bytes) entre placas ESP32.</p>"},{"location":"program/espnow/#comunicaciones-esp-now","title":"Comunicaciones ESP-NOW","text":"<p>ESP-NOW es muy vers\u00e1til y se puede tener una comunicaci\u00f3n unidireccional o bidireccional en diferentes configuraciones.</p> <p>Nota</p> <p>En la documentaci\u00f3n no hablaremos de \"sender/master (emisor/maestro)\" y \"receiver/slave (receptor/esclavo)\". Cada placa puede ser emisora o receptora. Sin embargo, para mantener las cosas claras utilizaremos los t\u00e9rminos \"emisor\" y \"receptor\" o \"maestro\" y \"esclavo\" o \"master\" y \"slave\".</p>"},{"location":"program/espnow/#unidireccionales","title":"Unidireccionales","text":""},{"location":"program/espnow/#un-master-un-slave","title":"Un master un slave","text":"<p>Esta configuraci\u00f3n es la m\u00e1s f\u00e1cil de implementar y es ideal para enviar datos de una placa a otra. Se trata de una ESP32 micro:STEAMakers enviando datos a otra ESP32 micro:STEAMakers o cualquier otra placa ESP32.</p> <p> <p> Comunicaci\u00f3n unidireccional</p> <p></p>"},{"location":"program/espnow/#un-master-multiples-slaves","title":"Un master multiples slaves","text":"<p>Una placa ESP32 micro:STEAMakers enviando el mismo o diferentes comandos a diferentes placas ESP32 micro:STEAMakers. Esta configuraci\u00f3n es ideal para construir algo parecido a un mando a distancia. Se pueden tener varias placas ESP32 micro:STEAMakers (slaves o esclavas) que son controladas por una placa ESP32 micro:STEAMakers (master o maestra o principal).</p> <p> <p> Un master multiples slaves</p> <p></p>"},{"location":"program/espnow/#un-slave-multiples-masters","title":"Un slave multiples masters","text":"<p>Esta configuraci\u00f3n es ideal si queremos recopilar datos de varios nodos sensorizados en una placa ESP32 micro:STEAMakers. La placa receptora se puede configurarse como servidor web para mostrar los datos de todas las dem\u00e1s placas, por ejemplo.</p> <p> <p> Un slave multiples masters</p> <p></p>"},{"location":"program/espnow/#comunicacion-bidireccional","title":"Comunicaci\u00f3n bidireccional","text":"<p>Con ESP-NOW, cada placa puede ser emisora y receptora al mismo tiempo. As\u00ed, se puede establecer una comunicaci\u00f3n bidireccional entre placas.</p> <p> <p> Comunicaci\u00f3n bidireccional</p> <p></p>"},{"location":"program/espnow/#direccion-mac","title":"Direcci\u00f3n MAC","text":"<p>Para comunicarse a trav\u00e9s de ESP-NOW, se necesita conocer la Direcci\u00f3n MAC del receptor ESP32. As\u00ed sabr\u00e1 a qu\u00e9 dispositivo enviar\u00e1 los datos.</p> <p>Cada ESP32 micro:STEAMakers tiene una direcci\u00f3n MAC \u00fanica y as\u00ed es como podemos identificar cada placa para enviarle datos mediante ESP-NOW.</p> <p>Pero \u00bfQue es una direcci\u00f3n MAC?. MAC son iniciales de MediaAccessControl que significa control de acceso al medio y es un identificador \u00fanico de hardware que identifica cada dispositivo de una red. <p>Las direcciones MAC est\u00e1n formadas por seis grupos (6 bytes) de dos d\u00edgitos hexadecimales, separados por dos puntos o, a veces, un gui\u00f3n, por ejemplo: 34:98:7A:A9:D1:A8.</p> <p>Las direcciones MAC son asignadas por los fabricantes, aunque se pueden cambiar a una direcci\u00f3n MAC personalizada. Pero hay que tener muy presente que cada vez que la placa se reinicie, volver\u00e1 a su direcci\u00f3n MAC original.</p> <p>En el caso de las placas ESP32, la direcci\u00f3n MAC se utiliza tanto para la conexi\u00f3n Wi-Fi como para la comunicaci\u00f3n ESP-NOW.</p>"},{"location":"program/espnowAB/","title":"ESP-NOW en arduinoblocks","text":"<p>Los contenidos de este apartado van a estar basados en:</p> <ul> <li>Manual Comunicaci\u00f3n ESP-NOW con ESP32 STEAMakers creado por Juanjo L\u00f3pez.</li> <li>Apuntes ESP-NOW de Pedro Ruiz.</li> </ul>"},{"location":"program/espnowAB/#obtener-mac-placa-microsteamakers","title":"Obtener MAC placa micro:STEAMakers","text":"<p>Para obtener la direcci\u00f3n MAC por consola se puede usar el siguiente programa:</p> <p> <p> Programa para obtener MAC placa micro:STEAMakers</p> <p></p> <p>El resultado en consola es el de la imagen siguiente:</p> <p> <p> Consola del programa para obtener MAC placa micro:STEAMakers</p> <p></p> <p>Si al hacer clic en el bot\u00f3n verde Conectar de la consola no aparece nada en pantalla ser\u00e1 necesario pulsar el bot\u00f3n de reset de la placa.</p> <p>Otra posibilidad es conectar una pantalla a la micro:STEAMakers y sacar la MAC por ella. En este caso el programa para una OLED I2C ser\u00eda:</p> <p> <p> Programa para obtener MAC placa micro:STEAMakers</p> <p></p> <p>Que da como resultado:</p> <p> <p> Resultado en OLED del programa para obtener MAC placa micro:STEAMakers</p> <p></p> <p>Consejo</p> <p>A la hora de trabajar con proyectos ESP-NOW es recomendable etiquetar f\u00edsicamente cada placa con la direcci\u00f3n MAC obtenida para poder f\u00e1cilmente identificar cada una de ellas durante la programaci\u00f3n. </p> <p></p>"},{"location":"program/espnowAB/#bloques-esp-now","title":"Bloques ESP-NOW","text":""},{"location":"program/espnowAB/#bloque-iniciar","title":"Bloque iniciar","text":"<p>Es obligatorio para iniciar el protocolo ESP-NOW y lo pondremos en el bloque de inicializaci\u00f3n de nuestros programas.</p> <p>El bloque permite activar o no la encriptaci\u00f3n de las comunicaciones. La encriptaci\u00f3n es muy importante para hacer proyectos seguros y evitar que espien nuestras comunicaciones, o que puedan inundarnos (flooding) con paquetes de datos ajenos. Los dos tipos de claves son:</p> <ul> <li> <p>PMK (Private Master Key) o clave maestra: es la usada para encriptar la clave LMK con cifrado AES128. Es obligatorio definir esta clave, por lo que si no modificamos nada la clave son los 16 guiones (bytes) por defecto (\"----------------\"). Ya que vamos a a\u00f1adir seguridad lo suyo es cambiarla.</p> </li> <li> <p>LMK (Local Master Key) o clave local: es la clave que se utiliza para encriptar action frames (tipo de trama de gesti\u00f3n que se utiliza para desencadenar una acci\u00f3n) con el m\u00e9todo de criptograf\u00eda CCMP. Es la encriptaci\u00f3n a nivel de dispositivo. Tiene la misma composici\u00f3n que la clave PMK.</p> </li> </ul> <p>Importante</p> <p>En los dispositivos emparejados en la red ESP-NOW deber\u00e1n coincidir las claves para poder establecer comunicaci\u00f3n.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque iniciar</p> <p></p>"},{"location":"program/espnowAB/#bloque-establecer-canal","title":"Bloque establecer canal","text":"<p>Bloque para establecer el canal WiFi de nuestra red ESP-NOW.</p> <p>Sin entrar en detalles diremos como simil que un canal de una red inal\u00e1mbrica y las diferentes frecuencias que utiliza funciona de manera similar a la radio y sus frecuencias. Las redes WiFi trabajan en frecuencia de GHz, indicando la frecuencia a la que se transmiten los datos. Si cambiamos de canal estamos cambiando la frecuencia de transmisi\u00f3n.</p> <p>El est\u00e1ndar WiFi 802.11 b/g/n indica que en redes WiFi de 2.4GHz se pueden configurar anchos de canal de 20 y 40 MHz.</p> <p>En la banda de 2.4 GHz el est\u00e1ndar WiFi establece la separaci\u00f3n de canales en 5 MHz. Si representamos cada canal por un cono truncado con su base inferior de 20MHz (para 40MHz se daria la misma situaci\u00f3n) y su base superior de 5MHz. Cada canal empieza 5MHz por encima del anterior. Si representamos esto obtenemos, de forma simplificada, una representaci\u00f3n de los canales WiFi del espectro de 2.4GHz que vemos a continuaci\u00f3n:</p> <p> <p> Canales Wifi en 2.4GHz Imagen obtenida de \u00bfPor qu\u00e9 se utilizan los canales WiFi 1, 6 y 11 en 2.4GHz? de ACRYLIC</p> <p></p> <p>Cuando por ejemplo situamos la banda en el canal 6, este se solapa con parte del 4,5,7 y 8; en concreto 15MHz de solapamiento.</p> <p>En la figura se aprecia el motivo de por qu\u00e9 se dice que los mejores canales son el 1,6,11 o 2,6,10 o 1,5,9 o 3,7,11 ya que para un ancho de banda de 20MHz no se solaparian. Pero la imagen es una representaci\u00f3n idealizada y en realidad es mas complejo tal y como se explica en los art\u00edculos (ambos en ingl\u00e9s) citados en la imagen siguiente:</p> <p> <p> Representaci\u00f3n gr\u00e1fica del solapamiento de canales de 22 MHz en la banda de 2,4 GHz Imagen obtenida del enlace Electromagnetic interference at 2.4 GHz \u00a7 Wi-Fi en el art\u00edculo List of WLAN channels de Wikipedia</p> <p></p> <p>Atribuci\u00f3n imagen anterior</p> <p>By Michael Gauthier, Wireless Networking in the Developing WorldKelleyCook, image improvementsWhidou, French translation - This file was derived from: 2.4 GHz Wi-Fi channels (802.11b,g WLAN).png\u00a0by Michael Gauthier, CC BY-SA 3.0, https://commons.wikimedia.org/w/index.php?curid=8353678</p> <p>Vemos que en realidad el ancho de banda es 22MHz por lo que se produce un peque\u00f1o solapamiento. En la imagen anterior vemos tambi\u00e9n que aparecen los canales 12 y 13, lo que tiene que ver con la zona geogr\u00e1fica en que nos encontremos. En USA va del 1 al 11, Jap\u00f3n del 1 al 14 y el resto del mundo del 1 al 13.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque establecer canal</p> <p></p>"},{"location":"program/espnowAB/#emparejar-nodo-remoto","title":"Emparejar nodo remoto","text":"<p>Bloque para a\u00f1adir un nodo a partir de su direcci\u00f3n MAC. Una vez emparejado ya podemos enviar datos a ese nodo.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque Emparejar nodo remoto</p> <p></p> <p>En las especificaciones de ESP-NOW (limitations) indica que el n\u00famero de pares cifrados m\u00e1ximo es de 10 en modo emisor; 6 en modo receptor y emisor. Se admiten varios (sin indicar n\u00famero) pares no cifrados, pero el n\u00famero total debe ser inferior a 20, incluidos los cifrados.</p>"},{"location":"program/espnowAB/#enviar-a-un-nodo","title":"Enviar a un nodo","text":"<p>Bloque para enviar datos (en forma de trama de texto) a un nodo remoto con una longitud m\u00e1xima de 250 caracteres.</p> <p>Muy importante</p> <p>El nodo debe estar previamente emparejado.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque enviar a nodo remoto</p> <p></p>"},{"location":"program/espnowAB/#enviar-a-todos","title":"Enviar a todos","text":"<p>Bloque para enviar datos (en forma de trama de texto) a todos los nodos emparejados con una longitud m\u00e1xima de 250 caracteres.</p> <p>Muy importante</p> <p>Todos los nodos deben estar previamente emparejados.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque enviar a todos</p> <p></p>"},{"location":"program/espnowAB/#ultimo-envio-correcto","title":"\u00bf\u00daltimo envio correcto?","text":"<p>Bloque para comprobar si el \u00faltimo envio de datos se ha realizado correctamente. Con el podemos detectar si ha habido acuse de recibo del nodo remoto o no.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> \u00bf\u00daltimo envio correcto?</p> <p></p>"},{"location":"program/espnowAB/#evento-al-recibir-datos","title":"Evento al recibir datos","text":"<p>Evento que se produce cuando se reciben datos de un nodo remoto.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Evento al recibir datos</p> <p></p> <p>Dentro del evento podemos utilizar el bloque de la imagen siguiente para tener los valores v\u00e1lidos tanto de los datos recibidos como la direcci\u00f3n MAC del nodo remitente.</p> <p> <p> Datos recibidos</p> <p></p> <p>Importante</p> <p>El evento \u201cAl recibir datos\u201d se puede bloquear internamente si realizamos esperas bloqueantes en nuestro programa. Por tanto evitar usar el bloque \u201cesperar\u201d, y en su lugar utilizar el \u201cejecutar cada\u201d u otros esquemas de programaci\u00f3n similares no bloqueantes.</p>"},{"location":"program/inicio/","title":"Inicio a la programaci\u00f3n de micro:STEAMakers con arduinoblocks","text":"<p>El tipo de proyecto a escoger lo vemos en la imagen siguiente:</p> <p> <p> Tipo de proyecto ESP32 microSTEAMakers</p> <p></p> <p>En los bloques vamos a tener disponible la categoria micro:STEAMakers siguiente:</p> <p> <p> Categoria de bloques microSTEAMakers</p> <p></p>"},{"location":"program/inicio/#sensores-integrados","title":"Sensores integrados","text":"<p>En esta categoria aparecen todos los sensores disponibles por defecto en la placa. Vemos la lista en la imagen siguiente:</p> <p> <p> Sensores integrados</p> <p></p> <p>A continuaci\u00f3n se describen brevemente los bloques de la categoria.</p> <ul> <li>Bloque Pulsador pulsado para saber el estado de los pulsadores de manera individual o ambos al mismo tiempo.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Pulsador se ha pulsado para analizar el evento de si se ha pulsado o se ha soltado el pulsador A o el B.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Pulsador t\u00e1ctil para comprobar si el pulsador t\u00e1ctil se ha activado.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Nivel de luz que permite medir la luminosidad ambiente bien en porcentaje o bien en valor num\u00e9rico entre 0 y 4095.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Temperatura y humedad para medir los citados par\u00e1metros directamente desde la placa ESP32 micro:STEAMakers.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Nivel de sonido para obtener el nivel de ruido ambiente bien en porcentaje o bien en valor num\u00e9rico entre 0 y 4095.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Accel+Gyro (MPU6050) devuelve los datos del giroscopio integrado en el MPU6050 referentes a aceleraci\u00f3n y giro en los tres ejes X, Y, Z.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Medidor de energia para medir el consumo que est\u00e1 teniendo nuestra placa.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Medidor de energia &gt; Reset Wh=0 para resetear el sensor.</li> </ul> <p> <p></p> <p></p>"},{"location":"program/inicio/#actuadores","title":"Actuadores","text":"<p>Como actuador tenemos el Buzzer o zumbador y los bloques disponibles son los siguientes:</p> <p> <p> Actuadores</p> <p></p> <p>Los bloques que vemos son los cl\u00e1sico para reproducir tonos o para reproducir melodias.</p> <ul> <li>El bloque zumbador siguiente nos permite reproducir durante el tiempo que indiquemos (expresado en milisegundos) en Ms la frecuencia especificada en Hz.</li> </ul> <p> <p> Bloque Ms Hz</p> <p></p> <ul> <li>Al bloque anterior le podemos indicar como frecuencia directamente cualquiera de los tonos de la nota \"La\" central que tiene una frecuencia de 440 Hz.</li> </ul> <p> <p> Bloque Ms Hz con tonos</p> <p></p>"},{"location":"program/inicio/#neomatrix","title":"NeoMatrix","text":"<p>Los bloques para la matriz de 5x5 LEDs RGB los vemos en la imagen siguiente:</p> <p> <p> Bloques NeoMatrix</p> <p></p> <p>Los bloques de inicializaci\u00f3n general son los tres que vemos en la imagen siguiente:</p> <p> <p> Bloques de inicializaci\u00f3n de la matriz</p> <p></p> <p>El bloque Bitmap nos permite dibujar directamente en la matriz escogiendo pixel a pixel el color de la paleta que se muestra. En la animaci\u00f3n siguiente vemos un primer ejemplo de dibujar una carita con los labios rojos, los ojos azules y el pelo rubio.</p> <p> <p> Ejemplo carita</p> <p></p> <p>Veamos ahora los bloques de texto. Los disponibles los vemos en la imagen siguiente:</p> <p> <p> Bloques de texto</p> <p></p> <p>En el tema de texto con scroll debemos saber que ese no bloquea el funcionamiento del programa por lo que hay un bloque denominado \u00bftexto desplazandose? para saber si el scroll est\u00e1 en proceso. El par\u00e1metro Ms se refiere a la velocidad del desplazamiento o scroll medida en milisegundos. Un sencillo ejemplo como el de la imagen siguiente no aclara el uso de esto.</p> <p> <p> Ejemplo scroll de texto</p> <p></p> <p>En el ejemplo siguiente vemos el uso b\u00e1sico del resto de bloques de la categoria. Observamos como posicionar una \"H\" en una coordenada, mostrar un texto, rellenar de un color, poner los pixeles de las esquinas de dos colores en diagonal, sibujar una X con dos l\u00edneas cruzadas blancas, crear dos rect\u00e1ngulos, uno con relleno y el otro sin el y dibujar un circulo.</p> <p> <p> Ejemplo bloques NeoMatrix</p> <p></p> <p>En la animaci\u00f3n siguiente podemos observar el funcionamiento del programa.</p> <p> <p> Funcionamiento del ejemplo bloques NeoMatrix</p> <p></p> <p>El recuadro blanco es una especie de filtro impreso en 3D para que los LEDs deslumbren menos a la c\u00e1mara. Aunque su dise\u00f1o es muy simple aqu\u00ed dejo el archivo STL por si te interesa.</p>"},{"location":"program/inicio/#tarjeta-microsd","title":"Tarjeta microSD","text":"<p>Los bloques para tarjeta SD disponibles los vemos en la imagen siguiente:</p> <p> <p> Tarjeta SD</p> <p></p> <p>Son los t\u00edpicos de iniciar, leer y escribir en tarjetas SD y que se describen en el apartado Tarjeta SD del arduinoblocks FreeBook - ES.</p> <p>Para almacenar datos en una tarjeta microSD y posteriormente abrirlos en una hoja de c\u00e1lculo existe un bloque denominado 'Crear texto CSV', que encontramos en el men\u00fa 'Texto', que nos permite unir varios datos en formato CSV utilizando un caracter delimitador.</p> <p> <p> Bloque crear texto CSV</p> <p></p>"},{"location":"program/iotAB/","title":"IoT con arduinoblocks","text":"<p>Como se puede ver en la secci\u00f3n Teor\u00eda b\u00e1sica de IoT el broker que vamos a utilizar utiliza un dispositivo MQTT para trabajar, por lo que en arduinoblocks necesitamos bloques MQTT que se comuniquen con el MQTT del broker.</p> <p>Antes de entrar en los bloques de programaci\u00f3n tenemos que saber que el broker MQTT de Thinspeak esta en la direcci\u00f3n mqtt3.thingspeak.com y el puerto que utiliza para comunicarse es el 1883:</p> <p>Servidor MQTT de Thingspeak</p> <p>Direcci\u00f3n: mqtt3.thingspeak.com Puerto: 1883</p>"},{"location":"program/iotAB/#bloques-mqtt","title":"Bloques MQTT","text":"<p>Los bloques MQTT est\u00e1n explicados en en el libro online Arduinoblocks free edition y aqu\u00ed veremos muy brevemente los que vamos a utilizar:</p> <ul> <li>Iniciar WiFi. Aunque no es un bloque MQTT lo primero que debemos hacer es dar conectividad WiFi a nuestra placa para poder comunicarnos via MQTT con el broker.</li> </ul> <p> <p> Conectar a red WiFi</p> <p></p> <ul> <li>Iniciar. La primera tarea a realizar ser\u00e1 iniciar el broker con los datos anteriores y las credenciales que nos ha suministrado Thingspeak.</li> </ul> <p> <p> Iniciar broker</p> <p></p> <ul> <li>Publicar. Para enviar datos a los campos del canal creado.</li> </ul> <p> <p> Publicar en el broker</p> <p></p> <ul> <li>Thingspeak publish. Define la parte \"Tema\" del bloque anterior. Tenemos que indicarle el ID del canal y el campo en el que lo haremos. Tengase en cuenta que Thingspeak ordenada los campos de field1 ... field8 de manera invariable por lo que tenemos nosotros que saber que variable hemos puesto en cada campo.</li> </ul> <p> <p> Thingspeak publish</p> <p></p> <p>Publicar campo a campo</p> <p>Con los bloques anteriores ya podemos trabajar perfectamente enviando de uno en uno los datos al broker por MQTT. En cuentas gratuitas debemos tener presente que debemos dejar transcurrir un tiempo de 15 segundos entre envios.</p>"},{"location":"program/iotAB/#ejemplo-de-subida-dato-a-dato","title":"Ejemplo de subida dato a dato","text":"<p>Vamos a ver un ejemplo de envio de datos al canal. Vamos a enviar el nivel de luz y la humedad que dan los sensores que monta la placa micro:STEAMakers. El programa es el siguiente:</p> <p> <p> Ejemplo de subida dato a dato</p> <p></p> <p>Mas adelante veremos diferentes formas de visualizar los resultados, pero por ahora, en el canal tenemos lo siguiente:</p> <p> <p> Resultados de ejemplo de subida dato a dato</p> <p></p>"},{"location":"program/iotAB/#mas-bloques-mqtt","title":"Mas bloques MQTT","text":"<p>A veces puede resultar tedioso y lento el subir los datos uno a uno. En arduinoblocks existe la posibilidad de utilizar los bloques \"multi publish\" que realizan una publicaci\u00f3n de todos los datos en una sola subida.</p> <ul> <li>Thingspeak multi publish con ID. Para publicar a partir del ID del canal.</li> </ul> <p> <p> Thingspeak multi publish con ID</p> <p></p> <ul> <li>Thingspeak multi publish Values. El bloque concatena los valores a publicar como una cadena y los sube de una sola vez. La parte difuminada del bloque indica claramente que debemos usarlo en conjunto con el siguiente que vamos a ver: Thingspeak multi publish Field</li> </ul> <p> <p> Thingspeak multi publish Values</p> <p></p> <ul> <li>Thingspeak multi publish Field. Permite definir el valor y el campo en el que se publicar\u00e1. Debemos usarlo en conjunto con el anterior: Thingspeak multi publish Values</li> </ul> <p> <p> Thingspeak multi publish Field</p> <p></p> <p>En la actividad A04-Temperatura y Humedad con Thingspeak se utilizan estos bloques.</p>"},{"location":"program/mesh/","title":"WiFiMesh","text":"<p>El contenido de esta secci\u00f3n est\u00e1 basado en el apartado WiFiMesh del manual ESP32 STEAMakers - nuevos bloques - WiFi \u00b7 IoT \u00b7 WifiMesh de arduinoblocks.</p> <p>\u00a1\u00a1 ADVERTENCIA !!</p> <p>WiFiMesh presente, en algunas ocasiones, un problema, y es se pierden m\u00e1s mensajes de los que deber\u00edan, y a veces a unos les llegan y a otros no, o incluso no le llegan a ning\u00fan nodo. Es posible que en el momento que leas esto los bloques para WiFiMesh de arduinoblocks est\u00e9n considerados como obsoletos (deprecated) y por lo tanto est\u00e9n desabilitados. Pero las mismas o similares actividades se pueden realizar con ESPNOW.</p> <p>WifiMesh implementa una malla WiFi de dispositivos descentralizada, de manera que todas las placas micro:STEAMakers estar\u00e1n interconectadas de forma sencilla y sin necesidad de una red WiFi previa o punto de acceso (la crean ellas mismas autom\u00e1ticamente). Cada dispositivo puede enviar mensajes al resto y recibir de cualquiera (\u00a1hablan todas con todas!)</p> <p> <p> Malla WiFiMesh de tres nodos</p> <p></p> <p>En arduinoblocks el proceso de intercambio de mensajes entre placas ESP32 micro:STEAMakers es muy f\u00e1cil de utilizar. No necesitamos una red previa donde conectarnos, los propios dispositivos crean un red propia entre ellos para intercambiar informaci\u00f3n.</p> <p>Todos los dispositivos (nodos) que vayan a formar parte de la red Mesh (malla) deben compartir la misma configuraci\u00f3n de nombre, clave de la red y puerto.</p> <p>Analizamos en este mismo apartado los bloques de arduinoblocks que tenemos disponibles para WiFiMesh.</p> <p> Bloque Descripci\u00f3n breve Crea o une el dispositivo a una red \"mesh\" Enviar un mensaje a todos los nodos de la red: env\u00eda un mensaje a todos los nodos conectados a nuestra red \u201cmesh\u201d Enviar un mensaje a todos los nodos de la red: env\u00eda un mensaje y datos (opcionales) a todos los nodos conectados a nuestra red \u201cmesh\u201d Recibi mensajes de otros nodos (evento de recepci\u00f3n), este bloque recibe todos los mensajes y ya dentro podr\u00e9 determinar el mensaje y los datos recibidos Recibi mensajes de otros nodos (evento de recepci\u00f3n), este bloque recibe todos los mensajes y ya dentro podr\u00e9 determinar el mensaje Bloque asociado al de \"Mensaje recibido\" para obtener el mensaje recibido Bloque asociado al de \"Mensaje recibido\" para obtener los datos asociados al mensaje recibido <p></p> <p>En la imagen siguiente se describen los beneficios de ESP-WiFi-Mesh seg\u00fan Espressif, la empresa creadora de los microcontroladores ESP32-WROOM:</p> <p> <p> Beneficios de ESP-WiFi-Mesh</p> <p></p>"},{"location":"program/server/","title":"Servidor web","text":"<p>Nos basamos en el documento ESP32 STEAMakers. nuevos bloques. WiFi \u00b7 IoT \u00b7 WifiMesh dado que al portar un procesador ESP32, la micro:STEAMakers tiene capacidades WiFi, lo que nos va a permitir que la placa actue como servidor o como cliente web.</p> <p>Los bloques disponibles son los siguientes:</p> <p> <p> Bloques HTTP Server</p> <p></p> <p>En el submen\u00fa HTML tenemos disponibles bloques que nos permiten dar un poco de formato HTML a la web:</p> <p> <p> Bloques HTML</p> <p></p> <p>Para nuestros programas vamos a necesitar bloques WiFi de los que vemos a continuaci\u00f3n:</p> <p> <p> Bloques WiFi</p> <p></p>"},{"location":"program/server/#peticiones-http","title":"Peticiones HTTP","text":"<p>Simplemente vamos a extraer del manual online la forma en que se realiza una petici\u00f3n HTTP.</p> <p>Peticiones HTTP</p> <p>Las peticiones HTTP las haremos normalmente desde un navegador, poniendo la IP de nuestro dispositivo en la barra de direcciones con el protocolo http. Por ejemplo si nuestro dispositivo tiene la direcci\u00f3n IP 192.168.4.4: http://192.168.4.4.</p> <p>El formato de la URL que podemos solicitar a nuestra ESP32 STEAMakers es:</p> <p> http://direccionip/accion?parametros </p> <p>La direcci\u00f3n IP es la que tenga el dispositivo.</p> <p>La acci\u00f3n (opcional) ser\u00e1 la web o comando que queremos pedirle al servidor. En un servidor web real (este es real, me refiero a uno tradicional tipo Apache, etc\u2026) ser\u00eda el documento del servidor que estamos solicitando (ejemplo: index.html, index.php , guardardatos.jsp, \u2026.)</p> <p>Los par\u00e1metros (en este caso par\u00e1metros tipo GET) son datos adicionales que le damos al servidor normalmente como informaci\u00f3n extra a la acci\u00f3n solicitada. Los par\u00e1metros GET son opcionales, siempre van despu\u00e9s del s\u00edmbolo \u201c?\u201d y se forman con pares \u201cclave=valor\u201d separados entre ellos por \u201c&amp;\u201d.</p>"},{"location":"program/thinspeak/","title":"Teor\u00eda b\u00e1sica de IoT","text":""},{"location":"program/thinspeak/#que-es-la-internet-de-las-cosas","title":"\u00bfQu\u00e9 es la Internet de las Cosas?","text":"<p>La expresi\u00f3n \u201cInternet de las cosas\u201d o IoT (del ingl\u00e9s, Internet of Things), internet de todas las cosas o internet en las cosas, hace referencia al uso que hacen de Internet los dispositivos conectados (las cosas) para comunicarse sin intervenci\u00f3n humana directa. Tambi\u00e9n se usa el t\u00e9rmino IoT para referirse al conjunto de estos dispositivos conectados comunicando \u201centre m\u00e1quinas\u201d (M2M) sin requerir interacci\u00f3n humana. No existe una Internet especial o diferente para \u201clas cosas\u201d, en principio, se opera con las mismas redes que en otros usos de Internet. En la imagen siguiente se grafica la conexi\u00f3n de elementos con la nube a trav\u00e9s de la red.</p> <p> <p> Conexi\u00f3n de elementos IoT con la nube</p> <p></p> <p>El IoT sirve para monitorizaci\u00f3n y control electr\u00f3nico y toma de decisiones inteligente. Es decir, conectar dispositivos a Internet permite enviar y recibir informaci\u00f3n usando una infraestructura global y as\u00ed poder monitorizar y/o controlar autom\u00e1ticamente y a distancia multitud de contextos. Por ejemplo, en entornos urbanos (ciudades inteligentes) se puede conocer la actividad humana, del medio ambiente, del tr\u00e1fico\u2026 tanto para informar de su estado (como las plazas de aparcamiento disponibles, la densidad o velocidad de la circulaci\u00f3n, la contaminaci\u00f3n\u2026) como para tomar decisiones de forma manual o autom\u00e1tica para optimizar los recursos disponibles (iluminaci\u00f3n, riego de jardines, funcionamiento de los sem\u00e1foros\u2026)</p>"},{"location":"program/thinspeak/#trabajo-con-placas-tradicionales","title":"Trabajo con placas tradicionales","text":"<p>Para conectar a la red las placas tipo Arduino, sus clones o basadas en el mismo usaremos los m\u00f3dulos ESP8266. El ESP8266 es un chip de bajo costo Wi-Fi que contiene su propio microcontrolador, un Tensilica L106 de 32-bit. Es un chip de bajo bajo coste y reducido tama\u00f1o. El chip ESP8266 forma parte de multitud de m\u00f3dulos comerciales a trav\u00e9s de diferentes soluciones con distintas funciones, pines, tama\u00f1os y precios.</p> <p> <p> Modelos ESP</p> <p></p> <p>El m\u00e1s simple es el ESP-01, que solo dispone de 2 puertos digitales y necesita un adaptador USB para poder ser programado. Hay otros muchos sistemas como por ejemplo la placa ESP32 STEAMakers, ESP-12E de ESP8266, la placa de desarrollo NodeMCU, tambi\u00e9n basada en el ESP-12E, Adem\u00e1s, hay placas con WiFi que usan otros chip WiFi diferentes, como la Arduino MKR1000.</p> <p> ESP32 STEAMakers ESP-12E NodeMCU de Keyestudio Arduino MKR1000 <p></p>"},{"location":"program/thinspeak/#modulo-esp8266-esp-01","title":"M\u00f3dulo ESP8266 ESP-01","text":""},{"location":"program/thinspeak/#introduccion","title":"Introducci\u00f3n","text":"<p>El m\u00f3dulo WiFi ESP-01 es uno de las m\u00e1s populares y econ\u00f3micos, pese a no ser el m\u00e1s potente ni vers\u00e1til. Actualmente, otros modelos como la ESP-12 o el el ESP32 se est\u00e1n integrando en la mayor\u00eda de placas de desarrollo, cobrando un peso e importancia mucho mayor. Sin embargo, podemos asociar nuestro peque\u00f1o ESP-01 a, por ejemplo, una placa UNO, con el \u00fanico fin de darle conectividad WiFi.</p> <p>El ESP-01 trae instalado una versi\u00f3n de firmware con la que podemos comunicarnos con el ESP8266 mediante comandos AT (veremos a continuaci\u00f3n algunos de ellos) a trav\u00e9s del puerto serie. Este tipo de comunicaci\u00f3n nos va a permitir crear un puente entre la placa TdR STEAM y el ESP8266, consiguiendo as\u00ed conectar a una red WiFi y dar un primer paso de gigantes en el mundo IoT.</p> <p>Veamos el aspecto del ESP-01 y algunas de sus caracter\u00edsticas:</p> <p> Imagen ESP-01 Descripci\u00f3n - ESP8266 es el microcontrolador del m\u00f3dulo ESP-01.- La memoria flash es la BG25Q80A- Los LEDs informan de si est\u00e1 encendido o no y de la transmisi\u00f3n de datos (Tx y Rx).- La antena WiFi para la conexi\u00f3n a una internet.- Los pines permiten conectar alimentaci\u00f3n, sensores, \u2026Toda la informaci\u00f3n en el datasheet del fabricante <p></p> <p>Los pines est\u00e1n distribuidos de la siguiente forma:</p> <p> Pines ESP-01 Descripci\u00f3n 1 - GND2 - Pin digital n\u00famero 23 - Pin digital n\u00famero 04 - RXD es el pin por donde se van a recibir los datos del puerto serie. Trabaja a 3,3 V. Tambi\u00e9n puede ser el pin digital GPIO3 5 - TXD es el pin por donde se van a transmitir los datos del puerto serie. Trabaja a 3,3 V. Tambi\u00e9n puede ser el pin digital GPIO1 6 - CH_PD es el pin para apagar y encender el ESP-01: si lo ponemos a 0 V (LOW) se apaga, y a 3,3 V (HIGH) se enciende.7 - RESET pin a 0V resetea el ESP-01- Vcc es el pin de alimentaci\u00f3n. Funciona a 3,3V y admite un m\u00e1ximo de 3,6 V. La corriente suministrada debe ser mayor que 200 mA. <p></p> <p>GPIO (del ingl\u00e9s, General Purpose Input Output) son entradas o salidas de prop\u00f3sito general, o sea pines digitales.</p> <p>El ESP-01 soporta comunicaci\u00f3n I2C, por lo que, pese a tener solo un par de GPIOs, podemos conectarle multitud de sensores y actuadores a trav\u00e9s del mencionado bus de datos I2C.</p>"},{"location":"program/thinspeak/#programacion","title":"Programaci\u00f3n","text":"<p>El ESP-01 dispone de un microcontrolador y una memoria donde poder almacenar programas, luego es un dispositivo programable en si mismo. Cargar programas en el dispositivo es algo mas complejo de lo que hemos visto hasta ahora dado que tiene dos modos de operaci\u00f3n, el modo flash o de ejecuci\u00f3n y el modo UART o de grabaci\u00f3n y debemos ser nosotros quienes activemos un modo u otro, cosa que hasta ahora el entorno ArduinoBlocks ha sido el encargado de hacerlo. Los modos de operaci\u00f3n se configuran a trav\u00e9s de los puertos GPIO0 y GPIO2.</p> <p>Para programar el ESP-01 hay que usar los pines Rx y Tx para transmitir los datos a la memoria Flash, donde se almacenar\u00e1 el sketch o programa.</p> <p>En las placas de control los pines Rx y Tx est\u00e1n en los pines D0 y D1 respectivamente y tambi\u00e9n son los que se utilizan para cargar programas a una velocidad de 115200 baudios, as\u00ed que si estos pines los ocupamos con el ESP8266 no podremos cargar programas en nuestra placa. Ahora bien, es posible utilizar otros pines para usar WiFi y evitar este problema, pero el resto de pines digitales solamente trabajan a 9600 baudios y el ESP-01 por defecto viene a 115200, luego para utilizarlo en pines distintos a los D0 y D1 de la placa tendremos que reprogramarlo para que la velocidad sea de 9600 baudios.</p> <p>Aunque sea bastante t\u00e9cnico debemos exponer c\u00f3mo configurar los dos modos de funcionamiento de forma breve.</p> <ul> <li> <p>Modo de funcionamiento UART. Para cargar un programa en el ESP-01 debemos o bien encenderlo o bien resetearlo pero teniendo los siguientes estados de pines:GPIO0 = 0 (nivel bajo o LOW = 0 V).</p> </li> <li> <p>GPIO2 = 1 (nivel alto o HIGH = 3,3 V = Vcc).</p> </li> <li>Recordemos siempre que el ESP8266 trabaja con niveles l\u00f3gicos de 3,3 V.</li> </ul> <p>El pin GPIO2 est\u00e1 por defecto a HIGH, ya que tiene un pull-up interno, por lo que podemos dejarlo simplemente desconectado.</p> <ul> <li> <p>Modo de funcionamiento Flash. Para ejecutar un programa en el ESP-01 una vez cargado debemos tener la siguiente configuraci\u00f3n de pines:</p> </li> <li> <p>GPIO0 = 1</p> </li> <li>GPIO2 = 1</li> </ul> <p>Tanto el GPIO0 como el GPIO2 est\u00e1n por defecto a HIGH, ya que ambos tienen un pull-up interno, por lo que podemos dejarlos simplemente desconectados.</p> <p>En este momento reflexionamos sobre el uso de Rx y Tx ya que si los estamos utilizando para cargar el programa en la placa y GPIO0 y GPIO2 para indicar el modo de trabajo \u00bfc\u00f3mo conectamos los sensores y actuadores al ESP-01?. Veamos:</p> <ol> <li>Rx y Tx los utilizamos para cargar el programa. Una vez finalizada la carga los podemos utilizar como pines de entrada y salida digitales.</li> <li>Los modos de trabajo se indican cuando se resetea o reinicia la placa. Una vez que tengamos el modo de ejecuci\u00f3n podemos conectar cualquier componente a estos pines.</li> </ol> <p>Los programas los podemos subir a nuestro ESP-01 mediante el IDE de Arduino o por medio de un convertidor USB-serie igual o similar al de la imagen siguiente:</p> <p> <p> Conversor USB-serial</p> <p></p> <p>Se trata de un escudo o shield para el m\u00f3dulo WiFi ESP-01 que est\u00e1 provisto de un chip conversor de USB a puerto serie, en concreto el CH340G. El proceso de reprogramaci\u00f3n con esta placa es bastante sencillo pero requiere de comandos AT que pasamos a introducir antes de continuar.</p>"},{"location":"program/thinspeak/#comandos-at-en-el-esp8266","title":"Comandos AT en el ESP8266","text":"<p>El ESP-01 viene por defecto con el firmware AT ai-thinker V0.9.2.4. Los m\u00f3dems ven\u00edan con un conjunto de comandos que permiten que nos podamos comunicar con ellos para configurarlos y que lo podamos hacer a trav\u00e9s del puerto serie de ordenador al que est\u00e1n conectados. A estos comandos se les llama AT (de attention).</p> <p>Despu\u00e9s de cada comando AT, el ESP8266 espera los caracteres especiales de nueva linea  para ejecutar el comando. El car\u00e1cter no imprimible CR (del ingl\u00e9s, Carriage Return) significa retorno de carro y LF ( del ingl\u00e9s, Line Feed) es salto de l\u00ednea. El origen de la nomenclatura est\u00e1 en las m\u00e1quinas de escribir. <p>En el enlace tenemos un pdf de la empresa Espressif Systems con el juego de comandos AT para el ESP8266.</p> <p>En la tabla siguiente damos un resumen de los comandos con una informaci\u00f3n ampliada de los que mas vamos a usar para la configuraci\u00f3n inicial que necesitamos.</p> <p> <p> Unos comandos AT</p> <p></p>"},{"location":"program/thinspeak/#preparacion-del-modulo-esp-01","title":"Preparaci\u00f3n del m\u00f3dulo ESP-01","text":"<p>Primero conectamos el m\u00f3dulo ESP8266 a la shield USB-serie y este a su vez a un puerto USB de nuestro ordenador. Nos aseguramos de que el interruptor est\u00e1 en modo Flash Boot.</p> <p>Entramos en ArduinoBlocks con ArduinoBlocks-Connector en funcionamiento, realizamos un refresco de la lectura del puerto para que detecte a la shield del m\u00f3dulo WiFi si es necesario, abrimos la consola, escogeremos la opci\u00f3n de 115200 en baudrate y tambi\u00e9n la de NL + LF (NL + LF es igual que CR + LF) para comunicarnos con el m\u00f3dulo WiFi. Hacemos clic en Conectar y conectamos la consola, escribimos \u201cAT\u201d en ella y clic en enviar. La situaci\u00f3n es la de la imagen siguiente:</p> <p> <p> Comando AT en consola arduinoblocks</p> <p></p> <p>Si todo es correcto debe respondernos \u201cOK\u201d. Si responde algo sin sentido o no contesta, significa que est\u00e1 configurado en alguna otra velocidad. En este segundo caso deberemos cambiar la opci\u00f3n de baudrate y repetir la operaci\u00f3n con diferentes velocidades hasta que nos responda \u201cOK\u201d. La situaci\u00f3n correcta en la consola de comandos es la siguiente:</p> <p> <p> Respuesta al comando AT</p> <p></p> <p>Una vez que nos responda \u201cOK\u201d, le enviamos el texto \u201cAT+UART_DEF=9600,8,1,0,0\u201d y nos debe responder otra vez \u201cOK\u201d.</p> <p> <p> Comando AT para establecer velocidad a 9600 baudios</p> <p></p> <p>Con esto hemos cambiado la velocidad a 9600 baudios mediante el comando AT+UART_DEF que nos permite cambiar la definici\u00f3n a 9600 baudios, con 8 bits de datos, 1 bit de parada, sin paridad y sin habilitar el control de flujo.</p> <p>Una vez que hemos configurado el m\u00f3dulo WiFi a la velocidad que nos interesa debemos crear un canal en un servidor MQTT donde enviar los datos y visualizarlos. Esto lo vamos a hacer a trav\u00e9s de la web de Thingspeak, pero antes de nada vamos a describir que es MQTT.</p> <p>Para saber mas acerca de la reprogramaci\u00f3n de la velocidad de comunicaci\u00f3n con ESP8266 visita el enlace: Reprogramar la velocidad de comunicaci\u00f3n del ESP8266.</p>"},{"location":"program/thinspeak/#introduccion-al-iot-a-traves-de-mqtt","title":"Introducci\u00f3n al IoT a trav\u00e9s de MQTT","text":"<p>Si queremos trabajar en tareas de IoT debemos de utilizar alg\u00fan protocolo de comunicaci\u00f3n y hoy por hoy el principal es MQTT, pero antes de citar protocolos vamos a tratar algunos conceptos necesarios. Un protocolo de comunicaci\u00f3n no es otra cosa que una serie de normas definidas para que dos o m\u00e1s dispositivos puedan comunicarse entre si de forma comprensible para ambos.</p> <ul> <li>Requisitos del IoT</li> </ul> <p>Estamos bastante acostumbrados a realizar un tipo de comunicaci\u00f3n denominada M2M (machine-to-machine) utilizando internet, pero cuando trabajamos en IoT debemos establecer una serie de requisitos que hacen que la comunicaci\u00f3n M2M no sea la mas adecuada. Algunos de estos requisitos son:</p> <ul> <li>Cantidad: se puede llegar a tener un gran n\u00famero de dispositivos diferentes, desde sensores, actuadores, servidores, etc.</li> <li>Escalabilidad: los sistemas deben permitir a\u00f1adir o eliminar dispositivos sin que el sistema global resulte afectado.</li> <li>Variedad: normalmente necesitaremos que el sistema funcione con diferentes sistemas operativos, lenguajes de programaci\u00f3n y el mayor n\u00famero posible de dispositivos.</li> <li>Simultaneidad: gran cantidad de comunicaciones simultaneas, lo que requiere respuestas r\u00e1pidas para lo que es necesario que los mensajes transmitidos sean lo mas cortos posibles.</li> <li>Seguridad: internet no es un sitio muy seguro y estos dispositivos van a estar conectados a internet controlando dispositivos f\u00edsicos.</li> <li>Accesibilidad: tendremos que trabajar en condiciones muy variadas en lo que se refiere a ancho de banda, firewall, direccionamiento,\u2026</li> </ul> <p>La soluci\u00f3n mas com\u00fan consiste en disponer un servidor denominado \u2018broker\u2019, o a veces \u2018Router\u2019, que ser\u00e1 el que reciba los mensajes de los dispositivos emisores y los distribuir\u00e1 a los receptores.</p> <p> <p> Broker</p> <p></p> <p>El broker va a tener una direcci\u00f3n IP fija y ser\u00e1 accesible para todos los dispositivos, puede mantener un registro de los dispositivos conectados, recibir y distribuir mensajes y establecer filtros de destinatarios. Esto permite algo fundamental, y es que cada dispositivo no dependa del resto de dispositivos.</p> <p>Veamos algunos conceptos que nos permitan entender las infraestructuras de los servicios IoT:</p> <ul> <li>Message Queue o cola de mensajes. En este tipo el broker genera una cola de mensajes \u00fanica para cada uno de los clientes que inician la suscripci\u00f3n.</li> <li>Message Service o servicio de mensajer\u00eda. En este tipo el broker distribuye inmediatamente los mensajes filtrados por alg\u00fan criterio a los clientes conectados. A diferencia de Message Queue, los mensajes entregados mientras el cliente est\u00e1 desconectado se pierden. </li> <li>Publish/Susbcribe (PubSub). Se trata de un sistema de mensajer\u00eda donde el 'Subscriber' informa al broker de que quiere recibir un tipo de mensajes y el 'Publisher' entonces puede publicarlos. </li> <li>Router Remoder Procedure Calls (RRPC). Se trata de la ejecuci\u00f3n remota de procedimientos donde 'Callee' comunica al broker que proporciona un procedimiento y el 'Caller', puede llamar a este procedimiento.</li> </ul> <p>Algunos de los protocolos para IoT son:</p> <ul> <li>MQTT (del ingl\u00e9s Message Queuing Telemetry Transport) es un protocolo PubSub de servicio de mensajer\u00eda que act\u00faa sobre TCP. Es ligero y f\u00e1cil de implementar resultando apropiado para dispositivos de baja potencia, tan habituales en IoT. TCP es un protocolo de control de transmisi\u00f3n (del ingl\u00e9s, Transmission Control Protocol) fundamental en Internet.</li> <li>AMQP (Advanced Message Queuing Protocol) es un protocolo PubSub de cola de mensajes que asegura la confiabilidad e interoperabilidad necesaria en aplicaciones corporativas.</li> <li>STOMP (Streaming Text Oriented Messaging Protocol). Es un protocolo sencillo que emplea HTTP y mensajes de texto.</li> <li>XMPP (Extensible Messaging and Presence Protocol). Es un protocolo abierto basado en XML dise\u00f1ado para aplicaciones de mensajer\u00eda instant\u00e1nea.</li> <li>WAMP (Web Application Messaging Protocol). Es un protocolo abierto que se ejecuta sobre WebSockets, y provee tanto aplicaciones de PubSub como RRPC.</li> <li>CoAP (Constrained Application Protocol) es un protocolo pensado para emplearse en dispositivos de IoT de baja capacidad.</li> </ul> <p>MQTT <p>Dentro de una arquitectura de MQTT, es muy importante el concepto topic (tema en espa\u00f1ol) ya que la comunicaci\u00f3n se realiza a trav\u00e9s de topics debiendo estar los emisores y receptores subscritos a un topic com\u00fan para poder establecer la comunicaci\u00f3n. Este tipo de arquitectura permite que la comunicaci\u00f3n pueda ser de uno a uno o de uno a muchos. Los topics tienen estructura jer\u00e1rquica pudiendo establecer relaciones padre-hijo de manera que cuando nos suscribimos a un topic padre podemos recibir tambi\u00e9n la informaci\u00f3n de sus hijos. En un ejemplo lo podemos ver m\u00e1s claramente.</p> <p> <p> Estructura jerarquica de un topic</p> <p></p> <p>Un topic se representa mediante una cadena con las jerarquias separadas por /. Por ejemplo: - Vivienda/Planta baja/Cocina/Arduino/Luz - Vivienda/Planta alta/Dorm.1/Arduino/Temperatura.</p> <p>De esta forma podemos suscribirnos a un topic concActividad o a varios, por ejemplo: - Un topic: Vivienda/Planta baja/Cocina/Arduino/Luz - Varios topics: Vivienda/Planta baja/#</p> <p>Existen b\u00e1sicamente tres tipos de brokers, los privados, los p\u00fablicos y los locales. A continuaci\u00f3n citamos alguno de los m\u00e1s utilizados:</p> <p>a.- Private MQTT Broker: solamente los dispositivos que establezcamos pueden publicar o suscribirse a un topic. Se utiliza en producci\u00f3n y prototipado. Algunos de ellos son:</p> <ul> <li>Azure de Microsoft.</li> <li>AWS de Amazon.</li> <li>CloudMQTT disponible en: https://www.cloudmqtt.com/plans.html.</li> <li>ThingSpeak de Mathworks (MATLAB).</li> </ul> <p>b.- Public MQTT Broker: cualquier dispositivo puede publicar y suscribirse a topics. Algunos de ellos son:</p> <ul> <li>Eclipse</li> <li>Mosquitto</li> <li>HiveMQ: Enlace - Direcci\u00f3n del broker</li> <li>Flespi</li> <li>Dioty</li> <li>Fluux</li> <li>Thingspeak</li> </ul> <p>Si queremos instalar nuestro propio broker en una raspberry o PC, sin duda Mosquito es la opci\u00f3n m\u00e1s extendida.</p>"},{"location":"program/thinspeak/#creacion-de-un-canal-en-un-servidor-mqtt","title":"Creaci\u00f3n de un canal en un servidor MQTT","text":"<p>En nuestro caso vamos a utilizar Thingspeak en su versi\u00f3n p\u00fablica. Lo primero que debemos hacer es crear una cuenta, para lo que clicamos en Sign Up. Seguidamente, introducimos un correo electr\u00f3nico v\u00e1lido y el resto de datos que nos pide. Lo vemos en la imagen siguiente:</p> <p> <p> Pagina inicial de Thingspeaks</p> <p></p> <p>Debemos aceptar que use la direcci\u00f3n de correo electr\u00f3nico para nuestra cuenta de MathWorks, como se ve en la imagen siguiente:</p> <p> <p> Aceptaci\u00f3n a Mathwork</p> <p></p> <p>Tras esto recibiremos un correo en la direcci\u00f3n que hemos dado para confirmar la creaci\u00f3n de la cuenta y confirmarla. Debemos ver algo similar a la imagen siguiente:</p> <p> <p>   Confirmacion aceptaci\u00f3n cuenta correo*</p> <p></p> <p>Una vez confirmada la direcci\u00f3n de correo electr\u00f3nico, volvemos a la p\u00e1gina donde est\u00e1bamos y hacemos click en continuar. Nos pedir\u00e1 un nombre de usuario y una contrase\u00f1a que usaremos a partir de ahora para iniciar sesi\u00f3n.</p> <p>Finalizada la creaci\u00f3n de la cuenta iniciamos sesi\u00f3n desde la p\u00e1gina principal haciendo clic en \u201cSign In\u201d. Veremos una ventana como la de la imagen siguiente:</p> <p> <p> Ventana para identificaci\u00f3n en Thingspeaks</p> <p></p> <p>Escribimos nuestra contrase\u00f1a y hacemos clic en el bot\u00f3n Sign in.</p> <p> <p> Acceso a Thingspeaks</p> <p></p> <p>Con esto entramos en el broker y est\u00e1 todo listo para iniciar el trabajo.</p> <p> <p> Acceso correcto al broker</p> <p></p> <p>Podemos aprender mas sobre el tema visitando los siguientes enlaces:</p> <ul> <li>Primeros pasos con Wifi: Servidor sin clave y contrase\u00f1a</li> <li>Wifi con servidor gratuito con clave y contrase\u00f1a y app m\u00f3vil</li> <li>C\u00f3mo publicar y almacenar datos por Wifi en Internet con Thingspeak</li> </ul>"},{"location":"program/thinspeak/#filtrado-por-mac","title":"Filtrado por MAC","text":"<p>Si por cualquier motivo nuestra red WiFi tiene filtrado MAC debemos de dar de alta en la misma de nuestro dispositivo ESP-01. Esta es una tarea que va a depender de nuestro router y suministrador y que no resulta especialmente complicada. Lo primero que debemos hacer es averiguar la direcci\u00f3n MAC de nuestro dispositivo ESP8266. Esta tarea no la vamos a hacer desde ArduinoBlocks sino que vamos a recurrir al IDE de Arduino.</p> <p>Si necesitas ayuda para este tema seguro que la encuentras en estos tutoriales de Luis Llamas, o tambi\u00e9n puedes buscar informaci\u00f3n en tu navegador pues existen multitud de p\u00e1ginas referentes al tema de programaci\u00f3n desde el IDE de Arduino.</p>"},{"location":"program/thinspeak/#crear-un-canal-en-thingspeak","title":"Crear un canal en Thingspeak","text":"<p>Iniciamos sesi\u00f3n en Thingspeak y sos dirigimos a \"Channels\" para mostrar \"My Channels\" si no estamos ya en esa ventana. Nos aparecer\u00e1 la opci\u00f3n \"New Channel\":</p> <p> <p> Acceso a My Channels en Thingspeak</p> <p></p> <p>Elegimos un nombre para el canal, activamos los campos que necesitamos marc\u00e1ndolos y les damos un nombre. Tenemos hasta 8 campos por cada uno de los 4 canales de la versi\u00f3n gratuita de Thingspeak. Abajo del todo tenemos la opci\u00f3n para guardar los cambios realizados en el canal.</p> <p> <p> Creaci\u00f3n canal y campos en Thingspeak</p> <p></p> <p>Una vez hemos creado el canal necesitaremos conocer un poco los men\u00fas de la p\u00e1gina que nos permitir\u00e1n, entre otras cosas, obtener los datos que necesitaremos para que desde arduinoblocks y la placa ESP32 micro:STEAMakers se puedan enviar datos a este canal.</p> <ul> <li>Private View. Es lo que nosotros, y solamente nosotros, veremos.</li> <li>Public View. Es como se ver\u00e1 nuestro canal si lo hacemos p\u00fablico desde Sharing.</li> <li>Channel Settings. Es el men\u00fa de configuraci\u00f3n del canal desde el que podemos cambiar el nombre del canal, a\u00f1adir campos, renombrarlos, eliminarlos, etc. En la parte inferior del men\u00fa encontramos botones salvar los cambios, limpiar (borrar) los datos que actualmente tiene el canal almacenados o eliminar el canal.</li> </ul> <p> <p> Opciones de Channel Settings en Thingspeak</p> <p></p> <ul> <li>Sharing. Nos va a permitir las tres opciones siguiente:</li> </ul> <p> <p> Opciones de Sharing en Thingspeak</p> <p></p> <ul> <li>API Keys. Claves necesarias para leer o grabar datos en de un canal privado.</li> <li>Data Import / Export. Se pueden importar datos al canal a partir de la plantilla de importanci\u00f3n CSV. Se pueden exportar todos los datos almacenados en el canal en formato CSV para tratarlos localmente con una hoja de c\u00e1lculo, Python, etc.</li> </ul> <p>El siguiente paso es imprescindible para poder enviar datos a Thingspeak desde nuestra placa. Arduinoblocks nos pedir\u00e1 los datos (credenciales) de este dispositivo cuando hacemos el programa que env\u00ede los datos de los sensores.</p> <p>Nos dirigimos a \"Devices\" y hacemos clic en \"MQTT\". En la ventana que se abre debemos teclear un nombre para el dispositivo, si queremos una descripci\u00f3n y asigamos los canales a los que podr\u00e1 acceder el dispositivo. El ID del canal lo podemos escribir (si lo conocemos) o buscarlo en la lista de canales.</p> <p> <p> Crear dispositivo MQTT en Thingspeak</p> <p></p> <p>Despu\u00e9s de a\u00f1adir el dispositivo y guardar en sitio seguro las credenciales hacemos clic en el bot\u00f3n \"Done\" y hemos terminado con las tareas en Thingspeak. Las credenciales es importante guardarlas en un lugar seguro y conocido porque si no las recordamos no podremos enviar datos al canal. Adem\u00e1s la contrase\u00f1a no se guarda remotamente por lo que si la perdemos tendremos que, en el mejor de los casos, regenerarla o solicitar a quien nos di\u00f3 las credenciales que lo haga.</p> <p>En el apartado IoT con arduinoblocks vemos como trabajar con todo esto y se pone un sencillo ejemplo de uso.</p>"},{"location":"program/thinspeak/#visualizacion-de-resultados","title":"Visualizaci\u00f3n de resultados","text":"<p>En este apartado veremos como mostrar los resultados obtenidos desde un navegador web, desde una aplicaci\u00f3n para smathphone y desde un widget, e indicaremos como localizar las aplicaciones que vamos a ver.</p> <p>Info</p> <p>Este apartado est\u00e1 relacionado estrechamente con el apartado IoT con arduinoblocks</p>"},{"location":"program/thinspeak/#navegador","title":"Navegador","text":"<p>Para localizar un canal debemos conocer alg\u00fan Tag (etiqueta) que le habremos puesto previamente en la configuraci\u00f3n o bien el ID del autor (localizar\u00e1 todos sus canales p\u00fablicos). Si conocemos alguna de estas dos cosas, y el canal es p\u00fablico, podemos visualizar los datos del mismo localiz\u00e1ndolo, tal y como se aprecia en la imagen siguiente, desde la entrada Channels cumplimentando al menos uno de los campos indicados. En este caso hemos colocado \"microSM\" como etiqueta:</p> <p> <p> Localizar un canal Thingspeak conociendo un Tag</p> <p></p> <p>Que nos devuelve el siguiente resultado:</p> <p> <p> Resultado de la b\u00fasqueda de un canal Thingspeak conociendo un Tag</p> <p></p> <p>Si hacemos clic en la zona marcada en amarillo accederemos a los datos del canal:</p> <p> <p> Canal Thingspeak localizado por un Tag</p> <p></p> <p>Adem\u00e1s de visualizar de forma gr\u00e1fica los datos recibidos, disponemos de un bot\u00f3n que nos permite exportar los datos para trabajar con ellos de forma local. Si pulsamos el bot\u00f3n \"Export recent data\" obtendremos algo similar a la imagen siguiente:</p> <p> <p> Export recent data</p> <p></p> <p>Podemos exportar en cualquiera de los tres formatos disponibles todas las medidas o cada una de forma individual.</p> <p>Los resultados de exportar todo el canal vistos en la hoja de c\u00e1lculo de LibreOffice Calc tienen el siguiente aspecto:</p> <p> <p> Export recent data en Calc</p> <p></p>"},{"location":"program/thinspeak/#aplicaciones-para-android","title":"Aplicaciones para Android","text":"<p>MATLAB a trav\u00e9s de su servidor (broker) thingspeak ofrece varias aplicaciones para dispositivos smartphone. En la imagen siguiente vemos el resultado de una b\u00fasqueda en Play Store.</p> <p> <p> Apps de Thingspeak</p> <p></p>"},{"location":"program/thinspeak/#thingview","title":"ThingView","text":"<p>Una vez instalada la App podemos a\u00f1adir los canales que deseemos, simplemente clicando sobre el signo m\u00e1s, seguir los pasos y dando el identificador del canal. En la imagen siguiente observamos el  canal creado para el ejemplo anterior.</p> <p> <p> Thingview con canal a\u00f1adido</p> <p></p> <p>Tocando sobre el mismo accedemos a los datos del canal:</p> <p> <p> Datos en Thingview del canal a\u00f1adido</p> <p></p> <p>Si tocamos sobre alguna de las gr\u00e1ficas, accedemos a las opciones disponibles para esa variable concreta, tal y como vemos en la imagen siguiente:</p> <p> <p> Datos en Thingview del canal a\u00f1adido</p> <p></p>"},{"location":"program/thinspeak/#widget","title":"Widget","text":"<p>La segunda opci\u00f3n de descarga es una microaplicaci\u00f3n widget para la pantalla de nuestro m\u00f3vil que nos va a permitir estar viendo dos de las variables que tengamos en nuestro canal. En este caso, adem\u00e1s del n\u00famero de canal debemos conocer la API key de lectura. El widget permite establecer alarmas cuando se superan, por encima o por abajo, los valores de la variable establecidos. En la imagen siguiente vemos el aspecto del mismo con una variable. Las tres l\u00edneas de la esquina superior derecha nos permiten entrar en la configuraci\u00f3n del widget.</p> <p> <p> Widget en la pantalla de un m\u00f3bil</p> <p></p> <p>El icono de la esquina inferior derecha nos da acceso a los datos del canal y la variable mostrada en formato gr\u00e1fico, tal y como observamos en la imagen siguiente:</p> <p> <p> Gr\u00e1fica de humedad desde el Widget</p> <p></p>"},{"location":"program/tm/","title":"micro:STEAMakers + Telegram","text":"<p>Contenidos basados en los documentos de referencia de Libros &amp; Documentaci\u00f3n:</p> <ul> <li>ESP32 STEAMakers Telegram Bot.pdf</li> <li>ESP32STEAMakers_telegram.pdf</li> </ul> <p>Telegram es una aplicaci\u00f3n de mensajeria instant\u00e1nea y VOIP (Voz sobre Protocolo de Internet) gratuita, de software libre, desarrollada por los hermanos Nikol\u00e1i D\u00farov y P\u00e1vel D\u00farov. Permite enviar y recibir mensajes, im\u00e1genes y v\u00eddeos a trav\u00e9s de internet de persona a persona o a trav\u00e9s de grupos y canales.</p> <p>Con esta aplicaci\u00f3n nos podemos comunicar de forma sencilla con nuestra placa micro:STEAMakers consiguiendo as\u00ed un nuevo canal de comunicaci\u00f3n con ella. Aunque Telegram dispone de una aplicaci\u00f3n de escritorio y otra online, lo m\u00e1s habitual es utilizarla desde un tel\u00e9fono m\u00f3bil (Android o iPhone) por lo que centraremos aqu\u00ed las explicaciones con sistema operativo Android.</p>"},{"location":"program/tm/#bot-de-telegram","title":"Bot de Telegram","text":"<p>Un bot es una aplicaci\u00f3n que se ejecuta dentro de Telegram. No hay que instalarlos y se usan como si estuviesemos hablando con una persona. Utilizan una interfaz de texto por lo que se controlan enviandoles mensajes que contengan los comandos que soportan. Los comandos son las instrucciones o palabras que tenemos que escribir para comunicarnos con el bot y dependen de cada uno de ellos.</p> <p>Se buscan como cualquier otro usuario, utilizando @nombre o con el buscador de Telegram. Cuando entablamos una conversaci\u00f3n con un bot veremos una descripci\u00f3n de su funcionamiento, debajo de la cual habr\u00e1 un bot\u00f3n \"Start\" que sirve para enviar el comando de inicio al bot. Cuando hagamos esto el bot responder\u00e1 explicando de nuevo su funcionamiento y listando los comandos para empezar a utilizarlo.</p> <p>Existe un bot, llamado BotFather, que es el padre de todos los bots y que sirve para crear otros bots. Una vez encontrado entramos en el chat del mismo y ya podemos comenzar a trabajar.</p> <p>Inicialmente se muestra un cuadro de opciones, un bot\u00f3n nombrado \"Menu\" y la entrada de texto del chat. Si hacemos clic sobre \"Menu\" o escribimos en el chat la barra inclinada (/) sin pulsar la tecla enter se nos mostrar\u00e1n todas las opciones disponibles u ordenes que el bot puede recibir.</p> <p> <p> Botfather inicial</p> <p></p> <p>A continuaci\u00f3n vemos los comandos mas importantes disponibles brevemente explicados:</p> <ul> <li>/newbot - crea un nuevo bot.</li> <li>/mybots - lista los bost existentes y permite administrar su configuraci\u00f3n.</li> <li>/token - genera un token de autorizaci\u00f3n. Un token es un c\u00f3digo alfanum\u00e9rico necesario para que el bot utilice la API (interfaz de programaci\u00f3n de aplicaciones) de Telegram.</li> <li>/revoke - genera un nuevo token quedando revocados todos los derechos del anterior.</li> <li>/setname - para cambiar nombre a los bots.</li> <li>/setdescription - cambia la descripci\u00f3n del bot.</li> <li>/setuserpic - cambia la foto de perfil del bot.</li> <li>/setcommands - cambia la lista de comandos del bot.</li> <li>/delebot - para borrar un bot.</li> <li>/cancel - cancela la operaci\u00f3n actual.</li> </ul> <p>Vamos a comenzar creando un bot que vamos a denominar micro:STEAMakers. Hacemos:</p> <p> <p> /newbot</p> <p></p> <p>Cuando damos Enter tras teclear el nombre se realiza la comprobaci\u00f3n de que dicho bot no existe, y si es as\u00ed, nos invita a teclear un nombre de usuario para nuestro bot. Este nombre debe terminar con la palabra bot o Bot. Hemos probado con \"docu_bot\", pero est\u00e1 en uso, as\u00ed que se ha cambiado por \"docuuSM_bot\". Si tenemos \u00e9xito nos devuelve esto:</p> \u00a1Clic para mostrar! <p>Done! Congratulations on your new bot. You will find it at t.me/docuuSM_bot. You can now add a description, about section and profile picture for your bot, see /help for a list of commands. By the way, when you've finished creating your cool bot, ping our Bot Support if you want a better username for it. Just make sure the bot is fully operational before you do this.</p> <p>Use this token to access the HTTP API: 7436809274:AAFloQ8QhUsf2dBnqL3iroTKQq_Ho7zdQtw Keep your token secure and store it safely, it can be used by anyone to control your bot.</p> <p>For a description of the Bot API, see this page: https://core.telegram.org/bots/api</p> <p> <p> /newbot creado</p> <p></p> <p>El API Token es muy importante por lo que debemos guardarlo a buen recaudo y no difundirlo. En este caso se hace para documentar y cuando se finalice la actividad de uso ser\u00e1 eliminado.</p> <p>Una vez tenemos la conversaci\u00f3n abierta con BotFather, podemos teclear Start o Empezar o Help o Ayuda para iniciarla y veremos una lista con todos los comandos que entiende BotFather. Con esos comandos, crearemos nuestro propio bot y haremos todo lo necesario para configurarlo y ponerlo en marcha.</p> <p> <p> Ayuda de BotFather</p> <p></p> <p>Para modificar o completar la informaci\u00f3n de nuestro bot \"docuSM_bot\" primero debemos seleccionarlo, lo que podemos hacer con el comando \"/mybots\" y haciendo clic sobre el mismo:</p> <p> <p> mybots</p> <p></p> <p>En la animaci\u00f3n siguiente vemos como acceder al usuario del nuevo bot para poder iniciarlo y lo hacemos como si acabasemos de entrar en BotFather que, l\u00f3gicamente, tambi\u00e9n debemos iniciar.</p> <p> <p> Inicio de los bots</p> <p></p> <p>Para el trabajo con el bot tambi\u00e9n se ha creado un grupo (docu_microSTEAMakers) al que a\u00f1adimos el usuario de nuestro bot.</p> <p> <p> Agregar a grupo</p> <p></p> <p>Observamos como en ese grupo ya est\u00e1 @IDBot que ahora vemos el motivo.</p> <p>Una vez que accedemos al bot podemos escoger las opciones de configuraci\u00f3n adecuadas a nuestras necesidades, como consultar (o cambiar) el \"API Token\", editar el bot, configirar el bot, etc.</p> <p>Con esto nuestro bot ya puede responder mensajes, pero si queremos enviar mensajes a un chat vamos a necesitar el ID de dicho chat o del grupo. Para obtener el ID vamos a hacer uso de un bot que se llama @myidbot:</p> <p> <p> @myidbot</p> <p></p> <p>Nos aseguramos que seleccionamos el bot con la imagen se\u00f1alada.</p> <p>Entramos en el chat del bot y el men\u00fa nos indica las dos opciones que tenemos disponibles:</p> <p> <p> Menu @myidbot</p> <p></p> <ul> <li>/getid - devuelve nuestro ID de telegram</li> </ul> <p> <p> /getid</p> <p></p> <ul> <li>/getgroupid - devuelve el ID del grupo al que este bot (myidbot) se ha a\u00f1adido.</li> </ul> <p>Si hacemos la consulta /getgroupid desde IDBot obtenemos el siguiente mensaje:</p> <p> <p> /getgroupid desde IDBot</p> <p></p> <p>Para que nos resulte sencillo, a continuaci\u00f3n vemos la traducci\u00f3n del mensaje:</p> Traducci\u00f3n del mensaje <p>Para obtener el ID de un grupo o canal, tienes que hacer una de las siguientes cosas:   - A\u00f1adirme a un grupo o canal del que quieras obtener el ID, y enviar /getgroupid en el grupo.   - Otra opci\u00f3n es reenviar un mensaje del grupo, pero ten en cuenta que este mensaje tiene que ser de un administrador an\u00f3nimo, de lo contrario obtendr\u00e1s el ID del usuario que envi\u00f3 el mensaje.</p> <p>Si ahora realizamos la consulta desde el grupo obtenemos:</p> <p> <p> /getgroupid desde grupo</p> <p></p> <p>Vamos a establecer los comando que va a reconocer nuestro bot, que van a ser:</p> <p> <p> Configurar comandos</p> <p></p> <p>Podemos seguir profundizando en las configuraciones de Telegram, pero no es el objetivo aqu\u00ed y con todo lo realizado vamos a tener suficiente para desarrollar la actividad propuesta.</p>"},{"location":"program/tm/#bloques-telegram-bot","title":"Bloques Telegram-Bot","text":"<p>Los encontramos en el men\u00fa WiFi / IoT \u2192 Telegram Bot y son los siguientes:</p> <p> <p> Bloques Telegram-Bot</p> <p></p> <p>Trabajar con Telegram requiere estar conectado a una red WiFi, lo que podemos hacer con el bloque:</p> <p> <p> Bloques Telegram-Bot</p> <p></p> <p>L\u00f3gicamente tenemos que conocer el nombre de la red y la contrase\u00f1a de acceso a la misma.</p>"}]}