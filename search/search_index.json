{"config":{"lang":["es"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"La ESP32 micro:STEAMakers","text":""},{"location":"#introduccion","title":"Introducci\u00f3n","text":"<p>El aspecto de la placa es el que vemos en la imagen siguiente:</p> <p> <p> Aspecto de la placa micro:STEAMakers</p> <p></p> <p>La placa est\u00e1 equipada con 520 KB de memoria din\u00e1mica, 4 MB de memoria flash y un procesador de doble n\u00facleo de 240 MHz. Adem\u00e1s, incorpora Bluetooth de bajo consumo (BLE) y WiFi, capacidades excelentes para la comunicaci\u00f3n inal\u00e1mbrica.</p> <p>Esta placa tambi\u00e9n integra diversos sensores, como el sensor de temperatura y humedad; El giroscopio aceler\u00f3metro de seis ejes que permite obtener movimientos y aceleraci\u00f3n; El sensor de luz para capturar la intensidad de la luz ambiente; La interfaz para tarjeta microSD para guardar datos; El micr\u00f3fono para detectar el sonido ambiente, y el zumbador que puede reproducir m\u00fasica; Los botones A y B y el bot\u00f3n t\u00e1ctil; La matriz de 5x5 puntos RGB para muestra de n\u00fameros, letras y patrones con desplazamiento continuo.</p> <p>Por lo tanto, se puede aplicar para la ense\u00f1anza STEAM, IoT, proyectos de control inteligente, y una variedad de trabajos creativos de tipo maker.</p>"},{"location":"#partes-microsteamakers","title":"Partes micro:STEAMakers","text":"<p>En la imagen siguiente observamos la descripci\u00f3n gr\u00e1fica de partes de la cara frontal.</p> <p> <p> Hardware de la cara frontal</p> <p></p> <p>En la imagen siguiente observamos la descripci\u00f3n gr\u00e1fica de partes de la cara posterior.</p> <p> <p> Hardware de la cara posterior</p> <p></p>"},{"location":"#pines-gpio","title":"Pines GPIO","text":"<p>La placa ESP32 micro:STEAMakers est\u00e1 equipada con pines de expansi\u00f3n tipo gold-finger, incluyendo todos los pines IO, 19 puertos digitales, 7 puertos anal\u00f3gicos, interfaces I2C, UART y SPI. En la imagen siguiente tenemos la descripci\u00f3n de pines de la placa.</p> <p> <p> Pinout del conector de borde</p> <p></p> <p>Esta placa es compatible con una gran variedad de lenguajes de programaci\u00f3n, incluyendo arduinoblocks, MicroBlocks, Arduino, MicroPython y KidsBlock3.0. Es adecuada para usuarios con diferentes niveles de programaci\u00f3n.</p>"},{"location":"#compatibilidad-de-pines","title":"Compatibilidad de pines","text":"<p>AVISO IMPORTANTE</p> <p>Cuando vamos a trabajar con se\u00f1ales anal\u00f3gicas debemos tener muy presente que, aunque todos los pines IOxx son entradas y salidas digitales, algunas incluso con m\u00e1s funciones. Cuando tenemos que utilizar la comunicaci\u00f3n WiFi el convertidor ADC2 NO funciona.</p> <p>Las placas ESP32 tienen disponibles dos ADC (Analog to Digital Converter) de 12 bits que se denominan ADC1 y ADC2. Esos 12 bits dan una precisi\u00f3n de \\(2^{12} = 4096\\). Por lo tanto, si tenemos 12 bits para 3.3V podemos asegurar que \\(3.3V/4096 = 0,8 mV\\) es la tensi\u00f3n correspondiente a cada paso.</p> <p>M\u00e1xima tensi\u00f3n admisible en el ADC</p> <p>Aunque los pines GPIO de la ESP32 pueden funcionar a 5V, los conversores ADC no pueden. Debemos tener cuidado de no sobrepasar esos 3.3V si el pin es uno de los que est\u00e1n conectados a uno de los conversores.</p> <p>La placa ESP32 micro:STEAMakers es al fin y al cabo una ESP32 y la lectura de una entrada anal\u00f3gica se realiza de la forma habitual en entornos basados en Arduino, es decir con <code>analogRead(pin_GPIO)</code>. Internamente la ESP32, de manera gen\u00e9rica, compara la tensi\u00f3n que pretendemos medir con un valor de referencia Vref mediante un circuito atenuador de ganancia variable, tipicamente de -11dB para poder medir hasta 3.3V.</p> <p>En la ESP32 micro:STEAMakers los pines que tienen conxi\u00f3n con los conversores ADC y que pueden ser utilizados como entradas anal\u00f3gicas est\u00e1n distribuidos de la siguiente forma:</p> <ul> <li>ADC1 se conecta a 8 pines GPIO:</li> </ul> <p>32 , 33, 34, 35, 36, 37, 38, 39</p> <ul> <li>ADC2 se conecta a 10 pines GPIO:</li> </ul> <p>0, 2, 4, 12, 13, 14, 15, 25, 26, 27 WiFi ON \u2192 INHABILITA ADC2</p> <p>A efectos pr\u00e1cticos, revisando el pinout de la placa podemos asegurar que todos los pines catalogados como entradas anal\u00f3gicas, con la \u00fanica excepci\u00f3n de la patilla 2 que se conecta a io32 y que pertenece a ADC1, funcionar\u00e1n correctamente siempre y cuando no realicemos configuraci\u00f3n WiFi alguna, dado que est\u00e1n conectados a ADC2.</p>"},{"location":"#especificaciones-tecnicas","title":"Especificaciones t\u00e9cnicas","text":"<ul> <li>Alimentaci\u00f3n: USB; conector JST PH2.0; puerto I/O gold-finger</li> <li>Tensi\u00f3n de funcionamiento: 3.3V</li> <li>Corriente de funcionamiento: 100mA</li> <li>Placa de control principal ESP32: <ul> <li>Procesador: ESP32-D0WDQ6 (doble n\u00facleo)</li> <li>Frecuencia b\u00e1sica: hasta 240MHZ</li> <li>SRAM:520KB</li> <li>Flash:4MB</li> <li>Protocolo WiFi: 802.11 b/g/n (802.11n, r\u00e1pido hasta 150 Mbps)</li> <li>Rango de frecuencia de funcionamiento WiFi: 2412 ~ 2484 MHz</li> <li>Protocolo Bluetooth: cumple los est\u00e1ndares Bluetooth v4.2BR /EDR y BLE RF</li> <li>Bluetooth: receptor NZIF con sensibilidad de -97 dBm</li> <li>Audio Bluetooth: Audio CVSD y SBC</li> </ul> </li> <li>Recursos incorporados: <ul> <li>2 botones digitales (botones A y B)</li> <li>Giroscopio acelerometro de seis ejes MPU6050 con Velocidad m\u00e1xima de rotaci\u00f3n de 2000\u00b0/s y un Rango de aceleraci\u00f3n de \u00b12g\uff0c\u00b14g\uff0c\u00b18g\uff0c\u00b116g</li> <li>Sensor de luz: fototransistor ALS-PT19-315C</li> <li>Micr\u00f3fono: 4013-SMD</li> <li>Zumbador: MLT-8530AAC3V</li> <li>25 RGB: WS2812-2020 RGB-LED</li> <li>Sensor de temperatura y humedad: AHT20</li> <li>Interfaz de expansi\u00f3n de tarjeta microSD</li> <li>M\u00f3dulo de detecci\u00f3n de consumo de corriente de alimentaci\u00f3n: INA180A1IDBVR</li> <li>Puerto de expansi\u00f3n I2C</li> </ul> </li> <li>Interface de extensi\u00f3n: <ul> <li>19 puertos de E/S digital (multiplexado parcialmente con recursos de a bordo)</li> <li>2 DAC de 8 bits (io25, io26)</li> <li>7 pines t\u00e1ctiles (io2, io4, io12, io13, io15, io27, io32)</li> <li>13 pines PWM (io2, io4, io5, io12, io15, io16, io18, io19, io23, io25, io26, io27, io32)</li> <li>Dispositivo UART de 3 v\u00edas (cualquier pin), soporta control de flujo por hardware y DMA</li> <li>2 dispositivos I2C (cualquier pin), soporta modo host o esclavo</li> <li>Control remoto IR (cualquier pin) Transceptor IR de 8 canales, soporta diferentes est\u00e1ndares de forma de onda.</li> </ul> </li> </ul>"},{"location":"#i2c-en-la-microsteamakers","title":"I2C en la micro:STEAMakers","text":"<p>La placa ESP32 micro:STEAMakers incorpora un puerto de expansi\u00f3n I2C localizado en un conector hembra de 4 pines de 100mils (2,54mm) de separaci\u00f3n entre pines.</p> <p> <p> Conector de expansi\u00f3n I2C</p> <p></p> <p>Adem\u00e1s la placa incorpora dos dispositivos que son I2C y que es conveniente tener claro cuales son y que direcciones f\u00edsicas utilizan para que no interfiramos con los mismo desde lo que conectemos externamente al puerto de expansi\u00f3n I2C de la placa que sea de tipo I2C. Son los siguientes:</p> <ul> <li>Sensor de temperatura y humedad AHT20.</li> </ul> <p> <p> Localizaci\u00f3n Sensor de temperatura y humedad AHT20</p> <p></p> <ul> <li>Aceler\u00f3metro, giroscopio de 6 ejes MPU-6050.</li> </ul> <p> <p> Localizaci\u00f3n aceler\u00f3metro y giroscopio MPU-6050</p> <p></p> <p>Observamos en este caso que el dispositivo tiene posibilidad de configurar la direcci\u00f3n I2C del mismo entre dos posibilidades:</p> <ul> <li>Direcci\u00f3n 0x68 configurada por defecto al estar unidos los dos pads de configuraci\u00f3n mediante una resistencia de cero ohmios.</li> <li>Direcci\u00f3n 0x69 que podemos configurar desoldando la resistencia de la 0x68 y soldandola en los dos pads de la 0x69. Aunque no es una operaci\u00f3n muy compleja no se recomienda acometerla si no tenemos experiencia trabajando con soldadura en este tipo de placas y componentes y en cualquier caso no se recomienda a no ser que resulte totalmente imprescindible.</li> </ul> <p>A continuaci\u00f3n vamos a ver un ejemplo en el que averiguamos las direcciones f\u00edsicas de estos dos dispositivos I2C.</p> <p> <p> Obtenci\u00f3n de la direcci\u00f3n I2C de los dispositivos conectados</p> <p></p> <p>Cargamos el programa en la placa, conectamos la consola serie y tras hacer un reset f\u00edsico en la micro:STEAMakers nos aparece la siguiente informaci\u00f3n:</p> <p> <p> Resultados obtenci\u00f3n de la direcci\u00f3n I2C de los dispositivos conectados</p> <p></p> <p>El bloque 'Escanear lo encontramos en 'Entrada/Salida' en I2C:</p> <p> <p> Bloque Escaner I2C</p> <p></p>"},{"location":"#elementos-auxiliares-3d","title":"Elementos auxiliares 3D","text":"<ul> <li>Filtro impreso en 3D para que los LEDs deslumbren menos</li> <li>Soporte Micro:Steamakers Stand creado por Jordi Mayn\u00e9</li> </ul>"},{"location":"CO2/","title":"Conceptos sobre CO2 y VOC","text":""},{"location":"CO2/#introduccion","title":"Introducci\u00f3n","text":"<p>En general vamos a dar unas pautas de lo que son, por que son perjudiciales para la salud, que valores podemos tomar como referencia para determinar la calidad del aire y sus fuentes principales de emisi\u00f3n en entornos de trabajo no industriales (oficinas, locutorios, etc) y aulas escolares. Veremos al final el sensor que vamos a usar y algunas cosas interesantes sobre el mismo.</p>"},{"location":"CO2/#sobre-el-co2","title":"Sobre el CO2","text":"<p>El di\u00f3xido de carbono es un gas inodoro e incoloro. Bajo presi\u00f3n puede encontrarse en estado l\u00edquido o estado s\u00f3lido (hielo seco).</p> <p>En el enlace podemos encontrar mas definiciones de t\u00e9rminos usuales dadas por el Departamento de Salud de New Jersey.</p>"},{"location":"CO2/#necesidad-de-vigilar-los-niveles-de-co2","title":"Necesidad de vigilar los niveles de CO2","text":"<p>De manera muy resumida diremos que al respirar aire con mucho CO2, aumenta su concentraci\u00f3n en sangre, baja el pH de la misma, y esto dispara la sensaci\u00f3n de asfixia.</p> <p>En la p\u00e1gina 8 de la Ficha T\u00e9cnica de Seguridad n\u00famero 300000000020 se indican claramente los efecto perjudiciales del CO2 que relacionamos a continuaci\u00f3n.</p> <p>Efectos debido a la inhalaci\u00f3n:</p> <ul> <li>Una concentraci\u00f3n de CO2 superior o igual al 10% puede causar p\u00e9rdida de consciencia o muerte.</li> <li>El bi\u00f3xido de carbono tiene la capacidad de provocar la muerte, incluso si se mantienen los niveles normales de ox\u00edgeno (20 a 21%).</li> <li>El bi\u00f3xido de carbono es fisiol\u00f3gicamente activo, afecta la circulaci\u00f3n y la respiraci\u00f3n.</li> <li>A concentraciones de 2 a 10%, el bi\u00f3xido de carbono puede ocasionar n\u00e1usea, mareo, dolor de cabeza, confusi\u00f3n, aumento de la presi\u00f3n arterial y la frecuencia respiratoria.</li> <li>A elevadas concentraciones puede causar asfixia.</li> <li>Los s\u00edntomas pueden incluir la p\u00e9rdida de la consciencia o de la movilidad.</li> <li>La v\u00edctima puede no haberse dado cuenta de la asfixia. La asfixia puede causar la inconsciencia tan inadvertida y r\u00e1pidamente que la v\u00edctima puede ser incapaz de protegerse.</li> </ul> <p>S\u00edntomas:</p> <ul> <li>V\u00e9rtigo.</li> <li>Salivaci\u00f3n.</li> <li>N\u00e1usea.</li> <li>V\u00f3mitos.</li> <li>P\u00e9rdida de movilidad/consciencia.</li> <li>Escalofr\u00edos.</li> <li>Sudor.</li> <li>Visi\u00f3n borrosa.</li> <li>Dolor de cabeza.</li> <li>Aumento de pulsaciones.</li> <li>Insuficiencia respiratoria.</li> <li>Respiraci\u00f3n r\u00e1pida.</li> </ul> <p>Toxicidad aguda por inhalaci\u00f3n:</p> <ul> <li>Un nivel de CO2 del 5% act\u00faa de manera sin\u00e9rgica e incrementa la toxicidad de otros gases (CO, NO2).</li> <li>El CO2 incrementa la producci\u00f3n de carboxihemoglobina o metahemoglobina ocasionada por estos gases, probablemente debido a los efectos estimulantes del bi\u00f3xido de carbono en los sistemas respiratorio y circulatorio.</li> </ul> <p>Podemos consultar mas datos sobre el CO2 en la Ficha de seguridad oficial.</p> <p>En la entrada Di\u00f3xido de carbono del Instituto para la Salud Geoambiental podemos leer:</p> <p>Efectos en la salud:</p> <p>El principal efecto que produce el CO2 es la asfixia por desplazamiento del ox\u00edgeno, pero esto se produce por concentraciones muy altas capaces de desplazar el ox\u00edgeno y reducir su concentraci\u00f3n por debajo del 20%. En concentraciones altas, cercanas a la 30.000 ppm, puede causar dolores de cabeza, falta de concentraci\u00f3n, somnolencia, mareos y problemas respiratorios. En entornos laborales, como oficinas, se comienzan a tener quejas de olores a partir de las 800-1000 ppm.</p> <p>Colegios y CO2</p> <p>Es importante se\u00f1alar que las personas con problemas de asma o SQM deben proveerse de un aire con bajas concentraciones de CO2.</p> <p>Vamos a considerar solamente, y a efectos de estas notas, la \u00faltima reglamentaci\u00f3n RITE sin referirnos al RITE o NTE anteriores. C\u00f3mo se indica mas abajo el RITE, o Reglamento de Instalaciones T\u00e9rmicas en los Edificios y sus IT (Instrucciones T\u00e9cnicas) contempla que el nivel de CO2 aconsejable en el interior de edificios, seg\u00fan los estudios y normas de referencia, se recomienda que se mantenga en niveles entre las 400 ppm y las 800 ppm. Teniendo en cuenta que el RITE se publica en su primera versi\u00f3n por el Real Decreto 1027/2007, de 20 de julio, por el que se aprueba el Reglamento de Instalaciones T\u00e9rmicas en los Edificios (BOE 29/08/2007) y que tiene varias correcciones de errores y modificado de art\u00edculos hasta su Versi\u00f3n consolidada del Real Decreto 1027/2007, de 20 de julio por el que se aprueba el Reglamento de instalaciones t\u00e9rmicas en los edificios es muy posible que la mayor\u00eda de los centros educativos de construcci\u00f3n anterior a estas fechas no tengan adecuadas sus instalaciones para cumplir esta reglamentaci\u00f3n, cosa que por otra parte ser\u00eda muy deseable y que de seguro se habr\u00eda logrado con una normativa espec\u00edfica para estos locales.</p> <p>Un grupo a tener en cuenta especialmente son los ni\u00f1os en los colegios. En Espa\u00f1a no hay normativa espec\u00edfica que regule el nivel de CO2 en los colegios, como si lo tienen por ejemplo en Francia, y es bien conocida la relaci\u00f3n entre el bajo rendimiento escolar y los altos niveles de CO2. Adem\u00e1s los ni\u00f1os debido a su metabolismo y actividad producen mucho m\u00e1s CO2 que los adultos.</p> <p>A ra\u00edz de la pandemia, que a d\u00eda de hoy (mayo de 2021) nos sigue acompa\u00f1ando se han publicado multitud de gu\u00edas y recomendaciones para indicar la necesidad de ventilaci\u00f3n en las aulas, que con las medidas anti-covid establecidas en los centros y el gran compromiso adquirido por todo el personal relacionado con la vida de los centros y el propio alumnado, hemos de decir que los centros educativos han sido capaces de mantener un nivel de contagios que ha permitido mantenerlos en funcionamiento. A t\u00edtulo de ejemplo tenemos la Gu\u00eda para ventilaci\u00f3n en aulas del Instituto de Diagn\u00f3stico Ambiental y Estudios del Agua, IDAEA-CSIC, Mesura en su VERSI\u00d3N 3 de 6 de noviembre de 2020.</p> <p>Principales Fuentes:</p> <p>La principal fuente en ambientes interiores es la respiraci\u00f3n humana. Se deben considerar otras posibles fuentes debidas a combusti\u00f3n en casos de altos niveles de concentraci\u00f3n.</p> <p>Niveles habituales:</p> <p>Los niveles habituales que podamos encontrar en un ambiente interior estar\u00e1 relacionado con las diferentes variables que afectan a este factor como son: Niveles en aire exterior, fuentes interiores, niveles de ocupaci\u00f3n y tasas de ventilaci\u00f3n.</p> <p>En la legislaci\u00f3n existente no hay un valor concreto que se d\u00e9 como bueno. Existen diferentes recomendaciones y valores l\u00edmite ocupacionales. En el RITE por ejemplo en funci\u00f3n del nivel de calidad de aire exigible al local los valores de concentraci\u00f3n van desde las 400 ppm hasta m\u00e1s de 1.000 ppm. El valor l\u00edmite de exposici\u00f3n profesional para exposiciones de 8 horas que vemos en las Gu\u00edas del INSHT es de 5.000 ppm si bien este valor no se puede aplicar a entornos no industriales. Recordemos que en espacios como oficinas a partir de 800 ppm se producen quejas por olores y se recomienda no superar las 1.000 ppm.</p> <p>Lo ideal es que el cociente entre exterior e interior sea lo m\u00e1s cercano a 1 posible.</p> <p>En el art\u00edculo de la International Journal of Emergency Medicine dado en la webgraf\u00eda se pueden consultar mas datos relativos al tema del CO2 y en el de Centro Canadiense de Seguridad y Salud Ocupacional (CCSSO) tenemos respuestas a diversas cuestiones sobre el CO2.</p>"},{"location":"CO2/#riesgos-de-transmision-de-covid-19-en-distintas-situaciones","title":"Riesgos de transmisi\u00f3n de covid-19 en distintas situaciones","text":"<p>En la figura 3 del art\u00edculo Editorial de BMJ dado en la webgraf\u00eda podemos leer que la gr\u00e1fica exponer el Riesgo de transmisi\u00f3n del SARS-CoV-2 de personas asintom\u00e1ticas en diferentes entornos y para diferentes tiempos de ocupaci\u00f3n, ventilaci\u00f3n y niveles de hacinamiento (ignorando la variaci\u00f3n en la susceptibilidad y las tasas de diseminaci\u00f3n viral). Las calificaciones son indicativas de riesgo relativo cualitativo y no representan una medida cuantitativa. Es posible que tambi\u00e9n deban tenerse en cuenta otros factores no presentados en estas tablas al considerar el riesgo de transmisi\u00f3n, incluida la carga viral de una persona infectada y la susceptibilidad de las personas a la infecci\u00f3n. Toser o estornudar, incluso si se deben a irritaci\u00f3n o alergias mientras est\u00e9 asintom\u00e1tico, agravar\u00eda el riesgo de exposici\u00f3n en un espacio interior, independientemente de la ventilaci\u00f3n.</p> <p>Reproducimos aqu\u00ed la gr\u00e1fica en formato original traducida para que nos sirva de gu\u00eda.</p> <p> <p> Gr\u00e1fica de riesgos de transmisi\u00f3n Clic para ver ampliada</p> <p></p>"},{"location":"CO2/#unidades-de-medida-del-co2","title":"Unidades de medida del CO2","text":"<p>Las formas m\u00e1s habituales de indicar la concentraci\u00f3n de un contaminante atmosf\u00e9rico son las ppb (partes por bill\u00f3n) y las ppm (partes por mill\u00f3n), los \u00b5g/m\u00b3 (microgramos por metro c\u00fabico) y los mg/m\u00b3 (miligramos por metro c\u00fabico).</p> <p>Las ppb y las ppm se suelen utilizar cuando se trata de un gas, y en este caso se sobreentiende que se expresa en volumen. Muchas veces se puede encontrar escrito como ppbv o ppmv, donde la \u201cv\u201d final indica precisamente que la concentraci\u00f3n es en volumen.</p> <p>De esta forma, 1 ppm es unidad de volumen de contaminante en un mill\u00f3n de unidades de volumen de aire. Para concentraciones altas de CO2 se usa el porcentaje volum\u00e9trico (unidades de volumen de CO2 en 100 unidades de volumen de aire), es decir que 10.000 ppm = 1%.</p> <p>Es importante tener en cuenta que el bill\u00f3n de estas ppb es un bill\u00f3n anglosaj\u00f3n, esto es, 1000 millones de vol\u00famenes (\\(10^9\\)). En Europa un bill\u00f3n es 1 mill\u00f3n de millones, \\(10^{12}\\), por lo que la equivalencia es: 1ppm = 1000ppb</p> <p>Otras dos formas habituales de expresar la concentraci\u00f3n de los contaminantes atmosf\u00e9ricos son los \u00b5g/m\u00b3 (microgramos por metro c\u00fabico) y los mg/m\u00b3 (miligramos por metro c\u00fabico). La equivalencia es similar a las de ppm y ppb:</p> <p>1 mg/m\u00b3 = 1000 \u00b5g/m\u00b3</p> <p>Para convertir las ppb en \u00b5g/m\u00b3 tenemos que tener en cuenta que dicha conversi\u00f3n depende del tipo de contaminante, y de una presi\u00f3n y una temperatura que tomemos como referencia. Para ver esto, tomemos una concentraci\u00f3n de 1 ppb de un contaminante M. Esto implica que tenemos 1 m\u00b3 de M en \\(10^9\\) m\u00b3 de aire. O lo que es lo mismo, \\(10^{\u22129}\\) m\u00b3 de M en 1 m\u00b3 de aire.</p> <p>La forma habitual de expresar la concentraci\u00f3n de CO2 es en mg/m\u00b3 (miligramos por metro c\u00fabico). Para convertir las ppm en mg/m\u00b3 tenemos que tener en cuenta que dicha conversi\u00f3n depende del tipo de gas, y de una presi\u00f3n y una temperatura que tomemos como referencia.</p> <p>Teniendo en cuenta la ecuaci\u00f3n general de los gases ideales, para el CO2 (con peso molecular 44,01 g/mol), y tomando como referencia P = 1 atm y T = 298,16 K (25 \u00baC), tenemos (R = 0,08205746 atm\u00b7L/mol\u00b7K):</p> <p> <p>\\(\\dfrac{10^{6}\\cdot 44,01\\hspace{0.1cm} g/mol\\cdot 1\\hspace{0.1cm}atm\\cdot 10^{-6}}{0,08205746\\cdot 298,16\\hspace{0.1cm}K}=1,798\\hspace{0.1cm}mg\\hspace{0.1cm}\\approx\\hspace{0.1cm}1,8\\hspace{0.1cm}mg\\)</p> <p></p> <p>Luego:</p> <p> <p>\\(\\boxed{1\\hspace{0.1cm}ppm=1,8\\hspace{0.1cm}mg/m^{3}\\hspace{1cm}(CO_{2}\\hspace{0.2cm}@\\hspace{0.2cm}1\\hspace{0.2cm}atm.\\hspace{0.2cm} 25\\hspace{0.2cm}\u00baC)}\\)</p> <p></p> <p>Que ser\u00e1 la relaci\u00f3n a usar para convertir entre unidades de CO2.</p> <p>Tambi\u00e9n se puede expresar como:</p> <p> <p>\\(\\boxed{1\\hspace{0.1cm}ppb=1800\\hspace{0.1cm}\\mu g/m^{3}\\hspace{1cm}(CO_{2}\\hspace{0.2cm}@\\hspace{0.2cm}1\\hspace{0.2cm}atm.\\hspace{0.2cm} 25\\hspace{0.2cm}\u00baC)}\\)</p> <p></p>"},{"location":"CO2/#valores-de-referencia-para-el-co2","title":"Valores de referencia para el CO2","text":"<p>En la tabla siguientes damos los valores que vamos a considerar en nuestro caso. En la columna color se establece cual ser\u00e1 el color que se ilumine en un posible sem\u00e1foro.</p> <p> CO2 (ppm) CO2 (\\(mg / m ^{3}\\)) Ambiente Mensaje Color de 0 a 500 de 0 a 900 Muy bueno Aconsejado Apagado de 501 a 1000 de 901 a 1800 Bueno Bueno Verde de 1001 a 1500 de 1801 a 2700 Moderado ventilar Amarillo de 1501 a 2000 de 2701 a 3600 Muy malo VENTILAR Rojo fijo mas de 2000 mas de 3600 Inaceptable Desalojar Rojo intermitente <p></p>"},{"location":"CO2/#fuentes-emisoras-de-co2-en-personas","title":"Fuentes emisoras de CO2 en personas","text":"<p>En el ambiente que nos ocupa la principal fuente de emisi\u00f3n de CO2 va a ser el ser humano a trav\u00e9s de la respiraci\u00f3n, la sudoraci\u00f3n, la transpiraci\u00f3n y el sudor.</p>"},{"location":"CO2/#sobre-los-voc","title":"Sobre los VOC","text":"<p>VOC (Volatile Organic Compounds) es la abreviatura inglesa para los compuestos org\u00e1nicos vol\u00e1tiles (COV) que hay en el aire en forma de gas o de vapor a temperatura ambiente. Los VOC tienen muy diversa procedencia pero nos interesa en este caso los generados en los procesos biol\u00f3gicos de las personas que los emiten a trav\u00e9s de la respiraci\u00f3n y de la piel.</p> <p>Los efectos sobre la salud a corto plazo pueden ser:</p> <ul> <li> <p>Irritaci\u00f3n de ojos, garganta y nariz</p> </li> <li> <p>N\u00e1useas</p> </li> <li> <p>Dolor de cabeza</p> </li> <li> <p>V\u00f3mito de sangre</p> </li> <li> <p>Reacciones al\u00e9rgicas e hinchazones</p> </li> <li> <p>Mareos</p> </li> <li> <p>Dolores estomacales e intestinales</p> </li> <li> <p>Fatiga</p> </li> <li> <p>Manchas en la piel.</p> </li> </ul> <p>A largo plazo pueden da\u00f1ar el h\u00edgado, los ri\u00f1ones o el sistema nervioso central. Tambi\u00e9n pueden ser carcin\u00f3genos, como por ejemplo el benceno.</p>"},{"location":"CO2/#valores-de-referencia-para-voc","title":"Valores de referencia para VOC","text":"<p>En la tabla siguiente damos los valores que vamos a considerar en nuestro caso.</p> <p> VOC (ppb) Ambiente Mensaje Color de 0 a 200 Muy bueno Aconsejado Apagado de 201 a 600 Bueno Bueno Verde de 601 a 1000 Moderado ventilar Amarillo de 1001 a 2000 Muy malo VENTILAR Rojo fijo mas de 2000 Inaceptable Desalojar Rojo intermitente <p></p>"},{"location":"CO2/#fuentes-emisoras-de-voc-en-personas","title":"Fuentes emisoras de VOC en personas","text":"<p>En el ser humano se producen diferentes gases VOC a trav\u00e9s de la respiraci\u00f3n (acetona, etanol, isopreno), la sudoraci\u00f3n, la transpiraci\u00f3n, el sudor, por flato (metano), los cosm\u00e9ticos (Limoneno, eucaliptol), el mobiliaario (alcoholes), la combusti\u00f3n de motores y calderas (hidrocarburos) y los ordenadores, impresoras o fotocopiadoras (benceno, estireno, fenol).</p>"},{"location":"CO2/#el-sensor-ccs811","title":"El sensor CCS811","text":"<p>Es un sensor de gas digital que puede detectar una amplia gama de compuestos org\u00e1nicos vol\u00e1tiles. En este caso se denominan TVOC, pues el sensor no distingue unos de otros y la medida la totaliza. Tambi\u00e9n detecta niveles equivalentes de di\u00f3xido de carbono que se denominan eCO2.</p> <p>Los rangos de medida son:</p> <ul> <li> <p>eCO2: de 400 a 29206 ppm (partes por millon).</p> </li> <li> <p>TVOC: de 0 a 32768 ppb (partes por bill\u00f3n).</p> </li> </ul>"},{"location":"MiCS4514/","title":"Sensor MiCS4514 de NO2 y CO","text":""},{"location":"MiCS4514/#el-sensor","title":"El sensor","text":"<p>El MiCS4514 es un sensor con tiempos de respuesta cortos y adecuado para monitorizar la calidad del aire, para detecci\u00f3n de fugas de gas y detecci\u00f3n de contaminaci\u00f3n. Es un sensor de silicio para gases que tiene un diafragma micromaquinado de precisi\u00f3n con una resistencia de calentamiento integrada y la capa de detecci\u00f3n en la parte superior. Su tiempo de respuesta es inferior a 10 segundos y opera dentro de un rango de temperatura de -30 \u00baC a 85 \u00baC.</p> <p>Especificaciones:</p> <ul> <li>Sensor MOS (Metal \u00d3xido Semiconductor)</li> <li>Tecnolog\u00eda MEMS (MicroElectroMechanical Systems)</li> <li>Tiempo de respuesta: menos de 10 segundos</li> <li>Rango de temperatura de funcionamiento: de -30\u00baC a 85\u00baC</li> <li>Gases detectables MiCS-4514:</li> </ul> <p>\u25e6 Mon\u00f3xido de carbono (1-1000ppm) \u25e6 Di\u00f3xido de nitr\u00f3geno (0.05-10ppm) \u25e6 Hidr\u00f3geno (1-1000ppm) \u25e6 Etanol (10-500ppm) \u25e6 Amoniaco (1-500ppm) \u25e6 Metano (mayor de 1000 ppm)  </p> <p>El aspecto del sensor lo vemos en la imagen siguiente:</p> <p> <p> Sensor MiCS4514</p> <p></p> <p>Aunque el sensor se comercializa como tal, a nosotros nos interesa un m\u00f3dulo, placa o PCB en el que venga montado con los elementos auxiliares necesarios para hacerlo funcionar. Esta PCB existe comercialmente, se denomina CJMCU-4541 y tiene el siguiente aspecto:</p> <p> <p> PCB CJMCU-4541 con sensor MiCS4514</p> <p></p> <p>Aviso</p> <p>La PCB CJMCU-4514 es utilizable directamente en sistemas modulares pero para formato EASY Plug es necesario utilizar la shield que vemos seguidamente.</p>"},{"location":"MiCS4514/#shield-cjmcu-4514-a-easy-plug","title":"Shield CJMCU-4514 a EASY Plug","text":"<p>La Shield MiCS4514 es un desarrollo de INNOVA DIDACTIC creado para el proyecto Educacont del a\u00f1o 2019. La placa montada tiene el aspecto de la imagen siguinete:</p> <p> <p> Shield MiCS4514</p> <p></p> <p>A continuaci\u00f3n vemos una imagen descriptiva de las partes de esta shield:</p> <p> <p> Partes shield MiCS4514</p> <p></p> <p>Los pines marcados D8, A0 y A1 son los correspondientes a la placa de control Easy Plug Control board V2.0. Para otras aplicaciones habr\u00e1 que adaptarlos a la placa que se est\u00e9 utilizando.</p> <p>Los pines macho se han colocado para dar funcionalidad extra a la PCB y tener otras opciones de conex\u00edon disponibles por si resulta necesario, pero inicialmente no ser\u00e1n usados.</p> <p>La shield est\u00e1 equipada con la interfaz RJ11 6P6C, compatible con la placa de control keyestudio EASY plug. Si disponemos de placas de otras marcas con este tipo de conexi\u00f3n debemos verificar el orden de pines antes de conectarlas.</p>"},{"location":"bt/","title":"Comunicaciones Bluetooth","text":""},{"location":"bt/#introduccion","title":"Introducci\u00f3n","text":"<p>Los m\u00f3dulos Bluetooth permiten crear conexi\u00f3n inal\u00e1mbrica serie punto a punto de manera que la forma de trabajar es muy similar a la comunicaci\u00f3n serie por cable. A continuaci\u00f3n vemos lo b\u00e1sico de los m\u00f3dulos m\u00e1s comunes.</p> <p>Bluetooth es una especificaci\u00f3n industrial para Redes Inal\u00e1mbricas de \u00c1rea Personal (WPAN) que posibilita la transmisi\u00f3n de voz y datos entre diferentes dispositivos mediante un enlace por radiofrecuencia en la banda ISM de los 2.4 a 2.485 GHz. Los principales objetivos que se pretenden conseguir con esta norma son:</p> <ul> <li>Facilitar las comunicaciones entre equipos m\u00f3viles.</li> <li>Eliminar los cables y conectores entre estos.</li> <li>Ofrecer la posibilidad de crear peque\u00f1as redes inal\u00e1mbricas y facilitar la sincronizaci\u00f3n de datos entre equipos personales.</li> </ul> <p>Se denomina Bluetooth al protocolo de comunicaciones dise\u00f1ado especialmente para dispositivos de bajo consumo, que requieren corto alcance de emisi\u00f3n y basados en transceptores (dispositivos que cuentan con transmisor y receptor compartiendo parte de la circuiteria) de bajo costo.</p> <p>El hardware que compone el dispositivo Bluetooth est\u00e1 compuesto por dos partes:</p> <ul> <li>un dispositivo de radio, encargado de modular y transmitir la se\u00f1al.</li> <li>un controlador digital, compuesto por una CPU, un procesador de se\u00f1ales digitales (DSP \u2013 Digital Signal Processor) llamado Link Controller (o controlador de Enlace) y de las interfaces con el dispositivo anfitri\u00f3n.</li> </ul> <p>Su logotipo lo vemos en la figura siguiente:</p> <p> <p>. Logotipo Bluetooth con texto y sin texto</p> <p></p>"},{"location":"bt/#bluetooth-v2","title":"Bluetooth V2","text":"<p>Existe un procedimiento definido que se llama Pairing (o emparejamiento) que vincula a dos dispositivos Bluetooth. Cuando vinculamos dos dispositivos Bluetooth, se inicia un proceso en el que ellos se identifican por nombre y direcci\u00f3n interna y se solicitan la clave PIN para autorizar la conexi\u00f3n.</p> <p>Si el emparejamiento se realiza con \u00e9xito, ambos nodos suelen guardar la identificaci\u00f3n del otro y cuando se encuentran cerca se vuelven a vincular sin necesidad de intervenci\u00f3n manual.</p> <p>Para manejar los m\u00f3dulos Bluetooth se utilizan los comandos Hayes o AT, de los que se puede encontrar informaci\u00f3n en este enlace y a continuaci\u00f3n damos algunos b\u00e1sicos:</p> <ul> <li>AT+VERSION: Versi\u00f3n del Firmware.</li> <li>AT+NAMEXXX: Para establecer el nombre que queremos presentar cuando otro dispositivo nos busque.</li> <li>AT+PINXXXX: permite establecer el n\u00famero de identificaci\u00f3n personal, que se requerir\u00e1 para establecer la vinculaci\u00f3n.</li> <li> <p>AT+BAUDX: Permite fijar la velocidad de comunicaci\u00f3n entre el modulo y la consola seg\u00fan los siguientes pares:</p> <p>1 -&gt; 1200 bps | -5 -&gt; 19200 bps</p> <p>2 -&gt; 2400 bps | -6 -&gt; 38400 bps</p> <p>3 -&gt; 4800 bps | -7 -&gt; 57600 bps</p> <p>4 -&gt; 9600 bps | -8 -&gt; 115200 bps</p> </li> </ul> <p>La velocidad por defecto es la de 9600 bps.</p> <p>Los m\u00f3dulos mas conocidos son el HC-05 y HC-06 que son Bluetooth V2 y cuyo aspecto podemos ver en la figura siguiente:</p> <p> <p>. M\u00f3dulos HC-05 y HC-06</p> <p></p>"},{"location":"bt/#bt-40-low-energy-ble-o-smart","title":"BT 4.0, Low Energy (BLE) o Smart","text":"<p>En realidad BLE se introduce como parte de la especificaci\u00f3n Bluetooth 4.0. En la web podemos encontrar mucha informaci\u00f3n sobre el tema habitualmente poco accesible y poco estructurada.</p> <p>Desde aqu\u00ed voy a recomendar el art\u00edculo \u201cIntroduction to Bluetooth Low Energy: A basic overview of key concepts for BLE\u201d publicado por Adafruit donde se hace un repaso de los conceptos en los que se basa BLE y su traducci\u00f3n libre \"Bluetooth BLE: el conocido desconocido\" publicada por Izertis: <ul> <li>Enlace al original: \u201cIntroduction to Bluetooth Low Energy: A basic overview of key concepts for BLE\u201d</li> <li>Enlace a la traducci\u00f3n libre: \"Bluetooth BLE: el conocido desconocido\"</li> </ul> <p> <p>. Logotipo BLE</p> <p></p> <p>B\u00e1sicamente se trata de un nuevo protocolo dise\u00f1ado para reducir en todo lo posible el gran consumo de energ\u00eda de sus predecesores. Generalmente se le conoce como BLE (iniciales de Bluetooth Low Energy) o Bluetooth LE o tambi\u00e9n como Bluetooth Smart y tienen un consumo t\u00edpico que podemos cifrar entre los 10 y 15 mA. Otra de sus principales novedades radica en que este m\u00f3dulo si es utilizables con dispositivos iOS.</p> <p>El BLE es un subconjunto del est\u00e1ndar Bluetooth v4.0 que dispone de una pila de protocolos en referencia a la capa OSI (en ingl\u00e9s, Open Systems Interconnection) completamente nueva y orientada a conexiones sencillas en aplicaciones de muy baja potencia que suelen funcionar con pilas o bater\u00edas.</p> <p>La pila de protocolos para Bluetooth Low Energy sigue la estructura definida en la figura siguiente.</p> <p> <p>. Pila de protocolos para BLE</p> <p></p> <p>El controlador aloja las capas inferiores de la pila del protocolo y tambi\u00e9n la radio. El Hots contiene las capas superiores de la pila de protocolos. Por encima de ambas estar\u00eda la aplicaci\u00f3n de usuario que es la que interact\u00faa con la pila de protocolos. La ventaja es que todas estas capas se pueden implementar en un solo chip o dividir en varios y conectarlos a trav\u00e9s de una capa de comunicaciones como UART, USB o SPI.</p> <ul> <li> <p>El controlador contiene las capas: Interfaz de controlador de host (HCI), Capa de enlace (LL) y Capa f\u00edsica (PHY)</p> <ul> <li>En la capa f\u00edsica (physical layer) se implementa toda la circuiteria de comunicaciones. La tecnolog\u00eda BLE puede usar hasta 40 canales de 2MHz en la banda ISM. El est\u00e1ndar emplea la t\u00e9cnica \u201cfrequency hopping\u201d o \u201csaltos en frecuencia\u201d, siguiendo una secuencia de saltos pseudo-aleatorios entre los canales frecuenciales mencionados que ofrece un alto grado de robustez frente a interferencias.</li> <li>La capa de enlace (link layer), se encarga de gestionar caracter\u00edsticas como los requerimientos temporales del est\u00e1ndar, chequeo de mensajes y reenv\u00edo de mensajes err\u00f3neos recibidos, gesti\u00f3n, filtrado de direcciones etc. Adem\u00e1s ofrece la definici\u00f3n de roles (Advertiser, Scanner, Master and Slave) que permiten identificar de forma l\u00f3gica el rol de cada dispositivo en el proceso de coElmunicaci\u00f3n. El nivel LL es del mismo modo responsable de procesos de control como el cambio de par\u00e1metros de la conexi\u00f3n o la encriptaci\u00f3n.</li> <li>el Host Controller o HCI es un protocolo est\u00e1ndar que permite que la comunicaci\u00f3n entre un host y un controlador se lleve a cabo a trav\u00e9s de un interfaz serie. A modo de ejemplo, en la mayor\u00eda de smartphones u ordenadores el host y la aplicaci\u00f3n corren en la CPU principal mientras que el controlador est\u00e1 situado en hardware espec\u00edfico y separado, conectado mediante UART o USB. El est\u00e1ndar Bluetooth define HCI como el conjunto de comandos y eventos para la interacci\u00f3n de ambas partes (host y controlador).</li> </ul> </li> <li> <p>El host contiene las siguientes capas: Perfil de acceso gen\u00e9rico (GAP), Perfil de atributo gen\u00e9rico (GATT), Protocolo de adaptaci\u00f3n y control de enlace l\u00f3gico (L2CAP), Protocolo de atributos (ATT), Gerente de seguridad (SM) y la Interfaz de controlador de host (HCI).</p> <ul> <li>La capa L2CAP (Logic Link Control and Adaptation Protocol), se responsabiliza de dos tareas fundamentales en un proceso de comunicaci\u00f3n. En primer lugar, el proceso de multiplexaci\u00f3n, es decir, la capacidad de dar formato a mensajes provenientes de las capas OSI superiores y encapsularlos en paquetes est\u00e1ndar BLE as\u00ed como el proceso inveM\u00f3dulrso.</li> <li>Para BLE, la capa L2CAP es la encargada de dar acceso y soporte a los dos protocolos fundamentales. Por un lado, ATT (Attribute Protocol), un protocolo basado en atributos presentados por dispositivo, con arquitectura cliente-servidor, que permite el intercambio de informaci\u00f3n. Por otro lado, SMP (Security Manager Protocol), protocolo que proporciona un framework para generar y distribuir claves de seguridad entre dos dispositivos.</li> <li>En el nivel m\u00e1s alto de la capa de protocolos, encontraremos de forma paralela las capas GAP y GATT. Esta primera, GAP (Generic Acces Profile), permite que un dispositivo sea visible hacia el resto de dispositivos y adem\u00e1s determina como puede interactuar un dispositivo entre otro. Establece distintas normas y conceptos para estandarizar las operaciones de m\u00e1s bajo nivel como: <ul> <li>Roles de interacci\u00f3n</li> <li>Modos de operaci\u00f3n y transici\u00f3n entre ellos</li> <li>Procedimientos para establecimiento de comunicaci\u00f3n</li> <li>Modos de seguridad y procedimientos</li> </ul> </li> </ul> </li> <li> <p>Al otro lado, GATT (Generic Attribute Profile), que define como dos dispositivos BLE transfieren informaci\u00f3n. Este proceso tiene lugar cuando dos dispositivos han superado la fase de establecimiento de comunicaci\u00f3n (controlada por GAP) y comienza la transferencia de informaci\u00f3n pudiendo ser de forma bidireccional.</p> </li> </ul> <p>En dispositivos con microcontrolador ESP32 con BLE integrado simplemente comunicamos con el dispositivo indicando el nombre del mismo.</p>"},{"location":"bt/#aplicaciones-bluetooth","title":"Aplicaciones Bluetooth","text":"<p>Existen muchas aplicaciones y en todas, antes de usar cualquier aplicaci\u00f3n, debemos emparejar el BLE de la ESP32 con nuestro m\u00f3vil. Adem\u00e1s, una vez emparejados los dispositivos, debemos establecer la conexi\u00f3n entre ambos dentro de la APP con la que pretendemos trabajar. Este punto puede presentarnos alguna dificultad si no tenemos correctamente configuradas las opciones de la APP. Veamos como proceder con un m\u00f3vil que tiene instalado Android versi\u00f3n 14 UKQ1.230917.001.</p> <p>Opciones de APP</p> <p>Localizamos el icono de la aplicaci\u00f3n y lo mantenemos pulsado hasta que aparezcan las opciones de \"informaci\u00f3n\" y \"borrado\" de la APP.</p> <p> <p>. Acceso a informaci\u00f3n de la APP</p> <p></p> <p>Pulsamos sobre la \"i\" y nos aparece la pantalla de \"Informaci\u00f3n de la aplicaci\u00f3n\":</p> <p> <p>. Informaci\u00f3n de la informaci\u00f3n de la APP</p> <p></p> <p>Desde la pantalla anterior podemos acceder a \"Otros permisos\" que tiene dicha aplicaci\u00f3n. Estos pueden tener el aspecto que vemos en la imagen siguiente:</p> <p> <p>. Permisos de la APP</p> <p></p> <p>En estas condiciones no podemos establecer una conexi\u00f3n entre el dispositivo vinculado y el m\u00f3vil. Debemos establecer los permisos de la siguiente forma:</p> <p> <p>. Permisos de la APP</p> <p></p> <p>Existen muchas aplicaciones capaces de actuar como apps que permiten transmitir datos entre dispositivos Bluetooth. Vamos a ver brevemente de Google Play Store las siguientes:</p>"},{"location":"bt/#bluetooth-terminal-qwerty","title":"Bluetooth Terminal Qwerty","text":"<p>Bluetooth Terminal Qwerty, una apk con una interface muy simple y f\u00e1cil de configurar, basta conectarse con el dispositivo emparejado y comenzar a enviar comandos.</p> <p> <p>. Bluetooth Terminal Qwerty</p> <p></p>"},{"location":"bt/#arduino-bluetooth-controller","title":"Arduino Bluetooth Controller","text":"<p>Arduino Bluetooth Controller es una aplicaci\u00f3n que le permite controlar su placa arduino (y placas similares) a trav\u00e9s de Bluetooth.</p> <p> <p>. Logo Arduino Bluetooth Controller</p> <p></p> <p>Al lanzar la aplicaci\u00f3n se muestra una imagen y tras unos instantes aparece el men\u00fa gr\u00e1fico de la aplicaci\u00f3n. En la parte superior derecha tenemos el icono para conectar a un dispositivo.</p> <p> <p>. Arduino Bluetooth Controller</p> <p></p> <p>En la imagen siguiente vemos el modo terminal de la aplicaci\u00f3n.</p> <p> <p>. Modo terminal de Arduino Bluetooth Controller</p> <p></p>"},{"location":"bt/#arduino-bluetooth-control","title":"Arduino Bluetooth Control","text":"<p>Arduino Bluetooth Control tambi\u00e9n es una aplicaci\u00f3n que te permite controlar la placa arduino (y placas similares) a trav\u00e9s de Bluetooth.</p> <p> <p>. Logo Arduino Bluetooth Control</p> <p></p> <p>Se lanza la app, se escoge dispositivo y selecciona el modo terminal para estar en una situaci\u00f3n parecida a la de las otras aplicaciones.</p> <p> <p>. Arduino Bluetooth Control</p> <p></p>"},{"location":"bt/#serial-bluetooth-terminal","title":"Serial Bluetooth Terminal","text":"<p>Aplicaci\u00f3n para Android compatible con Bluetooth cl\u00e1sico y Bluetooth LE o Bluetooth Low Energy o BLE o Bluetooth Smart.</p> <p> <p>. Logo Serial Bluetooth Terminal</p> <p></p> <p>Seguimos el proceso habitual de emparejar la ESP32 micro:STEAMakers con nuestro m\u00f3vil:</p> <p> <p>. Proceso para emparejar dispositivos</p> <p></p> <p>Abrimos la APP, que por defecto nos muestra la pantalla siguiente:</p> <p> <p>. Pantalla inicial Serial Bluetooth Terminal</p> <p></p> <p>Si abrimos el men\u00fa de la parte izquierda vemos una pantalla con opciones. Entramos en \"Devices\" para que se muestren los dispositivos disponibles y as\u00ed conectarnos con el dispositivo que hemos emparejado antes:</p> <p> <p>. Conexi\u00f3n con dispositivo</p> <p></p> <p>En la pantalla de la derecha vemos que podemos volver al terminal mostrado en la primera p\u00e1gina y escoger el tipo de Bluetooth con el que vamos a trabajar, BLE en nuestro caso. Pulsamos sobre el dispositivo marcado y se establece la conexi\u00f3n, indic\u00e1ndose esto mediante mensajes y por la posici\u00f3n del conector, y se retorna a la pantalla del terminal que vemos a continuaci\u00f3n:</p> <p> <p>. Conexi\u00f3n con dispositivo establecida</p> <p></p> <p>Con esto el sistema est\u00e1 listo para enviar datos de la placa al m\u00f3vil y viceversa.</p>"},{"location":"escudos/","title":"Escudos (Shields)","text":""},{"location":"escudos/#sensor-shield-modular-v2","title":"Sensor shield modular V2","text":""},{"location":"escudos/#introduccion","title":"Introducci\u00f3n","text":"<p>Se trata de un escudo con conexi\u00f3n r\u00e1pida de sensores para la versi\u00f3n V2 de micro:bit. Su aspecto lo vemos en la imagen siguiente:</p> <p> <p> Aspecto de la shield</p> <p></p> <p>La shield V2 convierte todos los puertos PIO de la placa de control micro:STEAMakers en una interfaz de tres pines (GND, VCC, Se\u00f1al), muy f\u00e1cil para conectar la placa de control y m\u00f3dulos sensores.</p> <p>Por otra parte, tambi\u00e9n dispone pines hembra para interfaz de comunicaci\u00f3n serie y pines macho de comunicaci\u00f3n I2C y SPI. De modo que esta shield permitir\u00e1 la comunicaci\u00f3n entre la placa de control micro:STEAMakers y otros dispositivos de comunicaci\u00f3n. La placa se puede alimentar a trav\u00e9s de un jack DC negro (DC 7-9V) o un puerto USB micro (DC 5V). Cuando alimentemos a trav\u00e9s de la shield, se puede seleccionar el voltaje de alimentaci\u00f3n V1 y V2 a 3.3V o 5V a trav\u00e9s de los jumpers V1 y V2.</p>"},{"location":"escudos/#seleccion-y-analisis-de-tensiones","title":"Selecci\u00f3n y an\u00e1lisis de tensiones","text":"<p>Las combinaciones posibles las vemos en la tabla siguiente:</p> <p> Posici\u00f3n V2 (V) V1 (V) Posici\u00f3n V2 (V) V1 (V) 3.3 3.3 5 5 5 3.3 3.3 5 <p></p> <p>En la shield observamos como seg\u00fan estos selectores en los pines de alimentaci\u00f3n positiva (rojos) estar\u00e1 presente una u otra tensi\u00f3n.</p> <p>Aviso</p> <p>Sin alimentaci\u00f3n externa de la shield en V1 y/o V2 no habr\u00e1 5V aunque alimentemos externamente a la placa micro:STEAMakers. Alimentando la shield la tensi\u00f3n en V1 y/o V2 depende de la posici\u00f3n de su jumper y ser\u00e1 de 5V si la alimentamos a trav\u00e9s del conector micro USB o a trav\u00e9s del Jack de alimentaci\u00f3n.</p> <p>La shield va dotada de dos reguladores de tensi\u00f3n un ASM1117 para 3.3V y un 117-5 para 5V, ambos en encapsulado SOT-223. Ambos reguladores se configuran facilmente con muy pocos componentes externos para, junto con los jumpers, cumplir con su misi\u00f3n en la placa.</p>"},{"location":"escudos/#detalles-tecnicos","title":"Detalles t\u00e9cnicos","text":"<p>Los principales detalles t\u00e9cnicos de la shield son:</p> <ul> <li>Entrada de alimentaci\u00f3n externa: jack negro DC (DC 7-9V) o puerto micro USB (DC 5V)</li> <li>Tensi\u00f3n de salida: seleccionable a 3.3V o 5V a trav\u00e9s de los jumpera V1/V2</li> <li>Indicador de alimentaci\u00f3n externa.</li> <li>Convierte la interfaz de pines PIO de micro:STEAMakers a conectores de tres pines.</li> <li>Pines de comunicaci\u00f3n serie.</li> <li>Pines de comunicaci\u00f3n I2C.</li> <li>Pines de comunicaci\u00f3n SPI.</li> <li>Dimensiones: 65mm x 58mm x 12mm.</li> </ul>"},{"location":"escudos/#diagrama-de-pines","title":"Diagrama de pines","text":"<p>En la imagen siguiente podemos ver el diagrama de pines original de esta placa:</p> <p> <p> Pinout original</p> <p></p> <p>Pero debemos tener muy presente que esta shield es para una placa micro:bit y no para un micro:STEAMakers por lo que la numeraci\u00f3n impresa en la misma no es la correcta para nuestros prop\u00f3sitos. Por ello se ha estudiado la correspondencia de pines del borde de la micro:STEAMakers con esta shield obteniendo el siguiente pinout:</p> <p> <p> Pinout micro:STEAMakers vs Shield Clic sobre la imagen para ampliarla</p> <p></p>"},{"location":"escudos/#compatibilidad-de-pines","title":"Compatibilidad de pines","text":"<p>AVISO IMPORTANTE</p> <p>Cuando vamos a trabajar con se\u00f1ales anal\u00f3gicas debemos tener muy presente que, aunque todos los pines IOxx son entradas y salidas digitales, algunas incluso con m\u00e1s funciones. Cuando tenemos que utilizar la comunicaci\u00f3n WiFi el convertidor ADC2 NO funciona.</p> <p>Las placas ESP32 tienen disponibles dos ADC (Analog to Digital Converter) de 12 bits que se denominan ADC1 y ADC2. Esos 12 bits dan una precisi\u00f3n de \\(2^{12} = 4096\\). Por lo tanto, si tenemos 12 bits para 3.3V podemos asegurar que \\(3.3V/4096 = 0,8 mV\\) es la tensi\u00f3n correspondiente a cada paso.</p> <p>M\u00e1xima tensi\u00f3n admisible en el ADC</p> <p>Aunque los pines GPIO de la ESP32 pueden funcionar a 5V, los conversores ADC no pueden. Debemos tener cuidado de no sobrepasar esos 3.3V si el pin es uno de los que est\u00e1n conectados a uno de los conversores.</p> <p>La placa ESP32 micro:STEAMakers es al fin y al cabo una ESP32 y la lectura de una entrada anal\u00f3gica se realiza de la forma habitual en entornos basados en Arduino, es decir con <code>analogRead(pin_GPIO)</code>. Internamente la ESP32, de manera gen\u00e9rica, compara la tensi\u00f3n que pretendemos medir con un valor de referencia Vref mediante un circuito atenuador de ganancia variable, tipicamente de -11dB para poder medir hasta 3.3V.</p> <p>En la ESP32 micro:STEAMakers los pines que tienen conxi\u00f3n con los conversores ADC y que pueden ser utilizados como entradas anal\u00f3gicas est\u00e1n distribuidos de la siguiente forma:</p> <ul> <li>ADC1 se conecta a 8 pines GPIO:</li> </ul> <p>32 , 33, 34, 35, 36, 37, 38, 39</p> <ul> <li>ADC2 se conecta a 10 pines GPIO:</li> </ul> <p>0, 2, 4, 12, 13, 14, 15, 25, 26, 27 WiFi ON \u2192 INHABILITA ADC2</p> <p>A efectos pr\u00e1cticos, aunque en el pinout de la placa no se indican las entradas anal\u00f3gicas, podemos asegurar que todos los pines que pueden ser usados como entradas anal\u00f3gicas, con la \u00fanica excepci\u00f3n de la patilla 2 que se conecta a io32 y que pertenece a ADC1, funcionar\u00e1n correctamente siempre y cuando no realicemos configuraci\u00f3n WiFi alguna, dado que est\u00e1n conectados a ADC2.</p>"},{"location":"escudos/#shield-modular-90o","title":"Shield modular 90\u00ba","text":""},{"location":"escudos/#introduccion_1","title":"Introducci\u00f3n","text":"<p>Se trata de un escudo con conexi\u00f3n r\u00e1pida de sensores con numeraci\u00f3n de pines gen\u00e9rica para micro:bit y como GPIO para que resulte mas sencillo utilizar con la micro:STEAMakers. Su aspecto lo vemos en la imagen siguiente:</p> <p> <p> Aspecto de la shield</p> <p></p> <p>La shield convierte todos los puertos PIO de la placa de control micro:STEAMakers en una interfaz de tres pines (GND, VCC, Se\u00f1al), muy f\u00e1cil para conectar la placa de control y m\u00f3dulos sensores.</p> <p>Por otra parte, tambi\u00e9n dispone pines macho de comunicaci\u00f3n I2C y SPI. De modo que esta shield permitir\u00e1 la comunicaci\u00f3n entre la placa de control micro:STEAMakers y otros dispositivos de comunicaci\u00f3n. La placa se puede alimentar a trav\u00e9s de un conector JST (DC 7-12V) colocando el interruptor en posici\u00f3n ON.</p> <p>Cuando alimentamos externamente tenemos disponible la conexi\u00f3n I2C con alimentaci\u00f3n a 5V.</p>"},{"location":"escudos/#diagrama-de-pines_1","title":"Diagrama de pines","text":"<p>En la imagen siguiente podemos ver el diagrama de pines de esta placa en relaci\u00f3n a la micro:STEAMakers:</p> <p> <p> Pinout</p> <p></p>"},{"location":"escudos/#compatibilidad-de-pines_1","title":"Compatibilidad de pines","text":"<p>AVISO IMPORTANTE</p> <p>Cuando vamos a trabajar con se\u00f1ales anal\u00f3gicas debemos tener muy presente que, aunque todos los pines IOxx son entradas y salidas digitales, algunas incluso con m\u00e1s funciones. Cuando tenemos que utilizar la comunicaci\u00f3n WiFi el convertidor ADC2 NO funciona.</p> <p>Las placas ESP32 tienen disponibles dos ADC (Analog to Digital Converter) de 12 bits que se denominan ADC1 y ADC2. Esos 12 bits dan una precisi\u00f3n de \\(2^{12} = 4096\\). Por lo tanto, si tenemos 12 bits para 3.3V podemos asegurar que \\(3.3V/4096 = 0,8 mV\\) es la tensi\u00f3n correspondiente a cada paso.</p> <p>M\u00e1xima tensi\u00f3n admisible en el ADC</p> <p>Aunque los pines GPIO de la ESP32 pueden funcionar a 5V, los conversores ADC no pueden. Debemos tener cuidado de no sobrepasar esos 3.3V si el pin es uno de los que est\u00e1n conectados a uno de los conversores.</p> <p>La placa ESP32 micro:STEAMakers es al fin y al cabo una ESP32 y la lectura de una entrada anal\u00f3gica se realiza de la forma habitual en entornos basados en Arduino, es decir con <code>analogRead(pin_GPIO)</code>. Internamente la ESP32, de manera gen\u00e9rica, compara la tensi\u00f3n que pretendemos medir con un valor de referencia Vref mediante un circuito atenuador de ganancia variable, tipicamente de -11dB para poder medir hasta 3.3V.</p> <p>En la ESP32 micro:STEAMakers los pines que tienen conxi\u00f3n con los conversores ADC y que pueden ser utilizados como entradas anal\u00f3gicas est\u00e1n distribuidos de la siguiente forma:</p> <ul> <li>ADC1 se conecta a 8 pines GPIO:</li> </ul> <p>32 , 33, 34, 35, 36, 37, 38, 39</p> <ul> <li>ADC2 se conecta a 10 pines GPIO:</li> </ul> <p>0, 2, 4, 12, 13, 14, 15, 25, 26, 27 WiFi ON \u2192 INHABILITA ADC2</p> <p>A efectos pr\u00e1cticos, aunque en el pinout de la placa no se indican las entradas anal\u00f3gicas, podemos asegurar que todos los pines que pueden ser usados como entradas anal\u00f3gicas, con la \u00fanica excepci\u00f3n de la patilla 2 que se conecta a io32 y que pertenece a ADC1, funcionar\u00e1n correctamente siempre y cuando no realicemos configuraci\u00f3n WiFi alguna, dado que est\u00e1n conectados a ADC2.</p>"},{"location":"escudos/#shield-easy-plug-11","title":"Shield EASY Plug 1.1","text":""},{"location":"escudos/#introduccion_2","title":"Introducci\u00f3n","text":"<p>Se trata de una placa que inicialmente est\u00e1 pensada para la placa micro:bit, que es una placa de desarrollo dise\u00f1ada por la BBC para la ense\u00f1anza de programaci\u00f3n a adolescentes. Podemos hacer actividades con la placa de micro:STEAMakers utilizando la Shield EASY Plug que nos sirve para extender los pines de borde de placa a conectores Easy Plugs (RJ11 6P6C) donde podemos conectar de forma r\u00e1pida sensores y actuadores.</p> <p>La Shield viene con cuatro LEDs WS2812 (controlados desde P9), un zumbador (controlado por P0). Hay un interruptor (Power Switch) que sirve para control de la alimentaci\u00f3n externa y otro (Voltmeter_Switch) que se utiliza para control del voltaje (3,3V, 5V) de Easy Plug.</p> <p>El aspecto de la placa por la cara frontal es:</p> <p> <p> Cara frontal</p> <p></p> <p>Y por la cara posterior es:</p> <p> <p> Cara posterior</p> <p></p> <p>Los puertos EASY Plug tienen 6 pines que se serigrafian en la cara posterior con respecto a los puertos IO de la placa. La nomenclatura es la siguiente:</p> <ul> <li>G: GND</li> <li>V: Alimentaci\u00f3n controlada por (Voltmeter_Switch) que ser\u00e1 3.3V o 5V siempre y cuando tengamos la alimentaci\u00f3n externa conectada a una fuente de entre 6 y 10V. Sin alimentaci\u00f3n externa los puertos EASY Plug no disponen de tensi\u00f3n positiva de alimentaci\u00f3n.</li> </ul>"},{"location":"escudos/#analisis-alimentacion-shield","title":"An\u00e1lisis alimentaci\u00f3n Shield","text":"<p>En la imagen siguiene vemos destacadas las zonas que vamos a analizar:</p> <p> <p> Alimentaci\u00f3n Shield</p> <p></p> <p>Vemos que entre otros elementos est\u00e1n los dos circuitos integrados destacados. Veamos que son estos circuitos:</p> <p>ASM1117 <p>Es un regulador de baja ca\u00edda en formato SOT-223 capaz de entregar hasta 1A de corriente. En este caso se utiliza como regulador lineal de 5 a 3.3V con un circuito seguramente muy similar al circuito de apllicaci\u00f3n que aparece en el datasheet del ASM1117 y que vemos en la imagen siguiente:</p> <p> <p> Regulador ASM1117</p> <p></p> <p>LM2596 <p>Se trata de un regulador reductor de tensi\u00f3n de salida ajustable, en formato TO-263 KTT, capaz de entregar hasta 3A. El circuito de aplicaci\u00f3n t\u00edpico que indica su datasheet lo vemos a continuaci\u00f3n. Podemos observar como est\u00e1n los componentes en la placa junto al conector de entrada externa de alimentaci\u00f3n. Este va a ser el encargado de regular la tensi\u00f3n externa al valor de tensi\u00f3n seleccionado en la placa con el interruptor Voltimeter-Switch.</p> <p> <p> Regulador LM2596</p> <p></p> <p>Uso sin alimentaci\u00f3n externa</p> <p>Sin alimentaci\u00f3n externa los puertos EASY Plug no disponen de tensi\u00f3n positiva de alimentaci\u00f3n. Por lo tanto no tiene sentido utilizar la Shield con la micro:STEAMakers sin dotarla de una alimentaci\u00f3n entre 6 y 10V a trav\u00e9s de su conector JST POWER.</p>"},{"location":"escudos/#diagrama-de-pines_2","title":"Diagrama de pines","text":"<p>En la figura siguiente podemos observar la relaci\u00f3n de los puertos de la Shield con los pines de la micro:STEAMakers</p> <p> <p> Pinout Shield Clic sobre la imagen para ampliarla</p> <p></p> <p>Un an\u00e1lisis de la gr\u00e1fica nos devuelve una serie de conclusiones a tener en cuenta para el trabajo con esta Shield:</p> <ul> <li>1. Sensores micro:STEAMakers: Los pines io36 (sensor de corriente), io35 (micr\u00f3fono), io39 (sensor de luz) e io33 (Buzzer) no est\u00e1n utilizados en la Shield por lo que el uso de sus elementos asociados no tiene restricciones.</li> <li>2. I2C (SDA - io21; SCL - io22): El conector I2C est\u00e1 tambi\u00e9n disponible en formato EASY Plug y podemos conectar elementos a cualquiera de los conectores sin mas restricciones que las direcciones f\u00edsicas y el n\u00famero de elementos. Su interfaz de conexiones es:</li> </ul> <p> <p> </p> <p></p> <ul> <li>3. P12 (io15): El puerto P12 (io15) se puede usar sin restricciones. Su interfaz de conexiones es:</li> </ul> <p> <p> </p> <p></p> <p>En la pr\u00e1ctica esta interfaz de conexi\u00f3n es la que tienen todos los sensores y actuadores de tipo EASY Plug que requieren, adem\u00e1s de los pines de alimentaci\u00f3n, de un s\u00f3lo pin para los datos digitales o anal\u00f3gicos. Por tanto a este tipo de puerto podemos conectar gran cantidad de elementos.</p> <ul> <li>4. P5 y P11: Puertos asociados a los botones de la micro:STEAMakers no utilizables para otros prop\u00f3sitos.</li> <li>5. P6+P7 (P6 - io2; P7 - io25): Conector con dos puertos con la siguiente interfaz de conexionado de sus pines:</li> </ul> <p> <p> </p> <p></p> <p>En la pr\u00e1ctica esta interfaz de conexi\u00f3n la podemos considerar como la de P12 si solamente tenemos en cuenta el puerto P7 ignorando el P6. L\u00f3gicamente ser\u00eda utilizable con cualquier dispositivo que tuviese la misma interfaz de conexionado.</p> <ul> <li>6. P10 (io26): El puerto P10 (io26) se puede usar sin restricciones. Su interfaz de conexiones es:</li> </ul> <p> <p> </p> <p></p> <ul> <li>7. P0 (io12): El puerto P0 (io12) se puede usar pero con la restricci\u00f3n de que al mismo est\u00e1 conectado el altavoz con la que est\u00e1 equipada la Shield. Su interfaz de conexiones es:</li> </ul> <p> <p> </p> <p></p> <ul> <li>8. P1+P2 (P1 - io14; P2 - io32): Conector con dos puertos con la siguiente interfaz de conexionado de sus pines:</li> </ul> <p> <p> </p> <p></p> <p>En la pr\u00e1ctica esta interfaz de conexi\u00f3n la podemos considerar como la de P12 si solamente tenemos en cuenta el puerto P1 ignorando el P2. L\u00f3gicamente ser\u00eda utilizable con cualquier dispositivo que tuviese la misma interfaz de conexionado.</p> <ul> <li>9. P3+P4+P8 (P3 - io13; P4 - io27; P8 - io4): Conector con tres puertos con la siguiente interfaz de conexionado de sus pines:</li> </ul> <p> <p> </p> <p></p> <p>Como limitaciones de uso debemos tener en cuenta que el puerto P3 est\u00e1 conectado al pin de control de la matriz de 4x4 LEDs RGB de la Shield y que el pin P4 es el mismo que del sensor t\u00e1ctil de la micro:STEAMakers.</p> <p>En la pr\u00e1ctica esta interfaz de conexi\u00f3n la podemos considerar como la de P12 si solamente tenemos en cuenta el puerto P8 ignorando los otros dos. L\u00f3gicamente ser\u00eda utilizable con cualquier dispositivo que tuviese la misma interfaz de conexionado o una interfaz en la que utilice una combinaci\u00f3n de pines como P8 y P4..</p> <ul> <li>10. SPI (SCK-P13; MISO-P14; MOSI-P15; CS-P16): Conector con cuatro puertos dedicado al lector microSD con la siguiente interfaz de conexionado de sus pines:</li> </ul> <p> <p></p> <p></p> <ul> <li>11. P9 (io16): Se trata del pin al que est\u00e1n conectados los 4 LEDs RGB direccionables con los que cuenta la Shield. Veremos como programarlos en las actividades.</li> </ul> <p>En resumen, podemos usar sin restricciones, adem\u00e1s de dispositivos I2C, los puertos P12 (io15), P7 (io25), P10 (io26), P1 (io14) y P8 (io4). Para el resto debemos tener en cuenta las restricciones vistas.</p>"},{"location":"escudos/#compatibilidad-de-pines_2","title":"Compatibilidad de pines","text":"<p>AVISO IMPORTANTE</p> <p>Cuando vamos a trabajar con se\u00f1ales anal\u00f3gicas debemos tener muy presente que, aunque todos los pines IOxx son entradas y salidas digitales, algunas incluso con m\u00e1s funciones. Cuando tenemos que utilizar la comunicaci\u00f3n WiFi el convertidor ADC2 NO funciona.</p> <p>Las placas ESP32 tienen disponibles dos ADC (Analog to Digital Converter) de 12 bits que se denominan ADC1 y ADC2. Esos 12 bits dan una precisi\u00f3n de \\(2^{12} = 4096\\). Por lo tanto, si tenemos 12 bits para 3.3V podemos asegurar que \\(3.3V/4096 = 0,8 mV\\) es la tensi\u00f3n correspondiente a cada paso.</p> <p>M\u00e1xima tensi\u00f3n admisible en el ADC</p> <p>Aunque los pines GPIO de la ESP32 pueden funcionar a 5V, los conversores ADC no pueden. Debemos tener cuidado de no sobrepasar esos 3.3V si el pin es uno de los que est\u00e1n conectados a uno de los conversores.</p> <p>La placa ESP32 micro:STEAMakers es al fin y al cabo una ESP32 y la lectura de una entrada anal\u00f3gica se realiza de la forma habitual en entornos basados en Arduino, es decir con <code>analogRead(pin_GPIO)</code>. Internamente la ESP32, de manera gen\u00e9rica, compara la tensi\u00f3n que pretendemos medir con un valor de referencia Vref mediante un circuito atenuador de ganancia variable, tipicamente de -11dB para poder medir hasta 3.3V.</p> <p>En la ESP32 micro:STEAMakers los pines que tienen conxi\u00f3n con los conversores ADC y que pueden ser utilizados como entradas anal\u00f3gicas est\u00e1n distribuidos de la siguiente forma:</p> <ul> <li>ADC1 se conecta a 8 pines GPIO:</li> </ul> <p>32 , 33, 34, 35, 36, 37, 38, 39</p> <ul> <li>ADC2 se conecta a 10 pines GPIO:</li> </ul> <p>0, 2, 4, 12, 13, 14, 15, 25, 26, 27 WiFi ON \u2192 INHABILITA ADC2</p> <p>A efectos pr\u00e1cticos, revisando el pinout de la placa podemos asegurar que todos los pines catalogados como entradas anal\u00f3gicas, con la \u00fanica excepci\u00f3n de P2 que se conecta a io32 y que pertenece a ADC1, funcionar\u00e1n correctamente siempre y cuando no realicemos configuraci\u00f3n WiFi alguna, dado que est\u00e1n conectados a ADC2.</p>"},{"location":"otrohw/","title":"Otros elementos hardware","text":""},{"location":"otrohw/#zumbador","title":"Zumbador","text":""},{"location":"otrohw/#ideas-basicas-de-sonido","title":"Ideas b\u00e1sicas de sonido","text":"<p>Antes de entrar en descripciones t\u00e9cnicas de componentes vamos a hablar un poco del sonido, sin entrar en profundidad, y como reproducirlo con una micro:STEAMakers.</p> <p>Uno de los par\u00e1metros que caracterizan a un sonido es su frecuencia de emisi\u00f3n, siendo la frecuencia el n\u00famero de veces que se repite por unidad de tiempo (segundo). La transmisi\u00f3n del sonido se realiza por ondas a trav\u00e9s en cualquier medio (s\u00f3lido, l\u00edquido o gaseoso) excepto en el vac\u00edo. La frecuencia de un sonido nos indica cuantos ciclos por segundo tiene una onda.</p> <p>En la imagen y la tabla siguientes vemos un dibujo con un fragmento de las teclas de un piano estando todo referido a una nota est\u00e1ndar, la nota \"La\" central que tiene una frecuencia de 440 Hz. Podemos ver la nota musical que reproduce, en las dos notaciones m\u00e1s comunes de los sonidos (Ingl\u00e9s: C D E F G A B, Alem\u00e1n: C D E F G A H, Espa\u00f1ol, italiano y franc\u00e9s: Do Re Mi Fa Sol La Si) y adem\u00e1s se encuentra la frecuencia que produce esa nota musical.</p> <p> <p> Secci\u00f3n de piano y notas</p> <p></p> <p>Otro de los par\u00e1metros que caracterizan al sonido es su nivel y en sonido se caracteriza con los decibelios (dB) que es la forma de medir la intensidad del sonido. La percepci\u00f3n del sonido depende de factores como la intensidad, el tiempo que dura, las frecuencias o tonos y el entorno donde estamos. Vamos a introducir brevemente como medir la intensidad del sonido.</p> <p>Los decibelios (dB) son la unidad de medida de presi\u00f3n ac\u00fastica. Medimos presi\u00f3n, luego estamos midiendo una fuerza y mas concretamente una fuerza por unidad de superficie. Un sonido pierde intensidad seg\u00fan nos alejamos de la fuente y lo hace a un ritmo de unos 6 dB cada que vez que se duplica la distancia. Vemos un ejemplo: supongamos que escuchamos un sonido de 45 dB a una distancia de un metro, cuando nos pongamos a dos metros escucharemos 39 dB, cuando estemos a 4 metros, ser\u00e1 de 33 dB y cuando estemos a 8 metros, de 27 dB.</p> <p>La escala de medida en dB no es lineal, es logaritmica porque representa mejor la forma en que sentimos los cambios de la intensidad del sonido con nuestro oido. Algunos datos para reflexionar sobre el ruido:</p> <ul> <li>El sonido se vuelve da\u00f1ino para el ser humano a partir de los 75 dB.</li> <li>Alrededor de los 120 dB causa dolor. Una exposici\u00f3n de dos horas a 100 dB necesita un d\u00eda completo para que el oido compense la exposici\u00f3n.</li> <li>Sonido en torno a 180 dB pueden ocasionar la muerte.</li> </ul> <p>En la tabla vemos algunos ejemplos del d\u00eda a d\u00eda:</p> <p> nivel de sonido Percepci\u00f3n Situaci\u00f3n 0 dB Muy bajo Nivel de audici\u00f3n humano 10 a 30 dB Nivel bajo Conversaci\u00f3n tranquila. Biblioteca 30 a 50 dB Nivel bajo Conversaci\u00f3n normal. Motor frigorifico. Agua saliendo del grifo 55 a 75 dB Nivel considerable Aspirador. Calle con trafico denso. Despertador. Batidora 75 a 100 dB Nivel alto Sensaci\u00f3n molesta. Atasco de tr\u00e1fico. Sirena de policia 100 a 120 dB Muy alto Taladro/claxon/concierto R&amp;R = 120 dB. Interior discoteca = 110 dB mas de 120 dB Dolor Avi\u00f3n despegando a 25 metros. Petardo a un metro <p></p> <p>Una equivalencia que nos puede ayudar a familiarizarnos con esta unidad es la tabla de equivalencias entre potencias y dBm (decibelios milivatio):</p> <p> P (mW) dBm P (mW) dBm P (mW) dBm P (mW) dBm 1 0 16 12 250 24 4 W 36 1.3 1 20 13 315 25 5 W 37 1.6 2 25 14 400 26 6 W 38 2 3 32 15 500 27 8 W 39 2.5 4 40 16 630 28 10 W 40 3.2 5 50 17 800 29 13 W 41 4 6 64 18  1 W 30 16 W 42 5 7 80 19 1.3 W 31 20 W 43 6 8 100 20 1.6 W 32 25 W 44 8 9 125 21 2 W 33 32 W 45 10 10 158 22 2.5 W 34 40 W 46 13 11 200 23 3 W 35 50 W 47 <p> </p> <p>Si observamos cuidadosamente la tabla veremos que la potencia se duplica o divide por dos, seg\u00fan recorramos la tabla, cada 3 dB.</p>"},{"location":"otrohw/#zumbador-pasivo","title":"Zumbador pasivo","text":"<p>Un zumbador o buzzer pasivo no es mas que un peque\u00f1o altavoz que nos sirve para convertir una se\u00f1al el\u00e9ctrica en una onda de sonido. Son dispositivos que no disponen de ning\u00fan tipo de electr\u00f3nica interna, por lo que tenemos que proporcionar una se\u00f1al el\u00e9ctrica para conseguir el sonido deseado.</p> <p>Normalmente (como componente) estos dispositivos se incluyen en un m\u00f3dulo que incorpora un transistor y una resistencia de polarizaci\u00f3n del mismo para hacer funcionar al altavoz que act\u00faa como carga.</p> <p>Un buzzer se basa en un transductor piezoel\u00e9ctrico que es capaz de variar su volumen con el paso de la corriente el\u00e9ctrica, fen\u00f3meno que se aprovecha para hacer vibrar la membrana del altavoz. Esquem\u00e1ticamente vemos esto en la figura siguiente:</p> <p> <p> Funcionamiento y aspecto de un buzzer pasivo</p> <p></p> <p>Un zumbador pasivo requiere para su funcionamiento una se\u00f1al de tipo PWM para poder indicarle la frecuencia y la duraci\u00f3n de la se\u00f1al.</p> <p>El aspecto de un buzzer cl\u00e1sico visto por ambos lados nos ayudar\u00e1 a distinguirlo del activo.</p> <p> <p> Aspecto de un buzzer pasivo t\u00edpico</p> <p></p> <p>El que incorpora la ESP32 micro:STEAMakers es de tipo 'montaje superficial' y tiene el aspecto de la imagen siguiente:</p> <p> <p> Aspecto del buzzer pasivo en la micro:STEAMakers</p> <p></p>"},{"location":"otrohw/#zumbador-activo","title":"Zumbador activo","text":"<p>Este tipo de zumbador incluye un oscilador que genera una frecuencia audible fija y que se conoce como zumbador pasivo y,  en realidad, es el que de forma correcta se puede denominar como zumbador. Este es mucho mas sencillo de usar ya que basta con conectarlo a un pin digital y cuando pongamos a nivel alto este pin el zumbador generar\u00e1 su zumbido caracter\u00edstico durante el tiempo que establezcamos. Con este tipo de zumbador no se pueden generar melod\u00edas.</p> <p>Cuando est\u00e1 nuevo se distingue del zumbador pasivo o altavoz por la pegatina de protecci\u00f3n que lo acompa\u00f1a, pero esta hay que quitarla para oir el zumbido y sin ella es dif\u00edcil distinguir un tipo del otro, salvo por su reverso. Es aconsejable marcar alguno de los dos cuando podemos distinguirlos, sobre todo si van a ir montados sobre una PCB. Una buena idea puede ser utilizar la propia pegatina en el lateral del mismo para distinguirlo a primera vista.</p> <p>Un zumbador activo produce un tono audible fijo con tan solo aplicarle tensi\u00f3n.</p> <p>El aspecto por ambos lados de uno t\u00edpico nos ayudar\u00e1 a distinguirlo del pasivo.</p> <p> <p> Aspecto de un buzzer activo t\u00edpico</p> <p></p>"},{"location":"otrohw/#microfonos","title":"Micr\u00f3fonos","text":"<p>Un micr\u00f3fono es un dispositivo de entrada que sirve para transformar ondas sonoras en energia electrica y vicerversa en procesos de grabaci\u00f3n.</p> <p>Existe multitud de tipos de micr\u00f3fonos para distintas aplicaciones en las que no vamos a entrar. En el enlace tienes un amplio art\u00edculo sobre los mismos.</p> <p>Existe un tipo denominado MEMs (\"Microelectromechanical systems\" en ingl\u00e9s) que tambi\u00e9n se denominan chips microf\u00f3nicos y son variantes del micr\u00f3fono a condensador. El diafragma sensible est\u00e1 grabado sobre la oblea de silicio y suelen integrarse con un amplificador incorporado.</p> <p>La micro:STEAMakers tiene un micr\u00f3fono integrado. Puede usarse como una entrada simple (encender luces cuando se aplaude) o tambien se puede medir la cantidad de sonido, por lo que puede hacer un medidor de nivel de ruido o son\u00f3metro b\u00e1sico Tambien podemos hacer que las luces se enciendan en modo disco, al comp\u00e1s de la m\u00fasica. Un micr\u00f3fono funciona como un transductor o sensor electroac\u00fastico y convierte el sonido (ondas sonoras) en una se\u00f1al el\u00e9ctrica para aumentar su intensidad, transmitirla y registrarla.</p> <p>El micr\u00f3fono est\u00e1 en la parte delantera de la micro:STEAMakers y tiene el aspecto que vemos en la imagen siguiente:</p> <p> <p> Aspecto del micr\u00f3fono en la micro:STEAMakers</p> <p></p> <p>Un circuito de aplicaci\u00f3n t\u00edpica lo vemos a continuaci\u00f3n. En el mismo podemos observar que la capsula microf\u00f3nica incluye su propia circuiteria amplificadora.</p> <p> <p> Esquema circuito altavoz</p> <p></p>"},{"location":"otrohw/#acelerometro-giroscopio","title":"Aceler\u00f3metro + giroscopio","text":"<p>La ESP32 micro:STEAMakers monta un chip MPU-6050 de InvenSense que es un dispositivo MEMS de 6 ejes (giroscopio + aceler\u00f3metro). El t\u00e9rmino MEMS, del ingl\u00e9s MicroElectroMechanical Systems, se refiere a la tecnolog\u00eda electromec\u00e1nica de dispositivos microsc\u00f3picos o sistemas microelectromec\u00e1nicos.</p> <p>Los dispositivos MPU-6050 combinan un giroscopio de 3 ejes y un aceler\u00f3metro de 3 ejes en el mismo chip, junto con un procesador digital (Digital Motion Processor\u2122 o DMP) integrado, que procesa algoritmos complejos de 6 ejes. El dispositivo puede acceder a magnet\u00f3metros externos u otros sensores a trav\u00e9s de un bus I\u00b2C maestro auxiliar, lo que permite a los dispositivos recopilar un conjunto completo de datos de sensores sin intervenci\u00f3n del procesador del sistema.</p> <p>Para un seguimiento preciso de los movimientos r\u00e1pidos y lentos, el chip incorpora un giroscopio programable por el usuario con una escala completa de \u00b1250, \u00b1500, \u00b11000 y \u00b12000 \u00b0/seg (dps), y un aceler\u00f3metro programable por el usuario con una escala completa de \u00b12g, \u00b14g, \u00b18g y \u00b116g. Otras caracter\u00edsticas son un sensor de temperatura integrado con una variaci\u00f3n del \u00b11% en el rango de temperatura de funcionamiento.</p> <p>En arduinoblocks se implementa el bloque del sensor con las aceleraciones y giros en los ejes X, Y y Z que vemos en la imagen siguiente:</p> <p> <p> Bloque Accel+Gyro</p> <p></p> <p>A continuaci\u00f3n vamos a analizar la posici\u00f3n de los ejes X, Y, Z con la micro:STEAMakers vista por su cara frontal con el conector USB-C en la parte superior. La forma habitual en que vemos la pantalla de LEDs RGB.</p> <p>Analizando la imagen siguiente:</p> <p> <p> Analisis de la posici\u00f3n de los ejes</p> <p></p> <p>Fijamos la posici\u00f3n de los ejes que vemos en la imagen siguiente:</p> <p> <p> Posici\u00f3n de los ejes</p> <p></p> <p>Tal y como vemos en la imagen siguiente, un programa en el que asignamos al plotter las aceleraciones en los tres ejes nos devuelve como resultado que cuando movemos la placa en el eje X habitual responde la aceleraci\u00f3n en Y (marr\u00f3n oscuro) y al moverlo en Y responde la de X (magenta claro). La tercera gr\u00e1fica corresponde al eje Z.</p> <p> <p> Cambios de ejes X e Y</p> <p></p> <p>Como veremos en la actividad correspondiente el problema en muy sencillo de solucionar (si no lo est\u00e1 en el propio IDE de programaci\u00f3n) para que las direcciones del movimiento sean la que habitualmente utilizamos en los ejes coordenados.</p> <p>En la imagen siguiente se analiza la aceleraci\u00f3n en el eje Z:</p> <p> <p> Aceleraci\u00f3n eje Z</p> <p></p> <p>El problema se repite cuando trabajamos con los datos de giro.</p>"},{"location":"otrohw/#tarjeta-microsd","title":"Tarjeta microSD","text":"<p>La placa ESP32 microSTEAMakers incorpora un lector de tarjetas microSD conectada mediante el bus SPI para comunicarse con el micro controlador.</p> <p>El lector se conecta utilizando los pines:</p> <ul> <li>io5 - CS o Chip Select</li> <li>io23 - MOSI o Master Output Slave Input: Salida de datos del Master y entrada de datos al Esclavo.</li> <li>io19 - MISO o Master Input Slave Output: Salida de datos del Esclavo y entrada al Master.</li> <li>io18 - SCK o Clock</li> </ul> <p>En la Presentaci\u00f3n, apartado Introducci\u00f3n podemos apreciar la posici\u00f3n del lecto SD en la parte posterior de la placa. En la imagen siguiente vemos destacado el lector SD.</p> <p> <p> Lector de tarjetas microSD</p> <p></p>"},{"location":"presenta/","title":"Presentaci\u00f3n","text":"<p> <p></p> <p>El manual de la placa ESP32 micro:STEAMakers y el entorno de programaci\u00f3n arduinoblocks de INNOVA DIDACTIC nos ofrece informaci\u00f3n y muchas actividades con la placa.</p>"},{"location":"rgb/","title":"Diodos LEDs RGB y modelos de color","text":""},{"location":"rgb/#introduccion","title":"Introducci\u00f3n","text":"<p>Explicamos los fundamentos desde un diodo LED hasta los LEDs RGB direccionables y los modelos de color RGB y HSV por la utilidad que van a tener en nuestro caso.</p>"},{"location":"rgb/#diodo-led","title":"Diodo LED","text":"<p>El diodo LED (Light Emitting Diode) es un diodo semiconductor capaz de emitir luz, lo mas usuales dentro del espectro visible aunque tambi\u00e9n pueden ser de infrarrojos, laser, etc. Su uso mas habitual es como indicador y, \u00faltimamente cada vez mas frecuentes en iluminaci\u00f3n. Sus principales ventajas frente a luces incandescentes son:</p> <ul> <li>Menor consumo de energ\u00eda</li> <li>Mayor vida \u00fatil</li> <li>Menor tama\u00f1o</li> <li>Gran durabilidad y fiabilidad</li> </ul> <p>En la imagen siguiente vemos el aspecto f\u00edsico que tiene y su s\u00edmbolo electr\u00f3nico.</p> <p> <p> Aspecto y s\u00edmbolo del LED</p> <p></p> <p>El color de la c\u00e1psula es simplemente orientativo, es la longitud de onda quien define realmente el color de la luz emitida. Por ello el LED con la c\u00e1psula transparente puede emitir en cualquiera de los colores del espectro visible.</p> <p>La forma de la capsula mas habitual es cil\u00edndrica de 3 o 5 mm de di\u00e1metro, aunque existen otras formas menos usuales como las que vemos en la imagen siguiente:</p> <p> <p> Tipos de encapsulados para LEDs</p> <p></p> <p>El LED es un dispositivo que tiene polaridad siendo su comportamiento el siguiente: En polarizaci\u00f3n directa (\u00e1nodo a positivo y c\u00e1todo a negativo) el LED emite luz y en polarizaci\u00f3n inversa (\u00e1nodo negativo y c\u00e1todo positivo) se comporta pr\u00e1cticamente como un interruptor abierto.</p> <p>Para su correcto funcionamiento el diodo LED se polariza poni\u00e9ndole en serie una resistencia que limita la corriente que pasa a trav\u00e9s del mismo y, por tanto, determina el nivel de brillo de la luz emitida.</p> <p>Sin entrar en detalles en la tabla siguiente se dan los valores de tensi\u00f3n directa (VF) y corriente directa (IF) para los colores mas habituales de LEDs. A partir de estos valores y el valor de tensi\u00f3n de alimentaci\u00f3n de nuestro LED podemos calcular el valor de la resistencia serie sin mas que aplicar la formula indicada.</p> <p> <p> Tensi\u00f3n y corriente para distintos colores</p> <p></p> <p>La formula corresponde a un circuito t\u00edpico de polarizaci\u00f3n de un diodo LED como el siguiente:</p> <p> <p> Circuito de polarizaci\u00f3n de un LED</p> <p></p> <p>Si tenemos necesidad podemos utilizar la calculadora de resistencia serie LED de Digikey.</p>"},{"location":"rgb/#led-rgb","title":"LED RGB","text":"<p>Un LED RGB es en realidad un encapsulado que incorpora tres diodos LED, uno por cada color fundamental y una patilla com\u00fan que puede ser el \u00e1nodo o el c\u00e1todo de los tres diodos.</p> <p>Los colores primarios en \u00f3ptica son el rojo, el verde y el azul y la correcta combinaci\u00f3n, en t\u00e9rminos de intensidad, de ellos originar\u00e1 cualquiera de los colores secundarios. Las siglas RGB son el acr\u00f3nimo de Red, Green y Blue. En la imagen siguiente vemos el modelo aditivo de los colores rojo, verde y azul.</p> <p> <p> RGB Imagen obtenida de Wikipedia</p> <p></p> <p>Existen dos tipos de LEDs RGB seg\u00fan est\u00e1n conectados internamente y pueden ser de c\u00e1todo com\u00fan o de \u00e1nodo com\u00fan. El s\u00edmbolo y la representaci\u00f3n de este componente lo vemos en la imagen siguiente, correspondiendo la pareja de la izquierda a los de c\u00e1todo com\u00fan y la pareja de la derecha a los de \u00e1nodo com\u00fan:</p> <p> <p> S\u00edmbolo y representaci\u00f3n LED RGB</p> <p></p> <p>El pin mas largo es el com\u00fan, el de su izquierda es el rojo (R), el de su derecha es el verde (G) y el \u00faltimo por la derecha el azul (B).</p> <p>Te\u00f3ricamente, cada uno de los LEDs podr\u00eda adoptar 256 (valores entre 0 y 255) colores diferentes, es decir, un total de 16.777.216 (256x3) posibles colores diferentes con un LED RGB. En realidad el ojo humano solamente puede ver unos 10 millones de colores definidos por lo que se conoce como espacio de color, que tiene como referencia est\u00e1ndar habitual el denominado CIELAB o CIEXYZ, dise\u00f1ados especificamente para abarcar lo que el ojo humano ve.</p>"},{"location":"rgb/#led-rgb-direccionable","title":"LED RGB direccionable","text":"<p>Com\u00fanmente se les conoce como Neopixel, que es una marca registrada por Adafruit Industries. Cada LED que componen la tira o matriz tiene los siguientes cuatro pines:</p> <ul> <li>Alimentaci\u00f3n VDD: 5V</li> <li>Tierra: GND</li> <li>DI (Date Input): pin para recibir informaci\u00f3n</li> <li>DO (Date Output): pin para enviar inforamci\u00f3n</li> </ul> <p>Cada uno de los LEDs es direccionable de manera individual gracias al circuito electr\u00f3nico que incluyen que es un circuito l\u00f3gico con una memoria de un byte por color. Los tipos mas comunes son el SK6812, WS2811 o, el mas habitual de todos, el WS2812 cuyo datasheet tenemos en el enlace.</p> <p>El WS2812B incluye un oscilador interno de precisi\u00f3n y un circuito de control de corriente constante programable de 12 V, lo que garantiza de manera efectiva que la intensidad del color sea consistente. El protocolo de transferencia de datos utiliza un \u00fanico modo de comunicaci\u00f3n de multiplexado NZR.</p> <p>En la figura siguiente vemos el aspecto de un diodo LED RGB individual en formato inserci\u00f3n y SMD.</p> <p> <p> Aspecto de un diodo LED RGB direccionable</p> <p></p>"},{"location":"rgb/#funcionamiento-y-tipos","title":"Funcionamiento y tipos","text":""},{"location":"rgb/#aspectos-previos","title":"Aspectos previos","text":"<p>Para transmitir informaci\u00f3n digital esta se debe sincronizar mediante una convenci\u00f3n especial, la codificaci\u00f3n. Dos dispositivos llevan una comunicaci\u00f3n por cable convirtiendo la informaci\u00f3n a transmitir en un flujo de bits (0 y 1) o \"Dates\" que se suele nombrar con la letra D y que va acompa\u00f1ada de una se\u00f1al de reloj para sincronizar las transmisiones. La forma convencional de transmisi\u00f3n digital se componen de una l\u00ednea de datos mas una l\u00ednea de reloj. Ahora bien, cualquier ligera desviaci\u00f3n en la longitud de estas l\u00edneas har\u00e1 que el receptor no cumpla con el tiempo de establecimiento del muestreo de datos, originando errores en los datos. La forma de asegurar que esas l\u00edneas son id\u00e9nticas es que sean la misma l\u00ednea, lo que hace que aparezcan c\u00f3digos que fusionan los datos y el reloj, entre los que est\u00e1n los c\u00f3digo RZ, NRZ y NRZI que vamos a ver someramente a continuaci\u00f3n.</p> <ul> <li>Codificaci\u00f3n RZ. El acr\u00f3nimo de de \"Return Zero\" o retorno cero y su caracter\u00edstica es que se transmiten bits de datos dentro de cada periodo de la se\u00f1al. En la figura siguiente los datos se representan en rojo y vemos que ocupan una parte del periodo T, siendo y matrices RGBcero el resto del tiempo. Este sistema se denomina RZ unipolar o retorno a cero unipolar y como se observa en la figura un nivel bajo indica 0 y un nivel positivo indica 1.</li> </ul> <p> <p> C\u00f3digo RZ unipolar</p> <p></p> <p>El c\u00f3digo de retorno a cero se divide en un c\u00f3digo de retorno a cero unipolar y un c\u00f3digo de retorno a cero bipolar en el que el nivel alto indica 1 y el nivel negativo o, tal y como vemos en la figura siguiente:</p> <p> <p> C\u00f3digo RZ bipolar</p> <p></p> <ul> <li>Codificaci\u00f3n NRZ. El acr\u00f3nimo es de \"Not Return Zero\" o c\u00f3digo sin retorno a cero y se diferencia del RZ en que no necesita retornar a cero. En la figura siguiente vemos gr\u00e1ficamente el c\u00f3digo.</li> </ul> <p> <p> C\u00f3digo NRZ</p> <p></p> <p>En el datasheet estos c\u00f3digo se denominan T0H y T0L.</p> <p>El funcionamiento de una agrupaci\u00f3n en cascada como la de la figura siguiente se puede resumir diciendo que: el circuito integrado de cada LED puede almacenar 3 bytes (24 bits), un byte para cada color. Solo el primer LED est\u00e1 conectado al Pin de control, en este caso, un pin digital de nuestra placa, que enviar\u00e1 la cadena de todos los colores seg\u00fan el n\u00famero de pixeles que est\u00e9n conectados y a su vez el primer LED recibir\u00e1 la informaci\u00f3n de todos los colores uno tras otro. La informaci\u00f3n se transmite de un LED a otro porque cuando un LED recibe 3 bytes nuevos de informaci\u00f3n entrega al siguiente LED los 3 bytes que conten\u00eda anteriormente, de esta manera cuando la placa con el programa termina de mandar todos los colores por el pin de datos el primer LED habr\u00eda recibido y enviado todos los colores para quedarse finalmente con el color que le corresponde y as\u00ed el resto de LEDs. De esta forma una tira de LEDs RGB direccionables es un dispositivo digital de salida, es decir su funcionamiento consiste en recibir la informaci\u00f3n del color a mostrar y mostrarlo.digital de salida, es decir su funcionamiento consiste en recibir la informaci\u00f3n del color a mostrar y mostrarlo.</p> <p> <p> Conexi\u00f3n en cascada</p> <p></p>"},{"location":"rgb/#aspectos-tecnicos","title":"Aspectos t\u00e9cnicos","text":"<p>Los LEDs RGB direccionables se suelen suministrar en tiras de diferentes longitudes y con distinto n\u00famero de LEDs y a veces se dispone la tira en forma de matriz. En la figura siguiente vemos el aspecto de algunos tipos.</p> <p> <p> Conexi\u00f3n en cascada</p> <p></p> <p>Tienen 3 cables asociados a un conector y dos cables extra para a\u00f1adir alimentaci\u00f3n externa cuando es necesario porque la placa de control no entrega suficiente corriente para alimentar al conjunto. Cuando se trabaja con una tira de pocos LEDs no es necesario a\u00f1adir esta alimentaci\u00f3n externa, ya que placas como Arduino UNO o la ESP32 STEAMakers pueden suministrar la corriente que necesitan.</p> <p>En la figura siguiente vemos una tira de 8 LEDs:</p> <p> <p> Tira de ocho LEDs RGB</p> <p></p> <p>Cualquier tira de LEDs RGB (sea cual sea su disposici\u00f3n en l\u00ednea, como matriz, etc) debe utilizarse siempre en la direcci\u00f3n que marca el terminal hembra como entrada y el conector macho como salida. Las podemos ir conectando entre s\u00ed pero siempre respetando este sentido de la tira. Junto a cada led RGB est\u00e1 indicada la direcci\u00f3n de la tira mediante un tri\u00e1ngulo y tambi\u00e9n a qu\u00e9 pin debe ir conectado cada cable. Vemos +5V que corresponde a Vcc, GND, y en medio que pone Din o D0 que corresponde al pin digital de entrada de datos que debemos conectar al pin de salida de la placa de control.</p> <p>Tambi\u00e9n las podemos cortar por cualquiera de las l\u00edneas existentes entre cada uno de los LEDs y que est\u00e1 marcado con la l\u00ednea de corte. El corte debe hacerse dejando la mitad del pad de cobre a un lado y otro de la l\u00ednea y as\u00ed poder unir despu\u00e9s entre ellas con conectores especializados o sold\u00e1ndolas.</p> <p> <p> Direcci\u00f3n y l\u00ednea de corte</p> <p></p>"},{"location":"rgb/#modulo-de-8-leds","title":"M\u00f3dulo de 8 LEDs","text":"<p>Vamos a explicar brevemente el m\u00f3dulo de 8 LEDs de Freenove que se muestra a continuaci\u00f3n:</p> <p> <p> Aspecto del m\u00f3dulo</p> <p></p> <p>El m\u00f3dulo se puede controlar con s\u00f3lo un pin de datos, como cualquier conjunto de diodos LEDs direccionables. Tambi\u00e9n es posible controlar varios m\u00f3dulos al mismo tiempo. Simplemente conectamos el pin OUT de un m\u00f3dulo al pin IN de otro m\u00f3dulo, lo que nos va a permitir utilizar un pin de datos para controlar 8, 16, 32, ... LEDs.</p> <p> <p> Conexi\u00f3n entre m\u00f3dulos</p> <p></p> <p>El s\u00edmbolo esquem\u00e1tico ser\u00e1 algo similar a lo siguiente:</p> <p> <p> S\u00edmbolo</p> <p></p>"},{"location":"rgb/#alimentacion-de-neopixeles","title":"Alimentaci\u00f3n de Neopixeles","text":"<p>Vamos a comenzar por dar de forma destacada las tres recomendaciones que indican en la gu\u00eda de Adafruit, que son:</p> Orden de conexi\u00f3n de una fuente de alimentaci\u00f3n o microcontrolador: SIEMPRE PRIMERO la tierra  Orden de desconexi\u00f3n: Se desconecta la tierra en \u00daLTIMO lugar ____________________________________________________________________________  Como prevenci\u00f3n y para evitar da\u00f1os en el primer pixel por picos de tensi\u00f3n se recomienda poner unaresistencia de bajo valor (unos 75 ohmios) entre el pin de salida de datos de la placa de control y la entrada de datos del primer LED.  ____________________________________________________________________________  Reserva de energ\u00eda: Cuando se producen cambios abruptos en el brillo la fuente de alimentaci\u00f3n por si sola no puede manejarlo y parecen fallar. Se aconseja poner un condensador electrol\u00edtico de gran capacidad (1000 uF) en paralelo con la alimentaci\u00f3n para proporcionar esa energia extra que se requiere. SIEMPRE hay que respetar la polaridad del condensador."},{"location":"rgb/#proyectos-portatiles","title":"Proyectos port\u00e1tiles","text":"<p>Se configuran con relativamente pocos LEDs y por lo tanto no tienen un excesivo consumo por lo que podemos alimentarlos con pilas o bater\u00edas.</p> <ul> <li>Las bater\u00edas recargables de una celda (figura siguiente) de pol\u00edmero de litio entregan 3,7V que son perfectos para alimentar microcontroladores y unos pocos LEDs direccionables.</li> </ul> <p> <p> Bater\u00edas Lipo 1S</p> <p></p> <ul> <li> <p>Pilas AA o AAA. Se pueden usar tres pilas alcalinas con su correspondiente portapilas. Esto proporciona 4.5V. El inconveniente respecto a las bater\u00edas lipo es que son mas grandes y pesadas y la ventaja es que son muy f\u00e1ciles de conseguir.</p> </li> <li> <p>Pilas recargables de hidruro met\u00e1lico de n\u00edquel. En este caso hay que utilizar cuatro unidades de 1.2V con su soporte de cuatro celdas. Esto nos va a proporcionar 4.8V. Tenemos que asegurarnos de usar solamente pilas NiMH porque si colocamos pilas normales de 1.5V estaremos creando una tensi\u00f3n total de 6V y esto es muy probable que rompa el microcontrolador o alg\u00fan LED.</p> </li> <li> <p>Otros medios pueden ser utilizar porwerbanks de la tensi\u00f3n adecuada o alguna de las anteriores de mayor tensi\u00f3n intercalando un convertidor reductor que se adapte a las condiciones de entrada de tensi\u00f3n de que disponemos y que su salida suministre los 5V requeridos. Hay que tener en cuenta el rango de tensi\u00f3n de entrada que requiere el convertidor espec\u00edfico y la corriente m\u00e1xima de salida.</p> </li> </ul>"},{"location":"rgb/#proyectos-de-escritorio","title":"Proyectos de escritorio","text":"<p>Si estamos hablando de tiras de hasta un metro con una fuente de alimentaci\u00f3n conmutada de 5V/2A en CC t\u00edpica tendremos suficiente.</p> <p>Si se requiere mas corriente resulta tentador utilizar una fuente de laboratorio, pero hay que mucho cuidado porque pueden producir un gran pico de tensi\u00f3n cuando se encienden. Este pico es mas que suficiente para destruir instant\u00e1neamente los LEDs direccionables.</p> <p>Si se usa una fuente de laboratorio, NO conectamos la tira directamente. Primero encendemos la fuente de alimentaci\u00f3n, dejamos pasar unos segundo que el voltaje se estabilice, luego conectamos la tira, asegur\u00e1ndonos de conectar en primer lugar GND.</p>"},{"location":"rgb/#aspectos-previos_1","title":"Aspectos previos","text":"<p>Cada LED individual consume hasta 60 miliamperios con el m\u00e1ximo brillo blanco (rojo + verde + azul). Sin embargo, en el uso real, es raro que todos los p\u00edxeles se enciendan de esa manera. Al mezclar colores y mostrar animaciones, el consumo puntual ser\u00e1 mucho menor. Es imposible estimar un n\u00famero para todas las circunstancias, pero se ha experimentado que usando la tercera parte de los 60 mA (20 mA por p\u00edxel) como regla general funciona correctamente. Pero si sabemos con certeza que necesitamos cada p\u00edxel con el m\u00e1ximo brillo, tenemos que usar la cifra 60 mA.</p> <p>Para estimar las necesidades de suministro de energ\u00eda, basta multiplicar la cantidad de p\u00edxeles por 20, o por 60 mA y obtendremos el consumo total en miliamperios. Por ejemplo:</p> <p> 60 LEDs \u00d7 20 mA = 1200 mA = 1.2 A como m\u00ednimo <p>60 LEDs \u00d7 60 mA = 3600 mA = 3.6 A como m\u00ednimo</p> <p>256 LEDs x 20 mA = 5120 mA = 5.12 A como m\u00ednimo</p> <p>256 LEDs x 60 mA = 15360 mA = 15.36 A como m\u00ednimo </p> <p>La elecci\u00f3n de la fuente de alimentaci\u00f3n depende de nosotros pero es evidente que la m\u00e1xima seguridad y fiabilidad se consigue con una fuente de alimentaci\u00f3n de dimensiones m\u00e1s generosas, y esto es lo que recomendamos. La mayor\u00eda de las fuentes de alimentaci\u00f3n pueden entregar un poco de corriente adicional durante per\u00edodos breves de tiempo e incluso algunas contienen un fusible t\u00e9rmico y simplemente se apagar\u00e1n si se sobrecargan. Por lo tanto, aunque t\u00e9cnicamente pueden funcionar, digamos que no es recomendable abusar de ellas.</p> <p>Un factor a tener en cuenta es que si vamos a alimentar con bater\u00edas estas se vuelven progresivamente mas pesadas, costosas y peligrosas, as\u00ed que por razones de seguridad habr\u00eda que minimizar el tama\u00f1o de las bater\u00edas.</p> <p>Por otro lado tenemos que tener en cuenta la secci\u00f3n del conductor que ser\u00e1 m\u00e1s barato y menos pesado cuanto menor sea esta, es decir, cuanta menor corriente deba soportar y que cuanto menor sea la corriente menor ser\u00e1 el calor generado.</p> <p>En general podemos decir que:</p> <ul> <li>La regla general de los \"60 miliamperios\" es solo eso... una regla general, no ciencia pura.</li> <li>Al animar y mezclar colores, el consumo de corriente ser\u00e1 menor. A veces mucho menos.</li> <li>Incluso cuando se establece el color en 0 (LEDs apagados), la l\u00f3gica del controlador dentro de cada Pixel usa una peque\u00f1a cantidad de corriente por debajo de 1 miliamperio por p\u00edxel, pero con muchos p\u00edxeles esto deber\u00eda tambi\u00e9n sumarse.</li> </ul> <p>La biblioteca NeoMatrix utiliza la correcci\u00f3n gamma para seleccionar niveles de brillo que son visualmente (aunque no num\u00e9ricamente) equidistantes. Hay 32 niveles para rojo y azul, 64 niveles para verde. La funci\u00f3n Color() realiza la conversi\u00f3n necesaria; no necesitamos hacer ning\u00fan c\u00e1lculo. Acepta valores de rojo, verde y azul de 8 bits y devuelve un color de 16 bits con correcci\u00f3n gamma.</p> <p>La respuesta final a todo esto es que usualmente los LEDs no estar\u00edan encendidos todos juntos, por lo que elegir una fuente de alimentaci\u00f3n se vuelve una adivinanza. Podemos asumir para nuestros proyectos que el 75% de los pixels est\u00e1n encendidos en cualquier momento y que cada uno tiene solo un color, con lo que las corrientes anteriores quedan as\u00ed:</p> <p> 60 LEDs: 45\u00d720 mA = 0.9 A <p>256 LEDs: 192 x 20 mA = 3.84 A</p> <p>512 LEDs: 384 x 20 mA = 7.68 A </p> <p>La \u00fanica forma 100% segura de saber con certeza el consumo es programar las luces y medir el consumo de corriente con un amper\u00edmetro.</p>"},{"location":"rgb/#modelos-de-colores","title":"Modelos de colores","text":"<p>Seg\u00fan Wikipedia un modelo de colores es un modelo matem\u00e1tico abstracto que permite representar los colores en forma num\u00e9rica, utilizando t\u00edpicamente tres o cuatro valores o componentes crom\u00e1ticos (por ejemplo RGB y CMYK son modelos de colores). Es decir, un modelo de colores sirve en una aplicaci\u00f3n que asocia a un vector num\u00e9rico un elemento en un espacio de color.</p> <p>En el enlace anterior tenemos mayor informaci\u00f3n de los modelos existentes, de los que nosotros vamos a ver los dos que habitualmente se utilizan, el RGB y el HSV.</p>"},{"location":"rgb/#modelo-rgb","title":"Modelo RGB","text":"<p>El modelo de color RGB utiliza los componentes RGB (Red, Green, Blue) o RVA (Rojo, Verde, Azul) para definir la cantidad de luz de cada color en un color determinado. En una imagen cada componente se expresa como un n\u00famero entre 0 y 255.</p> <p>Es un modelos de color aditivo, luego el color se produce a partir de la luz transmitida. RGB se utiliza por lo tanto en monitores, donde las luces roja, azul y verde se mezclan de distintas formas para reproducir un amplio rango de colores. Cuando las luces roja, azul y verde se combinan en su m\u00e1xima intensidad, el ojo percibe el color resultante como blanco. En teor\u00eda, los colores mezclados siguen siendo rojo, azul y verde, pero los pixeles del monitor se encuentran demasiado juntos para que nuestro ojo pueda diferenciar los tres colores. Cuando el valor de cada componente es 0, indica que hay una ausencia de luz y el ojo percibe el color negro.</p> <p> <p> Modelo de color RGB</p> <p></p>"},{"location":"rgb/#modelo-hsl","title":"Modelo HSL","text":"<p>El modelo HSL o a veces HSI (siglas del ingl\u00e9s Hue, Saturation, Lightness o Intensity; traducido por, \u2018matiz, saturaci\u00f3n, luminosidad o intensidad\u2019), define un modelo de color en t\u00e9rminos de sus componentes constituyentes.</p> <p>En el modelo de color HSV, un color se define por su matiz o tono (H), su saturaci\u00f3n (S) y su luminosidad o intensidad (L). Ahora las siglas no significan colores como en RGB, sino par\u00e1metros.</p> <p>La variedad de colores se obtiene cambiando los tres canales de color de tono (H), saturaci\u00f3n (S) y luminosidad (L) y superponi\u00e9ndolos entre s\u00ed. Este modo de color cubre los colores que puede percibir la visi\u00f3n humana.</p> <p>Se suele representar mediante la rueda de color, como vemos a continuaci\u00f3n:</p> <p> <p> Rueda de color HSL</p> <p></p> <ul> <li>Tono, matiz o Hue (H). En el c\u00edrculo crom\u00e1tico el grado 0 (o 360\u00ba si hemos dado una vuelta completa) del Hue es el color rojo. El circulito rodeado corresponde al \u00e1ngulo en la rueda de color. Cada \u00e1ngulo representa un color. En esa posici\u00f3n la saturaci\u00f3n S por defecto tomma su valor m\u00e1ximo de 100, y el brillo (L) es de 50. Nos podemos mover con estas condiciones por la rueda y obtener los distintos colores para esos valores de saturaci\u00f3n o brillo.</li> </ul> <p> <p> Cambios de tono (H) en la rueda de color HSL</p> <p></p> <ul> <li>Saturaci\u00f3n o Saturation (S). Indica la intensidad de un tono concreto. Los valores varian entre 0 y 100, siendo 100 el m\u00e1ximo de saturaci\u00f3n posible y 0 el m\u00ednimo, que dar\u00e1 como resultado, gris. El par\u00e1metro cambia sus valores moviendose dentro del tri\u00e1ngulo en la l\u00ednea del d\u00edametro del c\u00edrculo que corresponde a la posici\u00f3n del \u00e1ngulo determinado por H.</li> </ul> <p> <p> Cambios de saturaci\u00f3n (S) en la rueda de color HSL</p> <p></p> <p>Observamos que al acercarnos al gris el valor de H se restablece a su valor por defecto. Hasta ese punto el tono se mantiene en el valor definido.</p> <ul> <li>Luminosidad o Lightness (L). El par\u00e1metro se refiere a como de claro u oscuro es un color. Si queremos aclarar un color nos moveremos hacia el blanco y si quiero oscurecerlo hacia el negro.</li> </ul> <p> <p> Cambios de luminosidad (L) en la rueda de color HSL</p> <p></p> <p>Hay un par\u00e1metro que suele acompa\u00f1ar a la rueda de color que es el Alfa (A), que puede variar entre 0 y 100 y se refiere al grado de opacidad del color, correspondiendo 100 a totalmente opaco y 0 a totalmente transparente.</p>"},{"location":"rgb/#convertir-rgb-a-hsl","title":"Convertir RGB a HSL","text":"<p>Nos vamos a basar en un ejemplo descrito por los valores R=90, G=220, B=80 correspondiente a un tono verde oscuro.</p> <p> <p> R=90, G=220, B=80</p> <p></p> <ul> <li>Paso 1. M\u00e1ximo y M\u00ednimo. Convertimos los valores RGB a valores en el rango 0-1 dividiendo por 255 cada valor.</li> </ul> <p> <p>\\(R = \\dfrac{90}{255}= 0.353 \\space; \\space G = \\dfrac{220}{255}= 0.863 \\space; \\space B = \\dfrac{80}{255}= 0.314\\)</p> <p>\\(\\boxed{R = 0.353 \\space; \\space G = 0.863 \\space(Max) \\space; \\space B = 0.314 \\space(Min)}\\)</p> <p></p> <ul> <li>Paso 2. Luminancia. Calculamos la Luminancia sumando los valores m\u00e1ximo y m\u00ednimo obtenidos en el paso 1 y lo dividimos por 2.</li> </ul> <p> <p>\\(L \\space = \\space \\dfrac{0.863 + 0.314}{2} \\space= \\space 0.5885 \\space\\approx59 \\%\\)</p> <p>\\(\\boxed{L \\space = \\space 0.5885 \\space \\approx 59 \\%}\\)</p> <p></p> <ul> <li>Paso 3. Saturaci\u00f3n. A la hora de calcular la saturaci\u00f3n S tendremos en cuenta que:</li> </ul> <ul> <li>Si los valores m\u00e1ximo y m\u00ednimo son iguales: No hay saturaci\u00f3n. <li>Si todos los valores RGB son iguales: Tono gris mas o menos oscuro o claro dependiendo de la luminosidad.</li> <li>Si no hay saturaci\u00f3n el Tono ser\u00e1 0\u00ba.</li> <p>Si no se da alguna de las condiciones anteriores sabemos que hay Saturaci\u00f3n, que se calcula seg\u00fan sea el nivel de Luminancia:</p> <p>\\(\\Rightarrow\\) Si \\(L \\leq 0.5\\)</p> <p> \\(S = \\dfrac{Max-Min}{Max+Min}\\) </p> <p>\\(\\Rightarrow\\) Si \\(L &gt; 0.5\\)</p> <p> \\(S = \\dfrac{Max-Min}{2.0-Max-Min}\\) <p>\\(S = \\dfrac{0.863-0.314}{2-0.863-0.314} = \\dfrac{0.549}{0.823}=0.667 \\approx 67 \\%\\)</p> <p>\\(\\boxed{S = 0.667 \\approx 67 \\%}\\)</p> <p></p> <ul> <li>Paso 4. Tono. La f\u00f3rmula del Tono depende de qu\u00e9 canal de color RGB es el valor m\u00e1ximo. Las tres f\u00f3rmulas diferentes son:</li> </ul> <p>\\(\\Rightarrow\\)  Si Rojo es el m\u00e1ximo, entonces:</p> <p> \\(H = \\dfrac{G-B}{Max-Min}\\) </p> <p>\\(\\Rightarrow\\)  Si Verde es el m\u00e1ximo, entonces:</p> <p> \\(H = 2.0 + \\dfrac{B-R}{Max-Min}\\) <p>\\(H = 2.0 + \\dfrac{0.314-0.353}{0.863-0.314} = 2.0 + \\dfrac{(-0.039)}{0.549} = 1.929\\)</p> <p>\\(\\boxed{H=1.929}\\) </p> <p>\\(\\Rightarrow\\)  Si Azul es el m\u00e1ximo, entonces:</p> <p> H = 4.0 + \\dfrac{R-G}{Max-Min}$ </p> <p>El valor obtenido de H lo multiplicamos por 60 para convertirlo en grados en el c\u00edrculo crom\u00e1tico. Si resulta un valor negativo de H le sumamos 360.</p> <p> <p>\\(H = 1.929 \\times 60 = 115.74 \\approx 116 \\space grados\\)</p> <p>\\(\\boxed{H=116 \\space grados}\\)</p> <p></p> <p>Resultado final:</p> <p> R = 90, G = 220, B = 80 <p>H = 116, S = 67, L = 59 </p>"},{"location":"rgb/#convertir-hsl-a-rgb","title":"Convertir HSL a RGB","text":"<p>En el mismo sitio en que hemos basado la conversi\u00f3n de RGB a HSL de Nikolai Waldman est\u00e1 documentado como hacerlo a la inversa, pero nosotros no lo vamos a hacer de este modo.</p> <p>Se encuentran facilmente en la web p\u00e1ginas con calculadoras que permiten convertir de un modelo a otro con tan solo introducir los valores. Algunas incluso indican las f\u00f3rmulas de c\u00e1lculo, que usualmente est\u00e1n basadas en la entrada HSL and HSV de la Wikipedia. A t\u00edtulo de ejemplo aqu\u00ed pongo la de rapidtables, que ofrece muchas calculadoras en l\u00ednea gratuitas</p> <p>Hay una forma de hacerlo a partir de un programa libre como es Inkscape, publicado bajo licencia GNU General Public License, version 3 y que hemos utilizado para las animaciones donde se han explicado los conceptos y donde adem\u00e1s se pueden obtener otros datos y por supuesto modificarlos.</p> <p>Es muy sencillo de utilizar y nos ofrece adem\u00e1s otras posibilidades interesantes. Veamos como llegar a ello una vez abierto Inkscape con un archivo en blanco.</p> <p>Dibujamos cualquier cosa y abrimos las opciones de Relleno y borde del objeto y desde ah\u00ed ya podemos cambiar el modelo de color, activar la rueda, mover la rueda o los valores lineales, volver a cambiar de modelo, etc y se nos ir\u00e1n mostrando los valores convetidos de uno a otro, como se observa en la animaci\u00f3n siguiente cuando cambiamos del modelo HSL a RGB.</p> <p> <p> Modelos de color con Inkscape</p> <p></p>"},{"location":"rgb/#modelo-hsv","title":"Modelo HSV","text":"<p>El modelo HSV (Hue, Saturation, Value \u2013 Matiz, Saturaci\u00f3n, Valor), es tambi\u00e9n llamado HSB (Hue, Saturation, Brightness \u2013 Matiz, Saturaci\u00f3n, Brillo), define un modelo de color en t\u00e9rminos de sus componentes.</p> <p>El Matiz o Hue se representa como un \u00e1ngulo de 0 a 360\u00ba correspondiendo cada valor a un color. En una rueda de colores se puede representar de la siguiente forma:</p> <p> <p> Rueda de colores HSV</p> <p></p> <p>Si asociamos con RGB vemos que el rojo corresponde a un \u00e1ngulo de 0\u00ba, el verde a 120\u00ba y el azul a 240\u00ba. Los colores entre estos tres \u00e1ngulos divisorios corresponden a niveles de mezcla de los dos colores extremos. Por ejemplo, justo en la mitad entre el rojo y el verde estar\u00eda la mezcla de ambos colores que corresponde al amarillo.</p> <p>La Saturaci\u00f3n puede variar entre 0 y 100% y representa el porcentaje de brillo. En la animaci\u00f3n siguiente vemos el funcionamiento de la rueda de color y del par\u00e1metro de saturaci\u00f3n en el programa Inkscape.</p> <p> <p> Rueda de colores HSV y Saturaci\u00f3n</p> <p></p> <p>El Valor tambi\u00e9n puede variar entre 0 y 100%, correspondiendo el 0 siempre a negro y el resto de valores un color mas o menos saturado. En la animaci\u00f3n siguiente vemos el funcionamiento del par\u00e1metro Valor en el programa Inkscape.</p> <p> <p> Rueda de colores HSV y Valor</p> <p></p> <p>El propio Inkscape no puede servir para convertir RGB a HSV y viceversa. En la web tambi\u00e9n podemos encontrar calculadoras que lo hacen indicando incluso las f\u00f3rmulas de conversi\u00f3n y dandonos una previsualizaci\u00f3n del color. A continuaci\u00f3n, a t\u00edtulo de ejemplo, ponemos enlaces a dos de ellas:</p> <ul> <li>Conversor de RapidTables en ingl\u00e9s.</li> <li>Conversor de peko-step en espa\u00f1ol.</li> </ul>"},{"location":"servo/","title":"Servomotor","text":""},{"location":"servo/#el-servomotor","title":"El servomotor","text":"<p>Un servomotor o abreviado servo es un motor especial que puede posicionar su eje en un \u00e1ngulo determinado y lo puede mantener en esta posici\u00f3n. Los servos est\u00e1ndar suelen girar 180\u00ba, pero es habitual encontrar servos que giran 90\u00ba y otros 360\u00ba, que son los conocidos como servos de rotaci\u00f3n continua. En el interior del mismo est\u00e1n ubicados tanto la electr\u00f3nica de control como los engranajes reductores que a su vez pueden llevar o no topes f\u00edsicos que marquen el \u00e1ngulo de giro. Para su funcionamiento s\u00f3lo necesitan ser alimentados (conexiones GND y VCC o 5V) y una se\u00f1al de control.</p> <p>Los servomotores son en realidad motores de corriente continua a los que se les ha a\u00f1adido una reductora, para que giren m\u00e1s despacio y con m\u00e1s fuerza, y un controlador electr\u00f3nico que permite hacer que gire un determinado \u00e1ngulo. Adem\u00e1s, el servo en todo momento sabe en qu\u00e9 posici\u00f3n est\u00e1, aunque se apague o reinicie. Esto significa que si a un servo que hemos movido a un determinado punto, lo hemos dejado sin alimentaci\u00f3n y al alimentarlo de nuevo le indicamos que gire 90\u00ba, no va a girar 90\u00ba sino que se va a dirigir a su posici\u00f3n de 90\u00ba que tiene memorizada internamente.</p> <p>En la figura siguiente vemos el interior de un servo esquematizado.</p> <p> <p> Interior de un servo 9g</p> <p></p> <p>Su aspecto real lo vemos en esta otra figura, donde tambi\u00e9n se aprecian las palas y torniller\u00eda que lo acompa\u00f1an.</p> <p> <p> Aspecto servo 180 grados</p> <p></p> <p>Vemos claramente que el conector no es EASY Plug sino con un conector hembra de tres pines para tres cables de conexi\u00f3n, que se distinguen por los colores marr\u00f3n, rojo y naranja (diferentes marcas pueden tener diferentes colores).</p>"},{"location":"servo/#principio-basico-de-funcionamiento","title":"Principio b\u00e1sico de funcionamiento","text":"<p>La electr\u00f3nica de control del servomotor tiene un circuito de referencia incorporado que emite la se\u00f1al de referencia, que es un ciclo de 20 ms con un ancho de pulso de 1,5 ms. Se compara la tensi\u00f3n de control recibida con la de referencia y se genera una diferencia de tensi\u00f3n. El circuito de control en la placa decidir\u00e1 la direcci\u00f3n de rotaci\u00f3n en consecuencia y accionar\u00e1 el motor. El sistema de engranajes o reductora convierten el giro del motor en un par de fuerza a trav\u00e9s del eje. El sensor detecta que se ha alcanzado la posici\u00f3n enviada de acuerdo con la se\u00f1al de retroalimentaci\u00f3n. Cuando la diferencia de tensi\u00f3n existe el motor gira y cuando la diferencia se reduce a cero, el motor se detiene. Normalmente, el \u00e1ngulo de rotaci\u00f3n es de 0 a 180 grados.</p> <p>El \u00e1ngulo de rotaci\u00f3n del servomotor se controla regulando el ciclo de trabajo de la se\u00f1al PWM cuyo est\u00e1ndar es de 20 ms (50 Hz).</p> <p>Hay que tener mucho cuidado de posicionar el conector de los servos en los tres pines macho de la shield en el orden correcto (el conector es reversible) o seguramente romperemos algo de manera irremediable.</p>"},{"location":"servo/#conexion-servo-easy-plug","title":"Conexi\u00f3n servo EASY Plug","text":"<p>Para poder conectar un servomotor a la placa EASY Plug debemos utilizar el adaptador que vemos en la imagen siguiente:</p> <p> <p> Adaptador servo de modular a EASY Plug</p> <p></p> <p>Hay que tener mucho cuidado de posicionar el conector del servo (porque es reversible) en los tres pines macho del adaptador para hacerlo en el orden correcto o seguramente romperemos algo de manera irreversible."},{"location":"servo/#bloques-de-programacion","title":"Bloques de programaci\u00f3n","text":"<p>En el apartado de bloques de programaci\u00f3n, se encuentra en \"Motor \u2192&gt; Servo\":</p> <p> <p> Bloques Servo</p> <p></p> <p>Para controlar el servomotor, indicamos los grados de rotaci\u00f3n (\u00c1ngulo de giro) que queremos y el tiempo de retardo, o tiempo que tarda en ir de una posici\u00f3n a otra.</p> <p>El control de un servomotor de rotaci\u00f3n continua se realiza de igual manera, pero su reacci\u00f3n es diferente.</p> <p>Los bloques Servo-Oscilador nos permiten de una forma sencilla hacer que el servo repita una secuencia de movimientos u oscilaciones de forma indefinida. Un ejemplo t\u00edpico puede ser el que vemos en la figura siguiente, donde el servo oscila entre 0 y 90\u00ba en periodos de dos segundos.</p> <p> <p> Oscilaci\u00f3n con servo</p> <p></p>"},{"location":"servo/#posicion-0o-u-origen","title":"Posici\u00f3n 0\u00ba u origen","text":"<p>Previo a cualquier actividad con un servo es averiguar cual es su posici\u00f3n 0\u00ba u origen. Un sencillo programa nos permite programar por primera vez el \u00e1ngulo a 0\u00ba para descubrir el punto de origen y a partir de aqu\u00ed montar alguna pala de las que vienen con el servo para poder visualizar la rotaci\u00f3n del eje. El programa es el de la imagen siguiente:</p> <p> <p> Encontrar el origen del servo</p> <p></p>"},{"location":"IDE/caracteristicasIDE2_0/","title":"Caracter\u00edsticas principales del IDE 2.0","text":""},{"location":"IDE/caracteristicasIDE2_0/#ajustar-preferencias","title":"Ajustar preferencias","text":"<p>En la animaci\u00f3n de la figura siguiente vemos como acceder a la configuraci\u00f3n de las mismas y tambi\u00e9n como se realiza alg\u00fan ajuste adicional.</p> <p> <p> Preferencias IDE 2.0</p> <p></p>"},{"location":"IDE/caracteristicasIDE2_0/#la-carpeta-de-programas","title":"La carpeta de programas","text":"<p>Los programas o sketches de Arduino se guardan como .ino y deben almacenarse en una carpeta con el mismo nombre. Por ejemplo, un programa de nombre 'mi_programa.ino' debe almacenarse en una carpeta llamada 'mi_programa'. Generalmente se guardan en una carpeta de nombre 'Arduino' en la carpeta personal.</p> <p>En la animaci\u00f3n siguiente vemos como abrir y cerrar esta carpeta desde el bot\u00f3n de la barra lateral y como nos muestra el contenido</p> <p> <p> Carpeta de programas</p> <p></p>"},{"location":"IDE/caracteristicasIDE2_0/#administrador-de-placas","title":"Administrador de placas","text":"<p>Con el Administrador de placas se pueden buscar e instalar paquetes o \"n\u00facleos\" para nuestras placas. Compilar y cargar un programa en una placa siempre requiere un paquete de la placa. Hay muchos paquetes de placa Arduino disponibles, como avr, samd, megaav y muchos m\u00e1s.</p> <p>Podemos decir que un \"n\u00facleo\" est\u00e1 escrito y dise\u00f1ado para microcontroladores espec\u00edficos y sabemos que las diferentes placas tienen micros de diferentes tipos. Por ejemplo, un Arduino UNO tiene un ATmega328P, que usa el n\u00facleo AVR, mientras que un Arduino Nano 33 IoT tiene un microcontrolador SAMD21, donde necesitamos usar el n\u00facleo SAMD. En definitiva, para poder usar una placa concreta debemos instalar su n\u00facleo espec\u00edfico.</p> <p>Al hacer clic en el bot\u00f3n de la barra lateral se nos abren todas las opciones disponibles y ne indica si est\u00e1n o no instalados y adem\u00e1s dispone de un buscador que permite localizar el n\u00facleo que necesitamos. Hay que tener presente que la instalaci\u00f3n de algunos de ellos puede tardar varios minutos.</p> <p>En la animaci\u00f3n vemos el funcionamiento de este bot\u00f3n.</p> <p> <p> Administrador de placas</p> <p></p>"},{"location":"IDE/caracteristicasIDE2_0/#gestor-de-librerias","title":"Gestor de librer\u00edas","text":"<p>Este bot\u00f3n nos permite buscar e instalar librer\u00edas, que son extensiones de la API de Arduino que facilitan el control de un servo, leer un sensor espec\u00edfico o utilizar un m\u00f3dulo WiFi.</p> <p>En la animaci\u00f3n vemos como utilizar este bot\u00f3n.</p> <p> <p> Gestor de librer\u00edas</p> <p></p>"},{"location":"IDE/caracteristicasIDE2_0/#monitor-serie","title":"Monitor serie","text":"<p>Esta herramienta que habitualmente estaba en una ventana separada ahora se integra en el editor. La herramienta sirve para comunicarse con la placa o para depurar programas.</p> <p>Una ventaja de tener el Serial Monitor integrado con el editor es la posibilidad de tener m\u00faltiples monitores abiertos simult\u00e1neamente. En el editor antiguo, al cambiar el puerto/placa, cambiaba en todas las ventanas. Adem\u00e1s, est\u00e1bamos limitados a una ventana de Serial Monitor, un obst\u00e1culo que el IDE 2.0 elimina.</p> <p>En la animaci\u00f3n vemos el uso b\u00e1sico del mismo.</p> <p> <p> Monitor serie</p> <p>basica</p> <p>Para obtener m\u00e1s informaci\u00f3n sobre Serial Monitor podemos visitar el Serial Monitor tutorial.</p>"},{"location":"IDE/caracteristicasIDE2_0/#serial-plotter","title":"Serial Plotter","text":"<p>Nos permite visualizar datos utilizando gr\u00e1ficos permitiendo monitorizar varias variables de manera simultanea. Para ver mejor el funcionamiento de este elemento vamos a utilizar un potenci\u00f3metro conectado al pin anal\u00f3gico A3 junto con una variable est\u00e1tica y una aleatoria. El c\u00f3digo del ejemplo es:</p> <pre><code>int potenciometro;\nint aleatoria;\nint static_variable = 500;\n\nvoid setup() {\n  Serial.begin(9600);\n}\n\nvoid loop() {\npotenciometro = analogRead(A3);\naleatoria = random(0, 1000);\n  Serial.print(\"Potenciometro:\");\n  Serial.print(potenciometro);\n  Serial.print(\",\");\n  Serial.print(\"Valor aleatorio:\");\n  Serial.print(aleatoria);\n  Serial.print(\",\");\n  Serial.print(\"Variable estatica:\");\n  Serial.println(static_variable);\n}\n</code></pre> <p>En la animaci\u00f3n vemos como cargar el programa y el funcionamiento en la ventana del Serial Plotter.</p> <p> <p> Serial Plotter</p> <p></p>"},{"location":"IDE/caracteristicasIDE2_0/#debugger","title":"Debugger","text":"<p>El depurador se utiliza para probar y depurar programas. B\u00e1sicamente lo que permite es navegar a trav\u00e9s de la ejecuci\u00f3n de un programa, lo que sirve para detectar fallos o errores de c\u00f3digo.</p> <p>El depurador solamente est\u00e1 disponible con las placas SAMD.</p> <p>Tenemos mas informaci\u00f3n en Debugging tutorial.</p>"},{"location":"IDE/caracteristicasIDE2_0/#autocompletado","title":"Autocompletado","text":"<p>Es una nueva caracter\u00edstica de la versi\u00f3n 2.0 muy bien equipada. Debemos tener presente que para que funcione debemos tener seleccionada la placa a utilizar.</p> <p>En la animaci\u00f3n siguiente vemos la herramienta funcionando.</p> <p> <p> Autocompletado</p>"},{"location":"IDE/codigoAB/","title":"C\u00f3digo en Arduinoblocks","text":"<p>La plataforma visual Arduinoblocks tambi\u00e9n nos ofrece algunas opciones para disponer del c\u00f3digo del programa y de las librer\u00edas que se utilizan, opciones que nos pueden resultar de utilidad en especial si no disponemos de bloques para continuar con nuestro programa.</p> <p>En la animaci\u00f3n de la figura siguiente vemos como Arduinoblocks nos permite diferentes opciones de trabajo con el IDE, que son:</p> <ul> <li>Ver c\u00f3digo. Se despliega una ventana con el c\u00f3digo del programa actual cargado.</li> <li>Descargar c\u00f3digo (.ino). Para exportar el c\u00f3digo para utilizarlo en Arduino IDE.</li> <li>ZIP project (.zip). Para exportar el proyecto completo como .zip incluyendo librer\u00edas para Arduino IDE.</li> </ul> <p> <p> Opciones de exportaci\u00f3n de Arduinoblocks</p> <p></p> <p>En el enlace a librer\u00edas podemos descargar el paquete que utiliza ArduinoBlocks e instalarlas todas o la que nos interese en el directorio de librer\u00edas de Arduino. Estas librer\u00edas nos ofrecen una ventaja adicional, y es que son librer\u00edas probadas y que funcionan correctamente.</p>"},{"location":"IDE/descarga/","title":"Descarga","text":"<p>Podemos descargarlo desde la p\u00e1gina de software de Arduino IDE 2.0 y en el momento de creaci\u00f3n de este apartado de la web nos ofrece la versi\u00f3n 2.3.2 adem\u00e1s de los enlaces al editor online, tal y como vemos en la figura siguiente.</p> <p> <p> Descargas</p> <p></p> <p>En esta p\u00e1gina tenemos disponibles las versiones Nightly y otras informaciones importantes como:</p> <ul> <li>La versi\u00f3n de escritorio no est\u00e1 disponible para Chromebook donde deberemos trabajar con el editor web de Arduino.</li> <li>Es posible programar las placas utilizando MicroPython. En la p\u00e1gina MicroPython with Arduino tenemos toda la informaci\u00f3n.</li> <li>Opciones de descarga de versiones anteriores del IDE.</li> <li>T\u00e9rminos de servicio</li> </ul> <p>Si tenemos alguna duda podemos seguir el tutorial en ingl\u00e9s de descarga e instalaci\u00f3n de Arduino IDE 2.0.</p>"},{"location":"IDE/introIDE/","title":"Introducci\u00f3n","text":""},{"location":"IDE/introIDE/#por-si-lo-necesitamos","title":"Por si lo necesitamos","text":"<p>Casi con toda seguridad que se nos va a presentar alguna ocasi\u00f3n en que ArduinoBlocks no satisfaga nuestras necesidades porque no exista el bloque en el momento que lo necesitamos. En estas ocasiones no nos va a quedar mas remedio que recurrir al Entorno de Desarrollo Integrado o IDE de Arduino.</p> <p>Antes de continuar indicar que aqu\u00ed vamos a describir como llevar a cabo los primeros pasos con el IDE 2.0 pero no vamos a tratar conceptos de programaci\u00f3n mediante c\u00f3digo.</p> <p>Vamos a describir como trabajar con el Arduino IDE 2.0 que ofrece mayor rendimiento, una interfaz de usuario mejorada y caracter\u00edsticas nuevas, como el autocompletado , un depurador incorporado y la sincronizaci\u00f3n de bocetos con Arduino Cloud.</p> <p>Todos los tutoriales del Arduino IDE 2 los tenemos en el enlace.</p>"},{"location":"IDE/ventanaIDE/","title":"Ventana principal del IDE 2.0","text":"<p>En la figura siguiente vemos el aspecto que presenta el IDE en la versi\u00f3n 2.0.</p> <p> <p> Arduino IDE 2.0</p> <p></p> <p>A continuaci\u00f3n se describen de forma r\u00e1pida los apartados se\u00f1alados en la figura anterior.</p> <ol> <li>Verify/Upload (Verificar/Cargar): Para compilar y cargar el c\u00f3digo en la placa.</li> <li>Select board &amp; port (Seleccionar placa y puerto): En el desplegable se muestran las placas detectadas de forma autom\u00e1tica, junto con el puerto asignado.</li> <li>Open Serial Plotter (abrir trazador ser\u00ede): Abre la herramienta de graficado como una nueva ventana.</li> <li>Open Serial Monitor (abrir el monitor serie): abre la herramienta Serial Monitor, como una nueva pesta\u00f1a en la consola.</li> <li>Sketchbook (Carpeta de programas): es el directorio o carpeta donde se almacenan localmente los programas. Adem\u00e1s, desde aqu\u00ed se puede sincronizar con Arduino Cloud y tambi\u00e9n obtener los sketch del entorno online.</li> <li>Boards Manager (Administrador de placas): para explorar los paquetes de Arduino y de terceros que se pueden instalar. Por ejemplo, usar una placa MKR WiFi 1010 requiere tener instalado el paquete Arduino SAMD Boards.</li> <li>Library Manager (Ad https://docs.arduino.cc/software/ide-v2./img/teo-basica/soft/ministrador de librer\u00edas): Para navegar por las librer\u00edas propias de Arduino y las creadas por la comunidad.</li> <li>Debugger (Depurador): Para probar y depurar programas en tiempo real.</li> <li>Search (Buscar): b\u00fasqueda de palabras en el c\u00f3digo.</li> </ol>"},{"location":"Miscelanea/about/","title":"Autoria","text":"<ul> <li>Placa distribuida por Innova Didactic</li> </ul> <p> <p></p> <p></p> <ul> <li>Programas realizados con arduinoblocks</li> </ul> <p> <p></p> <p></p> <ul> <li>Autor de la web: Federico Coca</li> </ul> <p></p> <ul> <li>GitHub</li> <li>X</li> <li>Instagram</li> <li>Mas informaci\u00f3n</li> </ul>"},{"location":"Miscelanea/lic/","title":"Licencias","text":"<ul> <li> <p>Licencia MIT incluida en la creaci\u00f3n del repositorio.</p> </li> <li> <p>Creative Commons Atribuci\u00f3n-CompartirIgual 4.0 International (\"CC BY-SA\"). CC BY-SA 4.0 </p> </li> </ul> <p> <p> </p> <p></p>"},{"location":"Miscelanea/soft/","title":"Software utilizado","text":"<ul> <li> <p>Dibujo 3D FreeCAD</p> </li> <li> <p>Sistema operativo: Ubuntu 22.04.4 LTS</p> </li> <li> <p>Paquete ofim\u00e1tico de referencia: LibreOffice</p> </li> <li> <p>Libreria Material para MkDocs</p> </li> <li> <p>Visual Studio Code</p> </li> <li> <p>Creaci\u00f3n de GIF animados para Ubuntu Peek</p> </li> <li> <p>Sistema principal de capturas de pantalla: Shutter</p> </li> <li> <p>Dibujo 2D vectorial Inkscape</p> </li> <li> <p>Retoque de im\u00e1genes GIMP</p> </li> <li> <p>Capturadora de video e imagen para webcam XAWVT. Se instala con <code>sudo apt install xawtv</code></p> </li> <li> <p>Grabaci\u00f3n de escritorio con vokoscreen</p> </li> <li> <p>Programaci\u00f3n por bloques con ArduinoBlocks</p> </li> <li> <p>Programaci\u00f3n por bloques con MicroBlocks</p> </li> <li> <p>Programaci\u00f3n mediante el IDE de Arduino</p> </li> </ul>"},{"location":"Miscelanea/webgrafia/","title":"Webgraf\u00eda y bibliograf\u00eda","text":"<ul> <li> <p>FreeBook Book (online &amp; updated) de arduinoblocks</p> </li> <li> <p>Libros &amp; Documentaci\u00f3n de arduinoblocks</p> </li> <li> <p>Playlist ESP32 micro:STEAMakers con arduinoblocks</p> </li> <li> <p>Impresionante Documentaci\u00f3n y manual de programaci\u00f3n de Innova Didactic</p> </li> <li> <p>Impresionante documentaci\u00f3n de Francisco Soldado: Ardutaller</p> </li> <li> <p>Guia de trabajo para micro:bit </p> </li> <li> <p>Git hub de Pedro Ruiz</p> </li> <li> <p>Wikipedia</p> </li> <li> <p>Carburos met\u00e1licos, p\u00e1ginas 8 y 9 de la Ficha T\u00e9cnica de Seguridad n\u00famero 300000000020</p> </li> <li> <p>Definiciones de t\u00e9rminos usuales del Departamento de Salud de New Jersey.</p> </li> <li> <p>Ficha de seguridad oficial del CO2</p> </li> <li> <p>Instituto para la Salud Geoambiental, El di\u00f3xido de carbono</p> </li> <li> <p>Art\u00edculo de la International Journal of Emergency Medicine Carbon dioxide poisoning: a literature review of an often forgotten cause of intoxication in the emergency department</p> </li> <li> <p>Art\u00edculo del Centro Canadiense de Seguridad y Salud Ocupacional (CCSSO) sobre Di\u00f3xido de Carbono - Efectos en la Salud</p> </li> </ul>"},{"location":"actividadesAB/act_EP/","title":"Actividades EASY Plug","text":""},{"location":"actividadesAB/act_EP/#a01-leds-y-pantalla","title":"A01-LEDs y pantalla","text":"<p>En esta primera actividad vamos a conectar dos diodos LEDs a los puertos P7 y P12 y haremos un programa que al pulsar el bot\u00f3n A muestre en la pantalla el texto \"Boton A\" desplazandose y mientras esto ocurre uno de los LED debe estar parpadeando. Cuando pulsemos el bot\u00f3n B aparecer\u00e1 la letra B en scroll en la pantalla y se encender\u00e1 y apagar\u00e1 el otro LED de forma progresiva (control PWM).</p> <p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>El programa es el siguiente:</p> <p> <p> A01-LEDs y pantalla</p> <p></p>"},{"location":"actividadesAB/act_EP/#a02-mostrar-datos-del-dht22","title":"A02-Mostrar datos del DHT22","text":"<p>Vamos a ver varias actividades con formas diferentes de visualizaci\u00f3n de los datos obtenidos de un sensor DHT22 conectado al puerto P10.</p> <p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p>"},{"location":"actividadesAB/act_EP/#a02_1-datos-dht22-por-consola","title":"A02_1-Datos DHT22 por consola","text":"<p>Env\u00edar a la consola los valores de temperatura y humedad obtenidos del DHT22 cada 3 segundos. En la consola debe aparecer: T_DHT22: X \u00baC seguido de H_DHT22: X %. Para cumplimentar la pr\u00e1ctica mediremos tambi\u00e9n los datos del sensor AHT20 de la micro:STEAMakers para compararlos. En la imagen siguiente vemos el programa:</p> <p> <p> A02_1-Mostrar datos del DHT22</p> <p></p> <p>En la imagen siguiente vemos algunos resultados:</p> <p> <p> A02_1-Resultados de mostrar datos del DHT22</p> <p></p>"},{"location":"actividadesAB/act_EP/#a02_2-datalogger-dht22","title":"A02_2-Datalogger DHT22","text":"<p>Env\u00edar al plotter los valores de temperatura y humedad obtenidos del DHT22 cada 3 segundos. En la imagen siguiente vemos el programa:</p> <p> <p> A02_2-Datalogger DHT22</p> <p></p> <p>En la imagen siguiente vemos los resultados:</p> <p> <p> A02_2-Resultados de Datalogger DHT22</p> <p></p>"},{"location":"actividadesAB/act_EP/#a02_3-datos-en-oled-del-dht22","title":"A02_3-Datos en OLED del DHT22","text":"<p>Mostrar en una pantalla OLED I2C EASY Plug los valores de temperatura y humedad obtenidos del DHT22 actualizando el dato cada 5 segundos. En la imagen siguiente vemos el programa:</p> <p> <p> A02_3-Datos en OLED del DHT22</p> <p></p> <p>En la imagen siguiente vemos los resultados:</p> <p> <p> A02_3-Resultados datos en OLED del DHT22</p> <p></p>"},{"location":"actividadesAB/act_EP/#a03-servomotor","title":"A03-Servomotor","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p>"},{"location":"actividadesAB/act_EP/#a03_1-servo-0-a-180-grados","title":"A03_1-Servo 0 a 180 grados","text":"<p>El primer programa, una vez encontrado el origen del servo, va a consistir en hacerlo cambiar entre sus posiciones extremas a intervalos de un segundo. El programa es el siguiente:</p> <p> <p> A03_1-Servo 0 a 180 grados</p> <p></p>"},{"location":"actividadesAB/act_EP/#a03_2-barrera-aparcamiento","title":"A03_2-Barrera aparcamiento","text":"<p>Actividad para mover el servo de su posici\u00f3n de reposo a otra de 90\u00ba, la primera corresponde a la barrera bajada por lo que el acceso est\u00e1 cerrado y el sem\u00e1foro (pantalla) estar\u00e1 en rojo y la segunda equivale a barrera subida, el acceso estar\u00e1 abierto y el sem\u00e1foro estar\u00e1 en verde. La posici\u00f3n de la barrera por defecto ser\u00e1 bajada y el sem\u00e1foro estar\u00e1 apagado. Cuando se pulsa A el semaforo estar\u00e1 rojo, la barrera bajada y estar\u00e1 en ese estado hasta que se accione el pulsador B que pone el semaforo en verde y sube la barrera. En posici\u00f3n de barrera subida debe permanecer 5 segundos y despu\u00e9s bajar la barrera y apagarse hasta una nueva pulsaci\u00f3n de A. El programa es el siguiente:</p> <p> <p> A03_2-Barrera aparcamiento</p> <p></p> <p>A continuaci\u00f3n vemos el sistema funcionando:</p> <p> <p> A03_2-Funcionamiento barrera aparcamiento</p> <p></p>"},{"location":"actividadesAB/act_EP/#a03_3-barrera-aparcamiento-mejorada","title":"A03_3-Barrera aparcamiento mejorada","text":"<p>Mejora del programa de la actividad anterior a\u00f1adiendo una pantalla OLED que muestra indicaciones a seguir para hacer funcionar la barrera. El programa es el siguiente:</p> <p> <p> A03_3-Barrera aparcamiento mejorada</p> <p></p> <p>A continuaci\u00f3n vemos el sistema funcionando:</p> <p> <p> A03_3-Funcionamiento barrera aparcamiento mejorada</p> <p></p>"},{"location":"actividadesAB/act_EP/#a04-motor-dc","title":"A04-Motor DC","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>Actividad en la que vamos a controlar un motor de corriente continua o DC como el de la imagen siguiente:</p> <p> <p> Motor DC ventilador</p> <p></p> <p>El m\u00f3dulo motor con ventilador utiliza el controlador L9110 para controlar la rotaci\u00f3n de la h\u00e9lice hacia izquierda y hacia derecha. Necesita por lo tanto dos pines para su control. Debe conectarse al puerto digital doble con una sola l\u00ednea, bastante pr\u00e1ctico.</p> <p>La parte posterior del m\u00f3dulo presenta la serigraf\u00eda que vemos en la imagen siguiente:</p> <p> <p> Cara posterior del m\u00f3dulo motor DC ventilador</p> <p></p> <p>Tal y como se advierte en la nota de la conclusi\u00f3n 5 que podemos ver en Pinout, la serigrafia posterior del m\u00f3dulo es exactamente igual que la del puerto P6+P7. Esto quiere decir que el motor con ventilador lo podemos conectar a esa pareja de puertos mediante un solo cable para hacerlo funcionar.</p> <p>Si buscamos en la entrada \"Motor \u2192&gt; DC motor\" no encontraremos ning\u00fan bloque adecuado para hacer funcionar el m\u00f3dulo ventilador, por lo que inicialmente haremos la programaci\u00f3n escribiendo directamente en los pines afectados.</p> <p>El programa siguiente hace que el ventilador gire en un sentido, se para, gire en el otro sentido, se pare y asi sucesivamente.</p> <p> <p> A04-Motor DC</p> <p></p> <p>La actividad la podemos hacer utilizando el bloque \"Motor ventilador\" que tenemos disponible en la entrada \"Actuadores\" sin mas que configurar los pines de manera adecuada. En la imagen vemos el programa realizado con el bloque:</p> <p> <p> A04-Motor DC con bloque \"Motor ventilador\"</p> <p></p> <p>Una mejora r\u00e1pida del programa ser\u00eda ponerlo en marcha y paralo utilizando los botones. El programa ser\u00eda ahora:</p> <p> <p> A04-Motor DC controlado por botones</p> <p></p>"},{"location":"actividadesAB/act_EP/#a05-matriz-de-8x8-leds","title":"A05-Matriz de 8x8 LEDs","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>El objetivo es conocer la LEDMatrix 8x8 o tambi\u00e9n llamada matriz de LEDs. La matriz de LEDs es una pantalla peque\u00f1a que tiene 64 LEDs con el aspecto de la Figura siguiente y se conecta al puerto de comunicaci\u00f3n I2C.</p> <p> <p> Aspecto matriz 8x8</p> <p></p> <p>En esta pantalla podemos programar diferentes s\u00edmbolos o elementos, como: caras, iconos, letras... Hay opciones predise\u00f1adas desde ArduinoBlocks y tambi\u00e9n, existe la opci\u00f3n de crearlos personalizados.</p> <p>En el apartado de bloques de programaci\u00f3n, se encuentra en \"LedMatrix 8x8\". Existen diferentes opciones de programaci\u00f3n, seg\u00fan nuestro objetivo.</p> <p> <p> Bloques programaci\u00f3n matriz 8x8</p> <p></p> <p>La primera tarea que debemos realizar cuando queremos hacer uso de la pantalla, es inicializarla. En la Figura siguiente vemos el primer bloque en el que pone: iniciar I2C.</p> <p> <p> Bloques para inicializar matriz 8x8</p> <p></p> <p>Se ha destacado la direcci\u00f3n f\u00edsica por defecto (0x70) porque esta es configurable a trav\u00e9s de los microinterruptores de que dispone el m\u00f3dulo. Las posibilidades de configuraci\u00f3n de la direcci\u00f3n las vemos en la tabla siguiente:</p> <p> 1 2 3 0x70 OFF (0) OFF (0) OFF (0) 0x71 ON (1) OFF (0) OFF (0) 0x72 OFF (0) ON (1) OFF (0) 0x73 ON (1) ON (1) OFF (0) 0x74 OFF (0) OFF (0) ON (1) 0x75 ON (1) OFF (0) ON (1) 0x76 OFF (0) ON (1) ON (1) 0x77 ON (1) ON (1) ON (1) <p></p>"},{"location":"actividadesAB/act_EP/#a05_1-caritas-y-flechas","title":"A05_1-Caritas y flechas","text":"<p>La pantalla LedMatrix muestra diferentes caras, una flecha hacia arriba y una flecha hacia abajo a intervalos de un segundo. El programa es el siguiente:</p> <p> <p> A05_1-Caritas y flechas</p> <p></p>"},{"location":"actividadesAB/act_EP/#a05_2-simbolos-personalizados","title":"A05_2-S\u00edmbolos personalizados","text":"<p>Cuando se pulse el pulsador, en la pantalla debe aparecer un s\u00edmbolo personalizado durante dos segundos y despu\u00e9s otro distinto. La actividad se puede resolver de dos formas. Para la primera de ellas el programa es el siguiente:</p> <p> <p> A05_2-S\u00edmbolos personalizados</p> <p></p> <p>La segunda forma consiste en crear los \u015bimbolos utilizando la herramienta LedMatrix - Bitmap editor y copiar el dato binario generado en el bloque correspondiente. En la imagen vemos la creaci\u00f3n de los s\u00edmbolos:</p> <p> <p> rear s\u00edmbolos personalizados</p> <p></p> <p>Para esta segunda forma el programa es el siguiente:</p> <p> <p> A05_2-S\u00edmbolos personalizados</p> <p></p>"},{"location":"actividadesAB/act_EP/#a05_3ep-piedra-papel-o-tijera","title":"A05_3EP-Piedra papel o tijera","text":"<p>En esta tercera actividad recrearemos el famoso y conocido juego \"Piedra, papel, tijera\". Tambi\u00e9n utilizaremos el pulsador para activar el juego y creamos una variable que elija aleatoriamente uno de los tres s\u00edmbolos del juego. Cuando se pulse el pulsador, la pantalla muestra, de forma aleatoria, uno de los tres s\u00edmbolos: piedra, papel o tijeras.</p> <p>Lo primero que vamos a hacer es crear los tres s\u00edmbolos: utilizando el \"Bitmap\". Para seleccionar los LEDs que queremos en estado ON:</p> <p> <p> Piedra, papel, tijeras</p> <p></p> <p>El programa es el siguiente:</p> <p> <p> A05_3-Piedra papel o tijera</p> <p></p>"},{"location":"actividadesAB/act_EP/#a06-neopixels-shield","title":"A06-Neopixels Shield","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>En el momento de realizar este tutorial no existen bloques para trabajar con LEDs direccionables salvo los propios de la micro:STEAMakers y en estos no se puede configurar el pin P9 como puerto al que est\u00e1n conectados los LEDs.</p> <p>Para solventar el problema vamos a crear un proyecto para ESP32 STEAMakers y vamos a poner en la mochila los tres bloques marcados en la imagen siguiente:</p> <p> <p> Bloques neopixels de otra placa</p> <p></p> <p>Si no sabes utilizar la mochila el corto Uso mochila para pasar bloques entre proyectos de diferntes placas en Arduinoblocks. Uno a ESP32 de Ardutaller te explica claramente como hacerlo.</p> <p>Una vez que tenemos los bloques necesarios creamos el programa siguiente:</p> <p> <p> A06-Neopixels Shield</p> <p></p> <p>El programa ilumina durante un segundo un numero aleatorio de LEDs en un color tambi\u00e9n aleatorio.</p> <p>En la la imagen anterior se destacan los bloques traidos de un proyecto de otra placa.</p> <p>A continuaci\u00f3n vemos el programa funcionando:</p> <p> <p> Funcionamiento A06-Neopixels Shield</p> <p></p>"},{"location":"actividadesAB/act_EP/#a07-sensor-de-co2","title":"A07-Sensor de CO2","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>En esta actividad vamos a necesitar conectar dos dipsotivos al puerto I2C de la shield por lo que vamos a necesitar un expansor o hub. Un Hub ser\u00eda como un \"ladr\u00f3n\", que nos permite conectar varios dispositivos a la vez. Ser\u00eda como el de la imagen siguiente:</p> <p> <p> Hub I2C</p> <p></p> <p>Aviso</p> <p>Se aconseja leer la entrada Conceptos sobre CO2 y VOC para poder entender correctamente el programa siguiente:</p> <p> <p> A07-Sensor de CO2</p> <p></p> <p>A continuaci\u00f3n vemos el programa en un momento de su funcionamiento:</p> <p> <p> Funcionamiento A07-Sensor de CO2</p> <p></p>"},{"location":"actividadesAB/act_EP/#a08-particulas","title":"A08-Particulas","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>Vamos a trabajar con un sensor que mide la materia particulada (PM) en el aire. Sensor imprescindible si estamos monitorizando la calidad del aire.</p> <p>Su funcionamiento se fundamenta en la dispersi\u00f3n laser. Se utiliza un l\u00e1ser para irradiar las part\u00edculas en el aire haciendo que estas dispersen la luz. El sensor recoge la luz dispersa registrando su intensidad a lo largo del tiempo. Un procesador interno calcula el tama\u00f1o de particula equivalente y el n\u00famero de part\u00edculas de diferentes tama\u00f1os. El mismo procesador convierte los datos en valores de concentraci\u00f3n que transmite por interfaz I2C.</p> <p>Destacar entre sus especificaciones:</p> <ul> <li>Respuesta en tiempo real y adquisici\u00f3n continua de datos.</li> <li>Tama\u00f1o m\u00ednimo reconocible de part\u00edculas de 0,3 \u00b5m.</li> <li>Voltaje de trabajo: 3,3 V ~ 5 V</li> <li>Corriente m\u00e1xima de trabajo: 100 mA</li> <li>Corriente en espera: &lt;= 2 mA</li> <li>Rango de medici\u00f3n de part\u00edculas: 0,3 ~ 1,0 \u00b5m; 1,0 ~ 2,5 \u00b5m; 2,5 ~ 10 \u00b5m</li> <li>Eficiencia de conteo de part\u00edculas: 50% @ 0,3 \u00b5m 98% @ &gt;= 0,5 \u00b5m</li> <li>Resoluci\u00f3n de concentraci\u00f3n de masa de part\u00edculas: 1 \u00b5g/m\u00b3</li> <li>Volumen est\u00e1ndar: 0,1 L</li> <li>Rango de temperatura de trabajo: -10 ~ +60 \u00baC</li> <li>Rango de humedad de trabajo: 0 ~ 95% (sin condensaci\u00f3n)</li> </ul> <p>Su aspecto es el que vemos en la imagen siguiente:</p> <p> <p> Sensor de part\u00edculas EASY Plug I2C</p> <p></p>"},{"location":"actividadesAB/act_EP/#a08_1-concentracion-pm25-y-pm10","title":"A08_1-Concentraci\u00f3n PM2.5 y PM10","text":"<p>Medimos y mostramos la concentraci\u00f3n de part\u00edculas de esos dos tama\u00f1os tomando la medida en ug/m3. El programa es el siguiente:</p> <p> <p> A08_1-Concentraci\u00f3n PM2.5 y PM10</p> <p></p> <p>A continuaci\u00f3n vemos el programa en un momento de su funcionamiento:</p> <p> <p> Funcionamiento A08_1-Concentraci\u00f3n PM2.5 y PM10</p> <p></p>"},{"location":"actividadesAB/act_EP/#a08_2-numero-de-particulas","title":"A08_2-N\u00famero de particulas","text":"<p>Contamos el n\u00famero de part\u00edculas de tama\u00f1o mayor o igual que 2.5 micrometros (um) por cada 0.1 L de aire (volumen de aire de la c\u00e1mara de medida). El programa es el siguiente:</p> <p> <p> A08_2-N\u00famero de particulas</p> <p></p>"},{"location":"actividadesAB/act_EP/#a09-sensor-mics4114-no2-y-co","title":"A09-Sensor MiCS4114 (NO2 y CO)","text":"<p>Alimentaci\u00f3n Shield</p> <p>Recuerda que la Shield debe tener activada la alimentaci\u00f3n externa para que funcione el sistema.</p> <p>La actividad que vamos a realizar consistir\u00e1 en medir ambos par\u00e1metros y presentar los resultados, que en este caso se har\u00e1 en la consola serie y en la pantalla OLED. El programa es el siguiente:</p> <p> <p> A09-Sensor MiCS4114</p> <p></p> <p>A continuaci\u00f3n vemos una captura de la consola:</p> <p> <p> Consola A09-Sensor MiCS4114</p> <p></p>"},{"location":"actividadesAB/act_ava/","title":"Actividades avanzadas y con shield modular","text":""},{"location":"actividadesAB/act_ava/#a01-temperatura-y-humedad-con-dht11","title":"A01-Temperatura y Humedad con DHT11","text":"<p>Alimentaci\u00f3n Shield</p> <p>1. Si no tenemos alimentaci\u00f3n externa los jumpers deben estar en la posici\u00f3n 3.3V y los sensores y/o actuadores conectados tienen que poder trabajar a esa tensi\u00f3n. 2. Si tenemos alimentaci\u00f3n externa uno los jumpers pueden estar en la posici\u00f3n 3.3V para los dispositivos de esta tensi\u00f3n y el otro en la de 5V para los sensores de esta otra tensi\u00f3n. Cada tipo conectado seg\u00fan la posici\u00f3n de los jumpers.</p> <p>Inicialmente el objetivo es montar un sensor externo conectado a la shield para testar su funcionamiento, que lo haremos enviando los datos a la consola serie en una primera instancia.</p> <p>otros sensores y actuadores</p> <p>Con la \u00fanica limitaci\u00f3n de los pines disponibles, podemos conectar a la shield muchos mas dispositivos y, si disponemos de los mismos, hacer las actividades desarrolladas para EASY Plug.</p> <p>El programa es el siguiente:</p> <p> <p> A01-Temperatura_Humedad_DHT11</p> <p></p>"},{"location":"actividadesAB/act_ava/#a02-temperatura-y-humedad-con-dht11-via-web","title":"A02-Temperatura y Humedad con DHT11 via web","text":"<p>Alimentaci\u00f3n Shield</p> <p>1. Si no tenemos alimentaci\u00f3n externa los jumpers deben estar en la posici\u00f3n 3.3V y los sensores y/o actuadores conectados tienen que poder trabajar a esa tensi\u00f3n. 2. Si tenemos alimentaci\u00f3n externa uno los jumpers pueden estar en la posici\u00f3n 3.3V para los dispositivos de esta tensi\u00f3n y el otro en la de 5V para los sensores de esta otra tensi\u00f3n. Cada tipo conectado seg\u00fan la posici\u00f3n de los jumpers.</p>"},{"location":"actividadesAB/act_ava/#actividad","title":"Actividad","text":"<p>En esta ocasi\u00f3n lo que vamos a hacer es visualizar los datos de la actividad anterior en formato web. Vamos a ver primero el programa y su funcionamiento para despues ir describiendo los pasos de programaci\u00f3n para mejor entendimiento de la actividad. El programa es:</p> <p> <p> A02-Temperatura y Humedad con DHT11 via web</p> <p></p> <p>Lo que va a ocurrir es que, cuando carguemos en nuestro navegador la direcci\u00f3n IP de nuestro servidor web se va a mostrar una pantalla como la siguiente. L\u00f3gicamente antes nos hemos conectado a la red con SSID micro:STEAMakers.</p> <p> <p> Punto de acceso WiFi</p> <p></p> <p>A continuaci\u00f3n vemos lo que ocurre tanto en el navegador como en la micro:STEAMakers:</p> <p> <p> Interaccionando desde punto de acceso WiFi</p> <p></p> <p>Vemos como al pulsar sobre el enlace o los botones la petici\u00f3n se refleja en la placa.</p>"},{"location":"actividadesAB/act_ava/#explicacion-del-programa","title":"Explicaci\u00f3n del programa","text":"<p>Ahora vamos a ver el programa por partes omitiendo lo referente a la pantalla RGB que ya se ha tratado en otras actividades.</p>"},{"location":"actividadesAB/act_ava/#creacion-del-punto-de-acceso-wifi","title":"Creaci\u00f3n del punto de acceso WiFi","text":"<p>Creamos nuestra propia red WiFi (punto de acceso) en la placa micro:STEAMakers donde nos podemos conectar con dispositivos como ordenador, tablet o m\u00f3viles.</p> <p> <p> Creaci\u00f3n del punto de acceso WiFi</p> <p></p> <p>Una vez creado el punto de acceso iniciamos el servidor en el puerto 80. Este puerto es el utilizado por el protocolo HTPP para transferencia de hipertexto y es el que se utiliza para acceder a todas las p\u00e1ginas web.</p> <p>Hay que tener en cuenta que este punto de acceso nos permite conectarnos con la placa, pero no tendr\u00e1 conexi\u00f3n a internet.</p>"},{"location":"actividadesAB/act_ava/#documento-html","title":"Documento HTML","text":"<p>Todo documento HTML tiene como m\u00ednimo dos partes, el head y el body. En el head debe estar la informaci\u00f3n descriptiva del sitio, como t\u00edtulo, matadatos y estilos, mientras que en el body estar\u00e1 toda la informaci\u00f3n visible de la web. Para facilitar el trabajo en la actividad el documento HTML lo vamos a guardar en una variable de texto que hemos nombrado \"html_cabecera\". De esta forma podremos invocar todo el documento llamando a esta variable.</p> <p> <p> Documento HTML Imagen intencionadamente recortada por la derecha</p> <p></p> <p>La parte Head viene definida con el bloque HTML Document y lo \u00fanico que hemos tocado ha sido el t\u00edtulo y el color de fondo.</p> <p> <p> Documento HTML - Head Imagen intencionadamente recortada por la derecha</p> <p></p> <p>Para el Body creamos un texto con las partes que vemos en la imagen siguiente. Aqu\u00ed hemos dado alg\u00fan formato a los distintos elemento con el fin de destacarlos unos de otros. Sin entrar en detalles que podemos consultar buscando informaci\u00f3n sobre html, hemos establecido tipos de fuente, tama\u00f1o y color de la misma, nivel de indice, formatos como subrayado y negrita, dibujo de l\u00edneas horizontales, saltos de l\u00ednea y l\u00f3gicamente enlaces de texto y tipo bot\u00f3n donde se ha establecido el texto y la URL del enlace.</p> <p> <p> Documento HTML - Body Imagen intencionadamente recortada por la izquierda</p> <p></p> <p>Ahora debemos crear los bloques para atender las peticiones \"get\" y que en la web y la micro:STEAMakers se reflejen las interacciones. Pero antes se aconseja consultar el apartado Peticiones HTTP.</p>"},{"location":"actividadesAB/act_ava/#solicitud-get","title":"Solicitud get /","text":"<p>Con la acci\u00f3n \"/\" para indicar que no hay ninguna petici\u00f3n. La respuesta que vamos a enviar es que se establezca como contenido el de la variable definida \"html_cabecera\", es decir, que aparezcan los textos y botones definidos en el bloque \"Inicializar\".</p> <p> <p> Solicitud get / </p> <p></p>"},{"location":"actividadesAB/act_ava/#solicitud-getpant_on","title":"Solicitud get/pant_ON","text":"<p>Cuando se hace clic en el bot\u00f3n \"Encender pantalla\" (cuando se invoca esta petici\u00f3n) la pantalla se va a iluminar en un color aleatorio y como respuesta se env\u00eda la misma que en el caso anterior. De esta forma cada vez que hagamos clic en el bot\u00f3n cambiar\u00e1 el color y la pantalla en el navegador permacer\u00e1 inalterable.</p> <p> <p> Solicitud get/pant_ON </p> <p></p>"},{"location":"actividadesAB/act_ava/#solicitud-getpant_off","title":"Solicitud get/pant_OFF","text":"<p>Cuando se hace clic en el bot\u00f3n \"Apagar pantalla\" (cuando se invoca esta petici\u00f3n) la pantalla se va a iluminar en color negro y como respuesta se env\u00eda la misma que en el caso anterior.</p> <p> <p> Solicitud get/pant_OFF </p> <p></p>"},{"location":"actividadesAB/act_ava/#solicitud-getleer_dht11","title":"Solicitud get/Leer_DHT11","text":"<p>Esta solicitud se hace desde una enlace de texto y en la misma se leen los valores del sensor, se envia a la pantalla el texto \"DHT11\" en color rojo (se espera mientras se realiza el scroll) y para enviar la respuesta a la petici\u00f3n se configura el \"Contenido\" de la misma como un documento HTML con su Head y su Body. En el Body se crea un texto con todo lo que contiene la varible que estamos utilizando, se agregan l\u00ednea horizontal y salto de l\u00ednea y los texto y valores de los datos que pretendemos visualizar.</p> <p> <p> Solicitud get/Leer_DHT11 </p> <p></p>"},{"location":"actividadesAB/act_ava/#a03-temperatura-y-humedad-con-telegram","title":"A03-Temperatura y Humedad con Telegram","text":"<p>Alimentaci\u00f3n Shield</p> <p>1. Si no tenemos alimentaci\u00f3n externa los jumpers deben estar en la posici\u00f3n 3.3V y los sensores y/o actuadores conectados tienen que poder trabajar a esa tensi\u00f3n. 2. Si tenemos alimentaci\u00f3n externa uno los jumpers pueden estar en la posici\u00f3n 3.3V para los dispositivos de esta tensi\u00f3n y el otro en la de 5V para los sensores de esta otra tensi\u00f3n. Cada tipo conectado seg\u00fan la posici\u00f3n de los jumpers.</p> <p>Actividad en la que vamos a mostrar mismos datos de la actividad A02-Temperatura y Humedad con DHT11 via web mas los del sensor incorporado en la micro:STEAMakers tanto por el puerto serie como a trav\u00e9s de un bot de Telegram. Los datos se obtienen cuando son demandados.</p> <p>Ponemos el programa en dos partes para que la imagen se visualice mejor. La primera ser\u00e1 de inicializaciones y trabajo con el puerto serie y la segunda para el evento de Telegram.</p> <p> <p> </p> <p> </p> <p>A03-Temperatura y Humedad con Telegram</p> <p></p> <p>En la imagen siguiente vemos el resultado que se obtiene por la consola de arduinoblocks con aclaraciones de como realizar las consultas.</p> <p> <p> A03-Temperatura y Humedad con Telegram</p> <p></p> <p>Esta otra imagen nos muestra los resultados en el bot creado para esta actividad.</p> <p> <p> A03-Temperatura y Humedad con Telegram</p> <p></p>"},{"location":"actividadesAB/act_ava/#a04-temperatura-y-humedad-con-thingspeak","title":"A04-Temperatura y Humedad con Thingspeak","text":"<p>Alimentaci\u00f3n Shield</p> <p>1. Si no tenemos alimentaci\u00f3n externa los jumpers deben estar en la posici\u00f3n 3.3V y los sensores y/o actuadores conectados tienen que poder trabajar a esa tensi\u00f3n. 2. Si tenemos alimentaci\u00f3n externa uno los jumpers pueden estar en la posici\u00f3n 3.3V para los dispositivos de esta tensi\u00f3n y el otro en la de 5V para los sensores de esta otra tensi\u00f3n. Cada tipo conectado seg\u00fan la posici\u00f3n de los jumpers.</p> <p>Actividad en la que vamos a mostrar mismos datos de la actividad A03-Temperatura y Humedad con Telegram esta vez en el broker de Thingspeak.</p> <p>El programa es el siguiente</p> <p> <p> A04-Temperatura y Humedad con Thingspeak</p> <p></p> <p>En la imagen siguiente vemos el resultado que se obtiene en el broker transcurrido un tiempo:</p> <p> <p> A04-Temperatura y Humedad con Thingspeak</p> <p></p>"},{"location":"actividadesAB/act_ava/#a05-esp-now","title":"A05-ESP-NOW","text":"<p>Se realizan varias actividades comunicando placas micro:STEAMakers entre si por ESP_NOW.</p> <p>Las direcciones MAC van a ser:</p> <ul> <li>Nodo 1: 4C:11:AE:D3:99:18</li> <li>Nodo 2: 34:98:7A:A9:D1:A8</li> <li>Nodo 3: 4C:11:AE:D3:98:C8</li> </ul>"},{"location":"actividadesAB/act_ava/#a05_1-unidireccional-1-a-1","title":"A05_1-Unidireccional 1 a 1","text":"<p>Se trata de implementar la comunicaci\u00f3n mas simple posible, un emisor y un receptor. Hacemos un contador de segundos en la placa emisora que ser\u00e1n mostrados en una pantalla OLED en la placa receptora.</p> <p>Los nodos van a actuar de la siguiente forma:</p> <ul> <li>Emisor: Nodo 2</li> <li>Receptor: Nodo 1</li> </ul> <p>El programa emisor es:</p> <p> <p> A05_1-Unidireccional 1 a 1</p> <p></p> <p>El programa receptor es:</p> <p> <p> A05_1-Unidireccional 1 a 1</p> <p></p> <p>En la imagen siguiente vemos el resultado de la comunicaci\u00f3n:</p> <p> <p> Funcionamiento A05_1-Unidireccional 1 a 1</p> <p></p>"},{"location":"actividadesAB/act_ava/#a05_2-unidireccional-encriptada-1-a-1","title":"A05_2-Unidireccional encriptada 1 a 1","text":"<p>Es el mismo ejemplo que en la actividad anterior, pero podemos comprobar que simplemente con activar la encriptaci\u00f3n, poner las claves y dejando los programas tal cual est\u00e1n el sistema no funciona. Los programas siguientes no dan resultado alguno:</p> <ul> <li>Programa emisor:</li> </ul> <p> <p> A05_1-Unidireccional encriptada 1 a 1</p> <p></p> <ul> <li>Programa receptor:</li> </ul> <p> <p> A05_2-Unidireccional encriptada 1 a 1</p> <p></p> <p>Una vez subidos los programas comprobamos como el contador del receptor (OLED) no cambia y siempre se mantiene en el mismo estado. Es evidente que si el receptor recibe datos encriptados, por el mismo protocolo de seguridad, debe saber quien se los env\u00eda por lo que la soluci\u00f3n es bien simple, hay que emparejar ambos nodos. </p> <p>IMPORTANTE</p> <p>Si encriptamos la informaci\u00f3n, aunque el env\u00edo sea en una direcci\u00f3n debemos emparejar tambi\u00e9n al nodo emisor con el receptor.</p> <p>Los programas funcionales los vemos a continuaci\u00f3n:</p> <p>El programa emisor es:</p> <p> <p> A05_2-Unidireccional encriptada 1 a 1</p> <p></p> <p>El programa receptor es:</p> <p> <p> A05_2-Unidireccional encriptada 1 a 1</p> <p></p> <p>El funcionamiento es id\u00e9ntico al de la actividad A05_1.</p>"},{"location":"actividadesAB/act_ava/#a05_3-unidireccional-1-a-2-json","title":"A05_3-Unidireccional 1 a 2 + JSON","text":"<p>En esta actividad seguimos con la comunicaci\u00f3n unidireccional de datos, pero los enviaremos desde un emisor a dos receptores, enviaremos mas de un datos y les daremos para ello formato JSON (JavaScript Object Notation). En mi caso concreto en un nodo voy a mostrar los datos recibidos en una OLED y en el otro en la consola serie. El programa permite utilizar uno u otro sin cambiar nada, es decir cargamos el mismo programa a todos los nodos receptores.</p> <p>La codificaci\u00f3n JSON encapsula los datos en forma de clave-valor (key-value) de una forma sencilla de tratar en arduinoblocks. Si quieres aprender mas sobre JSON en arduinoblocks aqu\u00ed tienes el enlace al tema An\u00e1lisis b\u00e1sico de datos en formato JSON.</p> <p>El programa emisor es el siguiente:</p> <p> <p> A05_3-Unidireccional 1 a 2 + JSON</p> <p></p> <p>El programa receptor es el siguiente:</p> <p> <p> A05_3-Unidireccional 1 a 2 + JSON</p> <p></p> <p>A continuaci\u00f3n vemos los resultados en uno y otro modo:</p> <p> <p> A05_3-Unidireccional 1 a 2 + JSON</p> <p></p>"},{"location":"actividadesAB/act_ava/#a05_4-unidireccional-2-a-1-json","title":"A05_4-Unidireccional 2 a 1 + JSON","text":"<p>En esta actividad construimos un datalogger con dos nodos distribuidos que envian periodicamente informaci\u00f3n a un nodo receptor que registra los datos recibidos en formato CSV (Comma Separated Values) que posteriormente podremos leer y visualizar en una hoja de c\u00e1lculo. Para saber mas consultar Tarjeta microSD y la actividad A08-Tarjeta microSD.</p> <p>El programa para los emisores es el siguiente:</p> <p>Nota</p> <p>Debemos recordar asignar un n\u00famero de nodo diferente a cada emisor o no podremos saber de donde viene el dato.</p> <p> <p> A05_4-Unidireccional 2 a 1 + JSON</p> <p></p> <p>El programa receptor es:</p> <p> <p> A05_4-Unidireccional 2 a 1 + JSON</p> <p></p> <p>El resultado que muestra la consola es:</p> <p> <p> Consola A05_4-Unidireccional 2 a 1 + JSON</p> <p></p> <p>Si extraemos la tarjeta microSD de su z\u00f3calo y abrimos el archivo en una hoja de c\u00e1lculo podremos ver los mismos datos que en la consola.</p>"},{"location":"actividadesAB/act_ava/#a05_5-latidos","title":"A05_5-Latidos","text":"<p>En esta actividad haremos que cuando en un nodo emisor pulsamos A o B se muestre en pantalla una A o una B y cuando tocamos el bot\u00f3n t\u00e1ctil que se vea un coraz\u00f3n latiendo.</p> <p>El programa para emisor es el siguiente:</p> <p> <p> A05_5-Latidos</p> <p></p> <p>El programa receptor es:</p> <p> <p> A05_5-Latidos</p> <p></p>"},{"location":"actividadesAB/act_ini/","title":"Actividades iniciales","text":""},{"location":"actividadesAB/act_ini/#a01-hola-mundo","title":"A01-Hola Mundo","text":"<p>En esta actividad haremos que al inicio se muestre durante 3 segundo una carita triste que cambiar\u00e1, tambien a los 3 segundo, a carita alegre para pasar a ver de forma permanente un coraz\u00f3n latiendo a raz\u00f3n de una pulsaci\u00f3n cada segundo.</p> <p>En la imagen siguiente tenemos el programa.</p> <p> <p> A01-Hola Mundo</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A01-Hola Mundo funcionando</p> <p></p>"},{"location":"actividadesAB/act_ini/#a02-medio-relleno","title":"A02-Medio relleno","text":"<p>Se trata de hacer un programa que con el bloque l\u00ednea nos cree un patr\u00f3n de relleno del color que deseemos en el tri\u00e1ngulo formado desde la diagonal (0,0) a (4,4) hacia la derecha.</p> <p>En la imagen siguiente tenemos el programa.</p> <p> <p> A02-Medio relleno</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A02-Medio relleno funcionando</p> <p></p>"},{"location":"actividadesAB/act_ini/#a03-pixel-de-color-aleatorio","title":"A03-Pixel de color aleatorio","text":"<p>Se trata de hacer un programa que muestre iluminado un pixel aleatorio de un color tambi\u00e9n aleatorio.</p> <p>En la imagen siguiente tenemos el programa.</p> <p> <p> A03-Pixel de color aleatorio</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A03-Pixel de color aleatorio funcionando</p> <p></p>"},{"location":"actividadesAB/act_ini/#a04-botones","title":"A04-Botones","text":"<p>Los ejemplos vistos hasta ahora han permitido que la micro:STEAMakers nos muestre algo. Esto es lo que se conoce como salida. Ahora bien, es evidente que necesitamos tambi\u00e9n que la micro:STEAMakers reaccione a cosas externas, y estas cosas se denominan entradas. Para que sea f\u00e1cil de recordar:</p> <ul> <li>Salida es lo que micro:bit nos muestra</li> <li>Entrada es lo que recibe la micro:bit para procesarlo</li> </ul> <p>Aunque existen otros sistemas, por ahora nos vamos a centrar en los botones de la micro:STEAMakers, recordando que disponemos adem\u00e1s de un tercer bot\u00f3n, en este caso tactil, que est\u00e1 marcado en la placa. En la imagen vemos estos botones.</p> <p> <p> Botones en la micro:STEAMakers</p> <p></p>"},{"location":"actividadesAB/act_ini/#a04_1-mostrar-el-boton-pulsado","title":"A04_1-Mostrar el bot\u00f3n pulsado","text":"<p>Se trata de mostrar en la pantalla el bot\u00f3n que estamos pulsando mientras lo mantengamos accionado. El programa es el siguiente:</p> <p> <p> A04_1-Mostrar el bot\u00f3n pulsado</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A04_1-Mostrar el bot\u00f3n pulsado funcionando</p> <p></p>"},{"location":"actividadesAB/act_ini/#a04_2-check-y-flechas","title":"A04_2-Check y flechas","text":"<p>Crear un programa que se est\u00e9 ejecutando en un bucle infinito y que responda, seg\u00fan pulsemos los botones, de la forma siguiente:</p> <ul> <li>Si pulsamos simultaneamente A y B en la pantalla aparecer\u00e1 el caracter\u00edstico s\u00edmbolo de check en color verde.</li> <li>Si pulsamos el bot\u00f3n A mostrar\u00e1 una flecha apuntando a la izquierda en color magenta.</li> <li>Si pulsamos el bot\u00f3n B mostrar\u00e1 una flecha apuntando a la derecha en color rojo.</li> <li>Si pulsamos el bot\u00f3n t\u00e1ctil en la pantalla veremos un aspa de color azul.</li> <li>Si no pulsamos nada dejaremos la pantalla estar\u00e1 en negro.</li> </ul> <p>El programa es el siguiente:</p> <p> <p> A04_2-Check y flechas</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A04_2-Check y flechas funcionando</p> <p></p>"},{"location":"actividadesAB/act_ini/#a04_3-botones-como-texto","title":"A04_3-Botones como texto","text":"<p>Crear un programa que se est\u00e9 ejecutando en un bucle infinito y que responda, seg\u00fan pulsemos los botones, de la forma siguiente:</p> <ul> <li>Si pulsamos el bot\u00f3n A mostrar\u00e1 'BOTON A' en color magenta.</li> <li>Si pulsamos el bot\u00f3n B mostrar\u00e1 'BOTON B' en color AZUL.</li> <li>Si pulsamos el bot\u00f3n t\u00e1ctil en la pantalla veremos 'TACTIL' en color amarillo.</li> <li>Si no pulsamos nada dejaremos la pantalla estar\u00e1 en negro.</li> </ul> <p>El programa es el siguiente:</p> <p> <p> A04_3-Botones como texto</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A04_3-Botones como texto funcionando</p> <p></p> <p>NO interrupci\u00f3n ejecuci\u00f3n durante scroll</p> <p>Al final observamos como el scroll no interrumpe la ejecuci\u00f3n y podemos activar cualquier bot\u00f3n en el momento que necesitemos.</p>"},{"location":"actividadesAB/act_ini/#a04_4-botones-y-rellenos","title":"A04_4-Botones y rellenos","text":"<p>Crear un programa que se est\u00e9 ejecutando en un bucle infinito y que responda, seg\u00fan pulsemos los botones, de la forma siguiente:</p> <ul> <li>Si pulsamos el bot\u00f3n A mostrar\u00e1 un cuadrado relleno de 3x3 pixeles en color magenta.</li> <li>Si pulsamos el bot\u00f3n B mostrar\u00e1 un rellenos completo en colores aleatorios.</li> <li>Si pulsamos el bot\u00f3n t\u00e1ctil la pantalla estar\u00e1 apagada.</li> </ul> <p>El programa es el siguiente:</p> <p> <p> A04_4-Botones y rellenos</p> <p></p> <p>A continuaci\u00f3n vemos una animaci\u00f3n de la actividad:</p> <p> <p> A04_4-Botones y rellenos</p> <p></p> <p>Bot\u00f3n t\u00e1ctil en pines de expansi\u00f3n</p> <p>Podemos observar como el sensor t\u00e1ctil se encuentra justo en el pin que hay a la derecha del 0 en los pines de borde de placa.</p>"},{"location":"actividadesAB/act_ini/#a05-sensores-integrados","title":"A05-Sensores integrados","text":"<p>En esta actividad vamos a ver ejemplos de uso sencillo de los sensores que incorpora la ESP32 micro:STEAMakers programando su comportamiento con arduinoblocks.</p> <p>Los veremos en el orden en que est\u00e1n los bloques y utilizaremos el puerto serie para mostrar los datos obtenidos de los mismos. En algunos ejemplos iremos mezclando elementos para su creaci\u00f3n.</p>"},{"location":"actividadesAB/act_ini/#a05_1-nivel-de-luz-como-datos","title":"A05_1-Nivel de luz como datos","text":"<p>El programa de prueba que vamos a crear consiste en mostrar en el monitor serie los datos de nivel de luz recibidos en sus dos formatos posibles, porcentaje y num\u00e9rico. El programa es el siguiente:</p> <p> <p> A05_1-Nivel de luz como datos</p> <p></p> <p>En la imagen siguiente vemos el resultado obtenido a partir de una fuente de luz a la que se acerca el sensor y se va alejando y/o tapando parcial o totalmente para variar la cantidad de luz que incide en el mismo.</p> <p> <p> Resultados A05_1-Nivel de luz como datos</p> <p></p>"},{"location":"actividadesAB/act_ini/#a05_2-nivel-de-luz-grafico","title":"A05_2-Nivel de luz grafico","text":"<p>Crear un datalogger con el nivel de luz. El programa es el siguiente:</p> <p> <p> A05_2-Nivel de luz grafico</p> <p></p> <p>En la imagen siguiente vemos el resultado obtenido a partir de una fuente de luz a la que se acerca el sensor y se va alejando y/o tapando parcial o totalmente para variar la cantidad de luz que incide en el mismo.</p> <p> <p> Resultados A05_2-Nivel de luz grafico</p> <p></p>"},{"location":"actividadesAB/act_ini/#a05_3-temperatura-y-humedad","title":"A05_3-Temperatura y humedad","text":"<p>La actividad consistir\u00e1 en enviar los dos datos de manera ordenada, con indicaci\u00f3n de la unidad de medida, a la consola serie al tiempo que se muestran en la pantalla dos iconos, uno para frio y otro para calor (dentro de las posibilidades de dibujo que tenemos) en funci\u00f3n de si se supera o no un determinado valor de temperatura.</p> <p> <p> A05_3-Temperatura y humedad</p> <p></p> <p>A continuaci\u00f3n vemos el funcionamiento del programa. Cuando se pone el dedo por detr\u00e1s de la placa en realidad se pone en contacto con el sensor para variar aunque sea minimamente su temperatura y que supere el umbral establecido. Cuando se retira el dedo se observa como la temperatura vuelve a su valor ambiente.</p> <p> <p> A05_3-Temperatura y humedad funcionando</p> <p></p> <p>En la imagen siguiente podemos observar los datos en la consola serie y como se producen los cambios de temperatura. Tambi\u00e9n observamos los cambios en la humedad.</p> <p> <p> Resultados A05_3-Temperatura y humedad</p> <p></p>"},{"location":"actividadesAB/act_ini/#a05_4-nivel-de-sonido","title":"A05_4-Nivel de sonido","text":"<p>El programa que vamos a crear para la actividad consiste en mostrar en el monitor serie los datos de nivel de sonido recibidos en sus dos formatos posibles, porcentaje y num\u00e9rico. El programa es el siguiente:</p> <p> <p> A05_4-Nivel de sonido</p> <p></p> <p>En la imagen siguiente vemos el resultado obtenido creando variaciones de sonido en base a una reproducci\u00f3n musical {Oscar D'Leon - LLoraras} acercando y alejando la tarjeta del altavoz.</p> <p> <p> Resultados A05_4-Nivel de sonido</p> <p></p>"},{"location":"actividadesAB/act_ini/#a05_5-datalogger-con-todos","title":"A05_5-Datalogger con todos","text":"<p>Esta actividad consiste simplemente en reproducir el ejemplo que Juanjo desarrolla en el video micro:STEAMakers 03 - Sensores integrados.</p> <p>El programa es el siguiente:</p> <p> <p> A05_5-Datalogger con todos</p> <p></p> <p>A continuaci\u00f3n vemos el funcionamiento:</p> <p> <p> A05_5-Datalogger con todos funcionando</p> <p></p>"},{"location":"actividadesAB/act_ini/#a05_6-consumo","title":"A05_6-Consumo","text":"<p>Utilizaremos el plotter serie para observar los cambios que se producen en la corriente de consumo cuando activamos y desactivamos la pantalla a diferentes niveles de brillo.</p> <p>El programa es el siguiente:</p> <p> <p> A05_6-Consumo</p> <p></p> <p>A continuaci\u00f3n vemos el funcionamiento:</p> <p> <p> A05_6-Consumo funcionando</p> <p></p> <p>En la gr\u00e1fica podemos observar dos momentos diferentes:</p> <ol> <li>El momento de la conexi\u00f3n del plotter y las partes planas de la gr\u00e1fica se produce un diente de sierra de unos 10 microamperios de pico a pico. Esto se debe a las variaciones de consumo en reposo de la placa.</li> <li>Los cambios entre unos 6mA a unos 30mA en el primer escalon debido a la pulsaci\u00f3n del bot\u00f3n B. Un segundo escal\u00f3n has unos 50mA debido a la pulsaci\u00f3n del bot\u00f3n A. La vuelta a 6mA se produce al tocar el bot\u00f3n t\u00e1ctil.</li> </ol>"},{"location":"actividadesAB/act_ini/#a06-actuadores-integrados","title":"A06-Actuadores integrados","text":"<p>En esta actividad vamos a ver ejemplos de uso sencillo de los bloques para el control del zumbador.</p>"},{"location":"actividadesAB/act_ini/#a06_1-escala-musical","title":"A06_1-Escala musical","text":"<p>El programa de prueba que vamos a crear consiste en crear la escala musical y hacer que suene cuando activamos el pulsador t\u00e1ctil. El programa es el siguiente:</p> <p> <p> A06_1-Escala musical</p> <p></p>"},{"location":"actividadesAB/act_ini/#a06_2-melodia","title":"A06_2-Melodia","text":"<p>Reproducir la melod\u00eda de la imagen siguiente sabiendo que las negras tienen una duraci\u00f3n de 500ms, las negras con un puntito 750ms y las blancas 1000ms.</p> <p> <p> A06_2-Melodia: Himno a la alegria</p> <p></p> <p>El programa es el siguiente:</p> <p> <p> A06_2-Melodia</p> <p></p>"},{"location":"actividadesAB/act_ini/#a06_3-rtttl","title":"A06_3-RTTTL","text":"<p>La actividad consistir\u00e1 en reproducir diferentes melod\u00edas a partir de los bloques RTTTL (Ring Tone Text Transfer Language o lenguaje de tonos de llamada) en funci\u00f3n del bot\u00f3n que pulsemos.</p> <p> <p> A06_3-RTTTL</p> <p></p>"},{"location":"actividadesAB/act_ini/#a07-acelerometro-y-giroscopio","title":"A07-Aceler\u00f3metro y giroscopio","text":"<p>En esta actividad vamos a ver ejemplos de uso sencillo del bloque para el control de la posici\u00f3n de la placa.</p>"},{"location":"actividadesAB/act_ini/#a07_1-acelerometro","title":"A07_1-Aceler\u00f3metro","text":"<p>El programa de prueba que vamos a crear consiste simplemente en asignar la acelaraci\u00f3n en cada eje al plotter para visualizar los movimientos.</p> <p>Reasignar ejes</p> <p>Tendremos en cuenta lo indicado en la explicaci\u00f3n acerca de los ejes X e Y.</p> <p> <p> A07_1-Aceler\u00f3metro</p> <p></p> <p>En la animaci\u00f3n vemos el funcionamiento del programa.</p> <p> <p> A07_1-Aceler\u00f3metro funcionando</p> <p></p>"},{"location":"actividadesAB/act_ini/#a07_2-giroscopio","title":"A07_2-Giroscopio","text":"<p>El programa de prueba que vamos a crear consiste simplemente en asignar el giro en cada eje al plotter para visualizar los movimientos.</p> <p>Reasignar ejes</p> <p>Tendremos en cuenta lo indicado en la explicaci\u00f3n acerca de los ejes X e Y.</p> <p> <p> A07_2-Giroscopio</p> <p></p> <p>En la animaci\u00f3n vemos el funcionamiento del programa.</p> <p> <p> A07_2-Giroscopio funcionando</p> <p></p>"},{"location":"actividadesAB/act_ini/#a08-tarjeta-microsd","title":"A08-Tarjeta microSD","text":"<p>En esta actividad vamos a ver ejemplos de uso sencillo de los bloques para entender el manejo de los mismos.</p>"},{"location":"actividadesAB/act_ini/#a08_1-registro-y-lectura-basicos","title":"A08_1-Registro y lectura b\u00e1sicos","text":"<p>El programa de prueba que vamos a crear consta de dos partes: la primera consiste en grabar los datos de temperatura y humedad medidos con el sensor integrado cada 5 segundos. Dejaremos transcurrir un tiempo para que el archivo tenga varios datos. Ahora grabamos el segundo programa y veremos los resultados en la consola serie.</p> <p> <p> A08_1a-Grabar datos microSD</p> <p></p> <p>Transcurrido un tiempo cargamos en la micro:STEAMakers el ejemplo siguiente, abrimos la consola serie y vemos los datos grabado en la microSD.</p> <p> <p> A08_1b-Leer datos microSD</p> <p></p> <p>En la consola veremos algo similar a lo siguiente:</p> <p> <p> A08_1b-Resultado de leer datos microSD</p> <p></p>"},{"location":"actividadesAB/act_ini/#a08_2-lectura-de-datos-mejorada","title":"A08_2-Lectura de datos mejorada","text":"<p>El programa anterior no nos muestra los datos medidos con el formato dato, pero es f\u00e1cil cambiar esto haciendo simplemente el programa siguiente:</p> <p> <p> A08_2-Lectura de datos mejorada</p> <p></p> <p>En este caso el resultado obtenido es el siguiente:</p> <p> <p> A08_2-Resultado de lectura de datos mejorada</p> <p></p>"},{"location":"actividadesAB/act_ini/#a08_3-datos-con-formato-csv","title":"A08_3-Datos con formato CSV","text":"<p>Vamos a a\u00f1adir a los datos de temperatura y humedad de las actividades anteriores el dato de nivel de luz, pero dando a los datos el formato CSV. El ejemplo lo vemos a continuaci\u00f3n:</p> <p> <p> A08_3-Datos con formato CSV</p> <p></p> <p>Cuando abrimos el archivo generado con una hoja de c\u00e1lculo como Calc de LibreOffice y nos aseguramos que el caracter delimitador es el correcto:</p> <p> <p> A08_3-Importar datos con formato CSV</p> <p></p> <p>Obtenemos un resultado como el siguiente:</p> <p> <p> A08_3-Importar datos con formato CSV</p> <p></p> <p>A partir de estos datos podemos darles formato, filtrarlos, crear gr\u00e1ficas, etc.</p>"},{"location":"ayuda/ayuda/","title":"Ayuda","text":"<p>Esta es una secci\u00f3n de ayuda para iniciar una web con la plantilla y para cuando tengas problemas escribiendola. \u00dasalo como consulta mientras la est\u00e1s redactando (la web), pero recuerda comentarlo en el <code>mkdocs.yml</code> para que no aparezca en tu web.</p>"},{"location":"ayuda/ayuda/#resumen-del-proceso-a-seguir","title":"Resumen del proceso a seguir","text":"<p>Crear repositorio en la nube     \u2022 Le ponemos nombre y descripci\u00f3n     \u2022 Le a\u00f1adimos README.md.     \u2022 Le a\u00f1adimos Licencia MIT     \u2022 Le a\u00f1adimos .gitignore     \u2022 Arreglamos README.md y ponemos Acceso a contenidos con la direcci\u00f3n web que nos da en Settings \u2192 Pages     \u2022 Le a\u00f1adimos rama gh-pages Nos dirigimos al directorio en el que vamos a trabajar y hacemos      \u2022 $ git clone \u2026 (a\u00f1adimos la direcci\u00f3n https que obtenemos de Code) Copiamos de Plantilla:     \u2022 Carpeta docs     \u2022 mkdocs.yml     \u2022 Pipfile     \u2022 .gitignore     \u2022 requirements.txt     \u2022 LICENSE     \u2022 guia</p> <p>Tenemos que preparar el equipo para trabajar con la plantilla. Nos situamos en la carpeta con la que vamos a trabajar, abrimos una terminal y creamos el entorno virtual e instalamos todas las dependencias con:</p> <pre><code>\u2022 Creamos el entorno virtual: python3 -m venv env\n\u2022 Activamos el entorno virtual: source env/bin/activate\n\u2022 Instalamos las dependencias: pip install -r requirements.txt\n</code></pre> <p>Abrimos VSCode y configuramos mkdocs.yml para tener un \u00edndice operativo comentando todo lo pendiente.</p> <p>Trabajamos el directorio Miscelanea y sus archivos para dejarlo todo funcionando.</p> <pre><code>\u2022 Activar el entorno virtual si no est\u00e1 activado: source env/bin/activate\n\u2022 Correr el servidor: mkdocs serve. Si se genera el error -- ERROR   -  Config value 'plugins': The \"glightbox\" plugin is not installed \u2013 procedemos a instalar el plugin con \u2018pip install mkdocs-glightbox\u2019.\n</code></pre> <p>Cerrar Server para hacer el primer despliegue y comprobar que todo es correcto con: pipenv run mkdocs gh-deploy</p>"},{"location":"ayuda/ayuda/#aspecto-final-del-navegador","title":"Aspecto final del navegador","text":"<p><code>mkdocs.yml</code> -&gt; Debe quedar el punto 4 m\u00e1s o menos as\u00ed</p> <pre><code>...\n\n# 4. Navegaci\u00f3n\nnav:\n  - Manual de Sanp\u00a1:\n    - 1. Bloques, Scripts y Sprites: index.md\n    - 1.1. Sprites y paralelismo: 1/1_1.md\n    - 1.2. Anidamiento de Sprites. Anclajes y Partes: 1/1_2.md\n    - 1.3. Bloques informadores y expresiones: 1/1_3.md\n    - 1.4. Predicados y evaluaci\u00f3n condicional: 1/1_4.md\n    - 1.5. Variables: 1/1_5.md\n  - 2. Salvando y cargando proyectos y media:\n    ...\n\n#- Ayuda:\n    #- Chuleta: /ayuda/ayuda.md\n    #- Chuleta de Markdown: ayuda/markdown.md\n    #- Chuleta de Material Design: ayuda/material.md\n\n - Miscelanea:\n    - Autor: Miscelanea/about.md \n    - Licencias: Miscelanea/lic.md\n    - Webgrafia/Bibliograf\u00eda: Miscelanea/webgrafia.md\n    - Software utilizado: Miscelanea/soft.md\n\n...\n</code></pre> <p>Tienes una ayuda b\u00e1sica para desenvolverte con Markdown. Y otra para poder sacarle m\u00e1s partido al tema Material Design:</p> <ol> <li>Escribir Markdown</li> <li>Sacarle jugo al tema Material Design</li> </ol>"},{"location":"ayuda/ayuda/#guia-con-mi-formato-y-otras-cosas","title":"Guia con mi formato y otras cosas","text":"<p>Establecer color, tama\u00f1o y negrita con html:</p> <p>aa <p>Colores para los tres primeros niveles del \u00edndice:</p>"},{"location":"ayuda/ayuda/#nivel-indice-1","title":"Nivel indice 1","text":""},{"location":"ayuda/ayuda/#nivel-indice-2","title":"Nivel indice 2","text":""},{"location":"ayuda/ayuda/#nivel-indice-3","title":"Nivel indice 3","text":"<p>Idea base para im\u00e1gnes y gif animados:</p> <p> <p> aa</p> <p></p> <p>Idea b\u00e1sica para im\u00e1genes y gif mas acceso a programa, enlace, etc:</p> <p> <p> aa Aqui ponemos acceso a programa, enlace u otra cosa</p> <p></p> <p>Como crear un \u00edndice de enlaces internos con html</p> <p></p> <p>Entrada 1 Entrada 2 Entrada 3 Entrada 4</p> <p>[Volver](#item00 </p>"},{"location":"ayuda/markdown/","title":"Chuleta de Markdown","text":"<p>Esta es solo una chuleta de Markdown b\u00e1sico. En esta web tienes una referencia muy buena -&gt; Web de Markdown.</p> <p>Para escribir Markdown se recomienda usar como editor VSCode o VSCodium con las extensiones:</p> <ul> <li>Markdown All in One</li> <li>Markdownlint</li> </ul>"},{"location":"ayuda/markdown/#titulos","title":"T\u00edtulos","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-1-usar-solo-al-principio-del-fichero","title":"Esto es un t\u00edtulo 1 -&gt; Usar solo al principio del fichero","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-2-usar-para-dividir-en-secciones","title":"Esto es un t\u00edtulo 2 -&gt; Usar para dividir en secciones","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-3-usar-para-dividir-en-subsecciones","title":"Esto es un t\u00edtulo 3 -&gt; Usar para dividir en subsecciones","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-4-no-recomendado-su-uso","title":"Esto es un t\u00edtulo 4 -&gt; No recomendado su uso","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-5-no-recomendado-su-uso","title":"Esto es un t\u00edtulo 5 -&gt; No recomendado su uso","text":""},{"location":"ayuda/markdown/#esto-es-un-titulo-6-no-recomendado-su-uso","title":"Esto es un t\u00edtulo 6 -&gt; No recomendado su uso","text":""},{"location":"ayuda/markdown/#textos","title":"Textos","text":"<p>Texto en negrita. Texto en cursiva.  </p> <p>Para poner un salto de linea tienes que poner dos espacios en blanco despu\u00e9s del punto. Esta l\u00ednea est\u00e1 debajo. Pero esta sale seguido.</p> <p>O debes de poner una l\u00ednea vac\u00eda entre medias.</p>"},{"location":"ayuda/markdown/#enlaces","title":"Enlaces","text":"<p>As\u00ed se pone un enlace a una p\u00e1gina de Internet.</p> <p>As\u00ed se pone un enlace a una p\u00e1gina del propio taller.</p>"},{"location":"ayuda/markdown/#imagenes","title":"Im\u00e1genes","text":"<p>As\u00ed se pone una imagen desde Internet</p> <p></p> <p>Y as\u00ed se pone una imagen desde el propio taller</p> <p></p>"},{"location":"ayuda/markdown/#listas","title":"Listas","text":"<p>Listas sin orden con <code>*</code>, ejemplo:</p> <ul> <li>Esto es una lista</li> <li>Lista sin orden.</li> </ul> <p>Listas ordenadas con <code>1.</code>, ejemplo:</p> <ol> <li>Esto es una</li> <li>Lista ordenada</li> </ol>"},{"location":"ayuda/markdown/#citas","title":"Citas","text":"<p>Si quieres poner una cita tienes que usar <code>&gt;</code> delante del texto, ejemplo:</p> <p>Esto es una cita</p> <p>Esto es una cita anidada</p> <p>Esto es una cita doblemente anidada</p>"},{"location":"ayuda/markdown/#regla-horizontal","title":"Regla horizontal","text":"<p>Se hace para poner una l\u00ednea que divisa visualmente una secci\u00f3n de otra.</p> <p>Aqu\u00ed hay una.</p>"},{"location":"ayuda/markdown/#tablas","title":"Tablas","text":"<p>En este ejemplo tienes una tabla con 3 columnas:</p> <ul> <li>La primera tiene el texto fijado a la izquierda.</li> <li>La segunda tiene el texto fijado al centro.</li> <li>La tercera tiene el texto fijado a la derecha.</li> </ul> Texto a la izquierda Texto en el centro Texto en la derecha En un lugar de la mancha, de cuyo nombre no quiero acordarme, no ha mucho tiempo que vivia un hidalgo de los de lanza en astillero, adarga antigua, roc\u00edn flaco y galgo corredor..."},{"location":"ayuda/markdown/#lineas-de-codigo","title":"L\u00edneas de c\u00f3digo","text":"<p>Para poner c\u00f3digo en l\u00ednea, tienes que ponerlo entre las comillas `.</p> <p>Aqu\u00ed tienes <code>un ejemplo de c\u00f3digo</code> en l\u00ednea.</p> <p>Si quisieras poner un bloque de c\u00f3digo tienes que poner 3 comillas `, debajo el c\u00f3digo, y una \u00faltima l\u00ednea con otras 3 comillas. Puedes incluso espec\u00edficarle el lenguaje del c\u00f3digo para que te lo coloree. Ah\u00ed va un ejemplo en Python:</p> <pre><code>import antigravity\n\nprint('Hola mundo')\n</code></pre>"},{"location":"ayuda/material/","title":"Material Design","text":"<p>Esta chuleta es un copia-pega modificado de esta p\u00e1gina. B\u00e1sicamente es un Markdown espec\u00edfico para poder ser usado con el tema Material Design y sacarle m\u00e1s partido.</p>"},{"location":"ayuda/material/#enlaces","title":"Enlaces","text":"<p>Existe la posibilidad de utilizar referencias a enlaces que se definen posteriormente. En ese caso unicamente incluimos el n\u00famero de enlace. M\u00e1s adelante es necesario definir el enlace que corresponde con cada n\u00famero y, opcionalmente, un texto descriptivo.</p> <pre><code>:::markdown\nPodemos comprar un ordenador (Dell)[1] o (Apple)[2].\n\n[1]: http://dell.com/   \"Comprar en Dell\"\n[2]: http://apple.com/  \"Comprar en Apple\"\n</code></pre> <p>Podemos comprar un ordenador Dell o Apple.</p>"},{"location":"ayuda/material/#imagenes","title":"Imagenes","text":"<p>Tambi\u00e9n es posible utilizar referencias que es necesario definir posteriormente.</p> <pre><code>:::markdown\n![texto alternativo][id]\n\n[id]: /img/md-logo.png \"Titulo opcional\"\n</code></pre> <p></p>"},{"location":"ayuda/material/#secuencias-de-escape","title":"Secuencias de escape","text":"<p>Puede ocurrir que alguno de los caracteres especiales utilizados en markdown aparezcan de forma fortuita en el texto y originen efectos no deseados. Para evitarlo podemos utilizar las secuencias de escape para especificar que deseamos utilizar el caracter como texto sin que tenga ning\u00fan efecto colateral. Podemos utilizar el caracter '\\' junto con cualquiera de los siguientes para crear una secuencia de escape.</p> <pre><code>\\ backslash\n` backtick\n* asterisco\n_ underscore\n{} curly braces\n[] square brackets\n() parentheses\n# hash mark\n+ plus sign\n- minus sign (hyphen)\n. dot\n! exclamation mark\n</code></pre>"},{"location":"ayuda/material/#codigo","title":"C\u00f3digo","text":"<p>Para marcar texto como c\u00f3digo es necesario indentar cada l\u00ednea del bloque con cuatro espacios o una tabulaci\u00f3n. Si el c\u00f3digo va embebido en un p\u00e1rrafo, es neceario rodearlo por comillas simples invertidas. Consultar la secci\u00f3n de CodeHilite y de InlineHilite para funcionalidades extendidas.</p>"},{"location":"ayuda/material/#extensiones","title":"Extensiones","text":""},{"location":"ayuda/material/#admonition","title":"Admonition","text":"<p>Extensi\u00f3n incluida en la librer\u00eda est\u00e1ndar de Markdown que permite incluir contenido adicional en cajas de color con un t\u00edtulo y un icono. Por ejemplo para res\u00famenes, notas, consejos o avisos.</p> <pre><code>!!! note\n    Esto es un ejemplo de nota (note, seealso).\n</code></pre> <p>Note</p> <p>Esto es un ejemplo de nota (note, seealso).</p> <pre><code>!!! note \"Esta es una nota con t\u00edtulo\"\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n    Nulla et euismod nulla. Curabitur feugiat, tortor non\n    consequat finibus, justo purus auctor massa, nec semper\n    lorem quam in massa.\n</code></pre> <p>Esta es una nota con t\u00edtulo</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <pre><code>!!! note \"\"\n    Esta nota va sin t\u00edtulo.\n</code></pre> <p>Esta nota va sin t\u00edtulo.</p> <p>En vez de note es posible utilizar las siguientes etiquetas: summary, info, tip, success, question, warning, failure, danger, bug y quote.</p> <p>Summary</p> <p>Esto es un ejemplo de sumario (summary, tldr).</p> <p>Info</p> <p>Esto es un ejemplo de bloque informativo (info, todo).</p> <p>Tip</p> <p>Esto es un ejemplo de consejo o truco (tip, hint, important).</p> <p>Success</p> <p>Esto es un ejemplo de bloque de \u00e9xito (success, check, done).</p> <p>Question</p> <p>Esto es un ejemplo de pregunta (question, help, faq).</p> <p>Warning</p> <p>Esto es un ejemplo de precauci\u00f3n (warning, caution, attention).</p> <p>Failure</p> <p>Esto es un ejemplo de fallo (failure, fail, missing).</p> <p>Danger</p> <p>Esto es un ejemplo de peligro (danger, error).</p> <p>Bug</p> <p>Esto es un ejemplo de error (bug).</p> <p>Quote</p> <p>Esto es un ejemplo de cita (quote, cite).</p>"},{"location":"ayuda/material/#details","title":"Details","text":"<p>Para crear bloques colapsables que puedan ocultar su contenido.</p> <p>Ejemplo: <pre><code>??? \"Bloque cerrado. Abreme !!!\"\n    Ahora lo has abierto.\n</code></pre> Resultado:</p> Bloque cerrado. Abreme !!! <p>Ahora lo has abierto.</p> <p>Ejemplo: <pre><code>???+ \"Bloque abierto inicialmente\"\n\n    ??? \"Bloque dentro de otro bloque\"\n        Algo de contenido.\n</code></pre> Resultado:</p> Bloque abierto inicialmente Bloque dentro de otro bloque <p>Algo de contenido.</p> <p>Ejemplo: <pre><code>??? danger \"Bloque con tema de peligro\"\n    Algo de contenido.\n</code></pre> Resultado:</p> Bloque con tema de peligro <p>Algo de contenido.</p> Bloque con tema de precauci\u00f3n <p>Algo de contenido.</p> Bloque con tema de \u00e9xito <p>Algo de contenido.</p>"},{"location":"ayuda/material/#codehilite","title":"CodeHilite","text":"<p>Extensi\u00f3n incluida en la librer\u00eda est\u00e1ndar de Markdown que permite resaltar la sintaxis de los bloques de c\u00f3digo. Como lenguajes soportados est\u00e1n entre otros: markdown, python, c, cpp, csharp, html, javascript, JSON, XML.</p> <p>Ejemplo utilizando comillas simples.</p> <pre><code>``` python\nimport tensorflow as tf\n```\n</code></pre> <p>Resultado:</p> <pre><code>import tensorflow as tf\n</code></pre> <p>Ejemplo utilizando bloque tabulado con cuatro espacios:</p> <pre><code>    :::python\n    \"\"\" Bubble sort \"\"\"\n    def bubble_sort(items):\n        for i in range(len(items)):\n            for j in range(len(items) - 1 - i):\n                if items[j] &gt; items[j + 1]:\n                    items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Resultado:</p> <pre><code>:::python\n\"\"\" Bubble sort \"\"\"\ndef bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Ejemplo utilizando bloque tabulado y n\u00fameros de l\u00ednea:</p> <pre><code>    #!python\n    \"\"\" Bubble sort \"\"\"\n    def bubble_sort(items):\n        for i in range(len(items)):\n            for j in range(len(items) - 1 - i):\n                if items[j] &gt; items[j + 1]:\n                    items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Resultado:</p> <pre><code>#!python\n\"\"\" Bubble sort \"\"\"\ndef bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Es posible resaltar l\u00edneas concretas de c\u00f3digo con hl_lines.</p> <pre><code>    #!python hl_lines=\"3 4\"\n</code></pre> <p>Resultado:</p> <pre><code>#!python hl_lines=\"3 4\"\n\"\"\" Bubble sort \"\"\"\ndef bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre>"},{"location":"ayuda/material/#inlinehilite","title":"InlineHilite","text":"<p>Permite embeber c\u00f3digo en el texto mediante <code>#!languaje code</code> o bien <code>:::languaje code</code> entre comillas simples inversas.</p> <p>Ejemplo: <pre><code>Aqui se presenta este c\u00f3digo `#!c #include &lt;stdio.h&gt;` embebido en el texto.\n</code></pre> Resultado:</p> <p>Aqui se presenta este c\u00f3digo <code>#include &lt;stdio.h&gt;</code> embebido en el texto.</p> <p>Ejemplo: <pre><code>Aqui se presenta este otro c\u00f3digo `:::c #include &lt;stdlib.h&gt;` embebido en el texto.\n</code></pre> Resultado:</p> <p>Aqui se presenta este otro c\u00f3digo <code>#include &lt;stdlib.h&gt;</code> embebido en el texto.</p> <p>Ejemplo: <pre><code>C\u00f3digo javascript: `#!js function pad(v){return ('0'+v).split('').reverse().splice(0,2).reverse().join('')}`.\n</code></pre> Resultado:</p> <p>C\u00f3digo javascript: <code>function pad(v){return ('0'+v).split('').reverse().splice(0,2).reverse().join('')}</code>.</p>"},{"location":"ayuda/material/#mark","title":"Mark","text":"<p>Permite marcar texto en amarillo fosforito.</p> <p>La anterior frase se ha generado as\u00ed: <pre><code>Permite marcar texto en ==amarillo fosforito==.\n</code></pre></p> <ul> <li>This was marked (highlight)</li> <li>This was inserted (underline)</li> <li>This was deleted (strikethrough)</li> </ul>"},{"location":"ayuda/material/#footnotes","title":"Footnotes","text":"<p>Otra extensi\u00f3n de la libreria est\u00e1ndar para incluir notas al pie de p\u00e1gina. Se inserta una referencia en el texto, la cual puede ser definida en cualquier parte del documento. La definici\u00f3n aparecer\u00e1 en el pie de p\u00e1gina. La referencia consiste en un sombrerete seguido de un identificador num\u00e9rico [1, 2, 3, ...] o bien de nombres [Cuartas et al. 2012].</p> <p>Ejemplo:</p> <pre><code>Lorem ipsum[^1] dolor sit amet, consectetur adipiscing elit.[^2]\n</code></pre> <p>Resultado:</p> <p>Lorem ipsum<sup>1</sup> dolor sit amet, consectetur adipiscing elit.<sup>2</sup></p> <p>La definici\u00f3n de los contenidos de la nota al pie puede realizarse en una \u00fanica l\u00ednea si el texto es corto:</p> <pre><code>[^1]: Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</code></pre> <p>o bien en un bloque de texto indentado cuatro espacios, que comienze en la siguiente l\u00ednea de la etiqueta, si el texto es largo.</p> <pre><code>[^2]:\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod\n    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor\n    massa, nec semper lorem quam in massa.\n</code></pre>"},{"location":"ayuda/material/#arithmatex-mathjax","title":"Arithmatex MathJax","text":"<p>Basado en MathJax. Permite introducir equaciones escritas en TeX dentro de bloques o en l\u00ednea con el texto. Ver este hilo para una r\u00e1pida referencia sobre la sintaxis TeX.</p> <p>Ejemplo: <pre><code>$$\\frac{n!}{k!(n-k)!} = \\binom{n}{k}$$\n\n$$\\sum_{i=0}^n i^2 = \\frac{(n^2+n)(2n+1)}{6}$$\n</code></pre> Resultado:</p> \\[\\frac{n!}{k!(n-k)!} = \\binom{n}{k}\\] \\[\\sum_{i=0}^n i^2 = \\frac{(n^2+n)(2n+1)}{6}\\] <p>Ejemplo: <pre><code>Lorem ipsum dolor sit amet: $p(x|y) = \\frac{p(y|x)p(x)}{p(y)}$\n</code></pre></p> <p>Resultado:</p> <p>Lorem ipsum dolor sit amet: \\(p(x|y) = \\frac{p(y|x)p(x)}{p(y)}\\)</p>"},{"location":"ayuda/material/#letras-griegas","title":"Letras griegas","text":"<p><code>$\\alpha, \\beta, ..., \\omega$</code></p> <p>\\(\\alpha, \\beta, ..., \\omega\\)</p> <p><code>$\\Gamma, \\Delta, ..., \\Omega$</code></p> <p>\\(\\Gamma, \\Delta, ..., \\Omega\\)</p>"},{"location":"ayuda/material/#superindices-y-subindices","title":"Superindices y subindices","text":"<p><code>$x_i^2  \\log_2 x$</code></p> <p>\\(x_i^2  \\log_2 x\\)</p>"},{"location":"ayuda/material/#grupos","title":"Grupos","text":"<p>Super\u00edndices, sub\u00edndices y otras operaciones aplican solamente al siguiente \"grupo\". Un \"grupo\" es un \u00fanico s\u00edmbolo o un cualquier f\u00f3rmula ubicada entre llaves {...}</p> <p><code>$10^10$</code></p> <p>\\(10^10\\)</p> <p><code>$10^{10}$</code></p> <p>\\(10^{10}\\)</p> <p><code>${x^y}^z$</code></p> <p>\\({x^y}^z\\)</p> <ol> <li> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.\u00a0\u21a9</p> </li> <li> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.\u00a0\u21a9</p> </li> </ol>"},{"location":"guiamb/ble_inventor/","title":"Extensi\u00f3n BluetoothLE de App Inventor","text":""},{"location":"guiamb/ble_inventor/#enlaces","title":"Enlaces","text":"<p>Versi\u00f3n estable MicroBlocks v1</p> <ul> <li>https://microblocks.fun/downloads/latest/</li> <li>https://microblocks.fun/run/microblocks.html </li> </ul> <p>Versi\u00f3n piloto MicroBlocks Version 2</p> <ul> <li>https://microblocks.fun/downloads/pilot/</li> <li>https://microblocks.fun/run-pilot/microblocks.html</li> </ul> <p>MicroBlocks BLE Extension versi\u00f3n 1</p> <ul> <li>fun.microblocks.microblocks.aix</li> </ul>"},{"location":"guiamb/ble_inventor/#introduccion","title":"Introducci\u00f3n","text":"<p>Para a\u00f1adir funcionalidad Bluetooth Low Energy (BLE) a nuestras aplicaciones creadas con MIT App Inventor tenemos disponible como recurso oficial la extensi\u00f3n BluetoothLE.</p> <p>Una vez descargada e importada la versi\u00f3n 20240822 es posible acceder a la informaci\u00f3n (en ingl\u00e9s) de los bloques que utiliza la extensi\u00f3n a trav\u00e9s del enlace que vemos en la imagen siguiente:</p> <p> <p> Enlace a informaci\u00f3n bloques extensi\u00f3n</p> <p></p> <p>La idea es crear aplicaciones para m\u00f3biles o tablet que puedan comunicar con nuestra placa micro:STEAMakers hasta 100 metros de distancia.</p> <p>Las aplicaciones las creamos en App Inventor.</p>"},{"location":"guiamb/ble_inventor/#conectar-app","title":"Conectar App","text":"<p>IMPORTANTE</p> <p>Los sistemas con tecnolog\u00eda Bluetooth 4.0+ o BLE se componen de dos elementos: una baliza o Beacon, encargada de enviar las se\u00f1ales, y un dispositivo que recibe y procesa estas se\u00f1ales.</p> <p>No es necesario emparejar el Beacon, ya que utiliza el canal de transmisi\u00f3n Bluetooth para transmitir se\u00f1ales.</p> <p>Un Beacon solo usa el canal de transmisi\u00f3n, por lo que no hay pasos de conexi\u00f3n relacionados con BLE, algo que concuerda con el significado literal de baliza. El dispositivo Beacon env\u00eda paquetes de datos en un cierto intervalo de tiempo, y los datos enviados pueden ser obtenidos por un dispositivo maestro como un tel\u00e9fono m\u00f3vil.</p> <p>Debemos asegurarnos que Bluetooth est\u00e1 activado:</p> <p>1. Bluetooth encendido Comprueba en la configuraci\u00f3n de tu m\u00f3bil o tablet y asegurate de que Bluetooth est\u00e1 encendido. 2. Sin emparejar No emparejes las micro:STEAMakers. Puedes ignorar los ajustes de emparejamiento Bluetooth de tu dispositivo. Conectaremos la micro:STEAMakers a la aplicaci\u00f3n en modo \"sin emparejamiento\", por lo que este paso es innecesario.</p> <p> <p> Bluetooth encendido e ignorar emparejamiento</p> <p></p> <p>3. Permisos de ubicaci\u00f3n Hay que habilitar el permiso de acceso a la ubicaci\u00f3n en el tel\u00e9fono o tablet. Para acceder a Bluetooth es necesario que el dispositivo tenga activados los permisos de localizaci\u00f3n en los ajustes de la App. La raz\u00f3n es que algunos dispositivos Bluetooth proporcionan una ubicaci\u00f3n a nuestro dispositivo. Busca en la configuraci\u00f3n en tu dispositivo.</p> <p> <p> Permisos acceso a ubicaci\u00f3n</p> <p></p> <p>4. Testear el c\u00f3digo Para ver lo que hace el c\u00f3digo, hay que cargar el c\u00f3digo de App Inventor Companion en el tel\u00e9fono o tablet. El c\u00f3digo de inicio puede tardar un tiempo en cargarse, as\u00ed que \u00a1ten paciencia!</p> <p> <p> Testear el c\u00f3digo</p> <p></p> <p>Hay que tener un c\u00f3digo apropiado subido a la micro:STEAMakers si queremos interactuar con la App.</p>"},{"location":"guiamb/ble_inventor/#ejemplos","title":"Ejemplos","text":"<p>Tomando como base los contenidos de The Internet of Things: Data Acquisition and Analysis a los que nos conduce el enlace que encontramos en la extensi\u00f3n BluetoothLE.</p> <p>A tener en cuenta</p> <p>Si vamos a trabajar en un lugar en el que habr\u00e1 varias placas que pueden comunicarse entre si debemos previamente etiquetar cada una con su nombre \u00fanico.</p> <p>Si no sabes como obtener el BLE id de las placas visita este enlace.</p> <p>Recomendamos escribir el nombre en un trozo de cinta de carrocero o pintor y pegarlo a la micro:STEAMakers. Esto permite a los usuarios encontrar su placa cuando utilicen las Apps.</p>"},{"location":"guiamb/ble_inventor/#establecer-conexion","title":"Establecer conexi\u00f3n","text":"<p>Para probar esta App no har\u00e1 falta tener ning\u00fan programa cargado en la micro:STEAMakers porque solamente vamos a conectar y desconectar la App con el Bluetooth de la placa. Si ser\u00e1 necesario, logicamente, tener alimentada la placa micro:STEAMakers.</p> <p>El dise\u00f1o de la App tiene el aspecto de la imagen siguiente y bajo su t\u00edtulo tenemos el enlace de descarga de EstablecerConexion.aia.</p> <p> <p> App EstablecerConexion Descargar EstablecerConexion.aia</p> <p></p> <p>Seguimos el siguiente procedimiento:</p> <p>1. Descarga la App EstablecerConexion.aia</p> <ul> <li>El c\u00f3digo permite conectarse r\u00e1pidamente la App con la micro:STEAMakers.</li> <li>Localiza el archivo (EstablecerConexion.aia) descargado.</li> <li>Abre App Inventor AI2 Designer y Editor de Bloques http://ai2.appinventor.mit.edu.</li> </ul> <p>2. Haz clic en \u201cProjects\u201d</p> <p> <p> Abrir Projects </p> <p></p> <p>3. Haz clic en la entrada \u201cImport project (.aia) from my computer\u201d</p> <p> <p> Elije la entrada \u201cImport project (.aia) from my computer\u201d </p> <p></p> <p>4. Importa el archivo de inicio</p> <ul> <li>Haz clic en Seleccionar archivo.</li> </ul> <p> <p> Haz clic en Seleccionar archivo </p> <p></p> <ul> <li>Escoge el archivo descargado EstablecerConexion.aia.</li> </ul> <p> <p> Escoge el archivo descargado </p> <p></p> <ul> <li>El archivo inicialmente debe tener este aspecto en Designer:</li> </ul> <p> <p> Aspecto en modo dise\u00f1o </p> <p></p> <p>5. Bluetooth activado</p> <ul> <li>Comprueba en la configuraci\u00f3n de tu m\u00f3bil o tablet y asegurate de que Bluetooth est\u00e1 encendido.</li> <li>No emparejes las micro:STEAMakers. Puedes ignorar los ajustes de emparejamiento Bluetooth de tu dispositivo. Conectaremos la micro:STEAMakers a la aplicaci\u00f3n en modo \"sin emparejamiento\", por lo que este paso es innecesario.</li> </ul> <p> <p> Bluetooth encendido e ignorar emparejamiento</p> <p></p> <p>6. Permisos de ubicaci\u00f3n Hay que habilitar el permiso de acceso a la ubicaci\u00f3n en el tel\u00e9fono o tablet. Para acceder a Bluetooth es necesario que el dispositivo tenga activados los permisos de localizaci\u00f3n en los ajustes de la App. La raz\u00f3n es que algunos dispositivos Bluetooth proporcionan una ubicaci\u00f3n a nuestro dispositivo. Busca en la configuraci\u00f3n en tu dispositivo.</p> <p> <p> Permisos acceso a ubicaci\u00f3n</p> <p></p> <p>7. Testear el c\u00f3digo Para ver lo que hace el c\u00f3digo, hay que cargar el c\u00f3digo de App Inventor Companion en el tel\u00e9fono o tablet. El c\u00f3digo de inicio puede tardar un tiempo en cargarse, as\u00ed que \u00a1ten paciencia!</p> <ul> <li>Elije AI Companion</li> </ul> <p> <p> Testear el c\u00f3digo</p> <p></p> <ul> <li>Escanea el QR o introduce el c\u00f3digo que ves en la pantalla del ordenador en MIT App Inventor</li> </ul> <p> <p> Testear el c\u00f3digo</p> <p></p> <ul> <li>Deber\u00edas ver una aplicaci\u00f3n como la de la imagen en la ventana de pruebas en vivo de tu dispositivo. \u00a1Sigue leyendo antes de pulsar Explorar!</li> </ul> <p> <p> Testear el c\u00f3digo</p> <p></p> <p>8. Alimenta la placa</p> <p>Conecta la micro:STEAMakers mediante un cable USB o a trav\u00e9s del conector de alimentaci\u00f3n externa. Asegurate de que la luz posterior de alimentaci\u00f3n est\u00e1 encendida.</p> <p> <p> Alimenta la placa</p> <p></p> <p>9. Utiliza la aplicaci\u00f3n para buscar dispositivos Bluetooth</p> <ul> <li>Pulsa Explorar en la app para buscar dispositivos Bluetooth cercanos.</li> </ul> <p> <p> Pulsa Explorar en la app para buscar dispositivos Bluetooth cercanos</p> <p></p> <p>10. Comprueba el listado</p> <p>Deber\u00edas ver una lista de todos los dispositivos Bluetooth cercanos - algunos de ellos podr\u00edan ser los auriculares o alg\u00fan otro gadget cercano. El esc\u00e1ner trabaja r\u00e1pidamente, pero deber\u00edas ver un elemento que diga \"MicroBlocks XXX\". Pulsa el bot\u00f3n \u00abDetener exploraci\u00f3n para congelar la lista.</p> <p> <p> Comprobar lista y detener exploraci\u00f3n</p> <p></p> <p>11. Clic en el nombre de tu placa y despu\u00e9s en Conectar</p> <p> <p> Detener exploraci\u00f3n, seleccionar placa y conectar</p> <p></p> <p>12. \u00c9xito</p> <ul> <li>Ahora, hay una conexi\u00f3n inal\u00e1mbrica entre la aplicaci\u00f3n y la micro:STEAMakers,</li> <li>La aplicaci\u00f3n debe mostrar la etiqueta con fondo verde Conectado en la parte superior,</li> <li>El bot\u00f3n Conectar ha cambiado su texto a Desconectar.</li> </ul> <p> <p> Conexi\u00f3n establecida</p> <p></p> <ul> <li>Practica desconectando y conectando la placa desde la aplicaci\u00f3n. Tambi\u00e9n puedes desconectarla quitando la alimentaci\u00f3n o el bot\u00f3n Reset.</li> </ul> <p>RECONEXI\u00d3N:</p> <p>Si la micro:STEAMakers se desconecta del Bluetooth y no puede reconectarse, presiona el bot\u00f3n Reset en la placa.</p> <p>Utiliza los botones Explorar/Conectar de la aplicaci\u00f3n para volver a conectar la micro:STEAMakers.</p> <p>Si cambias el c\u00f3digo en App Inventor mientras AI Companion y micro:STEAMakers est\u00e1n conectados, los cambios aparecer\u00e1n sin problemas o la aplicaci\u00f3n se desconectar\u00e1 y la micro:STEAMakers pensar\u00e1 que todav\u00eda est\u00e1 conectada. En este caso, reseteamos la placa, como se ha indicado antes. </p> <p>Aunque el ejemplo funciona correctamente no parece la mejor forma de realizar la conexi\u00f3n y desconexi\u00f3n y tampoco resulta demasiado \u00fatil ver todos los dispositivos al alcance de la App ya que el nombre del nuestro podemos saberlo a priori. Tambi\u00e9n es muy probable que si intentamos enviar y/o recibir datos nos den errores.</p>"},{"location":"guiamb/ble_inventor/#establecer-conexion-mejorado","title":"Establecer conexi\u00f3n mejorado","text":"<p>Vamos a ver una forma mas sencilla de resolver la conexi\u00f3n, aprovechando el ejemplo tambi\u00e9n para enviar datos desde la App y as\u00ed comprobar que la conexi\u00f3n funciona.</p> <p>Versi\u00f3n piloto de Microblocks</p> <p>En esta ocasi\u00f3n trabajaremos con una versi\u00f3n piloto en la que podemos encontrar la libreria micro:STEAMakers en la entrada \"WorkinProgress\".</p> <p> <p> Librerias WorkinProgress</p> <p></p> <p>La idea es comprobar que la conexi\u00f3n funciona haciendo que la micro:STEAMakers responda con cambios cuando se le indique desde la aplicaci\u00f3n.</p> <p>Para poder enviar mensajes desde la App a la micro:STEAMakers con un programa realizado con MicroBlocks vamos a necesitar a\u00f1adir una extensi\u00f3n en App Inventor, la MicroBlocks BLE Extension. Las explicaciones sobre esta extensi\u00f3n las tenemos en el apartado mBlocks + App Inventor + BLE.</p> <p>Para mejorar el ejemplo anterior a\u00f1adiremos tambien \"Tools Extension\", una colecci\u00f3n de herramientas que no necesitan permisos adicionales y que se puede descargar desde la web de Pura Vida Apps. Utilizo esta extensi\u00f3n para mantener la pantalla activa mientras el microcontrolador permanece conectado. A continuaci\u00f3n se exponen los t\u00e9rminos y condiciones que aparecen en la web de la extensi\u00f3n mediante una imagen capturada de dicha web:</p> <p> <p> Captura de la web Pura Vida Apps</p> <p></p> <p>A continuaci\u00f3n se pone una traducci\u00f3n libre de esta captura:</p> <p>T\u00e9rminos y Condiciones</p> <ul> <li>\u00a1Divi\u00e9rtete y utiliza esta extensi\u00f3n en tus proyectos de App Inventor! \u00a1Pura Vida!</li> <li>EL SOFTWARE SE PROPORCIONA \"TAL CUAL\", SIN GARANT\u00cdA DE NING\u00daN TIPO, EXPRESA O IMPL\u00cdCITA, INCLUIDAS, ENTRE OTRAS, LAS GARANT\u00cdAS DE COMERCIABILIDAD, IDONEIDAD PARA UN FIN DETERMINADO Y NO INFRACCI\u00d3N. EN NING\u00daN CASO LOS AUTORES O LOS TITULARES DE LOS DERECHOS DE AUTOR SER\u00c1N RESPONSABLES DE NINGUNA RECLAMACI\u00d3N, DA\u00d1O U OTRA RESPONSABILIDAD, YA SEA EN UNA ACCI\u00d3N CONTRACTUAL, EXTRACONTRACTUAL O DE OTRO TIPO, QUE SURJA DE, O EST\u00c9 RELACIONADA CON EL SOFTWARE O EL USO U OTRAS OPERACIONES CON EL SOFTWARE.</li> <li>Este es el \u00fanico lugar autorizado para descargar esta extensi\u00f3n. No est\u00e1 permitido alojar esta extensi\u00f3n en otro lugar y ofrecerla para que otros la descarguen, ya sea en otro sitio web o market place o similar. La raz\u00f3n es que todo el mundo deber\u00eda tener la oportunidad de donar algo en caso de que le guste mi trabajo. Se le permite proporcionar un enlace a este sitio, para que otros puedan descargar la extensi\u00f3n. Aqu\u00ed encontrar\u00e1 siempre la versi\u00f3n m\u00e1s actualizada, incluyendo documentaci\u00f3n y ejemplos de uso. Gracias por su comprensi\u00f3n.</li> </ul> <p>Por las razones expresadas en estos \"T\u00e9rminos y Condiciones\" aqu\u00ed solamente se facilita el enlace a la web del autor.</p> <p>El dise\u00f1o de la App tiene el aspecto de la imagen siguiente y bajo su t\u00edtulo tenemos el enlace de descarga de EstablecerConexionMejorado.aia.</p> <p> <p> App EstablecerConexionMejorado Descargar EstablecerConexionMejorado.aia</p> <p></p> <p>Observamos que los mensajes enviados son: <code>prueba</code> y <code>apaga</code>.</p> <p>Seguimos el mismo procedimiento y en las mismas condiciones que hemos visto en el ejemplo anterior.</p> <p>Una vez escaneado el QR de AI Companion debemos ver la aplicaci\u00f3n de la imagen, donde observamos que:</p> <ul> <li>Nos avisa que no distingue may\u00fasculas y min\u00fasculas.</li> <li>Solicita el BLE id de la placa (ISJ en nuestro caso) para poder conectar.</li> <li>El bot\u00f3n se usar\u00e1 para conectar y desconectar la App con la placa.</li> <li>Inicialmente los botones est\u00e1n visibles pero posteriormente desaparecer\u00e1n si estamos desconectados de la placa.</li> </ul> <p> <p> Pantalla inicial</p> <p></p> <p>Introducimos el BLE id y pulsamos en el bot\u00f3n \"Conectar/Desconectar\". El bot\u00f3n se pone de color verde indicando que la conexi\u00f3n est\u00e1 establecida correctamente. Ya podemos proceder a pulsar alguno de los botones inferiores y observar el funcionamiento de la App controlando la micro:STEAMakers.</p> <p> <p> Conexi\u00f3n establecida</p> <p></p> <p>Si ahora pulsamos de nuevo el bot\u00f3n \"Conectar/Desconectar\" la App se desconecta de la placa y los botones de mensajes desaparecen, no volviendo a estar visibles hasta que no se restablezca la conexi\u00f3n.</p> <p> <p> Desconexi\u00f3n</p> <p></p> <p>Por otra parte necesitamos programar la placa con un firmware que se encargue de recibir los datos enviados desde la App y realizar las tareas que programemos. El programa en MicroBlocks va a guardar en una variable el \u00faltimo mensaje recibido (depender\u00e1 del bot\u00f3n pulsado en la App) y si este es \"prueba\" mostrar\u00e1 un s\u00edmbolo de check en la pantalla en color verde. Si el mensaje recibido es \"apaga\" apagar\u00e1 todos los LEDs RGB.</p> <p> <p> Programa EstablecerConexionMejorado.ubp Descargar EstablecerConexionMejorado.ubp</p> <p></p> <p>Para que el programa est\u00e9 en la placa necesitamos establecer conexi\u00f3n entre el IDE de MicroBlocks y la misma, pero es MUY IMPORTANTE que cuando finalicemos esta tarea desconectemos la placa del IDE o no podremos establecer la conexi\u00f3n desde la App. Recordemos que no est\u00e1n permitidas dos conexiones con la misma placa.</p> <p>En la animaci\u00f3n siguiente podemos observar el funcionamiento del sistema completo.</p> <p> <p> Funcionamiento de EstablecerConexionMejorado</p> <p></p>"},{"location":"guiamb/boardie/","title":"Boardie:un tablero virtual para MicroBlocks","text":""},{"location":"guiamb/boardie/#introduccion","title":"Introducci\u00f3n","text":"<p>Lo que tenemos a continuaci\u00f3n es una traducci\u00f3n de algunas de las partes de la la entrada en el blog de MicroBlocks de 7 de diciembre de 2022 titulado Boardie: A Virtual Board for MicroBlocks por Bernat Romagosa, MicroBlocks. Adem\u00e1s se agregan ejemplos de utilizaci\u00f3n b\u00e1sicos.</p> <p>\u00bfC\u00f3mo dar a alguien una introducci\u00f3n pr\u00e1ctica a MicroBlocks si no tiene una placa de microcontrolada?</p> <p>Es un problema que nos hemos encontrado muchas veces al presentar MicroBlocks en talleres virtuales durante los \u00faltimos a\u00f1os. Tambi\u00e9n es un problema al que se enfrentan los profesores que no tienen suficientes placas para todos los alumnos de su clase.</p> <p>Aparece Boardie, una placa virtual para MicroBlocks que permite probar MicroBlocks directamente en el navegador.</p> <p> <p> Boardie</p> <p></p> <p>El objetivo de Boardie es presentar MicroBlocks a las personas que est\u00e1n pensando en la computaci\u00f3n f\u00edsica pero que a\u00fan no tienen una placa. Queremos ayudarles a ver que codificar un microcontrolador es f\u00e1cil y divertido, y animarles a sumergirse en la computaci\u00f3n f\u00edsica real.</p>"},{"location":"guiamb/boardie/#lo-que-no-es-boardie","title":"Lo que no es Boardie","text":"<p>Boardie no pretende sustituir a un microcontrolador real. La magia de la computaci\u00f3n f\u00edsica radica en su capacidad para interactuar con el mundo f\u00edsico: percibir fen\u00f3menos f\u00edsicos como la luz, el sonido y la temperatura y controlar cosas como luces, motores y aparatos el\u00e9ctricos.</p> <p>Boardie no intenta simular sensores f\u00edsicos ni dispositivos de salida. Aunque no es dif\u00edcil simularlos -por ejemplo, los deslizadores pueden utilizarse como entradas de sensores virtuales y las im\u00e1genes animadas pueden mostrar motores y servos virtuales-, creemos que eso no es lo importante.</p> <p>Queremos que la gente experimente la magia, y el aprendizaje resultante, de hacer computaci\u00f3n f\u00edsica en el mundo f\u00edsico real.</p>"},{"location":"guiamb/boardie/#lo-que-es-boardie","title":"Lo que es Boardie","text":"<p>Boardie es una placa virtual que hace algunas de las cosas que los microcontroladores reales pueden hacer. Tiene dos botones programables, como un micro:bit o una micro:STEAMakers, y puede emular la pantalla LED 5x5 del micro:bit o la pantalla TFT de 240x240 p\u00edxeles del Adafruit Clue. Puede emitir pitidos y reproducir melod\u00edas, y soporta un sencillo sistema de archivos. Por \u00faltimo, soporta la misma librer\u00eda cliente HTTP de MicroBlocks que funciona en placas con WiFi.</p>"},{"location":"guiamb/boardie/#uso-de-boardie","title":"Uso de Boardie","text":"<p>Boardie se ejecuta en la aplicaci\u00f3n web de MicroBlocks en microblocks.fun/run. Como no requiere WebSerial, puede ejecutarse en Safari y Firefox, as\u00ed como en Chrome y Edge. Boardie no es compatible con las aplicaciones independientes de MicroBlocks.</p> <p>Boardie se inicia haciendo clic en el icono USB y seleccionando abrir Boardie. Cuando Boardie est\u00e1 abierto, MicroBlocks est\u00e1 conectado a \u00e9l y puedes programar e interactuar con \u00e9l de la misma manera que lo har\u00edas con un dispositivo f\u00edsico real.</p> <p>MicroBlocks s\u00f3lo puede conectarse a una placa a la vez. As\u00ed que, como Boardie es una placa virtual, tendr\u00e1 que desconectar Boardie antes de conectar MicroBlocks a una placa f\u00edsica. Utilice el comando de desconexi\u00f3n en el men\u00fa l icono USB o el interruptor de encendido de Boardie para desconectar. Boardie desaparece cuando se desconecta.</p> <p>A continuaci\u00f3n vemos como conectarnos con Boardie partiendo de una placa ESP32 micro:STEAMakers ya conectada y como volver a la situaci\u00f3n anterior.</p> <p> <p> Conexi\u00f3n con Boardie</p> <p></p>"},{"location":"guiamb/boardie/#especificaciones-de-boardie","title":"Especificaciones de Boardie","text":"<p>Para los m\u00e1s t\u00e9cnicos, aqu\u00ed est\u00e1n las especificaciones t\u00e9cnicas de esta placa virtual: </p> <ul> <li>RAM: 65kB</li> <li>Almacenamiento de archivos: ~5MB</li> <li>Entradas: Botones A y B, m\u00e1s un bot\u00f3n combinado A+B, pantalla t\u00e1ctil</li> <li>Salidas: TFT de 240x240px y 24 bits, altavoz</li> <li>Capacidades de red: Cliente HTTP</li> </ul>"},{"location":"guiamb/boardie/#ejemplos","title":"Ejemplos","text":""},{"location":"guiamb/boardie/#latidos","title":"Latidos","text":"<p>Un sencillo ejemplo micro:bit ejecut\u00e1ndose en Boardie, el proyecto Latidos:</p> <p> <p> Latidos Descargar el programa</p> <p></p> <p>Al hacer clic, y mientras se mantiene pulsado, en el bot\u00f3n A de Boardie se ejecuta el programa.</p> <p>Cuando el dispositivo Boardie tiene el foco, tambi\u00e9n puedes utilizar las teclas de flecha izquierda y derecha o las teclas A y B del teclado para activar los botones. Esta funci\u00f3n es \u00fatil para los juegos.</p>"},{"location":"guiamb/boardie/#politono-y-textos","title":"Politono y textos","text":"<p>Otro sencillo ejemplo micro:bit ejecut\u00e1ndose en Boardie en el que suena un politono en los altavoces del sistema y se muestran textos en la pantalla:</p> <p> <p> Politono y textos Descargar el programa</p> <p></p>"},{"location":"guiamb/boardie/#dibujos","title":"Dibujos","text":"<p>Un ejemplo en el que se dibujan figuras y vectores de diferentes colores:</p> <p> <p> Dibujos Descargar el programa</p> <p></p>"},{"location":"guiamb/mb_inventor_BLE/","title":"mBlocks + App Inventor + BLE","text":""},{"location":"guiamb/mb_inventor_BLE/#introduccion","title":"Introducci\u00f3n","text":"<p>Se trata de ampliar las funcionalidades de Bluetooth LE utilizando como plataforma de programaci\u00f3n MicroBlocks y la placa micro:STEAMakers que estamos tratando en esta web. Vamos a usar la versi\u00f3n de pruebas que nos servir\u00e1 para introducir el nuevo IDE 2.0 de MicroBlocks.</p> <p>Nos vamos a basar en MicroBlocks BLE Extension, extensi\u00f3n de App Inventor aportada a la comunidad MIT APP INVENTOR por Peter Mathijssen:</p> <p> <p> Peter en MIT App Inventor</p> <p></p> <p>En la imagen siguiente vemos el aspecto del nuevo IDE con la libreria micro:STEAMaker cargada y un sencillo programa en la zona de programaci\u00f3n:</p> <p> <p> Aspecto del IDE 2.0</p> <p></p>"},{"location":"guiamb/mb_inventor_BLE/#microblocks","title":"MicroBlocks","text":"<p>MicroBlocks es un lenguaje de programaci\u00f3n por bloques para computaci\u00f3n f\u00edsica. Funciona en microcontroladores como micro:bit, micro:STEAMakers, Calliope mini, AdaFruit Circuit Playground Express y muchas otras.</p>"},{"location":"guiamb/mb_inventor_BLE/#codificacion-de-forma-interactiva","title":"Codificaci\u00f3n de forma interactiva","text":"<p>MicroBlocks es un entorno \"en vivo (en directo)\". Al hacer clic en un bloque se ejecutar\u00e1 inmediatamente, directamente en la placa. Prueba comandos. Ver y graficar los valores de los sensores en tiempo real. Se acab\u00f3 esperar a que el c\u00f3digo se compile y se descargue.</p>"},{"location":"guiamb/mb_inventor_BLE/#multitarea-natural","title":"Multitarea Natural","text":"<p>\u00bfQuieres visualizar una animaci\u00f3n mientras controlas un motor? No hay problema, MicroBlocks permite escribir scripts separados para cada tarea y ejecutarlos al mismo tiempo. El c\u00f3digo es m\u00e1s sencillo de escribir y m\u00e1s f\u00e1cil de entender.</p>"},{"location":"guiamb/mb_inventor_BLE/#correr-en-cualquier-sitio","title":"Correr en cualquier sitio","text":"<p>MicroBlocks funciona en muchas placas diferentes, pero sus scripts son portables. Los botones, sensores y bloques de pantalla se comportan igual en todas las placas con el hardware relevante. MicroBlocks incluso simula la pantalla micro:bit 5x5 LED en pantallas TFT.</p>"},{"location":"guiamb/mb_inventor_BLE/#desconecta-y-adelante","title":"Desconecta y \u00a1adelante!","text":"<p>MicroBlocks descarga el c\u00f3digo en el microcontrolador a medida que lo escribes. Cuando te guste lo que hace tu programa, desconecta la placa y listo. Crea un juego de bolsillo, una aplicaci\u00f3n de fitness o ropa luminosa que vaya contigo a todas partes.</p>"},{"location":"guiamb/mb_inventor_BLE/#microblocks-20","title":"MicroBlocks 2.0","text":"<p>Las diferencias entre MicroBlocks 1.2 y 2.0 son obvias y se ven a primera vista.</p> <p> <p> El viejo MicroBlocks 1.2 El nuevo MicroBlocks 2.0</p> <p></p> <p>MicroBlocks 2.0 tiene una interfaz de usuario completamente redise\u00f1ada y moderna, con iconos limpios, una atractiva combinaci\u00f3n de colores, una paleta de bloques animados y compatibilidad con el modo oscuro. Los cambios en el dise\u00f1o de los bloques incluyen contornos m\u00e1s sencillos, mejor contraste de colores para mejorar la legibilidad, campos de entrada de datos m\u00e1s grandes y tri\u00e1ngulos de selecci\u00f3n de men\u00fas y opciones m\u00e1s grandes y manejables.</p>"},{"location":"guiamb/mb_inventor_BLE/#transicion-del-firmware","title":"Transici\u00f3n del firmware","text":"<p>MicroBlocks 2.0 tambi\u00e9n mejora la m\u00e1quina virtual (VM), el firmware que ejecuta el c\u00f3digo MicroBlocks. La antigua VM utilizaba instrucciones de longitud fija de 32 bits; la nueva utiliza instrucciones de longitud variable de 16 bits.</p> <p>Dado que utilizan conjuntos de instrucciones completamente diferentes, las dos VM no son compatibles. MicroBlocks 2.0 requiere la nueva VM (versiones de firmware 300 y posteriores) mientras que las versiones anteriores de MicroBlocks requieren la antigua VM (versiones de firmware anteriores a 300).</p> <p>No hay diferencias a nivel de c\u00f3digo fuente; los mismos archivos de proyecto y biblioteca de MicroBlocks funcionan tanto en MicroBlocks 2.0 como en versiones anteriores.</p> <p>La primera vez que se conecta una placa con firmware antiguo a MicroBlocks 2.0 se pedir\u00e1 que actualice el firmware:</p> <p> <p> Primera conexi\u00f3n firmware antiguo</p> <p></p> <p>Si intentas utilizar una placa con un firmware que no es compatible con la versi\u00f3n de MicroBlocks que est\u00e1s utilizando, recibir\u00e1s esta advertencia al intentar ejecutar el c\u00f3digo:</p> <p> <p> Firmware no compatible</p> <p></p> <p>Si se recibe esa advertencia, s\u00f3lo hay que actualizar el firmware de la placa utilizando el comando \"actualizar firmware de la placa\" en el men\u00fa engranajes. Esto actualizar\u00e1 la placa con el firmware que coincida con la versi\u00f3n de MicroBlocks que se est\u00e9 utilizando. Se puede utilizar la misma t\u00e9cnica para revertir el firmware y utilizar una versi\u00f3n anterior de MicroBlocks, si lo necesitamos.</p>"},{"location":"guiamb/mb_inventor_BLE/#transicion-a-la-version-estable","title":"Transici\u00f3n a la versi\u00f3n estable","text":"<p>Tras varias semanas de pruebas de MicroBlocks 2.0 como versi\u00f3n piloto, la versi\u00f3n estable tambi\u00e9n se actualizar\u00e1 a MicroBlocks 2.0.</p> <p>Sin embargo, incluso despu\u00e9s de eso, las versiones anteriores de MicroBlocks podr\u00e1n descargarse utilizando el bot\u00f3n \"Previous Versions\" de la p\u00e1gina de descargas:</p> <p> <p> </p> <p></p> <p>La \u00faltima versi\u00f3n estable de la versi\u00f3n antigua es la 1.2.100.</p>"},{"location":"guiamb/mb_inventor_BLE/#microblocks-ble-extension","title":"MicroBlocks BLE Extension","text":"<p>La extensi\u00f3n hace que la conexi\u00f3n a microcontroladores sea muy f\u00e1cil. Hace todo el trabajo dif\u00edcil por ti utilizando los bloques que contiene.</p>"},{"location":"guiamb/mb_inventor_BLE/#metodos","title":"M\u00e9todos","text":"<p>Est\u00e1n disponibles los bloques para los siguientes m\u00e9todos:</p> <ul> <li>Connect</li> </ul> <p> <p> Bloque Connect</p> <p></p> <p>Conectar a MicroBlocks el dispositivo con el nombre indicado. Tenemos que importar la extensi\u00f3n \"Bluetooth LE\" y utilizar el bloque \"BluetoothLE\" () de esa extensi\u00f3n como primer par\u00e1metro de este bloque. El segundo par\u00e1metro es el nombre de la placa a la que desea conectarse, como \"MicroBlocks XYZ\", donde XYZ es el ID BLE de tres letras de la placa.</p> Par\u00e1metro Tipo bleExtension componente name texto <ul> <li>Disconnect</li> </ul> <p> <p> Bloque Disconnect</p> <p></p> <p>Se desconecta del dispositivo BluetoothLE actualmente conectado, si lo hubiera.</p> <ul> <li>IsDeviceConnected</li> </ul> <p> <p> Bloque IsDeviceConnected</p> <p></p> <p>Devuelve el valor booleano 'true' si un dispositivo est\u00e1 conectado.</p> <ul> <li>SendMessage</li> </ul> <p> <p> Bloque SendMessage</p> <p></p> <p>Env\u00eda el mensaje dado a MicroBlocks.</p> Par\u00e1metro Tipo message texto"},{"location":"guiamb/mb_inventor_BLE/#eventos","title":"Eventos","text":"<p>Est\u00e1n disponibles los siguientes eventos:</p> <ul> <li>ConnectionChanged</li> </ul> <p> <p> Bloque ConnectionChanged</p> <p></p> <p>Este evento se ejecuta cuando se conecta o desconecta un dispositivo.</p> Par\u00e1metro Tipo isConnected booleano <ul> <li>MicroBlocksMessageReceived</li> </ul> <p> <p> Bloque MicroBlocksMessageReceived</p> <p></p> <p>Este evento se ejecuta cuando se recibe un mensaje MicroBlocks.</p> Par\u00e1metro Tipo isConnected texto"},{"location":"guiamb/mb_inventor_BLE/#ejemplos","title":"Ejemplos","text":"<p>Si no conocemos el BLE id de la placa que estamos utilizando, una forma sencilla de averiguarlo es dirigirnos a la categor\u00eda 'Entrada' de MicroBlocks. La placa tiene que estar conectada al IDE para mostrar el BLE id.</p> <p> <p> BLE id</p> <p></p>"},{"location":"guiamb/mb_inventor_BLE/#enviar-mensaje-desde-microcontrolador-a-una-app","title":"Enviar mensaje desde microcontrolador a una App","text":"<p>Seguimos trabajando con las extensiones:</p> <ul> <li>MicroBlocks BLE Extension.</li> <li>Tools Extension, de Pura Vida Apps seg\u00fan los t\u00e9rminos y condiciones que aparecen en la web de la extensi\u00f3n:</li> </ul> <p>Utilizo esta extensi\u00f3n para mantener la pantalla activa mientras el microcontrolador permanece conectado.</p> <p> <p> Captura de la web Pura Vida Apps</p> <p></p> <p>Traducci\u00f3n libre de esta captura:</p> <p>T\u00e9rminos y Condiciones</p> <ul> <li>\u00a1Divi\u00e9rtete y utiliza esta extensi\u00f3n en tus proyectos de App Inventor! \u00a1Pura Vida!</li> <li>EL SOFTWARE SE PROPORCIONA \"TAL CUAL\", SIN GARANT\u00cdA DE NING\u00daN TIPO, EXPRESA O IMPL\u00cdCITA, INCLUIDAS, ENTRE OTRAS, LAS GARANT\u00cdAS DE COMERCIABILIDAD, IDONEIDAD PARA UN FIN DETERMINADO Y NO INFRACCI\u00d3N. EN NING\u00daN CASO LOS AUTORES O LOS TITULARES DE LOS DERECHOS DE AUTOR SER\u00c1N RESPONSABLES DE NINGUNA RECLAMACI\u00d3N, DA\u00d1O U OTRA RESPONSABILIDAD, YA SEA EN UNA ACCI\u00d3N CONTRACTUAL, EXTRACONTRACTUAL O DE OTRO TIPO, QUE SURJA DE, O EST\u00c9 RELACIONADA CON EL SOFTWARE O EL USO U OTRAS OPERACIONES CON EL SOFTWARE.</li> <li>Este es el \u00fanico lugar autorizado para descargar esta extensi\u00f3n. No est\u00e1 permitido alojar esta extensi\u00f3n en otro lugar y ofrecerla para que otros la descarguen, ya sea en otro sitio web o market place o similar. La raz\u00f3n es que todo el mundo deber\u00eda tener la oportunidad de donar algo en caso de que le guste mi trabajo. Se le permite proporcionar un enlace a este sitio, para que otros puedan descargar la extensi\u00f3n. Aqu\u00ed encontrar\u00e1 siempre la versi\u00f3n m\u00e1s actualizada, incluyendo documentaci\u00f3n y ejemplos de uso. Gracias por su comprensi\u00f3n.</li> </ul> <p>Por las razones expresadas en estos \"T\u00e9rminos y Condiciones\" aqu\u00ed solamente se facilita el enlace a la web del autor.</p> <p>El dise\u00f1o de la App tiene el aspecto de la imagen siguiente y bajo su t\u00edtulo tenemos el enlace de descarga de Recibir_un_dato_desde_microncontrolador.aia.</p> <p> <p> App Recibir_un_dato_desde_microncontrolador Descargar Recibir_un_dato_desde_microncontrolador.aia</p> <p></p> <p>Una vez escaneado el QR de AI Companion debemos ver la aplicaci\u00f3n de la imagen, donde observamos que:</p> <ul> <li>Nos avisa que no distingue may\u00fasculas y min\u00fasculas.</li> <li>Solicita el BLE id de la placa (ISJ en nuestro caso) para poder conectar.</li> <li>El bot\u00f3n se usar\u00e1 para conectar y desconectar la App con la placa.</li> <li>Inicialmente la etiqueta donde se refleja el dato recibido no contiene ning\u00fan texto.</li> </ul> <p> <p> Pantalla inicial</p> <p></p> <p>Introducimos el BLE id y pulsamos en el bot\u00f3n \"Conectar\". El bot\u00f3n se pone de color verde y cambia su texto indicando que la conexi\u00f3n est\u00e1 establecida correctamente. Tmabi\u00e9n aparece la etiqueta que muestra el dato recibido.</p> <p> <p> Conexi\u00f3n establecida</p> <p></p> <p>Por otra parte el programa en MicroBlocks est\u00e1 enviado el valor de inclinaci\u00f3n de la placa respecto al eje X cada 100ms.</p> <p> <p> Programa Recibir_un_dato_desde_microncontrolador.ubp Descargar Recibir_un_dato_desde_microncontrolador.ubp</p> <p></p> <p>Para que el programa est\u00e9 en la placa necesitamos establecer conexi\u00f3n entre el IDE de MicroBlocks y la misma, pero es MUY IMPORTANTE que cuando finalicemos esta tarea desconectemos la placa del IDE o no podremos establecer la conexi\u00f3n desde la App. Recordemos que no est\u00e1n permitidas dos conexiones con la misma placa.</p> <p>En la animaci\u00f3n siguiente podemos observar el funcionamiento del ejemplo.</p> <p> <p> Funcionamiento de Recibir_un_dato_desde_microncontrolador</p> <p></p>"},{"location":"guiamb/mb_inventor_BLE/#recibir-multiples-datos","title":"Recibir m\u00faltiples datos","text":"<p>Este ejemplo es una continuaci\u00f3n del anterior \"Enviar mensaje desde microcontrolador a una App\" y por tanto seguimos trabajando con las extensiones:</p> <ul> <li>MicroBlocks BLE Extension.</li> <li>Tools Extension, de Pura Vida Apps seg\u00fan los t\u00e9rminos y condiciones que aparecen en la web de la extensi\u00f3n vistos anteriormente.</li> </ul> <p>El dise\u00f1o de la App tiene el aspecto de la imagen siguiente y bajo su t\u00edtulo tenemos el enlace de descarga de RecibirMultiplesDatos.aia.</p> <p> <p> App RecibirMultiplesDatos Descargar RecibirMultiplesDatos.aia</p> <p></p> <p>La conexi\u00f3n con AI Companion y la placa micro:STEAMakers es exactamente la misma que en los ejemplos anteriores.</p> <p>El programa en MicroBlocks est\u00e1 enviado el valor de inclinaci\u00f3n de la placa respecto a los tres ejes cada 100ms.</p> <p> <p> Programa RecibirMultiplesDatos.ubp Descargar RecibirMultiplesDatos.ubp</p> <p></p> <p>En la animaci\u00f3n siguiente podemos observar el funcionamiento del ejemplo.</p> <p> <p> Funcionamiento de RecibirMultiplesDatos</p> <p></p>"},{"location":"guiamb/mb_inventor_BLE/#recibir-multiples-datos-utilizando-palabras-clave","title":"Recibir m\u00faltiples datos utilizando palabras clave","text":"<p>Otra forma de resolver el ejemplo anterior es utilizar palabras clave (keywords) para distinguir unos datos de otros.</p> <p>Seguimos trabajando con las extensiones:</p> <ul> <li>MicroBlocks BLE Extension.</li> <li>Tools Extension, de Pura Vida Apps seg\u00fan los t\u00e9rminos y condiciones que aparecen en la web de la extensi\u00f3n vistos anteriormente.</li> </ul> <p>Utilizo esta extensi\u00f3n para mantener la pantalla activa mientras el microcontrolador permanece conectado.</p> <p>El dise\u00f1o de la App tiene el aspecto de la imagen siguiente y bajo su t\u00edtulo tenemos el enlace de descarga de RecibirMultiplesDatosKeywords.aia.</p> <p> <p> App RecibirMultiplesDatosKeywords Descargar RecibirMultiplesDatosKeywords.aia</p> <p></p> <p>Aunque ya figura comentado en el programa, indicar que como car\u00e1cter delimitador entre la clave y el valor del dato se utiliza el espacio en blanco y su valor decimal en Lat\u00edn b\u00e1sico del listado de caracteres Unicode es 32 (U+0020).</p> <p>La conexi\u00f3n con AI Companion y la placa micro:STEAMakers es exactamente la misma que en los ejemplos anteriores.</p> <p>El programa en MicroBlocks est\u00e1 enviado el valor de inclinaci\u00f3n de la placa respecto a los tres ejes cada 100ms.</p> <p> <p> Programa RecibirMultiplesDatosKeywords.ubp Descargar RecibirMultiplesDatosKeywords.ubp</p> <p></p> <p>El funcionamiento es totalmente id\u00e9ntico al del ejemplo anterior.</p>"},{"location":"guiamb/mb_inventor_BLE/#beating-heart","title":"Beating Heart","text":"<p>Este ejemplo es el que aparece en MicroBlocks BLE Extension, extensi\u00f3n de App Inventor aportada a la comunidad MIT APP INVENTOR por Peter Mathijssen.</p> <p>Su adaptaci\u00f3n a micro:STEAMakers y a los ejemplos anteriores es la que vamos a desarrollar en este apartado. Partimos del ejemplo EstablecerConexionMejorado que cargamos y archivamos como Beating_Heart_microSM</p> <p>Seguimos trabajando con las extensiones:</p> <ul> <li>MicroBlocks BLE Extension.</li> <li>Tools Extension, de Pura Vida Apps seg\u00fan los t\u00e9rminos y condiciones que aparecen en la web de la extensi\u00f3n vistos anteriormente.</li> </ul> <p>Utilizo esta extensi\u00f3n para mantener la pantalla activa mientras el microcontrolador permanece conectado.</p> <p>El dise\u00f1o de la App tiene el aspecto de la imagen siguiente y bajo su t\u00edtulo tenemos el enlace de descarga de Beating_Heart_microSM.aia.</p> <p> <p> App Beating_Heart_microSM Descargar Beating_Heart_microSM.aia</p> <p></p> <p>La conexi\u00f3n con AI Companion y la placa micro:STEAMakers es la misma que en los ejemplos anteriores.</p> <p>El programa en MicroBlocks est\u00e1 recibiendo mensajes que se envian y el valor recibido en el \u00faltimo mensaje lo guarda en la variable <code>wait</code>, de forma que dicha variable tomar\u00e1 como valor el de la posici\u00f3n del deslizador de la App que como podemos comprobar var\u00eda entre 100 y 1000 y su posici\u00f3n inicial se sit\u00faa en 500. Por defecto el programa tambi\u00e9n asigna dicho valor (500) a la variable, que en definitiva es el retardo entre las im\u00e1genes que se muestran, que ya podemos deducir que estar\u00e1 entre 100ms y 1000ms.</p> <p> <p> Programa Beating_Heart_microSM.ubp Descargar Beating_Heart_microSM.ubp</p> <p></p> <p>En la animaci\u00f3n siguiente podemos observar el funcionamiento del ejemplo. Como se observa el programa est\u00e1 grabado en la placa y como los latidos est\u00e1n dentro de un bucle infinito, el coraz\u00f3n ya est\u00e1 latiendo.</p> <p> <p> Funcionamiento de Beating_Heart_microSM</p> <p></p> <p>Como se observa al final, cuando no hay conexi\u00f3n los cambios en la pantalla no tienen efecto en la placa. Esto se debe al bloque \"call TaifunTools1.DontKeepScreenOn\".</p>"},{"location":"guiamb/mb_inventor_BLE/#led-editor-microsteamakers","title":"LED editor micro:STEAMakers","text":"<p>Este ejemplo creado y documentado por Peter Mathijssen tiene su historial en el servidor MicroBlocks en Discord en el hilo #appinventor. Utilizar\u00e9 aqu\u00ed la versi\u00f3n que tan amablemente Peter me envi\u00f3 a trav\u00e9s de esta misma plataforma.</p> <p>La documentaci\u00f3n del ejemplo est\u00e1 en LED editor using MicroBlocks extension.</p> <p>Seguimos trabajando con las extensiones:</p> <ul> <li>MicroBlocks BLE Extension.</li> <li>Tools Extension, de Pura Vida Apps seg\u00fan los t\u00e9rminos y condiciones que aparecen en la web de la extensi\u00f3n vistos anteriormente.</li> </ul> <p>Utilizo esta extensi\u00f3n para mantener la pantalla activa mientras el microcontrolador permanece conectado.</p> <p>El dise\u00f1o de la App tiene el aspecto de la imagen siguiente y bajo su t\u00edtulo tenemos el enlace de descarga de led_editor_v1.aia.</p> <p> <p>! Descargar led_editor_v1.aia</p> <p></p> <p>Dada la extensi\u00f3n del software se pone por partes para facilitar su visualizaci\u00f3n.</p> <p> <p> App led_editor_v1. Conexi\u00f3n/Desconexi\u00f3n </p> <p> App led_editor_v1. Variables </p> <p> App led_editor_v1. Botonera</p> <p></p> <p>Any Component Blocks</p> <p>Este \u00faltimo evento es un bloque del tipo \u201cCualquier componente (Any Component)\u201d propio de MIT App Inventor que resulta especialmente \u00fatil cuando queremos realizar una misma operaci\u00f3n en muchos componentes diferentes sin necesidad de copiar y pegar cada bloque las veces que sea necesario. La idea es sustituir diferentes componentes por un solo componente, lo que se consigue con los bloques \"cualquier componente\".</p> <p>Los bloques de componentes tienen eventos, m\u00e9todos y propiedades, y cada uno de ellos tiene sus correspondientes bloques \"cualquier componente\".</p> <p>Se puede cambiar entre un bloque para un componente espec\u00edfico y el bloque de cualquier componente equivalente a trav\u00e9s de los elementos de men\u00fa \"Make Generic\" en el men\u00fa contextual (clic derecho) de un bloque.</p> <p>En el enlace del t\u00edtulo tenemos toda la informaci\u00f3n al respecto.</p> <p>La conexi\u00f3n con AI Companion y la placa micro:STEAMakers se realiza de la manera habitual.</p> <p>En el programa en MicroBlocks, estando conectada la placa, se muestra al inicio el \"BLE id\" de la placa y se crea una lista con los mismos colores que la aplicaci\u00f3n.</p> <p>La recepci\u00f3n de mensajes se hace utilizando el separador \",\" (coma) para dividir el mensaje en sus tres partes, que son los \u00edndices de la fila, la columna y el color elegido. La coordenada (1,1) es el LED superior izquierdo y los colores se numeran de izquierda a derecha del 1 al 8.</p> <p> <p> Programa led_editor_v1.ubp Descargar led_editor_v1.ubp</p> <p></p> <p>En la animaci\u00f3n siguiente podemos observar el funcionamiento del ejemplo. Como se observa el programa est\u00e1 grabado en la placa sin el bloque que muestra los valores del mensaje recibido desplaz\u00e1ndose.  <p> Funcionamiento de led_editor_v1</p> <p></p> <p>Al final meter lo de la Extensi\u00f3n, descargandola y como obtenerla</p>"},{"location":"guiamb/mblocks/","title":"Gu\u00eda de MicroBlocks","text":""},{"location":"guiamb/mblocks/#introduccion-a-microblocks","title":"Introducci\u00f3n a MicroBlocks","text":"<p>IMPORTANTE</p> <p>La presente gu\u00eda de MicroBlocks hace referencia fundamentalmente a la placa micro:bit principalmente porque esta fue creada antes de la existencia de micro:STEAMakers.</p> <p>Esta web est\u00e1 dedicada a la placa micro:STEAMakers y su funcionamiento con MicroBlocks. En la pr\u00e1ctica todo lo que aparece en la gu\u00eda es aplicable a esta nueva placa con las l\u00f3gicas excepciones de configuraciones y ejemplos realizados.</p> <p>En este otro apartado de esta web  se trabaja con los bloques de la placa micro:STEAMakers y se desarrollan actividades con la misma.</p> <p>MicroBlocks es una herramienta de programaci\u00f3n por bloques basada en Snap!. Se trata de un software que puede trabajar online o localmente y que nos va a permitir programar diferentes placas, entre ellas la micro:bit, ESP32 micro:STEAMakers, ESP32 STEAMakers, ED1, etc.</p> <p> <p> Logotipo de MicroBlocks</p> <p>Logotipo descargado de la entrada en SAP de Kathy Giori  titulada Recap of \u201cSneak Preview into MicroBlocks\u201d.</p> <p></p> <p>MicroBlocks es un lenguaje de programaci\u00f3n por bloques similar a Scratch que es una excelente herramienta para aprender desde nivel principiante hasta nivel experto y v\u00e1lido para edades que van desde los 8 hasta los 99 a\u00f1os.</p> <p>En el apartado Get Started de su web tenemos descrito como trabajar desde un navegador y los distintos sistemas operativos as\u00ed como los pasos a seguir para configurar nuestra placa y como comenzar a crear programas.</p> <p>En esta ocasi\u00f3n vamos a trabajar de forma local descargando e instalando el programa en nuestro ordenador. En mi caso trabajar\u00e9 con Linux de 64 bits instalando el paquete debian descargado 'ublocks-amd64.deb'. La forma elegida para instalarlo, suponiendo que el paquete est\u00e1 en Descargas, es:</p> <pre><code>sudo dpkg -i ~/Descargas/ublocks-amd64.deb\n</code></pre> <p>Tras la instalaci\u00f3n verificamos que todo est\u00e1 correcto y que Linux ve la placa ejecutando en una terminal lo que vemos en la imagen siguiente.</p> <p> <p> Verificaci\u00f3n de conexi\u00f3n con micro:bit en Linux</p> <p></p> <p>En el enlace Mis notas sobre Linux trabajando con Ubuntu tenemos un par de entradas que describen problemas con el paquete brltty (Braille TTY). En el caso de placas con un chip microcontrolador de la serie USB CP210x, algunas de ellas compatibles con MicroBlocks. Si tenemos este caso el problema se puede resolver eliminando el paquete BRLTTY.</p> <pre><code>sudo apt remove brltty\n</code></pre> <p>El programa una vez instalado lo tenemos disponible en aplicaciones, como vemos en la imagen siguiente.</p> <p> <p> App MicroBlocks disponible</p> <p></p>"},{"location":"guiamb/mblocks/#por-que-usar-microblocks","title":"\u00bfPor qu\u00e9 usar MicroBlocks?","text":"<p>MicroBlocks tiene una caracter\u00edstica que lo distingue de otros lenguajes de programaci\u00f3n por bloques y es que la programaci\u00f3n real ocurre seg\u00fan se desarrolla el programa, lo que podemos denominar como programaci\u00f3n en directo o en vivo y, debido a esto, que implica que el c\u00f3digo se descarga seg\u00fan se escribe tenemos la otra caracter\u00edstica que le dota de independencia o autonom\u00eda, ya que cuando demos el programa por bueno, este ya est\u00e1 grabado como firmware en la placa.</p> <p>Otra de la caracter\u00edsticas importantes que ofrece MicroBlocks es la multitarea o posibilidad de desarrollar funcionalidades que trabajan de forma paralela y separada cada tarea. Por ejemplo, reproducir un sonido mientras se controla un servomotor. Esta forma de trabajo hace que el c\u00f3digo sea mas sencillo de escribir y de entender.</p> <p>Cuando trabajamos con MicroBlocks la placa que conectemos se comporta como una tarjeta de memoria. No hay necesidad de leer un archivo de proyecto, simplemente conectamos la placa y el script o programa nos aparecer\u00e1 en el IDE. Es decir, MicroBlocks lee el programa que hay en la placa y lo carga de manera autom\u00e1tica.</p> <p>El funcionamiento de MicroBlocks se basa en:</p> <ul> <li>El editor de bloques o IDE que se puede ejecutar online o de manera local.</li> <li>Una m\u00e1quina virtual que se ejecuta en la placa microcontroladora. Esta m\u00e1quina virtual es la encargada de ejecutar el programa de usuario y lo hace compilando en c\u00f3digo de bytes o instrucciones de bajo nivel muy parecidas al c\u00f3digo m\u00e1quina. Si tenemos habilitados los bloques avanzados podemos ver los bytes generados por el programa, como vemos en la animaci\u00f3n siguiente:</li> </ul> <p> <p> C\u00f3digo de bytes</p> <p></p> <p>La parte m\u00e1s importante de la informaci\u00f3n de bytes es la primera l\u00ednea, que muestra el n\u00famero de bytes compilados. Los scripts en MicroBlocks no deben superar los 1000 bytes, de ah\u00ed la importancia de esta informaci\u00f3n.</p> <ul> <li>El sistema de comunicaci\u00f3n entre la placa y el host remoto o el ordenador que hace que el firmware se actualice seg\u00fan se escribe el programa. Este sistema es el encargado de enviar los bytes y comandos para iniciar el programa y procesar mensajes del microcontrolador. As\u00ed el editor proporciona realimentaci\u00f3n gr\u00e1fica de lo que sucede en el microcontrolador y directamente puede mostrar valolres en un \"bocadillo de conversaci\u00f3n\" como el de la figura siguiente.</li> </ul> <p> <p> Bocadillo de conversaci\u00f3n</p> <p></p> <p>MicroBlocks tambi\u00e9n dispone de una herramienta de representaci\u00f3n gr\u00e1fica que estudiaremos en su momento.</p> <p>Una funcionalidad importante del editor es que, adem\u00e1s de programar por bloques, administra las Librerias, que est\u00e1n escritas en MicroBlocks. Existen muchas que iremos viendo poco a poco. Las librerias escritas en MicroBlocks pueden ser editadas por los usuarios.</p>"},{"location":"guiamb/mblocks/#los-cuatro-pilares-de-microblocks","title":"Los cuatro pilares de MicroBlocks","text":"<p>Seg\u00fan Bernat Romagosa, que forma parte del equipo de MicroBlocks, este es un software en vivo capaz de trabajar con varias placas diferentes como micro:bit, nodemcu y otras muchas. El lenguaje est\u00e1 desarrollado en torno a cuatro conceptos que consideran esenciales para un lenguaje de programaci\u00f3n educativo. Ellos los llaman los cuatro pilares de MicroBlocks:</p> <ol> <li>Vivo. El primero de estos pilares es que MicroBlocks es un lenguaje de programaci\u00f3n \"en directo\" o \"en vivo\", lo que significa que puedo arrastrar un bloque a la zona de programa y ver el resultado de cambiarlo en la ejecuci\u00f3n en la placa de manera inmediata. Esto significa que no hay que esperar ni ciclos de carga ni compilaciones ni nada de esto. El programa trabaja en tiempo real con la placa.</li> <li>Multitarea. El segundo pilar es que se trata de un lenguaje de programaci\u00f3n multitares o que trabaja en paralelo, lo que significa que se pueden ejecutar varias tareas al mismo tiempo.</li> <li>Aut\u00f3nomo. El tercero de los pilares es que MicroBlocks es un lenguaje aut\u00f3nomo, lo que significa que si, en cualquier momento, desconectamos la micro:bit del ordenador y alimentamos de forma externa el programa se seguir\u00e1 ejecutando tal y como estaba sin modificaciones y sin tener que presionar ning\u00fan bot\u00f3n. No hay que esperar ning\u00fan ciclo de carga de firmware.</li> <li>Portatil. El cuarto pilar es que se trata de un programa dise\u00f1ado para que sea portatil por lo que si cambiamos de tipo de placa, esta seguir\u00e1 ejecutando exactamente el mismo programa. La portabilidad se ha llevado al extremos de que si nos hemos olvidado de guardar nuestro programa en el ordenador, simplemente con conectar la placa este se carga en el IDE o tambi\u00e9n podemos, con la placa desconectada, escoger la opci\u00f3n de \"Recuperar proyecto de la placa\" que est\u00e1 en el men\u00fa del icono \"Fichero\". Tengase en cuenta que en este proceso los comentarios se pierden.</li> </ol> <p>Un sencillo ejemplo nos servir\u00e1 para ver todo esto. Se trata de crear un programa en el que un coraz\u00f3n lata en la pantalla a un intervalo determinado por una variable. Con el bot\u00f3n A disminuiremos el intervalo y con el bot\u00f3n B lo aumentaremos. El programa se debe ir creando en orden, con una placa conectada y eject\u00e1ndose la tarea principal, para poder ir viendo los cambios que hagamos como se reflejan en la placa inmediatamente. El programa es:</p> <p> <p> Ejemplo cuatro pilares</p> <p>Basado en Exploring sound with the micro:bit V2 &amp; MicroBlocks, MicroBlocks Team</p> <p></p> <p>Descargar el programa</p>"},{"location":"guiamb/mblocks/#configuracion-del-equipo","title":"Configuraci\u00f3n del equipo","text":"<p>Necesitamos un ordenador (\u00a1no un dispositivo m\u00f3vil!) con un puerto USB, un cable USB y una placa soportada. Podemos ejecutar MicroBlocks en un navegador Chromium, Chrome o Edge, o descargarlo como una aplicaci\u00f3n independiente para Linux, Chromebook, Windows o MacOS. Las placas soportadas son:</p> <ul> <li>BBC micro:bit v1 y v2</li> <li>Calliope mini</li> <li>Circuit Playground Express y Bluefruit</li> <li>Citilab ED1</li> <li>Raspberry Pi Pico and Pico W</li> <li>Adafruit Clue</li> <li>M5Stack Core Grey</li> <li>ESP8266 y ESP32</li> </ul> <p>Los instaladores est\u00e1n disponibles para las versiones liberadas listas para descargar la apropiada para nuestro sistema operativo. Si estamos trabajando con Chrome o Edge es muy posible que nos advierta de que estamos descargando un archivo que podr\u00eda da\u00f1ar nuestro ordenador. Debemos ignorar esta y sucesivas advertencias para proceder con la descarga.</p> <p>En Linux se descarga un paquete .deb, ublocks-amd64.deb en concreto para esta ocasi\u00f3n que se instala de forma muy sencilla. Con una terminal abierta en el directorio donde est\u00e1 el archivo .deb tecleamos:</p> <pre><code>dpkg -i ~/Descargas/ublocks-amd64.deb\n</code></pre> <p>Tras breves instantes el programa estar\u00e1 instalado y lo tendremos disponible en aplicaciones, como ya hemos visto antes.</p>"},{"location":"guiamb/mblocks/#configuracion-de-la-placa","title":"Configuraci\u00f3n de la placa","text":"<p>El proceso de configuraci\u00f3n de las placas soportadas es muy similar en todas ellas y es seguir el proceso que vamos a ver a continuaci\u00f3n. En este caso particular se toman las im\u00e1genes y animaciones realizando el proceso con una micro:bit V2.21.</p> <p>Conectamos la placa al ordenador y en el men\u00fa de MicroBlocks hacemos clic en el engranaje y seleccionamos la opci\u00f3n 'actualizar firmware de la placa'.</p> <p> <p> Actualizar firmware de la placa</p> <p></p> <p>En el men\u00fa de la ventana emergente tenemos que seleccionar el tipo de placa que hemos conectado.</p> <p> <p> Seleccionar placa</p> <p></p> <p>Si estamos trabajando con MicroBlocks en un navegador, se nos pedir\u00e1 que seleccionemos la placa si a\u00fan no est\u00e1 conectada.</p> <p>Si no hay una placa conectada aparecer\u00e1 el siguiente aviso.</p> <p> <p> No puedo abrir puerto serie</p> <p></p> <p>Si todo est\u00e1 correcto el icono del puerto USB pasa a estar acompa\u00f1ado de un c\u00edrculo verde que indica la conexi\u00f3n.</p> <p> <p> Conexi\u00f3n por puerto serie realizada</p> <p></p> <p>En este video del canal Youtube de MicroBlocks Fun titulado Quick introduction to MicroBlocks for programming a micro:bit (Introducci\u00f3n r\u00e1pida a MicroBlocks para programar un micro:bit) tenemos una introducci\u00f3n r\u00e1pida a MicroBlocks con micro:bit.</p> <p>La informaci\u00f3n en ingl\u00e9s de la guia de usuario y el manual de referencia de bloques tambi\u00e9n pueden resultarnos de gran ayuda.</p>"},{"location":"guiamb/mblocks/#actualizar-firmware-en-esp32","title":"Actualizar firmware en ESP32","text":"<p>Los dispositivos ESP son una categor\u00eda especial de Espressif que cuentan con capacidad WIFI. En estas placas se borra totalmente el contenido de la memoria flash de la placa y se carga el firmware m\u00e1s reciente. Tras seleccionar ESP32 se inicia la actualizaci\u00f3n del firmware y aparece informaci\u00f3n del progreso en la pantalla.</p> <p> <p> Actualizar firmware en ESP32</p> <p></p>"},{"location":"guiamb/mblocks/#habilitardeshabilitar-autocarga-de-librerias","title":"Habilitar/deshabilitar autocarga de librerias","text":"<p>Una de las cosas buenas del editor MicroBlocks es que siempre trata de simplificar las cosas a los usuarios. Dado que cada placa con microcontrolador tiene diferentes caracter\u00edsticas, funciones y capacidades, MicroBlocks intenta de forma autom\u00e1tica complementar las funcionalidades b\u00e1sicas cargando las bibliotecas que estime necesarias, siempre que la opci\u00f3n est\u00e9 habilitada, que se distinguir\u00e1 porque la opci\u00f3n disponible es desactivar.</p> <p> <p> Autocarga de librerias activada</p> <p></p> <p>Cuando se selecciona, este elemento se deshabilita esta funcionalidad y depende del usuario cargar las bibliotecas requeridas.</p> <p> <p> Autocarga de librerias desactivada</p> <p></p>"},{"location":"guiamb/mblocks/#habilitardeshabilitar-plugshare","title":"Habilitar/deshabilitar PlugShare","text":"<p>Otra caracter\u00edstica muy interesante del editor de MicroBlocks es que cargar\u00e1 autom\u00e1ticamente un proyecto desde el microcontrolador conecvtado, si no hay otro proyecto cargado en el editor. La activaci\u00f3n y desactivaci\u00f3n de la opci\u00f3n es id\u00e9ntica a la de la carga de librer\u00edas. Si la opci\u00f3n muestra desactivar es que est\u00e1 habilitada por lo que el editor leer\u00e1 el proyecto desde el dispositivo y luego proceder\u00e1 a cargarlo en el editor. Si la opci\u00f3n muestra activar es que la funcionalidad no est\u00e1 habilitada.</p> <p>Esta funci\u00f3n es muy importante porque permite a los usuarios compartir proyectos simplemente intercambiando sus dispositivos f\u00edsicos y conect\u00e1ndolos a un ordenador. No hay que compartir archivos.</p> <p>Podr\u00edamos denominar a esta funcionalidad como \"conecta y comparte\".</p> <p> <p> PlugShare activado</p> <p></p>"},{"location":"guiamb/mblocks/#descripcion-general","title":"Descripci\u00f3n general","text":"<p>En la imagen siguiente vemos los nombres de las distintas partes que componen el editor de MicroBlocks.</p> <p> <p> Partes del editor</p> <p></p> <ul> <li>Bloques. Los bloques est\u00e1n organizados por categorias codificadas por colores. Cuando se selecciona una categor\u00eda se despliegan los correspondientes a esa categoria en la zona denominada paleta de bloques. En la wiki de MicroBlocks podemos encontrar una referencia completa a los bloques (Block Reference) con multitud de ejemplos resueltos.</li> <li>Barra de men\u00fas. Contiene, de izquierda a derecha, el icono en forma de globo terraqueo para configurar el idioma, la rueda dentada para entrar en opciones de MicroBlocks, la hoja de papel que muestra el men\u00fa archivo, el gr\u00e1fico es un men\u00fa con opciones de graficar y conectar y el conector USB para el men\u00fa conectar.</li> <li>Nombre del proyecto. Es el nombre del proyecto actual.</li> <li>Botones de inicio/parada. Son dos iconos que sirven para controlar la ejecuci\u00f3n de los programas.</li> <li>Librerias. Aqu\u00ed se muestran las diversas bibliotecas que se cargan seg\u00fan sea requerido.</li> <li>\u00c1rea de bloques de programa. Es donde se crea el programa o script de usuario y las funciones, que en MicroBlocks se conocen como bloques personalizados.</li> <li>Barra de informaci\u00f3n. Si vamos moviendo el rat\u00f3n por los diversos bloques y \u00e1reas del IDE en esta barra se muestra el tipo de bloque y una breve informaci\u00f3n de ayuda sobre los bloques; as\u00ed como la funcionalidad de las distintas \u00e1reas. La informaci\u00f3n detallada del bloque est\u00e1 disponible a trav\u00e9s del men\u00fa contextual de cada bloque.</li> <li>Controles tama\u00f1o bloques. Estos tres controles permiten cambiar el tama\u00f1o de los bloques aumentando (+) o disminuyendo (-), as\u00ed como establecerlos en el tama\u00f1o predeterminado o del 100% de zoom (=).</li> </ul>"},{"location":"guiamb/mblocks/#idioma","title":"Idioma","text":"<p>En la imagen siguiente vemos el men\u00fa desplegado.</p> <p> <p> Idioma</p> <p></p> <p>Simplemente tenemos que seleccionar el idioma deseado de entre los que est\u00e1 traducido MicroBlocks. Esto configura todos los men\u00fas, mensajes y bloques de c\u00f3digo en ese idioma. La operaci\u00f3n puede demorarse unos segundos dependiendo del equipo en el que se est\u00e9 ejecutando el programa.</p>"},{"location":"guiamb/mblocks/#microblocks","title":"MicroBlocks","text":"<p>En la figura siguiente vemos este men\u00fa desplegado.</p> <p> <p> MicroBlocks</p> <p></p> <ul> <li>La opci\u00f3n 'acerca de...' nos muestra la informaci\u00f3n sobre MicroBlocks que vemos en la imagen siguiente.</li> </ul> <p> <p> acerca de...</p> <p></p> <ul> <li>Actualizar el firmware de la placa es lo que permite al usuario cargar la \u00faltima versi\u00f3n del firmware en la placa conectada. Dependiendo de los dispositivos conectados y de las condiciones se puede desplegar un men\u00fa para seleccionar el dispositivo concreto. Es la opci\u00f3n que utilizaremos para grabar los programas en la placa.</li> <li>Mostrar bloques avanzados modifica el men\u00fa MicroBlocks mostrando mas opciones, como vemos en la imagen siguiente.</li> </ul> <p> <p> Bloques avanzados</p> <p></p> <ul> <li>La opci\u00f3n versi\u00f3n de firmware nos devuelve la versi\u00f3n de firmware de la m\u00e1quina virtual para micro:bit, como vemos en la imagen siguiente.</li> </ul> <p> <p> versi\u00f3n de firmware</p> <p></p> <ul> <li>La opci\u00f3n borra y reparticiona el firmware en placa ESP borra totalmente el contenido de la memoria y carga el programa actual en placas con capacidad EiFi tipo ESP.</li> <li>La opci\u00f3n inicia el servidor HTTP. Activa (o desactiva si est\u00e1 activo) el servidor HTTP de MicroBlocks en el puerto por defecto 6473, aunque este puede ser cambiado.</li> <li>La opci\u00f3n desactiva autocarga de librerias de placa permite desabilitar la funcionalidad de MicroBlocks de que intente autom\u00e1ticamente complementar las funcionalidades b\u00e1sicas del dispositivo conectado cargando varias bibliotecas.</li> <li>La opci\u00f3n activar PlugShare en proyecto en blanco es una funci\u00f3n que si est\u00e1 habilitada hace que el editor de MicroBlocks cargue autom\u00e1ticamente un proyecto desde el microdispositivo conectado, siempre que no haya un proyecto cargado en el editor. Si el \u00edcono de conexi\u00f3n no es verde y est\u00e1 habilitado PlugShare cuando estamos en un proyecto vac\u00edo, tan pronto como se establezca la conexi\u00f3n USB, MicroBlocks leer\u00e1 y cargar\u00e1 el proyecto que contiene el dispositivo conectado.</li> <li>La opci\u00f3n oculta los bloques avanzados devuelve al men\u00fa MicroBlocks a su estado por defecto, que es la opci\u00f3n mas habitual.</li> </ul>"},{"location":"guiamb/mblocks/#archivo","title":"Archivo","text":"<p>En la figura siguiente vemos este men\u00fa desplegado.</p> <p> <p> Archivo</p> <p></p> <ul> <li>Guarda. Cuando demos por finalizado un proyecto, o tengamos que dejarlo para otro momento sin perder el trabajo realizado, debemos guardarlo en el ordenador. Se nos abrir\u00e1 una ventana como la de la imagen siguiente.</li> </ul> <p> <p> Guarda fichero</p> <p></p> <ul> <li>Nuevo. Para crear nuevos proyectos. Si tenemos un programa cargado en el \u00e1rea de trabajo del editor, mostrar\u00e1 un mensaje solicitando confirmaci\u00f3n para eliminar del editor el proyecto activo. En la imagen siguiente vemos el mensaje.</li> </ul> <p> <p> Confirmacion</p> <p></p> <p>Si la contestaci\u00f3n es 'Si' el \u00e1rea de trabajo queda vac\u00eda y las bibliotecas a\u00f1adidas por el usuario se borran.</p> <ul> <li>Abre. Esta opci\u00f3n permite cargar en el editor proyectos .ubp previamente guardados. Si hay un proyecto cargado en el \u00e1rea de trabajo, se mostrar\u00e1 un mensaje de confirmaci\u00f3n (igual que en Nuevo) y se presenta una ventana de di\u00e1logo que permite localizar y abrir el archivo deseado. En la imagen siguiente vemos esta ventana.</li> </ul> <p> <p> Di\u00e1logo abrir fichero</p> <p></p> <p>En la categor\u00eda Ejemplos es donde se presentan muchos proyectos de MicroBlocks para diferentes microdispositivos y opciones de hardware.</p> <ul> <li>Copia URL del proyecto al portapapeles. Cuando trabajamos online permite compartir el proyecto.</li> </ul>"},{"location":"guiamb/mblocks/#conectar","title":"Conectar","text":"<p>Al hacer clic en este icono se muestra un men\u00fa que enumera las opciones de conectividad admitidas:</p> <ul> <li>conecta - puertos USB del sistema que tienen microdispositivos conectados.</li> <li>conecta (BLE) - dispositivos con conectiviad BLE.</li> <li>open Boardie - dispositivo vitual BOARDIE.</li> </ul> <p> <p> Opciones de Conecta</p> <p></p> <p>En la figura siguiente vemos este men\u00fa desplegado. En esta ocasi\u00f3n hay un dispositivo ya conectado y por eso se muestra la opci\u00f3n disconnect (/dev/ttyACM0).</p> <p> <p> Conectar</p> <p></p> <p>Si tenemos varios dispositivos conectados a puertos USB se nos mostrar\u00e1n los mismos para que podamos escoger el dispositivo que nos interesa. Al seleccionar uno y hacer clic en Conectar se establecer\u00e1 una conexi\u00f3n con el dispositivo correspondiente. Si la conexi\u00f3n tiene \u00e9xito, el \u00edcono USB cambiar\u00e1 a uno con un fondo circular verde, como vemos en la imagen siguiente.</p> <p> <p> Conectado</p> <p></p> <p>Es importante prestar atenci\u00f3n al estado de este icono. MicroBlocks ejecuta muchos procesos internos automatizados y la actualizaci\u00f3n y sincronizaci\u00f3n autom\u00e1tica del c\u00f3digo del proyecto en el dispositivo conectado es uno de ellos, pero esto solo es posible cuando el \u00edcono est\u00e1 en modo verde.</p> <p>Existen diversas razones por las que la conexi\u00f3n puede interrumpirse. Cuando esto ocurre el icono dejar\u00e1 de estar verde y debemos buscar el motivo de la desconexi\u00f3n.</p> <p>Una vez \"actualizado el firmware en una placa ESP32\" las opciones de conexi\u00f3n que nos ofrece las vemos en la imagen siguiente:</p> <p> <p> Opciones de conexi\u00f3n</p> <p></p> <p>Cuando se hace clic en conecta, se muestra un men\u00fa de puerto USB del sistema, con una lista de todos los dispositivos USB conectados a nuestro ordenador:</p> <p> <p> Opciones de conexi\u00f3n</p> <p></p> <p>Al seleccionar una entrada y hacer clic en Conectar se establecer\u00e1 una conexi\u00f3n con el microdispositivo correspondiente.</p> <p>Una vez realizada la conexi\u00f3n, el \u00edcono USB cambiar\u00e1 a uno con un fondo circular verde: </p> <p>Cuando hacemos clic en conecta (BLE) es posible que se nos muestre una ventana como la de la imagen siguiente:</p> <p> <p> Opciones de conexi\u00f3n BLE sin dispositivos disponibles</p> <p></p> <p>Lo que ocurre es que no estamos utilizando un navegador adecuado o su configuraci\u00f3n no es correcta. En el apartado Web Serial ESPTool se dan detalles referentes a esto. Tambi\u00e9n es posible que no tengamos emparejado nuestro dispositivo con el Bluetooth del ordenador:</p> <p> <p> Opciones Bluetooth en ordenador</p> <p></p> <p>Solucionados los problemas de conexi\u00f3n, se muestra una ventana con los puertos BLE del sistema de todos los dispositivos conectados al ordenador.</p> <p> <p> Opciones de conexi\u00f3n BLE con dispositivos disponibles</p> <p></p> <p>En la animaci\u00f3n vemos el proceso de conexi\u00f3n con dispositivo BLE:</p> <p> <p> conecta (BLE)</p> <p></p> <p>El c\u00f3digo de tres letras que sigue a MicroBlocks sirve para diferenciar unos dispositivos de otros.</p> <p>Al seleccionar una entrada y hacer clic en Emparejar, se establecer\u00e1 una conexi\u00f3n BLE con el microdispositivo correspondiente.</p> <p>Una vez que la conexi\u00f3n se haya realizado correctamente, el \u00edcono USB cambiar\u00e1 a uno con un fondo circular verde: </p> <p>Otra forma de confirmar el estado de conexi\u00f3n de MicroBlocks es haciendo clic en la pesta\u00f1a del navegador correspondiente al IDE de MicroBlocks. Seg\u00fan la conectividad USB o BLE establecida podemos ver una de las dos pantallas que se muestran a continuaci\u00f3n:</p> <p> <p> Conexiones USB y BLE</p> <p></p> <p>La opci\u00f3n \"con\u00e9ctate a Boardie\" la vemos en el apartado Boardie: un tablero virtual para MicroBlocks.</p> <p>Una vez realizada la conexi\u00f3n el aspecto es el siguiente:</p> <p> <p> Opciones de conexi\u00f3n</p> <p></p> <p>Al icono que indica conectado debemos prestarle atenci\u00f3n permanente. MicroBlocks ejecuta multitud de procesos internos que nos facilitan el trabajo con el editor. La actualizaci\u00f3n y sincronizaci\u00f3n del c\u00f3digo del proyecto con el dispositivo conectado es uno de estos procesos. Esto solo es posible con el icono rodeado del c\u00edrculo verde.</p> <p>Aviso</p> <p>Se aconseja no desarrollar ni solucionar problemas en los programas si no est\u00e1 establecida la conexi\u00f3n con el microdispositivo, lo que se indica con la ausencia del c\u00edrculo verde alrededor del icono USB.</p> <p>La conectividad BLE permite trabajar sin estar conectado por cable al ordenador donde se ejecuta el IDE de MicroBlocks. Normalmente, el microcontrolador se conecta al ordenador a trav\u00e9s del cable USB, que proporciona la energ\u00eda necesaria y permite las actividades de programaci\u00f3n proporcionadas por el IDE. Esta conexi\u00f3n requiere que el microcontrolador se encuentre a una distancia que depende de la longitud del cable USB.</p> <p>Compatibilidad con conexi\u00f3n BLE</p> <p>La compatibilidad con conectividad BLE es una nueva caracter\u00edstica de MicroBlocks, introducida a partir de la versi\u00f3n piloto 1.2.52 VM 216 (enero de 2024).</p> <p>Cuando conectamos a trav\u00e9s de BLE, la idea es deshacerse de la conexi\u00f3n por cable USB y obtener la capacidad de tener el dispositivo programado lejos del ordenador. Con la tecnolog\u00eda Bluetooth, esto se traduce en una distancia te\u00f3rica de aproximadamente 100 metros. En la pr\u00e1ctica esta distancia ser\u00e1 de alrededor de 25 metros. Lo que es bastante lejos del ordenador utilizado para programar el microcontrolador.</p> <p>Con esto surge un nuevo problema: alimentar el microcontrolador lejos del ordenador. Sin el cable USB, que proporcionaba la energ\u00eda, ahora hay que utilizar una fuente de alimentaci\u00f3n diferente. Esta puede ser en forma de una conexi\u00f3n de alimentaci\u00f3n USB o una bater\u00eda conectada al microcontrolador. Muchos kits tambi\u00e9n proporcionan sus propias opciones de fuente de alimentaci\u00f3n independiente.</p> <p>Opciones de alimentaci\u00f3n externa</p> <p>Seg\u00fan el entorno en el que estemos trabajando y la edad de los usuarios hay que tener muy presente que las baterias de tipo LiPo, Li-Ion, Ni-MH y bater\u00edas de gel, como la 18650 que soportan algunas shield, pueden resultar muy peligrosas dado su poder de descarga instant\u00e1neo que se puede producir por conexi\u00f3n inadecuada o cortocircuito, cuando no llevan las protecciones adecuadas.  </p> <ul> <li>En el art\u00edculo Pilas y bater\u00edas, todos los tipos y sus diferencias \u2013 LiPo, Li-Ion, Ni-MH, etc. de Solectro disponemos de mas informaci\u00f3n.  </li> <li>El video La GU\u00cdA DEFINITIVA sobre las BATER\u00cdAS LIPO para ROB\u00d3TICA de BricoGeek nos lo explica muy bien para el caso de las LiPo.  </li> <li>El art\u00edculo OJO CON LAS BATER\u00cdAS 18650 publicado en el github de CATEDU. Centro Aragon\u00e9s de Tecnolog\u00edas para la educaci\u00f3n</li> </ul>"},{"location":"guiamb/mblocks/#botones-de-inicioparada","title":"Botones de inicio/parada","text":"<p>MicroBlocks siempre est\u00e1 en conexi\u00f3n; se puede hacer clic en bloques o secuencias de comandos individuales para ejecutarlos sin hacer clic en el bot\u00f3n de 'Inicio'.</p> <p>La funci\u00f3n principal del bot\u00f3n 'Inicio' es simular el encendido del dispositivo iniciando todas las secuencias de comandos.</p> <p>El bot\u00f3n 'STOP' detiene la ejecuci\u00f3n del proyecto. Todas las variables son desasignadas. Todos los scripts se detienen.</p> <p>El proyecto cargado en el dispositivo estar\u00e1 en el mismo hasta nueva grabaci\u00f3n de firmware. De hecho, podemos desconectarlo, encenderlo desde una fuente externa y ejecutar el proyecto sin el editor.</p>"},{"location":"guiamb/mblocks/#programando","title":"Programando","text":"<p>Dado que es la parte en la que mas se trabaja, la creaci\u00f3n de programas, la vemos en su propio apartado.</p> <p>Los bloques colocados en el \u00e1rea de trabajo los podemos mover a voluntad con el rat\u00f3n, as\u00ed como con los men\u00fas contextuales que aparecen al pulsar el bot\u00f3n derecho. Existen una serie de atajos asociados a las teclas Ctrl y Shift que se ir\u00e1n viendo.</p>"},{"location":"guiamb/mblocks/#arrastrar-y-soltar","title":"Arrastrar y soltar","text":"<p>El movimiento de arrastrar y soltar es el habitual de entornos de programaci\u00f3n por bloques y adem\u00e1s resulta muy intuitivo. Lo nuevo en Microblocks es que mientras se arrastra aparece una sombra paralela que pretende crear un efecto 3D de que el bloque en movimiento va flotando sobre el \u00e1rea de trabajo, incluso por encima del resto de bloques.</p> <p> <p> Sombra paralela</p> <p></p>"},{"location":"guiamb/mblocks/#acoplar-bloques","title":"Acoplar bloques","text":"<p>Cuando nos acercamos con un bloque o un conjunto de bloques a otro u otros bloques, aparecer\u00e1 una l\u00ednea blanca blanca horizontal que designa un punto de acople.</p> <p> <p> L\u00ednea blanca mostrando punto de acople</p> <p></p> <p>Si soltamos el bot\u00f3n del rat\u00f3n cuando se ve esa l\u00ednea blanca el bloque o bloques se acoplar\u00e1n a los del otro lado de la l\u00ednea.</p>"},{"location":"guiamb/mblocks/#menu-contextual-de-bloques","title":"Men\u00fa contextual de bloques","text":"<p>Si situamos el cursor sobre un bloque que est\u00e1 en un grupo de bloques y hacemos clic con el bot\u00f3n secundario o derecho, nos aparece un men\u00fa contextual.</p> <p> <p> Men\u00fa contextual en bloques</p> <p></p> <p>Este men\u00fa contextual ofrece mas opciones si hemos seleccionado 'Mostrar bloques avanzados'.</p> <p> <p> Men\u00fa contextual en bloques avanzados</p> <p></p> <ul> <li>Copiar en el portapapeles. Es una operaci\u00f3n que crea una copia de los conjuntos de bloques seleccionados en el portapapeles. Estos se pueden pegar dentro del mismo proyecto o en un proyecto diferente. Tambi\u00e9n es posible copiar/pegar entre el editor online y el local.</li> <li>Copiar al Portapapeles como URL. Esta caracter\u00edstica se utiliza principalmente para incorporar programas MicroBlocks en p\u00e1ginas web, ya que el formato est\u00e1 codificado como URL.</li> </ul>"},{"location":"guiamb/mblocks/#menu-contextual-de-area-de-trabajo","title":"Men\u00fa contextual de \u00e1rea de trabajo","text":"<p>Es el men\u00fa contextual que aparece cuando hacemos un clic derecho sobre cualquier zona vac\u00eda del \u00e1rea de trabajo.</p> <p> <p> Men\u00fa contextual en \u00e1rea de trabajo</p> <p></p> <ul> <li>tama\u00f1o de bloques. Cuando se selecciona nos muestra una lista con porcentajes para escoger est\u00e1ndo tildado el valor actual.</li> <li>deshaz el \u00faltimo movimiento. Invierte el \u00faltimo movimiento de bloque completado.</li> <li>limpia. Organiza los conjuntos y los bloques sueltos en la pantalla en una disposici\u00f3n de arriba hacia abajo y de izquierda a derecha desde el lado izquierdo del \u00e1rea de trabajo. Los bloques se organizan en m\u00faltiples columnas determinadas por el ancho del \u00e1rea IDE. \u00a1Esta operaci\u00f3n no se puede deshacer!</li> <li>copia todos los programas al portapapeles. Es la pareja de copiar al portapapeles. Mientras que el primero solamente copia el bloque o el programa, este copia todos los programas del proyecto.</li> <li>copia todos los programas al portapapeles como URL. Es lo mismo que el visto anteriormente.</li> <li>guarda una imagen de todos los programas visibles. Es la versi\u00f3n complementaria de la vista en el men\u00fa contextual de bloques.</li> <li>fija la escala de la imagen a exportar. Al seleccionarla nos muestra una lista con porcentajes para escoger est\u00e1ndo tildado el valor actual.</li> </ul>"},{"location":"guiamb/mblocks/#crear-un-programa","title":"Crear un programa","text":"<p>Por defecto, al iniciar Microblocks aunque se haga con la micro:bit conectada, no tendremos disponibles los bloques de manejo de la pantalla de 5x5 LEDs. Estos bloques se encuentran en la libreria 'Pantalla LED' que debemos a\u00f1adir a nuestro programa. Desde 'Control debemos situar los bloques 'al empezar' y 'por siempre'.</p> <p>Repetimos el 'Primer proyecto' en el que vamos a utilizar, adem\u00e1s de los dos nombrados, el 'limpia pantalla' y 'muestra car\u00e1cter'. En la animaci\u00f3n siguiente vemos el proceso y la simulaci\u00f3n.</p> <p> <p> Primer proyecto</p> <p></p> <p>Podemos observar que tras unos instantes el programa comienza a ejecutarse en la micro:bit conectada. En el caso de Microblocks el bloque usado solamente permite un car\u00e1cter y no crea la animaci\u00f3n si ponemos mas de uno. Para hacer esto tenemos disponible otro bloque.</p> <p>Ya tenemos creado el programa y comprobado que funciona, es hora de salvarlo en el ordenador. Esto lo haremos asi principalmente para tener disponibles todos los programas y poder enlazarlos donde convenga en estas notas. En la animaci\u00f3n siguiente vemos el proceso de descarga del archivo.</p> <p> <p> Descarga del archivo Primer-proyecto.ubp</p> <p></p> <p>El Primer proyecto lo podemos descargar desde este enlace.</p> <p>Durante el proceso de cambios en el programa podemos comprobar que el conjunto de bloques esta rodeado de una l\u00ednea verde que indica que el programa se est\u00e1 ejecutando en la micro:bit. Lo apropiado cuando vamos a realizar cambios es detener la ejecuci\u00f3n, hacer los cambios y volver a poner la ejecuci\u00f3n en marcha.</p> <p> <p> Realizando cambios</p> <p></p> <p>En la animaci\u00f3n vemos junto a los botones de inicio/parada el icono indicador de progreso de la sincronizaci\u00f3n entre el IDE y la placa.</p>"},{"location":"guiamb/mblocks/#enlaces-utiles","title":"Enlaces \u00fatiles","text":"<ul> <li> <p>En la web de Francisco Soldado denominada 'ardutaller' nos vamos a encontrar con una entrada MicroBlocks \u2192 micro:bit donde aparece un video con detalles adicionales sobre el trabajo con esta pareja de software/hardware. En ese mismo enlace tenemos disponibles varias actividades totalmente resueltas tanto en catal\u00e1n como espa\u00f1ol.</p> </li> <li> <p>Este es el video en Youtube integrado en la web titulado Introducion al Software Microblocks. Conexi\u00f3n a Microbit</p> </li> </ul>"},{"location":"guiamb/mblocks/#libreria-wifi","title":"Libreria WiFi","text":"<p> <p> Logo Wi-Fi Obtenido en Wikipedia</p> <p></p> <p>Wi-Fi es el nombre comercial propiedad de la Wi-Fi Alliance para designar su familia de protocolos de comunicaci\u00f3n inal\u00e1mbrica basados en el est\u00e1ndar IEEE 802.11 para redes de \u00e1rea local sin cables. Su primera denominaci\u00f3n en ingl\u00e9s fue Wireless Ethernet Compatibility Alliance.</p> <p>WLAN (Wireless Local Area Network o red de \u00e1rea local inal\u00e1mbrica) es una red inal\u00e1mbrica que permite conectar de forma inal\u00e1mbrica dos o m\u00e1s dispositivos para formar una red de \u00e1rea local a escala limitada.</p> <p> <p> WLAN Traducido de MicroBlocks Wiki</p> <p></p> <p>la libreria WIFI de MicroBlocks es compatible con muchas placas microcontroladas con capacidad WIFI. Con unos simples bloques, no es muy complicado configurar una conexi\u00f3n WIFI para participar en la infraestructura IP local; o incluso crear una red basada en hotspot o punto de acceso portatil.</p> <p>Esta librer\u00eda forma la base para aplicaciones m\u00e1s avanzadas basadas en WIFI donde uno de los muchos protocolos IP son usados para construir aplicaciones; ej: WebSocket, UDP, HTTP, MQTT etc. Hay bibliotecas separadas y ejemplos proporcionados sobre c\u00f3mo lograr estos.</p> <p>Para ver algunos ejemplos de proyectos WIFI, consulte el art\u00edculo M\u00e9todos de control remoto WIFI en la WIKI de MicroBlocks. Tambi\u00e9n se pueden probar los ejemplos proporcionados en el men\u00fa Archivo/Abrir/Ejemplos/ Red:</p> <p> <p> Abrir ejemplo </p> <p></p>"},{"location":"guiamb/mblocks/#resumen-de-los-bloques","title":"Resumen de los bloques","text":"<p>Para cada bloque hay una breve descripci\u00f3n y una descripci\u00f3n detallada del bloque y los componentes.</p> <p>Se dan c\u00f3digos de ejemplo sobre c\u00f3mo utilizar los bloques. Para probarlos, todo lo que tienes que hacer es descargar los archivos ubp y abrirlos en una sesi\u00f3n del IDE de MicroBlocks en un navegador y los tendr\u00e1s en el \u00e1rea de programaci\u00f3n del editor. A continuaci\u00f3n, basta con hacer clic sobre ellos y ver los resultados.</p> <p> Descripci\u00f3n corta Permite conectarse a la red local Crea un punto de acceso dando sus credenciales Retorna la direcci\u00f3n IP obtenida Retorna la direcci\u00f3n MAC del dispositivo WIFI Habilita el uso simultaneo de WIFI y BLE <p></p> <p>Hay dos tipos distintos de formas de bloque:</p> <ul> <li>oval: son bloques de informaci\u00f3n que devuelven alg\u00fan tipo de informaci\u00f3n. Normalmente, el usuario los asignar\u00eda a una variable del proyecto o los utilizar\u00eda en una ranura de entrada adecuada de otros bloques.</li> <li>rectangular: son bloques de comando que realizan una funci\u00f3n programada y no devuelven ninguna informaci\u00f3n.</li> </ul> <p>Sobre la descripci\u00f3n de los bloques</p> <p>Estos bloques s\u00f3lo funcionar\u00e1n con placas que tenga capacidad WIFI; por ejemplo: ESP8266 y ESP32.</p> <p>Aseg\u00farate de utilizar credenciales WIFI espec\u00edficas para tu entorno de red. Las utilizadas aqu\u00ed son a modo de ejemplo y NO FUNCIONAR\u00c1N.</p>"},{"location":"guiamb/mblocks/#conectate-a-la-wifi","title":"Con\u00e9ctate a la wifi","text":"<p> Este bloque se utiliza para iniciar sesi\u00f3n en la red IP local con las credenciales proporcionadas. Una vez completado el proceso de registro, se obtiene una direcci\u00f3n IP del router local.</p> <p>El siguiente ejemplo demuestra la conexi\u00f3n a la red WIFI local mostrando las credenciales utilizadas. Recuerda sustituir tus propios valores de SSID (Service Set Identifier o nombre p\u00fablico de una red WLAN) y CONTRASE\u00d1A.</p> <p> <p> Con\u00e9ctate a la wifi Descargar archivo</p> <p></p>"},{"location":"guiamb/mblocks/#crea-un-punto-de-acceso-wifi","title":"Crea un punto de acceso wifi","text":"<p> Si no hay una red IP disponible en las proximidades, es posible hacer que el microcontrolador cree un punto de acceso para proporcionar este servicio. En este caso, el microcontrolador act\u00faa como un punto de acceso (AP) al igual que lo hace el router en el ejemplo de red WIFI normal. Una vez establecido el hotspot, todos los dispositivos remotos pueden conectarse a \u00e9l y obtener sus direcciones IP directamente del dispositivo hotspot.</p> <p>Aseg\u00farate de que la contrase\u00f1a que utiliza es del tipo STRING y tiene como m\u00ednimo 8 caracteres de longitud. Hay entornos como Windows, en los que el SO no permitir\u00e1 la creaci\u00f3n de hotspots \"sin contrase\u00f1a\" (hotspots de acceso abierto). En la imagen siguiente se ha pulsado el bot\u00f3n derecho del rat\u00f3n sobre el campo de entrada de valor de la variable password y vemos c\u00f3mo verificar el tipo de variable de contrase\u00f1a:</p> <p> <p> Verificar tipo de variable </p> <p></p> <p>Cuando seleccione s\u00f3lo texto en el men\u00fa desplegable, el campo cambiar\u00e1 de un blanco ovalado a un blanco rectangular.</p> <p>En el ejemplo siguiente, programamos el microcontrolador para crear un hotspot con las credenciales dadas. Los detalles del hotspot se muestran una vez completado con \u00e9xito el inicio del hotspot.</p> <p>Tengase en cuenta que en este modo de funcionamiento, no es posible el acceso a Internet en circunstancias normales. Adem\u00e1s, el rango de direcciones IP asignadas por el punto de acceso ser\u00e1 diferente del asignado por tu router de Internet.</p> <p> <p> Crea un punto de acceso wifi Descargar archivo</p> <p></p> <p>El hotpost no provee acceso a internet</p> <p>Tengase en cuenta que, en circunstancias normales, el hotspot NO proporciona acceso a Internet.</p> <p>Es s\u00f3lo un medio para que los dispositivos locales se comuniquen entre s\u00ed.</p> <p> <p> Crea un punto de acceso wifi </p> <p></p>"},{"location":"guiamb/mblocks/#direccion-ip","title":"direcci\u00f3n IP","text":"<p>De Wikipedia, la enciclopedia libre</p> <p>\u00a1/*Una direcci\u00f3n de Protocolo de Internet (direcci\u00f3n IP) es una etiqueta num\u00e9rica como 192.0.2.1 que est\u00e1 conectada a una red inform\u00e1tica que utiliza el Protocolo de Internet para la comunicaci\u00f3n. Una direcci\u00f3n IP cumple dos funciones principales: la identificaci\u00f3n de la interfaz de red y el direccionamiento de la ubicaci\u00f3n.</p> <pre><code>La versi\u00f3n 4 del Protocolo de Internet (IPv4) define una direcci\u00f3n IP como un n\u00famero de 32 bits. Sin embargo, debido al crecimiento de Internet y al agotamiento de las direcciones IPv4 disponibles, en 1998 se estandariz\u00f3 una nueva versi\u00f3n de IP (IPv6), que utiliza 128 bits para la direcci\u00f3n IP. El despliegue de IPv6 est\u00e1 en marcha desde mediados de la d\u00e9cada de 2000.\n\nLas direcciones IP se escriben y muestran en notaciones legibles para el ser humano, como 192.0.2.1 en IPv4, y 2001:db8:0:123:0:567:8:1 en IPv6.\n\nEl tama\u00f1o del prefijo de enrutamiento de la direcci\u00f3n se designa en notaci\u00f3n CIDR sufijando la direcci\u00f3n con el n\u00famero de bits significativos, por ejemplo 192.0.2.1/24, que equivale a la m\u00e1scara de subred 255.255.255.0 utilizada hist\u00f3ricamente.\n</code></pre> <p>En la imagen siguiente podemos ver la descomposici\u00f3n de una direcci\u00f3n IPv4:</p> <p> <p> Direcci\u00f3n IPv4</p> <p></p> <p>Cuando se establece con \u00e9xito una conexi\u00f3n entre el microcontrolador y el router de Internet, o se inicia un hotspot, se asigna una direcci\u00f3n IP.</p> <p>En el caso de la conexi\u00f3n normal a Internet, se trata de la direcci\u00f3n asignada por el DHCP del router de Internet. En el caso del hotspot, la direcci\u00f3n es asignada por el dispositivo microcontrolador.</p>"},{"location":"guiamb/mblocks/#direccion-mac","title":"direcci\u00f3n MAC","text":"<p>De Wikipedia, la enciclopedia libre</p> <p>Una direcci\u00f3n de control de acceso al medio (direcci\u00f3n MAC) es un identificador \u00fanico asignado a un controlador de interfaz de red (NIC) para su uso como direcci\u00f3n de red en comunicaciones dentro de un segmento de red. Este uso es com\u00fan en la mayor\u00eda de las tecnolog\u00edas de red IEEE 802, incluidas Ethernet, Wi-Fi y Bluetooth. Tal y como suelen representarse, las direcciones MAC se reconocen como seis grupos de dos d\u00edgitos hexadecimales, separados por guiones, dos puntos o sin separador.</p> <p>Una direcci\u00f3n MAC tiene el formato siguiente:</p> <p> <p> Direcci\u00f3n MAC </p> <p></p> <p>En HWaddress: MAC address and OUI lookup podemos localizar informaci\u00f3n sobre direcciones MAC.</p> <p>En la imagen siguiente tenemos ampliada la informaci\u00f3n de la MAC:</p> <p> <p> /Direcc_jhyt67890'i\u00f3n MAC Obtenida de Wikipedia \u00c7kn ,._</p> <p></p> <p>El siguiente ejemplo nos devuelve la direcci\u00f3n MAC del ejemplo que demuestra la conexi\u00f3n a la red WIFI local mostrando las credenciales utilizadas.</p> <p> <p> MAC del dispositivo Descargar archivo</p> <p></p>"},{"location":"guiamb/mblocks/#permitir-wifi-y-ble","title":"Permitir WiFi y BLE","text":"<p> Para las placas que tienen funcionalidad WIFI y BLE soportadas en MicroBlocks, permite controlar el uso simult\u00e1neo de ambas al mismo tiempo, bas\u00e1ndose en la configuraci\u00f3n del interruptor booleano.</p> <p>MicroBlocks IDE soporta conectividad BLE, para poder editar el c\u00f3digo de forma inal\u00e1mbrica. Uno puede combinar esto con la funci\u00f3n WIFI de la placa si es necesario.</p>"},{"location":"guiamb/mblocks/#libreria-ble-scanner","title":"Libreria BLE Scanner","text":"<p>BLE Scanner Library es una herramienta para monitorizar dispositivos BLE p\u00fablicos y acceder a sus caracter\u00edsticas. La m\u00e1s \u00fatil de ellas es el nombre del dispositivo. Los dispositivos BLE tienen asignado un nombre corto o largo, y se pueden identificar en las listas de exploraci\u00f3n con esos nombres.</p> <p>BLE Scanner est\u00e1 desarrollado para ayudar a la comunidad Bluetooth, tanto desarrolladores como usuarios para rastrear dispositivos inteligentes Bluetooth.</p> <p>En las siguientes im\u00e1genes se ve c\u00f3mo un escaneo BLE muestra los nombres de los dispositivos y las direcciones MAC en una aplicaci\u00f3n de escaneo BLE de Android, as\u00ed como los nombres de los dispositivos en el escaneo interno de la configuraci\u00f3n BLE de Android.</p> <p> <p> Dispositivos emparejados y resultado BLE Scanner </p> <p></p> <p>Los bloques disponibles son:</p> <p> Bloque Descripci\u00f3n Devuelve TRUE cuando se detecta un dispositivo por escaneo BLE Devuelve el RSSI(*), oscila entre -26 (unos pocos cent\u00edmetros) y -100 (40-50 m de distancia) Devuelve la direcci\u00f3n MAC, un identificador \u00fanico de 48 bits Devuelve el tipo de direcci\u00f3n Devuelve el nombre del dispositivo Devuelve TRUE si el nombre del dispositivo es de tipo 8 o 9 <p>(*) RSSI (Received Signal Strength Indicator) o indicador de fuerza de la se\u00f1al recibida.</p> <p></p>"},{"location":"guiamb/ublocks/","title":"Programaci\u00f3n micro:STEAMakers","text":""},{"location":"guiamb/ublocks/#introduccion","title":"Introducci\u00f3n","text":"<p>De manera muy resumida lo que haremos en esta secci\u00f3n es:</p> <ul> <li>Describir los bloques y conceptos relacionados con la micro:STEAMakers.</li> <li>Incluiremos esquemas si resultan necesarios.</li> </ul> <p>AVISO</p> <p>Debido a que esta web se crea mientras la librer\u00eda micro:STEAMakers est\u00e1 en desarrollo, nos encontraremos con situaciones en las que las im\u00e1genes y programas tengan ciertos cambios entre lo que vemos aqu\u00ed y la realidad de la versi\u00f3n que estemos utilizando de MicroBlocks.</p>"},{"location":"guiamb/ublocks/#conexion-y-carga-de-la-libreria","title":"Conexi\u00f3n y carga de la libreria","text":"<p>La primera tarea que vamos a realizar es conectar la placa micro:STEAMakers a un puerto USB del ordenador mediante un cable USB-A / USB-C y desde el men\u00fa MicroBlocks (el engranaje) proceder a actualizar el firmware de la placa.</p> <p> <p> Actualizar el firmware de la placa</p> <p></p> <p>Al final del todo vemos como se pone en verde el icono USB indicando que la conexi\u00f3n est\u00e1 realizada y en la micro:STEAMakers se est\u00e1 ejecutando y la m\u00e1quina virtual se est\u00e1 ejecutando por lo que ya podemos trabajar en vivo con la placa.</p> <p> <p> Primer trabajo en vivo</p> <p></p> <p>Vamos a proceder a a\u00f1adir la libreria (creada por Joan Guill\u00e9n) con los bloques especificos de micro:STEAMakers. </p> <p> <p> Primer trabajo en vivo</p> <p></p>"},{"location":"guiamb/ublocks/#comentarios","title":"Comentarios","text":"<p>En MicroBlocks los comentarios son tratados desde un \u00fanico bloque que podemos encontrar en el men\u00fa 'Control'. Es un bloque que no hace nada. Se utiliza para a\u00f1adir notas y documentaci\u00f3n a los scripts.</p> <p> <p> Comentarios</p> <p></p> <p>La ventana de entrada de texto se autodimensiona seg\u00fan introducimos texto y se pueden a\u00f1adir l\u00edneas pulsando la tecla enter.</p>"},{"location":"guiamb/ublocks/#control","title":"Control","text":"<p>En este grupo tenemos acceso a los bloques de control de la micro:bit.</p> <ul> <li>al empezar. Los bloques debajo de este se ejecutan cuando se enciende la placa o cuando se hace clic en el icono verde EJECUTAR que tiene forma de flecha. Es uno de los bloques denominados sombrero.</li> </ul> <p> <p> Bloque 'al empezar'</p> <p></p> <ul> <li>por siempre. Se trata del bloque de la imagen y es un bloque que se ejecuta de manera indefinida.</li> </ul> <p> <p> Bloque 'por siempre'</p> <p></p> <ul> <li>espera xx milisegundos. Espera el n\u00famero de milisegundos indicado antes de continuar.</li> </ul> <p> <p> Bloque 'espera xx milisegundos'</p> <p></p>"},{"location":"guiamb/ublocks/#pantalla-leds-rgb","title":"Pantalla LEDs RGB","text":"<p>Estos son los bloques de control de la matriz de 5x5 LEDs RGB.</p> <p> <p> Bloques Pantalla LEDs RGB</p> <p></p> <ul> <li>m:s clear display (limpia pantalla). Apaga todos los LEDs.</li> </ul> <p> <p> Bloque m:s clear display (limpia pantalla)</p> <p></p> <p>Se trata de un bloque que pone a 0 (cero) el color de todos los LEDs RGB actualizando su estado. En la imagen siguiente vemos su definici\u00f3n:</p> <p> <p> Definici\u00f3n del bloque m:s clear display (limpia pantalla)</p> <p></p> <ul> <li>pantalla micro:STEAM. Muestra una imagen de la pantalla rodeada de las palabras \"micro:STEAM\" que permite cambiar el color de cada LED de manera individual haciendo clic sobre el mismo y utilizando la paleta RGB que se muestra.</li> </ul> <p> <p> Bloque pantalla micro:STEAM</p> <p></p> <p>El bloque lo que hace es sustituir el elemento de la lista '_ms_neoPixels' por el valor RGB que le demos desde la paleta. La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque pantalla micro:STEAM</p> <p></p> <p>En el video siguiente vemos el trabajo b\u00e1sico con el bloque en MicroBlocks, aunque el fuerte brillo de los LEDs deslumbra la webcam y no se aprecia en exceso. Vemos como la placa trabaja en vivo incluso en el men\u00fa de bloques sin necesidad de arrastrarlo al \u00e1rea de programa. Esto es especialmente \u00fatil para probar funcionalidad antes de llevarlo al programa.</p> <p> <p></p> <ul> <li>m:s display with (pantalla). Muestra la imagen que dibujemos en la pantalla cambiando el estado de cada LED haciendo clic sobre el mismo y asignando el color com\u00fan a todos los LEDs RGB con la paleta.</li> </ul> <p> <p> Bloque m:s display with (pantalla)</p> <p></p> <p>El bloque lo que hace es recorrer toda la matriz y sustituir el estado del LED que ha sido seleccionado (elemento de la lista '_ms_neoPixels') por el color escogido desde la paleta. La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque pantalla micro:STEAM</p> <p></p> <p>En el video siguiente vemos el uso b\u00e1sico del bloque para cambiar la carita de feliz a triste y asignarle el color rojo. Posteriormente se hace funcionar un ejemplo de uso sencillo.</p> <p></p> <ul> <li>m:s display image with color. Muestra la imagen que seleccionemos de la lista en la pantalla asignando el color com\u00fan a todos los LEDs RGB escogido con la paleta.</li> </ul> <p> <p> Bloque m:s display image with color</p> <p></p> <p>El bloque muestra la imagen seleccionada en el color escogido desde la paleta. La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque m:s display image with color</p> <p></p> <p>En la animaci\u00f3n siguiente tenemos un ejemplo de uso que utiliza diferentes im\u00e1genes.</p> <p> <p> Uso del bloque m:s display image with color Descargar programa</p> <p></p> <ul> <li>m:s set global brightness scale to. Este bloque permite establecer el brillo de los LEDs en porcentaje. Su aspecto es el siguiente:</li> </ul> <p> <p> Bloque m:s set global brightness scale to</p> <p></p> <p>La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque m:s set global brightness scale to</p> <p></p> <p>Retomamos el ejemplo \"Uso del bloque m:s display image with color\" para reformarlo modificando el brillo seg\u00fan la imagen que se muestra. En la animaci\u00f3n siguiente tenemos el resultado.</p> <p> <p> Uso del bloque m:s set global brightness scale to Descargar programa</p> <p></p> <ul> <li>m:s plot x,y with. Enciende el LED indicado en la coordenada x,y. La coordenadas x es la horizontal y la y es la vertical. La coordenada 1,1 es la esquina superior ezquierda, la 1,5 es la derecha, la 5,1 es la inferior izquierda y la 5,5 la inferior derecha. El color se elige desde la paleta. Las coordenadas por defecto corresponden al LED central.</li> </ul> <p> <p> Bloque m:s plot x,y with</p> <p></p> <p>La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque m:s plot x,y with</p> <p></p> <ul> <li>m:s unplot x,y. Apaga el LED indicado en la coordenada x,y. La coordenadas x es la horizontal y la y es la vertical. La coordenada 1,1 es la esquina superior ezquierda, la 1,5 es la derecha, la 5,1 es la inferior izquierda y la 5,5 la inferior derecha. Las coordenadas por defecto corresponden al LED central.</li> </ul> <p> <p> Bloque m:s unplot x,y</p> <p></p> <p>La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque m:s unplot x,y</p> <p></p> <ul> <li>color al azar. Genera un color aleatorio.</li> </ul> <p> <p> Bloque color al azar</p> <p></p> <p>La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque color al azar</p> <p></p> <p>En la animaci\u00f3n siguiente tenemos un ejemplo de uso de los bloques plot, unplot color al azar. El ejemplo lo que hace es recorrer dos bucles, o para las filas y otro para las columnas que har\u00e1 que se encienda un LED cada 100ms en un color aleatorio, se detenga un segundo y los apague en el mismo orden que se encendieron, se detiene un segundo y se inicia de nuevo el proceso.</p> <p> <p> Uso de los bloques m:s plot x,y; m:s unplot x,y y color al azar Descargar programa</p> <p></p> <ul> <li>m:s display character with. Genera un color aleatorio.</li> </ul> <p> <p> Bloque m:s display character with</p> <p></p> <p>La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque m:s display character with</p> <p></p> <ul> <li>color rva (0-255). Para establecer colores en formato RGB (sigla del ingl\u00e9s Red, Green, Blue; en espa\u00f1ol, \u2018Rojo, Verde, Azul\u2019 o RVA), donde (0,0,0) corresponde a negro y (255,255,255) a blanco. </li> </ul> <p> <p> Bloque color rva (0-255)</p> <p></p> <p>La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque color rva (0-255)</p> <p></p> <p>En la animaci\u00f3n siguiente tenemos un ejemplo de uso de los bloques m:s display character y color rva. El ejemplo muestra la palabra 'Hola' caracter a caracter y tras un segundo muestra de forma intermitente el caracter '!' en un color RGB aleatorio.</p> <p> <p> Uso de los bloques m:s display character y color rva Descargar programa</p> <p></p> <ul> <li>color hsv. Para establecer colores en formato HSV (siglas del ingl\u00e9s Hue, Saturation, Value \u2013 Matiz, Saturaci\u00f3n, Valor).</li> </ul> <p> <p> Bloque color HSV</p> <p> La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque color hsv</p> <p></p> <p>En la animaci\u00f3n siguiente tenemos un ejemplo de uso de estos bloques HSV.</p> <p> <p> Uso de los bloques color hsv Descargar programa</p> <p></p> <ul> <li>m:s scroll text with color (anima el texto). Muestra el texto introducido mediante desplazamiento caracter a caracter con el color que establezcamos.</li> </ul> <p> <p> Bloque m:s scroll text with color (anima el texto)</p> <p></p> <p>La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque m:s scroll text with color (anima el texto)</p> <p></p> <ul> <li>m:s stop scrolling. Detiene el desplazamiento o scroll del texto si se est\u00e1 realizando. Hay que tener presente que en el bloque scroll la detenci\u00f3n est\u00e1 desabilitada.</li> </ul> <p> <p> Bloque m:s stop scrolling</p> <p></p> <p>La definici\u00f3n del bloque es:</p> <p> <p> Definici\u00f3n del bloque m:s stop scrolling</p> <p></p> <p>A continuaci\u00f3n vemos un ejemplo de uso de estos bloques.</p> <p> <p> Uso de los bloques m:s scroll text with color y stop scrolling Descargar programa</p> <p></p>"},{"location":"guiamb/ublocks/#operadores","title":"Operadores","text":"<p>Esta entrada se crea porque en MicroBlocks, en el men\u00fa espec\u00edfico, aparecen algunos operadores especiales. Las descripciones siguiente son las obtenidas de MicroBlocks Wiki.</p> <p>Dentro del grupo de bloques est\u00e1ndar tenemos los que se ven en la imagen.</p> <p> <p> Bloques est\u00e1ndar</p> <p></p> <ul> <li>  Devuelve el resto de la divisi\u00f3n entre los dos n\u00fameros introducidos, ambos inclusive.</li> <li> Devuelve un n\u00famero aleatorio (al azar) entre el primer y el segundo valor indicado.</li> </ul> <p>En la imagen vemos un ejemplo donde se averigua si un n\u00famero generado al azar es par o impar.</p> <p>A la variable <code>num_aleatorio</code> se le asigna un n\u00famero aleatorio del 1 al 15. La operaci\u00f3n <code>m\u00f3dulo</code> se utiliza para comprobar si el resto es 0 y as\u00ed saber si el n\u00famero es par. Si el resto de la operaci\u00f3n <code>num_aleatorio</code> dividido por 2 da como resultado 0, el n\u00famero es par, en caso contrario es impar. Si el n\u00famero es par se muestra un cuadrado (4 lados = par) y si es impar un tri\u00e1ngulo rect\u00e1ngulo (3 lados = impar).</p> <p> <p> Par o impar Descargar el programa</p> <p></p> <p>Con este ejemplo comprobamos que una vez conectada la micro:STEAMakers (si no el programa nos indica que no lo est\u00e1 y no funcionar\u00e1), el bloque <code>di</code> muestra como retorno un mensaje que aparece asociado al bloque <code>al empezar</code> en la pantalla del ordenador. Esta es la forma de trabajar de MicroBlocks y hace que el c\u00f3digo se compruebe de manera instant\u00e1nea siempre que los bloques est\u00e9n acoplados a <code>al empezar</code>.</p> <ul> <li>  Devuelve <code>True</code> si la expesi\u00f3n de entrada del lado izquierdo coincide con la selecci\u00f3n del men\u00fa de tipos de datos realizada en el lado derecho. Los tipos de datos son importantes a la hora de programar. Aunque un entorno como MicroBlocks facilita las cosas a los usuarios principiantes al encargarse de las conversiones de tipos de datos, todav\u00eda es posible enga\u00f1arse visualmente al comparar variables cuyos valores parecen iguales. Este bloque pertenece al grupo de condicionales, pero se describe ahora porque se utiliza en el ejemplo siguiente.</li> </ul> <p> <p> N\u00famero o cadena Descargar el programa</p> <p></p> <p>En la secci\u00f3n 'Avanzados' vemos algunos bloques que representan operaciones bit a bit. Los operadores bit a bit (bitwise) trabajan sobre representaciones binarias de datos y su utilidad est\u00e1 en cambiar bits individuales en un operando. Los dos operandos asociados al operador bit a bit deben ser enteros. En la imagen vemos los bloques que aparecen en avanzados.</p> <p> <p> Bloques de operadores avanzados</p> <p></p> <ul> <li> Permite modificar el rango de un valor o variable desde un rango origen a un rango destino. Esta funci\u00f3n es especialmente \u00fatil para adaptar los valores le\u00eddos de sensores o para adaptar valores a aplicar en un actuador.</li> <li> Convierte una cadena Hexadecimal en un n\u00famero decimal. Por ejemplo, 5A hex. = 90 dec.</li> <li>  El operador AND compara dos bits y genera un resultado igual a 1 si ambos bits son 1; en caso contrario, devuelve 0. N\u00fameros de mas de un bit son comparados bit a bit. Un ejemplo de aplicaci\u00f3n lo vemos en la imagen siguiente.</li> </ul> <p> <p> bitwise AND</p> <p></p> <p>La tabla siguiente muestra la forma de obtener el resultado de forma te\u00f3rica.</p> <p> <p> </p> <p></p> <ul> <li>  El operador OR compara dos bits y devuelve 1 si uno o ambos bits son 1 y da 0 si ambos bits son 0. Bitwise OR compara todas las posiciones de bits de ambos n\u00fameros e informa de aquellas en las que cualquiera de los dos est\u00e1 a 1.</li> </ul> <p>Un ejemplo de aplicaci\u00f3n lo vemos en la imagen siguiente.</p> <p> <p> bitwise OR</p> <p></p> <p>La tabla siguiente muestra la forma de obtener el resultado de forma te\u00f3rica.</p> <p> <p> </p> <p></p> <ul> <li>  El operador EXCLUSIVE-OR compara dos bits y genera un resultado de 1 si los bits son complementarios (el bit se establece en un operando pero no en ambos); en caso contrario, devuelve 0. Otra forma de pensar en la operaci\u00f3n XOR es que invertir\u00e1 las posiciones de los bits en las que el segundo operando tenga un 1. Todas las dem\u00e1s se copiar\u00e1n igual.</li> </ul> <p>Un ejemplo de aplicaci\u00f3n lo vemos en la imagen siguiente.</p> <p> <p> bitwise XOR</p> <p></p> <p>La tabla siguiente muestra la forma de obtener el resultado de forma te\u00f3rica.</p> <p> <p> </p> <p></p> <ul> <li>  El operador NOT se utiliza para invertir (BIT FLIP) todos los bits del operando. Cuando el bit de posici\u00f3n m\u00e1s alta de un n\u00famero se convierte en 1, ese n\u00famero se considera un n\u00famero negativo. La representaci\u00f3n inform\u00e1tica real de un n\u00famero entero con signo en MicroBlocks es de 31 bits. El bit de mayor peso es un bit de signo. Esto permite n\u00fameros en el rango de -1073741824 a 1073741823. Cuando el bit de signo es 0, el n\u00famero es positivo; y cuando es 1, el n\u00famero es negativo.</li> </ul> <p>Un ejemplo de aplicaci\u00f3n lo vemos en la imagen siguiente.</p> <p> <p> bitwise NOT</p> <p></p> <p>La explicaci\u00f3n es sencilla, el n\u00famero 3 (0011) se convierte al binario 1100 y como el bit de mayor peso es 1 indica que es negativo y el n\u00famero es 4, por lo tanto el resultado es -4.</p> <ul> <li> El valor del operando izquierdo se desplaza hacia la izquierda el n\u00famero de bits especificado por el operando derecho. Los bits se desplazan hacia la izquierda, el bit situado m\u00e1s a la izquierda se descarta y al bit situado m\u00e1s a la derecha se le asigna el valor 0. Cada posici\u00f3n de bit desplazada a la izquierda equivale en binario a multiplicar por 2. En la imagen siguiente vemos el funcionamiento del desplazamiento a la izquierda a nivel de bit.</li> </ul> <p> <p> bitwise desplazamiento izquierda</p> <p></p> <ul> <li> El valor del operando izquierdo se desplaza hacia la derecha el n\u00famero de bits especificado por el operando derecho. Los bits se desplazan hacia la derecha, el bit situado m\u00e1s a la derecha se descarta y al bit situado m\u00e1s a la izquierda se le asigna una copia del bit de signo. Esto se denomina desplazamiento aritm\u00e9tico. Por cada posici\u00f3n de bit desplazada a la derecha, esta operaci\u00f3n es el equivalente binario de dividir por 2. En la imagen siguiente vemos el funcionamiento del desplazamiento a la derecha a nivel de bit.</li> </ul> <p> <p> bitwise desplazamiento izquierda</p> <p></p>"},{"location":"guiamb/ublocks/#variables","title":"Variables","text":"<p>En MicroBlocks se contemplan dos tipos de variables, las globales y las locales. Cuando hablamos en estos t\u00e9rminos hablamos de \u00e1mbito (scope) de las variables y determina la zona donde se define la variable, que son global y local.</p> <p>Las variables locales son las definidas dentro de una funci\u00f3n y solamente est\u00e1 disponible para el c\u00f3digo que se ejecuta dentro de la funci\u00f3n.</p> <p>Las variables globales se definen en cualquier punto del programa, normalmente al principio, y pueden ser llamadas desde cualquier sitio del programa, incluso desde las funciones.</p> <ul> <li> Este bloque es en realidad un bot\u00f3n que crea una nueva variable global. Si existe una variable con el mismo nombre, se crear\u00e1 una nueva con el mismo nombre y el n\u00famero 2 a\u00f1adido. Cuando creamos una variable se nos pide el nombre de la misma en una ventana emergente y una vez creada aparecer\u00e1 un nuevo bloque para acceder al valor de la variable creada. Adem\u00e1s esta nueva variable estar\u00e1 disponible para su selecci\u00f3n en dos de los bloques que explicaremos despu\u00e9s.</li> <li>  Este bloque es en realidad un bot\u00f3n que sirve para eliminar una variable previamente creada.</li> </ul> <p>En la animaci\u00f3n siguiente vemos el proceso de creaci\u00f3n y eliminaci\u00f3n de variables.</p> <p> <p> Creaci\u00f3n y eliminaci\u00f3n de variables</p> <p></p> <p>La opci\u00f3n de mostrar el nombre de las variables mostrada desde el bloque se puede utilizar para a\u00f1adir variables mientras se edita el c\u00f3digo del programa, sin pasar a las opciones de la categor\u00eda variables.</p> <ul> <li>  Este bloque asigna el valor a cualquier variable, global o local, en la cantidad especificada en el \u00e1rea de entrada. La cantidad que se asigna puede ser un n\u00famero positivo o negativo. Para mostrar los nombres de las variables locales en el men\u00fa de selecci\u00f3n, este bloque debe estar f\u00edsicamente unido a la secuencia de bloques en la que se utiliza el bloque 'Inicializar local' que veremos a continuaci\u00f3n.</li> <li>  Este bloque suma algebraicamente (cambia) el valor de cualquier variable, global o local, en la cantidad especificada en el \u00e1rea de entrada. La cantidad de cambio puede ser un n\u00famero positivo o negativo.</li> <li>  Este bloque se utiliza para crear e inicializar variables locales. El nombre predeterminado de la variable 'var' puede cambiarse por cualquier otro haciendo clic en el nombre y escribiendo un nuevo nombre en el cuadro de di\u00e1logo que se abre. Desp\u00e9s, si es necesario cambiar el valor de la variable local, se puede utilizar el bloque 'asigna valor a' de la categor\u00eda variables. En la animaci\u00f3n siguiente vemos este proceso y la disponibilidad o no de la variable local.</li> </ul> <p> <p> Inicializa variable local</p> <p></p> <p>Una variable global tiene:</p> <ul> <li>Alcance global: Una variable global puede utilizarse en cualquier script que no tenga una variable local del mismo nombre que la anule.</li> <li>Tiempo de vida largo: Una variable global es creada expl\u00edcitamente y vive hasta que es expl\u00edcitamente borrada. Conserva su valor cuando los scripts se inician y detienen e incluso cuando no hay scripts en ejecuci\u00f3n. Sin embargo, al hacer clic en el bot\u00f3n \"Detener\", todas las variables globales se borran e inicializan con el valor cero. Las variables globales tambi\u00e9n se inicializan a cero cuando se crean por primera vez y cuando se carga un proyecto.</li> </ul> <p>Por el contrario, una variable local tiene:</p> <ul> <li>\u00c1mbito local: Una variable local s\u00f3lo puede utilizarse en el script en el que aparece. Si varios scripts utilizan variables locales con el mismo nombre, esas variables son independientes entre s\u00ed. Aunque esta pr\u00e1ctica se desaconseja porque puede inducir a errores.</li> <li>Tiempo de vida limitado: Una variable local de un script se crea cuando se inicia el script y se elimina cuando \u00e9ste finaliza. Se crea una nueva variable local cada vez que se inicia un script (incluyendo un script de funci\u00f3n), y las variables locales de cada invocaci\u00f3n de script son independientes entre s\u00ed.</li> <li>Precedencia sobre las globales: Si una variable local tiene el mismo nombre que una variable global, la variable local prevalece sobre la global en el script en el que aparece la variable local. Una variable es local en todo el script sin importar en qu\u00e9 parte del script aparezca \"inicializar var local a\", aunque es una buena pr\u00e1ctica de codificaci\u00f3n que \"inicializar var local a\" preceda a cualquier otra referencia a esa variable.</li> </ul> <p>Un ejemplo comentado de aplicaci\u00f3n lo vemos en la imagen siguiente.</p> <p> <p> Variables Descargar el programa</p> <p></p>"},{"location":"guiamb/ublocks/#bucles","title":"Bucles","text":"<p>En el caso de MicroBlocks los bucles, condicionales y funciones est\u00e1n todos englobados en la categor\u00eda 'Control'. Vamos a ver algunos de ellos en esta ocasi\u00f3n y los que no veamos en esta actividad se ir\u00e1n viendo cuando los necesitemos.</p> <ul> <li>  Los bloques con forma de sombrero forman parte de un grupo de bloques de control que comienzan a ejecutarse cuando se pulsa el icono verde <code>Inicia</code>. Este bloque se activa cuando se cumple la condici\u00f3n de inicio del programa.</li> <li>  Los bloques con forma de \"C\" son un grupo de bloques de control que ejecutan el c\u00f3digo colocado en su interior siempre que se cumplan las condiciones descritas en sus subt\u00edtulos. Estos son los bloques de tipo bucle. Este en particular ejecutar\u00e1 los bloques en su interior indefinidamente.</li> <li>  Este bloque C ejecuta el c\u00f3digo colocado en su interior el n\u00famero especificado de veces.</li> </ul> <p>En el ejemplo siguiente veremos tanto en el programa como en la pantalla la suma de los 10 primero n\u00fameros naturales.</p> <p> <p> Suma de los 10 primeros n\u00fameros Descargar el programa</p> <p></p> <ul> <li> <p>  Este bloque es tambi\u00e9n de tipo C y pertenece al grupo de los bucles. Funciona de dos formas distintas en funci\u00f3n del tipo de entrada especificado.</p> </li> <li> <p>Si la entrada es un n\u00famero, los bloques interiores se ejecutar\u00e1n tantas veces como el n\u00famero. En cada iteraci\u00f3n del bucle, empezando por uno, el par\u00e1metro o variable de control es 'i' por defecto y se incrementar\u00e1 en uno. Este valor se puede utilizar en el c\u00f3digo del programa como se crea conveniente.</p> </li> <li>El nombre del par\u00e1metro de control puede cambiarse por otro haciendo clic en la 'i' y escribiendo un nuevo nombre.</li> <li>Si la entrada es una lista, los bloques colocados dentro se ejecutar\u00e1n tantas veces como elementos tenga la lista. En cada iteraci\u00f3n, el par\u00e1metro de control 'i' tomar\u00e1 el valor de cada elemento de la lista de manera secuencial.</li> </ul> <p>En el ejemplo siguiente vemos una animaci\u00f3n de un sencillo programa de como hacer un contador con los 5 primeros n\u00fameros y hacer que se muestre en el ordenador y en la pantalla de la micro:STEAMakers.</p> <p> <p> Mostrar los 5 primeros n\u00fameros Descargar el programa</p> <p></p> <ul> <li>  Este bloque pausa el flujo de ejecuci\u00f3n del programa por el tiempo especificado en milisegundos. Se utiliza para pausar y reanudar la ejecuci\u00f3n de c\u00f3digo de forma controlada.</li> <li>  Este bloque pausa el flujo de ejecuci\u00f3n del programa por el tiempo especificado en microsegundos. Se utiliza para pausar y reanudar la ejecuci\u00f3n de c\u00f3digo de forma controlada.</li> <li>  Emite el mensaje especificado. V\u00e9ase en conjunto a . Este bloque env\u00eda el contenido del mensaje especificado. Todos los bloques de mensajes <code>al recibir</code> con el mismo mensaje en su contenido recibir\u00e1n el mensaje y actuar\u00e1n ejecutando su contenido.</li> <li>  Ejecuta cuando se emita el mensaje especificado. Este bloque y su par funcional  se suelen utilizar juntos para conseguir un medio de comunicaci\u00f3n dentro del programa. Cualquier mensaje enviado con el comando <code>env\u00eda</code> es detectado y recibido por este bloque. As\u00ed, los bloques colocados bajo este bloque se ejecutar\u00e1n al recibir el mensaje correspondiente. Los mensajes pueden ser cadenas o n\u00fameros. Adem\u00e1s, el bloque  contiene el \u00faltimo mensaje emitido y recibido.</li> <li>  Devuelve el \u00faltimo mensaje enviado en todo el programa, cronol\u00f3gicamente hablando. N\u00f3tese que NO es el \u00faltimo mensaje recibido por una secuencia de bloques concreta del programa, y es independiente de la ejecuci\u00f3n del bloque <code>al recibir</code>. No hay colas de mensajes en el sistema. Si no hay ning\u00fan <code>al recibir</code> en espera cuando se env\u00eda un mensaje, se perder\u00e1 y ser\u00e1 sobrescrito por el siguiente mensaje.</li> </ul> <p>En el ejemplo siguiente vemos de forma sencilla el funcionamiento de estos tres \u00faltimos bloques.</p> <p> <p> Di el \u00faltimo mensaje Descargar el programa</p> <p></p>"},{"location":"guiamb/ublocks/#listas","title":"Listas","text":"<p>Los bloques para trabajar con listas est\u00e1n en el men\u00fa 'Datos' y los disponibles los vemos en la imagen siguiente.</p> <p> <p> Bloques para Listas. Datos</p> <p></p> <ul> <li> Devuelve una lista corta que contiene algunos elementos en ingl\u00e9s. Con las flechas podemos a\u00f1adir o eliminar elementos a la lista aunquw a partir del cuarto se repite siempre el mismo. Para crear una lista vac\u00eda () basta con eliminar el \u00fanico elemento existente cuando se crea una nueva.</li> <li> Une (concatena) cadenas, listas o matrices de bytes y devuelve el resultado.</li> <li> Devuelve el car\u00e1cter Unicode del n\u00famero dado.</li> <li> Devuelve el en\u00e9simo elemento de una lista, cadena o matriz de bytes.</li> <li>  Combina los elementos de una lista en una cadena, opcionalmente se puede usar un car\u00e1cter delimitador.</li> <li>  A\u00f1ade un elemento al final de una lista.</li> </ul> <p>En el ejemplo siguiente vemos el uso de estos bloques. Comenzamos por crear una cadena de caracteres de la que vamos a extraer la palabra \"un\" mediante la uni\u00f3n de los elementos 9 y 10 de la cadena. Se crea una lista con cuatros animales y finalmente se muestra la palabra 'un' seguida de la posici\u00f3n 3 de la lista creada.</p> <p> <p> Un pajaro Descargar el programa</p> <p></p> <p>En este otro ejemplo vemos como se generan los caracteres de lat\u00edn b\u00e1sico comenzando por el espacio en blanco (32), diferentes s\u00edmbolos, n\u00fameros, letras may\u00fasculas y letras min\u00fasculas. Se muestra en pantalla un caracter cada 100ms y en pantalla la lista completa de caracteres generados.</p> <p> <p> Caracteres Unicode de Lat\u00edn b\u00e1sico Descargar el programa</p> <p></p> <ul> <li> Devuelve el n\u00famero de elementos de una lista, cadena o matriz de bytes.</li> <li> Sustituye el en\u00e9simo elemento de una lista por el valor dado. Tambi\u00e9n puede sustituir todos los elementos por un valor.</li> <li> Elimina el elemento N de una lista. La lista resultante se reduce de tama\u00f1o. Tambi\u00e9n puede eliminar todos los elementos.</li> </ul> <p>A continuaci\u00f3n vemos un ejemplo en el que se demuestra la funcionalidad de estos tres bloques.</p> <p> <p> Sustituir, eliminar y tama\u00f1o Descargar el programa</p> <p></p> <ul> <li> Devuelve la posici\u00f3n de la primera coincidencia de una subcadena dentro de una cadena o un elemento de una lista. Devuelve -1 si no encuentra coincidencias.</li> </ul> <p>En el ejemplo siguiente las variables locales <code>cadena</code> y <code>animales</code> se inicializan como de tipo string y list respectivamente. El primer conjunto de resultados opera sobre la cadena, buscando la posici\u00f3n de la primera apariciones de \"es\". La primera coincidencia se encuentra en el car\u00e1cter n\u00famero uno. La segunda b\u00fasqueda se inicia en el car\u00e1cter n\u00famero tres, y localiza el objetivo de la b\u00fasqueda en el car\u00e1cter n\u00famero seis. La b\u00fasqueda de \"perro\" en la lista 'animales' la encuentra en el elemento n\u00famero dos de la lista. La segunda b\u00fasqueda de \"perro\" en la lista 'animales' comienza en el elemento n\u00famero tres y devuelve -1 porque no lo encuentra. No hay ning\u00fan \"raton\" en la lista, por lo que la b\u00fasqueda devuelve -1.</p> <p> <p> Buscar Descargar el programa</p> <p></p> <ul> <li> Copia una cadena desde/hasta el caracter especificado, o una desde/hasta el elemento indicado. Como ya sabemos para mostrar el par\u00e1metro hasta hay que hacer clic en el tri\u00e1ngulo negro.</li> </ul> <p> <p> Copiar Descargar el programa</p> <p></p> <ul> <li> Devuelve una lista separando la cadena especificada por el delimitador opcional. Si no se especifica ning\u00fan delimitador, la cadena se divide por cada car\u00e1cter.</li> </ul> <p>En la imagen vemos una cadena delimitada por comas que separa los caracteres mediante el delimitador coma en una lista de tres elementos.</p> <p> <p></p> <p></p> <p>A continuaci\u00f3n vemos una cadena que incluye un car\u00e1cter retorno de l\u00ednea despu\u00e9s del ABC y DEF que se separa mediante el caracter unicode de nueva l\u00ednea (return) en una lista de tres elementos.</p> <p> <p></p> <p></p> <p>En este otro caso separamos la URL de la descarga de MicroBlocks en partes mediante el delimitador /.</p> <p> <p></p> <p></p> <ul> <li>  Devuelve el valor Unicode del car\u00e1cter en\u00e9simo de la cadena introducida. El n\u00famero de caracteres introducido debe estar comprendido entre uno y la longitud de la cadena. Este bloque es el opuesto de .</li> </ul> <p> <p></p> <p></p> <ul> <li> Crea una nueva lista del n\u00famero de elementos especificado. Hay que controlar la disponibilidad de memoria. Los elementos de la lista creada se pueden inicializar a cualquier valor utilizando la opci\u00f3n de bloque con todos.</li> <li> Crea una matriz del n\u00famero de elementos especificado en funci\u00f3n de la disponibilidad de memoria. Cada elemento es de tama\u00f1o byte y se le pueden asignar valores en el rango de 0-255 (0-FF).</li> <li> Devuelve una cadena que indica el n\u00famero de palabras de 32 bits de memoria din\u00e1mica disponibles para asignar nuevos objetos (cadenas, listas o matrices de bytes). Al pulsar el bot\u00f3n de parada se libera toda la memoria. Justo despu\u00e9s de pulsar el bot\u00f3n de parada, este bloque informa del total de memoria din\u00e1mica disponible en un dispositivo determinado. Los dispositivos tienen diferentes cantidades de memoria din\u00e1mica, basadas en la cantidad de RAM proporcionada por el hardware. Por ejemplo, la micro:bit v2 tiene mucha m\u00e1s RAM que la micro:bit original.</li> </ul> <p>Un ejemplo de uso.</p> <p> <p> Nueva lista Descargar el programa</p> <p></p> <ul> <li>  Convierte un byte, una lista o una cadena especificada en una matriz de bytes. Cada elemento es el valor unicode de las letras de la cadena en el rango de 0-255 (0-FF).</li> </ul>"},{"location":"guiamb/ublocks/#mas-operadores","title":"Mas operadores","text":"<p>Los operadores a\u00fan no vistos son:</p> <p> <p></p> <p>Operadores aritm\u00e9ticos, de comparaci\u00f3n y booleanos</p> <p></p> <p>Los operadores aritm\u00e9ticos y de comparaci\u00f3n no requieren de mayor explicaci\u00f3n por lo que nos vamos a centrar en los booleanos.</p> <ul> <li> Operador booleano <code>True</code> o <code>False</code>. Devuelve verdadero o falso en funci\u00f3n de la posici\u00f3n del selector, o de la evaluaci\u00f3n binaria de la expresi\u00f3n utilizada como entrada. Este bloque se usa dentro de muchos otros bloques, donde se utiliza para controlar el flujo de las ejecuciones y eventos.</li> </ul> <p>El bloque <code>if</code> es un buen ejemplo para demostrar el uso del bloque verdadero/falso.</p> <p> <p> Uso sencillo del operador <code>True/False</code> Descargar el programa</p> <p></p> <p>El c\u00f3digo del ejemplo se ejecuta de dos maneras diferentes siempre dentro de un bucle infinito en el que se genera un n\u00famero aleatorio que puede valer 1, 2 o 3:</p> <ul> <li>La primera es la condici\u00f3n de la rama <code>IF</code> que ser\u00e1 verdadera si el n\u00famero generado es 1.</li> <li>La segunda es la rama <code>ELSE IF</code> que se eval\u00faa si la condici\u00f3n del <code>IF</code> no es verdadera y se pone a verdadero, ejecutando su c\u00f3digo.</li> <li> <p>La tercera es la condici\u00f3n <code>ELSE</code> a la que nunca se llega porque si el n\u00famero vale 1 se ejecuta el <code>IF</code> y si no se ejecuta el <code>ELSE IF</code> que siempre es cierto. Es decir, aunque se genere <code>variable = 3</code> la condici\u00f3n <code>ELSE</code> no se ejecuta.</p> </li> <li> <p> Invierte el valor l\u00f3gico asociado a la expresi\u00f3n sobre la que opera. Tal y como se muestra, <code>NOT</code> devolver\u00e1 <code>FALSE</code> si el deslizador se establece en <code>TRUE</code>, y <code>TRUE</code> si se establece en <code>FALSE</code>.</p> </li> </ul> <p>En el ejemplo siguiente, una variable llamada <code>cadena</code> se inicializa como \"MicroBlocks es genial\", y una variable llamada <code>expresion</code> se inicializa en <code>TRUE</code> de una forma peculiar, diciendo que algo es igual a si mismo. Cuando se aplica <code>NOT</code> al resultado de la expresi\u00f3n de igualdad, se cambia a <code>FALSE</code>.</p> <p> <p> Uso sencillo del operador <code>NOT</code> Descargar el programa</p> <p></p> <ul> <li>  Devuelve verdadero s\u00f3lo si todas sus entradas son verdadero y devuelve falso en caso contrario. Como ambas condiciones tienen que ser verdaderas para obtener un resultado verdadero, si se detecta un falso en la primera condici\u00f3n, no es necesario evaluar la segunda; se devuelve falso inmediatamente.</li> </ul> <p>En el ejemplo tenemos dos variables <code>salir</code> y <code>llueve</code> que se inicializan a falso. Se muestran una serie de mensajes y al final se eval\u00faa si \"necesito un paraguas\" comprobando si es cirto 'voy a salir y si llueve'. Si no necesito un paraguas se muestra en pantalla un check y si lo necesito se muestra un paraguas. Ambas condiciones tienen que ser verdaderas para que necesitemos un paraguas. Podemos cambiar el estado de las variables y comprobar lo que ocurre.</p> <p> <p> Uso sencillo del operador <code>AND</code> Descargar el programa</p> <p></p> <ul> <li>  Devuelve verdadero si uno o ambos operandos son verdaderos y devuelve falso en caso contrario. Similar a <code>AND</code> pero opuesto a \u00e9l, aqu\u00ed s\u00f3lo una de las dos condiciones tiene que ser verdadera para un resultado verdadero. Por lo tanto, si la primera condici\u00f3n es verdadera, no es necesario comprobar la segunda.</li> </ul> <p>En el ejemplo estamos generando aleatoriamente dos n\u00fameros en el rango de 1 a 5. A continuaci\u00f3n, comprobamos si alguno de los dos n\u00fameros es igual al n\u00famero que estamos buscando (3). El bloque <code>OR</code> se utiliza para verificar el resultado de la comparaci\u00f3n.</p> <p> <p> Uso sencillo del operador <code>OR</code> Descargar el programa</p> <p></p> <p>Cada vez que pulsemos en 'Iniciar' se genera un nuevo resultado.</p>"},{"location":"guiamb/ublocks/#botones-y-bloques-de-control","title":"Botones y bloques de control","text":"<ul> <li>m:s button? Este bloque permite saber si se ha pulsado el bot\u00f3n A o el B.</li> </ul> <p> <p> Bloque m:s button?</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p> Definici\u00f3n del bloque m:s button?</p> <p></p> <ul> <li>m:s touching? Este bloque permite saber si se ha tocado (pulsado) la zona t\u00e1ctil.</li> </ul> <p> <p> Bloque m:s touching?</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p> Definici\u00f3n del bloque m:s touching?</p> <p></p> <p>En el ejemplo siguiente vemos el uso b\u00e1sico de estos tres bloques de la libreria micro:STEAMakers.</p> <p> <p> Uso sencillo de los botones Descargar el programa</p> <p></p> <ul> <li>  El bloque <code>IF</code> comprueba la condici\u00f3n booleana y ejecuta los bloques de una sola vez si la condici\u00f3n booleana se eval\u00faa como verdadera. El tri\u00e1ngulo negro permite la expansi\u00f3n del bloque <code>IF</code> con m\u00faltiples condiciones <code>ELSE IF</code> a\u00f1adidas. En caso de que las ramas <code>IF</code> o <code>ELSE IF</code> anteriores no sean verdaderas, entonces se eval\u00faan y ejecutan sucesivamente cada una de las siguientes <code>ELSE IF</code>.</li> </ul> <p>En el ejemplo siguiente, a la variable <code>aleatorio</code> se le asigna un n\u00famero al azar entre el 1 y el 9. La operaci\u00f3n MOD se utiliza para sondear el estado par/impar del n\u00famero. Si el resto de la operaci\u00f3n 'num dividido por 2' da como resultado 0, el n\u00famero es par, en caso contrario es impar.</p> <p> <p> Sentencia <code>IF</code> Descargar el programa</p> <p></p> <p>Cada vez que pulsemos en 'Iniciar' se genera un nuevo resultado, se indica si el n\u00famero es par o impar mientras se muestra el n\u00famero en los LEDs.</p> <ul> <li>  El bloque 'cuando' comprueba repetidamente una condici\u00f3n booleana. Cuando la condici\u00f3n se convierte en verdadera, se ejecutan los bloques bajo el sombrero. Si la condici\u00f3n sigue siendo verdadera al final de la ejecuci\u00f3n, entonces los bloques se ejecutar\u00e1n de nuevo, y ese proceso se repite hasta que la condici\u00f3n se convierte en falsa.</li> </ul> <p>Nota: El sombrero 'cuando' incluye una espera de 10 milisegundos entre ciclos. Esto es \u00fatil para eliminar ruido en las entradas, por ejemplo rebotes en los botones, pero limita el rendimiento a un m\u00e1ximo de 100 iteraciones/segundo.</p> <p>Vamos a ver el mismo ejemplo que en el bloque <code>IF</code> pero utilizando este bloque. Los tres bloques del tipo <code>WHEN</code> empiezan a funcionar simult\u00e1neamente cuando se pulsa el icono <code>START</code>. El bloque 'por siempre' debajo de 'al empezar' genera un n\u00famero aleatorio cada segundo. Y de forma simultanea los otros dos bloques evaluan continuamente sus condiciones mostrando el resultado que corresponde a cada uno.</p> <p> <p> Bloque 'cuando' Descargar el programa</p> <p></p> <ul> <li>  Este bloque de control pausa la ejecuci\u00f3n del programa y espera hasta que la condici\u00f3n booleana especificada se convierta en verdadera. Se puede utilizar para sincronizar bloques de c\u00f3digo que se ejecutan en paralelo, bas\u00e1ndose en los eventos monitorizados.</li> <li>m:s light %. Este bloque permite trabajar con el nivel de iluminaci\u00f3n medido por el sensor montado en la placa micro:STEAMakers.</li> </ul> <p> <p> Bloque m:s light %</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p> Definici\u00f3n del bloque m:s light %</p> <p></p> <p>En este ejemplo, el nivel de luz ambiental se controla mediante el sensor de luz integrado. Cuando se inicia el programa, ambos bloques 'cuando se pulse el boton' comienzan a ejecutarse y a comprobar el estado del bot\u00f3n.</p> <p>Al pulsar el bot\u00f3n A, se inicia la monitorizaci\u00f3n de la luz y el programa espera hasta que los sensores de la micro:bit informen de un nivel de luz &lt; 75. Cuando esa condici\u00f3n se cumple, se emite una alerta para avisar de que hay que encender las luces.</p> <p>El bot\u00f3n B est\u00e1 programado para detener el proceso de monitorizaci\u00f3n. Al pulsarlo, detiene la ejecuci\u00f3n de esa rama del programa.</p> <p> <p> Bloque 'cuando se pulsa el boton' Descargar el programa</p> <p></p> <p>El bloque 'deten las otras tareas' se explica un poco mas adelante.</p> <ul> <li> <p>  El bloque <code>RETURN</code> se utiliza para devolver el valor especificado en su \u00e1rea de entrada. El valor retornado puede ser cualquier tipo de dato. Aunque es posible utilizar el bloque <code>RETURN</code> en cualquier parte de un programa para mostrar un valor, de forma similar al bloque <code>di</code>, su uso correcto y m\u00e1s com\u00fan es en una funci\u00f3n (o bloque personalizado) para devolver un valor como resultado del proceso realizado. Hay que tener en cuenta que los bloques colocados despu\u00e9s del bloque <code>RETURN</code> no se ejecutar\u00e1n.</p> </li> <li> <p>  Este bloque tipo C es un bucle que se utiliza para ejecutar los bloques colocados dentro de \u00e9l, mientras que la condici\u00f3n booleana especificada se convierte en verdadera. En ese momento, se ejecutar\u00e1 el siguiente bloque despu\u00e9s del bloque en forma de C.</p> </li> </ul> <p>En el ejemplo vemos como se monitoriza si se ha pulsado el bot\u00f3n A enviando un mensaje.</p> <p> <p> Bloque 'repetir hasta que' Descargar el programa</p> <p></p> <ul> <li>  Este bloque, y su par relacionado , se utilizan para controlar el hilo de ejecuci\u00f3n del programa. Este bloque detiene la ejecuci\u00f3n de todos los bloques de los que forma parte, o que est\u00e1n bajo el mismo bloque sombrero. Una vez ejecutado este bloque en un grupo de bloques, no se ejecutar\u00e1 nada m\u00e1s en ese grupo.</li> </ul> <p>En el ejemplo siguiente, el grupo de bloques de la derecha est\u00e1 en un bucle continuo que cuenta hacia atr\u00e1s y decrementa su variable local <code>numero</code>. El grupo de bloques de la izquierda tambi\u00e9n est\u00e1 en un bucle continuo, contando hacia abajo y decrementando su variable local <code>numero</code>. Cuando la cuenta atr\u00e1s alcanza el valor 7 se cumple la condici\u00f3n del <code>else if</code> y se detiene la cuenta del bloque derecho, mientras que la secuencia del bloque izquierdo continua su ejecuci\u00f3n hasta que se cumpla la condici\u00f3n del <code>if</code> que ser\u00e1 cuando se alcance el n\u00famero 2, momento en que se detiene esta tarea.</p> <p>Podemos comprobar como el \u00faltimo bloque <code>di</code> de la secuencia de la izquierda NUNCA se ejecuta porque una vez que el bloque 'deten esta tarea' se ejecuta, todas las actividades de este bloque izquierdo terminan.</p> <p> <p> Bloques 'deten esta tarea' y 'deten las otras tareas' Descargar el programa</p> <p></p>"},{"location":"guiamb/ublocks/#graficado-de-datos","title":"Graficado de datos","text":"<p>En MicroBlocks es relativamente sencillo trabajar los datos de forma gr\u00e1fica y para ello disponemos de un bloque para indicar el dato que queremos ver de manera gr\u00e1fica y un icono en el men\u00fa que abre la ventana flotante 'Gr\u00e1fico de datos'.</p> <p> <p> Bloque e icono para mostrar 'Gr\u00e1fico de datos'</p> <p></p>"},{"location":"guiamb/ublocks/#bloque","title":"Bloque","text":"<p>Est\u00e1 disponible en el men\u00fa 'Salida'.</p> <ul> <li>. Graficar\u00e1 el valor introducido en el panel de visualizaci\u00f3n de gr\u00e1ficos de datos. Se puede graficar cualquier tipo de dato: n\u00fameros, valores de pines digitales y anal\u00f3gicos, salidas de sensores, etc. Si tenemos que representar gr\u00e1ficamente m\u00e1s de un dato, hacemos clic en el tri\u00e1ngulo negro para mostrar campos de datos adicionales. Se pueden graficar hasta seis valores simult\u00e1neos con diferentes colores.</li> </ul> <p>La representaci\u00f3n gr\u00e1fica s\u00f3lo es posible en el IDE. Por lo tanto, s\u00f3lo es posible realizar gr\u00e1ficos mientras el microdispositivo est\u00e1 conectado al ordenador. Si intentamos realizar un gr\u00e1fico mientras no est\u00e1 conectado al ordenador, aparecer\u00e1 el mensaje \"Placa no conectada\".</p>"},{"location":"guiamb/ublocks/#panel-grafico","title":"Panel gr\u00e1fico","text":"<p>Se activa desde el icono y tiene el siguiente aspecto:</p> <p> <p> Panel 'Gr\u00e1fico de datos'</p> <p></p> <p>El panel Gr\u00e1ficos de datos muestra los valores utilizados con el bloque de gr\u00e1ficos. El eje y del panel puede escalarse utilizando los controles de zoom del propio panel, y el eje x se desplazar\u00e1 lateralmente a medida que se grafiquen m\u00e1s datos.</p> <p>La ventana de visualizaci\u00f3n del gr\u00e1fico se puede redimensionar con el control situado en la esquina inferior derecha y puede colocarse en cualquier lugar de la ventana del IDE.</p> <p>Tras el registro de cualquier dato, la ventana de visualizaci\u00f3n de gr\u00e1ficos puede cerrarse y abrirse, si es necesario, sin que se pierda ning\u00fan dato ni la imagen visualizada, aunque si pierde la reconfiguraci\u00f3n realizada en la misma, como la posici\u00f3n del cero, el tama\u00f1o, etc. Adem\u00e1s, es posible desconectar y volver a conectar el dispositivo en uso, sin perder los datos del gr\u00e1fico.</p> <p>En la animaci\u00f3n vemos como funciona lo indicado. El escalado con la lupa del menos amplia el rango de valores del eje y, con la lupa del mas lo disminuye y la lupa del igual restaura la situaci\u00f3n inicial tras el redimensionado de la ventana.</p> <p> <p> Funcionamiento de 'Gr\u00e1fico de datos'</p> <p></p>"},{"location":"guiamb/ublocks/#opciones-del-panel-grafico","title":"Opciones del panel gr\u00e1fico","text":"<p>Se accede haciendo clic con el bot\u00f3n derecho del rat\u00f3n en cualquier zona del panel. Si tenemos el cursor del rat\u00f3n sobre la zona de las lupas no funcionar\u00e1.</p> <p> <p> Opciones de 'Gr\u00e1fico de datos'</p> <p></p> <p>El men\u00fa de opciones del gr\u00e1fico permite controlar la visualizaci\u00f3n de los ejes, as\u00ed como la importaci\u00f3n/exportaci\u00f3n de datos y el ajuste de la frecuencia de muestreo de datos.</p> <ul> <li>limpiar gr\u00e1fico. Borra cualquier gr\u00e1fico de la ventana de visualizaci\u00f3n de datos.</li> <li>cero abajo. Sit\u00faa el punto de origen del eje y en la parte inferior del \u00e1rea de visualizaci\u00f3n del gr\u00e1fico.</li> <li>exportar datos a archivo CSV. Permite guardar los datos del gr\u00e1fico en formato CSV. Se exportan los \u00faltimos diez mil (10000) valores.</li> <li>importar datos desde archivo CSV. Permite cargar datos CSV desde el ordenador en el que se est\u00e1 ejecutando MicroBlocks. Los datos importados se grafican y se muestran en el 'Gr\u00e1fico de datos'. Es posible importar 10000 valores. Si tenemos mas de un dato para graficar, estos no se exportan individualmente sino todos juntos eparados por comas.</li> <li>copiar datos del gr\u00e1fico al portapapeles. Se trata de una funci\u00f3n avanzada que permite copiar en el portapapeles los \u00faltimos 10000 valores utilizados con el bloque gr\u00e1fico.</li> <li>ajustar latencia del puerto serie. Se trata de otro funci\u00f3n avanzada que permite establecer la frecuencia de muestreo de datos o latencia entre 1 y 20ms. Los n\u00fameros m\u00e1s bajos dan como resultado frecuencias de muestreo m\u00e1s altas.</li> </ul> <p>Los archivos CSV (del ingl\u00e9s Comma-Separated Values) son un tipo de documento no estandarizado que tiene la idea b\u00e1sica de separar los campos de datos por una coma, de ah\u00ed su nombre Valores separados por comas</p> <p>Vamos a ver un ejemplo de uso en el que se muestran de forma gr\u00e1fica una serie de n\u00fameros aleatorio. El programa y el gr\u00e1fico son:</p> <p> <p> Ejemplo de 'Gr\u00e1fico de datos' Descargar el programa</p> <p></p>"},{"location":"guiamb/ublocks/#libreria-neopixeles","title":"Libreria NeoPixeles","text":"<p>Los NeoPixels son peque\u00f1os m\u00f3dulos LED que combinan LEDs rojos, verdes y azules montados en un solo encapsulado con un chip controlador. Los NeoPixels pueden ser controlados individualmente por una sola l\u00ednea de datos desde un dispositivo microcontrolado para crear diferentes colores y patrones. Un solo pin del microcontrolador puede controlar docenas (o incluso cientos) de NeoPixels. Los NeoPixels se encuentran en muchas configuraciones diferentes, como son anillos, barras, matrices y tiras flexibles.</p> <ul> <li>. Configura el pin de conexi\u00f3n de los Neopixels. Este bloque configura un dispositivo NeoPixel especificando cu\u00e1ntos LEDs hay en el dispositivo y qu\u00e9 pin se utilizar\u00e1 para controlarlos. El bloque debe ejecutarse antes de hacer nada con cualquiera de los otros bloques NeoPixel.</li> </ul> <p>El bloque se expande a  para el trabajo con Neopixels blancos.</p> <ul> <li>. Establece los colores de los diez primeros NeoPixels. Es especialmente \u00fatil cuando se utiliza con placas o tiras con este n\u00famero de LEDs. La secuencia de numeraci\u00f3n (1-10) es de izquierda a derecha y de arriba a abajo. La configuraci\u00f3n del color se hace desde la paleta que se muestra sin poder establecer mayor precisi\u00f3n. La paleta muestra los valores RGB en decimal.</li> </ul> <p> <p></p> <p></p> <ul> <li>. Apaga todos los LEDs. Los pone a color negro.</li> <li>. Pone todos los LEDs con el color indicado.</li> <li>. Pone el n\u00famero de LED especificado del color indicado. Los LEDs se numeran secuencialmente comenzando por uno.</li> <li>. Desplaza la secuencia de colores NeoPixel el n\u00famero de NeoPixels indicado. Los colores al final de la secuencia se desplazan y se insertan al principio de la secuencia. Si los NeoPixels forman un c\u00edrculo, los colores giran alrededor del c\u00edrculo. El argumento determina el n\u00famero de posiciones que se desplazan los colores. Un valor negativo har\u00e1 que los NeoPixels roten en la direcci\u00f3n opuesta.</li> <li>. Devuelve un color definido especificando los valores de rojo (R), verde (G) y azul (B) entre 0 y255. El bloque puede utilizarse en cualquier bloque que reciba una entrada de color. Los valores inferiores a 40 pueden provocar que el LED no se encienda nada.</li> <li>. Devuelve un color aleatorio. El bloque puede utilizarse en cualquier bloque que reciba una entrada de color.</li> </ul> <p>El siguiente ejemplo muestra el uso b\u00e1sico de algunos de los bloques de esta libreria como complemento del manejo de los bloques de la libreria micro:STEAMakers relativos a la pantalla. Al ser LEDs RGB direccionables pueden ser tratados como una tira de 25 LEDs numerada desde el 1 al 25 empezando por la esquina superior izquierda y contando de izquierda a derecha de de arriba hacia abajo.</p> <p> <p> Ejemplo de 'Libreria NeoPixels' Descargar el programa</p> <p></p>"},{"location":"guiamb/ublocks/#mis-bloques","title":"Mis bloques","text":"<p>Aprenderemos a crear nuestros propios bloques, o lo que es lo mismo, a definir nuestras propias funciones. Acceder a su craci\u00f3n es sencillo ya que est\u00e1n en el men\u00fa de la aplicaci\u00f3n. Basta con hacer clic en el apartado de color azul claro y veremos los dos bloques disponibles. Haciendo clic en cualquiera de ellos se nos abre una peque\u00f1a ventana emergente para ponerle un nombre, que por defecto es MyBlock.</p> <p> <p> Mis bloques</p> <p></p> <p>Observamos que se pueden crear dos tipos de bloques:</p> <ul> <li>de comando: . Este bloque es en realidad un bot\u00f3n y al hacer clic sobre el mismo se inicia el proceso de creaci\u00f3n de un bloque personalizado (funci\u00f3n).</li> <li>reportador: . Este bloque tambi\u00e9n es un bot\u00f3n. Inicia el proceso de creaci\u00f3n de un bloque personalizado (funci\u00f3n) que puede devolver un resultado. Junto con este bloque se suelen utilizar los bloques del men\u00fa \"Control\" que veremos mas abajo.</li> </ul>"},{"location":"guiamb/ublocks/#descripcion","title":"Descripci\u00f3n","text":"<p>La principal diferencia entre el segundo y el primer bloque es que la definici\u00f3n del bloque personalizado que se cree en el segundo podr\u00e1 devolver un valor mediante el bloque RETURN.</p> <p>Esta capacidad \u00fanica permitir\u00e1 que el bloque personalizado se utilice en cualquier bloque en el que se espere un par\u00e1metro de entrada, y pasar\u00e1 el valor que informe a esa operaci\u00f3n.</p> <p>En cuanto al uso del bloque RETURN:</p> <ul> <li>Cualquier bloque colocado despu\u00e9s de \u00e9l no ser\u00e1 ejecutado.</li> <li>Pueden existir m\u00faltiples bloques RETURN, manejando diferentes condiciones y devolviendo sus valores respectivos.</li> </ul> <p>La creaci\u00f3n de un bloque personalizado es un proceso detallado con los siguientes pasos y opciones:</p> <ul> <li>Asignaci\u00f3n de un nombre de bloque personalizado</li> <li>A\u00f1adir par\u00e1metros y sus etiquetas</li> <li>Modificaci\u00f3n de los tipos de par\u00e1metros</li> <li>Asignaci\u00f3n de valores por defecto a los par\u00e1metros</li> <li>Valores de color</li> </ul> <p>Los dos bloques citados de \"Control\" son los siguientes, que aunque de apariencia son id\u00e9nticos, en realidad hay diferencias.</p> <ul> <li>.  Llama al bloque personalizado que se seleccione de la lista 'function name'. La lista de par\u00e1metros es opcional.</li> <li>.  Devuelve el resultado de la llamada del bloque personalizado que se seleccione de la lista 'function name'. La lista de par\u00e1metros es opcional.</li> </ul>"},{"location":"guiamb/ublocks/#operaciones-comunes","title":"Operaciones comunes","text":"<p>Antes de examinar el proceso de creaci\u00f3n de un nuevo bloque personalizado, repasemos algunas de las operaciones habituales disponibles al trabajar con una cabecera de bloque personalizada:</p> <ul> <li>MODO DE EDICI\u00d3N</li> </ul> <p>Cuando se hace clic en la parte p\u00farpura del bloque con sombrero \"define\" o en la parte azul claro del bloque personalizado con el nombre del bloque, se entra en modo edici\u00f3n. Este modo puede identificarse por el cambio de aspecto de los par\u00e1metros de la cabecera, as\u00ed como por la aparici\u00f3n de los tri\u00e1ngulos negros. En la animaci\u00f3n siguiente vemos como crear, activar y desactivar la edici\u00f3n y como a\u00f1adir y eliminar casillas o etiquetas en un bloque.</p> <p> <p> Crear un bloque</p> <p></p> <p>Cada par\u00e1metro a\u00f1adido debe tener un nombre diferente que MicroBlocks asigna de manera autom\u00e1tica pero que podemos cambiar seg\u00fan nuestros intereses simplemente haciendo clic sobre el bloque del nombre.</p> <p> <p> Cambios de nombre de par\u00e1metros y edici\u00f3n de un bloque</p> <p></p> <p>El tri\u00e1ngulo negro de la derecha sirve para a\u00f1adir par\u00e1metros y etiquetas, mientras que el de la izquierda sirve para borrarlos. Al hacer clic en el mismo, se eliminar\u00e1 el elemento situado m\u00e1s a la derecha (ya sea un par\u00e1metro o una etiqueta).</p> <p>Si hay que borrar una etiqueta situada en el centro de la cabecera del bloque, basta con hacer doble clic para seleccionarla, dejarla vacia, y pulsar la tecla Supr.</p> <ul> <li>RENOMBRAR PAR\u00c1METROS Y ETIQUETAS</li> </ul> <p>Para cambiar el nombre de una etiqueta de un bloque personalizado o de cualquier etiqueta de la cabecera, basta con hacer doble clic para seleccionarla y, a continuaci\u00f3n, escribir un nuevo nombre. Dado que el nombre del bloque y las etiquetas son s\u00f3lo campos de texto, es posible crear nombres con varias palabras separadas por espacios o caracteres de subrayado.</p> <p>Si se utilizan espacios al crear el nombre de la etiqueta, el nombre de la etiqueta resultante se tratar\u00e1 como etiquetas sucesivas separadas. Aunque aparezcan una tras otra y se perciban como un nombre continuo, en realidad son etiquetas de texto individuales. Esto s\u00f3lo es importante si va a editarlas posteriormente.</p> <p>Si se utilizan caracteres de subrayado al crear el nombre de la etiqueta, el nombre de la etiqueta resultante se tratar\u00e1 como una sola etiqueta.</p> <p>Por lo tanto, dependiendo de cu\u00e1les sean nuestras intenciones, puede que encontremos un m\u00e9todo u otro m\u00e1s adecuado a nuestras necesidades.</p> <p>Para cambiar el nombre de un par\u00e1metro, hacemos clic en el \u00e1rea ovalada marr\u00f3n del par\u00e1metro y escribimos un nuevo nombre en la ventana de edici\u00f3n.</p> <p>A continuaci\u00f3n vemos el proceso para cambiar ambas etiquetas, el nombre del bloque y los par\u00e1metros.</p> <p> <p> Cambios de nombres</p> <p></p> <ul> <li>MOSTRAR EL CONTENIDO DE UN BLOQUE PERSONALIZADO</li> </ul> <p>Una vez creado un bloque personalizado y cerrada su cabecera y definici\u00f3n, este aparecer\u00e1 autom\u00e1ticamente en el \u00e1rea de bloques de la categor\u00eda Mis bloques. Como el bloque reci\u00e9n creado reside en el \u00e1rea Mis bloques, se ver\u00e1 como el formato de control o bloque informador de su definici\u00f3n. Para ver realmente los bloques que componen la definici\u00f3n del bloque personalizado, debemos hacer clic derecho en el bloque y seleccionar \"mostrar definici\u00f3n de bloque\" en el men\u00fa.</p> <p> <p> Mostrar la definici\u00f3n de un bloque</p> <p></p> <p>Al seleccionar esta opci\u00f3n, la definici\u00f3n del bloque personalizado aparecer\u00e1 en el \u00c1rea de trabajo, como apreciamos en la siguiente animaci\u00f3n.</p> <p> <p> Mostrar la definici\u00f3n de un bloque</p> <p></p> <p>Si queremos borrar la definici\u00f3n de un bloque de la zona de programa basta con que lo arrastremos a la zona de men\u00fa, donde observaremos como aparece un ojo tachado en color gris (indicando ocultar) en lugar de la papelera habitual.</p> <p>Para elminar completamente la definici\u00f3n del bloque hay que escoger la opci\u00f3n \"elimina la definici\u00f3n del bloque\"</p> <ul> <li>Proceso de creaci\u00f3n de un bloque personalizado</li> </ul> <p>Asignar nombre al bloque</p> <p>Al hacer clic en el bot\u00f3n a\u00f1adir bloque, se abre un cuadro de di\u00e1logo en el que se introduce el nombre del bloque personalizado.</p> <p> <p> Creaci\u00f3n de un bloque personalizado</p> <p></p> <p>Tras pulsar el bot\u00f3n \"De acuerdo\", se coloca una cabecera de definici\u00f3n de bloque personalizada en el \u00e1rea de programaci\u00f3n.</p> <p> <p> Bloque personalizado recien creado</p> <p></p> <p>Ahora todos los bloques de c\u00f3digo que compondr\u00e1n este bloque personalizado pueden colocarse bajo el bloque de cabecera, y formar\u00e1n parte de la nueva funci\u00f3n programada. Observe tambi\u00e9n que se ha colocado un nuevo bloque que representa la funci\u00f3n personalizada en la ventana de categor\u00eda Mis Bloques con el nombre predeterminado de miBloque.</p> <p>Aunque no siempre es un requisito, algunas funciones necesitar\u00e1n par\u00e1metros para completar su funcionalidad programada. \u00c9stos actuar\u00e1n como entradas de la funci\u00f3n y podr\u00e1n ser utilizados por los bloques que componen el c\u00f3digo de bloque personalizado.</p> <p>Modificaci\u00f3n de los tipos de par\u00e1metros</p> <p>Cuando se a\u00f1ade un par\u00e1metro, MicroBlocks le asigna un nombre por defecto (foo, baz, etc) y un tipo por defecto (n\u00famero/cadena).</p> <p> <p> Tipos de par\u00e1metros</p> <p></p> <p>Hay varios tipos de par\u00e1metros posibles: n\u00famero/texto, booleano y color. Estos est\u00e1n disponibles para seleccionar en el men\u00fa que se abre al hacer clic en el tri\u00e1ngulo negro que apunta hacia abajo en el bloque de par\u00e1metros oval marr\u00f3n. Para los par\u00e1metros de tipo n\u00famero/texto, es posible restringir sus tipos a s\u00f3lo n\u00famero o s\u00f3lo texto. A continuaci\u00f3n se expone un sencillo bloque que muestra datos de todos los tipos.</p> <p> <p> Ejemplo de tipos de par\u00e1metros</p> <p></p> <p>Vemos que el nombre de la funci\u00f3n parece <code>Datos Nombre</code>. De hecho, el nombre de la funci\u00f3n es <code>Datos</code>, mientras que <code>Nombre</code> es el nombre del primer par\u00e1metro. Sin embargo, dado que MicroBlocks no permite la entrada de una etiqueta seguida de otra, ha sido necesario crear primero el par\u00e1metro <code>nombre</code>, seguido de un doble clic en el nombre de la funci\u00f3n <code>Datos</code> y a\u00f1adir \" <code>Nombre</code>\" (espacio <code>Nombre</code>) al final de la misma.</p> <p>Esta t\u00e9cnica parece extra\u00f1a, pero es totalmente correcta, ya que los nombres de funci\u00f3n nunca se utilizan espec\u00edficamente por s\u00ed solos como en un lenguaje de programaci\u00f3n basado en texto. Los bloques personalizados, al igual que todos los dem\u00e1s, se arrastran y sueltan en el \u00e1rea de programaci\u00f3n, independientemente de su nombre. No obstante, no debemos crear varios bloques personalizados en los que el nombre de la primera etiqueta sea id\u00e9ntico. De hecho, NO podremos hacerlo, ya que MicroBlocks asignar\u00e1 un nombre numerado que lo har\u00e1 \u00fanico.</p> <p>Asignar valores por defecto a los par\u00e1metros</p> <p>Como se ve en la im\u00e1gen anterior de definici\u00f3n de bloque personalizado, la vista final del bloque muestra valores para cada par\u00e1metro, \"Juan\", 55, true, y 16715550 para el color rojo. Estos valores se denominan valores por defecto y son los que hemos asignado al bloque en su craci\u00f3n y se pueden modificar en cualquier momento si los ponemos en modo edici\u00f3n.</p> <ul> <li>Interpretaci\u00f3n del n\u00famero que identifica al color</li> </ul> <p>Los valores por defecto de los tipos cadena, n\u00famero y booleano se explican por s\u00ed mismos. Sin embargo, el tipo de color necesita alguna explicaci\u00f3n mas. Vamos a utilizar el siguiente ejemplo para ello.</p> <p> <p> Color como un n\u00famero</p> <p></p> <p>Como puede verse en la muestra de resultados los primeros corresponden a los valores en decimal de las variables R, G y B respectivamente, el valor del color magenta se obtiene del valor decimal 12398300. Analicemos estos valores y veamos qu\u00e9 representan.</p> <p>Si cada uno de los tres valores decimales superiores se convierten a los equivalentes hexadecimales, se obtiene:</p> <p> Color (1,1) Decimal Hexadecimal R 115 73 G 188 BC B 180 B4 <p></p> <p>Si llevamos esto a un programa que trabaje con colores RGB, como por ejemplo Inkscape, podemos ver como el color del pixel (1,1) es color verde claro.</p> <p> <p> Color como un n\u00famero</p> <p></p> <p>Podriamos colocar los tres valores hexadecimales RGB uno a continuaci\u00f3n del otro en el orden RGB para obtener 0x73BCB4, y este n\u00famero expresado en el sistema de numeraci\u00f3n decimal es el 7584948.</p> <p>El valor decimal 12398300 pasado a hexadecimal es BD2EDC que descompuesto corresponde R = BD (189), G = 2E (46) y B = DC (220), tal y como se refleja en la tabla siguiente:</p> <p> Color (5,5) Decimal Hexadecimal R 189 BD G 46 2E B 220 DC <p></p> <p>Si llevamos esto a un programa que trabaje con colores RGB, como por ejemplo Inkscape, podemos ver como el color del pixel (5,5) es color magenta claro.</p> <p> <p> Color como un n\u00famero</p> <p></p> <ul> <li>Ejemplo de creaci\u00f3n de bloque personalizado</li> </ul> <p>Vamos a definir algunos de ellos mediante Mis Bloques. Creamos los siguientes (aunque ya existen en otro bloque):</p> <p> <p> Creaci\u00f3n de bloques para iconos</p> <p></p> <p>El uso de estos bloques lo vemos a continuaci\u00f3n:</p> <p> <p> Uso de bloques personalizados Descargar programa</p> <p></p> <p>En el programa est\u00e1 la definici\u00f3n de los bloques.</p> <p>En la imagen siguiente tenemos un sencillo ejemplo de uso de funci\u00f3n con retorno de valor mediante bloque reportador.</p> <p> <p> Funci\u00f3n con retorno de valor Descargar programa</p> <p></p>"},{"location":"guiamb/ublocks/#sonidos","title":"Sonidos","text":"<p>En MicroBlocks tenemos tres opciones de reproducci\u00f3n de sonidos o m\u00fasica, un conjunto de librer\u00edas englobadas bajo el seud\u00f3nimo \"Sonido\", una librer\u00eda de \"Politonos\" y otra librer\u00eda de \"Tonos\". En \"Sonido\" nos encontraremos bloques \"MultiTone\", opciones para reproducir mp3 o WAV, radio AM, etc. No veremos estas librer\u00edas por el momento y nos centraremos en \"Tonos\" y \"Politonos\".</p> <p>La libreria micro:STEAMakers dispone de dos bloques relacionados con el sonido. Estos son:</p> <ul> <li>start m:STEAMakers audio. Bloque para definir la conexi\u00f3n del buzzer o altavoz e inicializar las variables internas tone a verdaderas. Este bloque debe ejecutarse al menos una vez para que los bloques de <code>Tonos</code> y <code>Politonos</code> sean funcionales. El bloque es:</li> </ul> <p> <p>. Bloque start m:STEAMakers audio</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque start m:STEAMakers audio</p> <p></p> <ul> <li>m:s sound %. Bloque de lectura del nivel de sonido percibido por el micr\u00f3fono de la placa expresado en tanto por ciento. El bloque es:</li> </ul> <p> <p>. Bloque m:s sound %</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque m:s sound %</p> <p></p>"},{"location":"guiamb/ublocks/#tonos","title":"Tonos","text":"<p>A\u00f1adimos la libreria \"Tonos\" a nuestro entorno y nos encontramos con los siguientes bloques:</p> <ul> <li>. Reproduce la nota y la octava y por el tiempo indicados.</li> <li>. Reproduce la nota indicada por el n\u00famero de tecla en el teclado del piano (0-127) donde el Do central es 60. Este bloque es \u00fatil cuando se realizan transformaciones matem\u00e1ticas de la m\u00fasica. MIDI es la abreviatura de \"Musical Instrument Digital Interface\", que se traduce como \"Interfaz digital de instrumentos musicales\", y es un est\u00e1ndar de la industria para controlar sintetizadores, cajas de ritmos y otros dispositivos musicales electr\u00f3nicos.</li> <li>. Reproduce la nota especificada en Hertz (Hz) durante el tiempo indicado.</li> <li>. Reproduce el tono indicado en Hz.</li> <li>. Detiene la reproducci\u00f3n del tono actual.</li> <li>. Especifica el pin al que est\u00e1 conectado un zumbador piezoel\u00e9ctrico o unos auriculares. En placas con altavoces integrados, se utilizar\u00e1 el altavoz integrado si se omite este bloque.</li> </ul> <p>Veamos un ejemplo en el que se utilizan los bloques start m:STEAMakers audio y m:s sound % junto con bloques de la libreria <code>Tonos</code>. El ejmplo simplemente emite distintos tonos por el altavoz y enciende el LED central de un color que depender\u00e1 del nivel de sonido detectado por el micr\u00f3fono.</p> <p> <p> Ejemplo b\u00e1sico de sonido Descargar programa</p> <p></p>"},{"location":"guiamb/ublocks/#politonos","title":"Politonos","text":"<p>El formato RTTTL (del ingl\u00e9s, Ring Tone Text Transfer Language) fue desarrollado por Nokia para codificar tonos de llamada a tel\u00e9fonos m\u00f3viles. El formato RTTTL es una cadena dividida en tres secciones: encabezado (nombre o t\u00edtulo), valor predeterminado y datos. Por ejemplo, la siguiente cadena de texto se corresponde con la Intro de Donkey Kong:</p> <p>d=4,o=5,b=140:8a#,8p,8d6,16p,16f.6,16g.6,16f.6,8a#,8p,8d6,16p,16f.6,16g.6,16f.6,8a#,8p,8d6,16p,16f.6,16g.6,16f.6,8a#,8p,8d6,16p,16f.6,16g.6,16f.6</p> <p>A\u00f1adimos la libreria \"Politonos\" a nuestro entorno y nos encontramos con los siguientes bloques:</p> <ul> <li>. Reproduce la cadena de tono de llamada indicada.</li> <li>. Devuelve el nombre del tono de llamada que se est\u00e1 reproduciendo actualmente.</li> </ul> <p>Para reproducir una melodia simplemente la copiamos en el bloque <code>toca el politono</code>.</p> <p>Existen p\u00e1ginas de donde se pueden descargar tonos, o incluso podemos hacerlo nosotros mismos. A continuaci\u00f3n ponemos algunos enlaces:</p> <ul> <li>RTTTL Ringtone Downloads de Picaxe.</li> <li>Colecciones de ArcadeTones clasificados por temas.</li> <li>Archivo NokringTunes.txt que contiene m\u00e1s de once mil melod\u00edas en formato Nokring. </li> </ul> <p>Una vez descargado lo abrimos y buscamos la melodia para copiar y pegar en el bloque.</p> <p>Informaci\u00f3n complementaria</p> <p>Ya hemos visto como a\u00f1adir la librer\u00eda politonos, enlaces para obtenerlos y el uso de los mismos en MicroBlocks, pero vamos a profundizar un poco mas sobre el tema.</p> <p>El formato RTTTL es una cadena dividia en tres partes: nombre, valor por defecto y datos.</p> <ul> <li>nombre. Es una cadena que describe el nombre del tono de llamada. En principio su longitud m\u00e1xima es de 10 caracteres y no puede contener el signo de dos puntos (:).</li> <li>valor por defecto. Lo forman un conjunto de valores separados por comas que son los que deben cumplirse durane la ejecuci\u00f3n del tono de llamada. Cada valor es una clave a la que se asigna con una igualdad un valor, siendo los nombre posibles: D (duraci\u00f3n), o (octava) y B (ritmo o tempo)</li> <li>datos. Es un conjunto de cadenas de caracteres separadas por comas, estando cada cadena formada por una duraci\u00f3n, un tono, una octava y opcionalmente puntos que aumentan la duraci\u00f3n de la nota a la mitad.</li> </ul> <p>Un ejemplo de tono RTTTL puede ser:</p> <p><code>Abba - Money Money Money: d=4,o=5,b=112:8e7,8e7,8e7,8e7,8e7,8e7,16e6,16a6,16c7,16e7,8d#7,8d#7,8d#7,8d#7,8d#7,8d#7,16f6,16a6,16c7,16d#7,d7,8c7,8a6,8c7,c7,2a6,32a6,32c7,32e7,8a7</code></p> <p>donde se pueden distinguir facilmente las tres partes separadas por dos puntos (:):</p> <ul> <li>nombre. Abba - Money Money Money.</li> <li>valor por defecto. d=4,o=5,b=112 (d = duraci\u00f3n; o = octava y b = tempo o ritmo). Mas adelante se describen mejor estos conceptos.</li> <li>datos. Las notas separadas por comas y formadas por una duraci\u00f3n, una nota [a (La), b (Si), c (Do), d (Re), e (Mi), f (Fa) o g (Sol)] y la indicaci\u00f3n de la octava, que si no se indica se aplica el valor predeterminado.</li> </ul> <p>La duraci\u00f3n de las notas es:</p> <ul> <li>1 - nota entera</li> <li>2 - media nota</li> <li>4 - cuarto de nota</li> <li>8 - octavo de nota (octava)</li> <li>16 - dieciseisavo de nota</li> <li>32 - treintaidosavo de nota</li> </ul> <p>Los tonos pueden ser:</p> <ul> <li>P \u2013 descanso o pausa</li> <li>A \u2013 A (La)</li> <li>A# \u2013 A\u266f B\u266d (La#/Si\u266d)</li> <li>B \u2013 B/C\u266d (Si/Do\u266d)</li> <li>C \u2013 C (Do)</li> <li>C# \u2013 C\u266f/D\u266d (Do\u266f/Re\u266d)</li> <li>D \u2013 D (Re)</li> <li>D# \u2013 D\u266f/E\u266d (Re\u266f/Mi\u266d)</li> <li>E \u2013 E/F\u266d (Mi/Fa\u266d)</li> <li>F \u2013 F/E\u266f (Fa/Mi\u266f)</li> <li>F# \u2013 F\u266f/G\u266d (Fa\u266f/Sol\u266d)</li> <li>G \u2013 G (Sol)</li> <li>G# \u2013 G\u266f/A\u266d (Sol\u266f/La\u266d)</li> </ul> <p>En el formato RTTTL se permiten octavas comenzando desde la A por debajo del do medio y subiendo cuatro octavas. Esto se debe a la imposibilidad de los tel\u00e9fonos m\u00f3viles para reproducir ciertos tonos de forma audible. Las octavas est\u00e1n numeradas desde el tono m\u00e1s bajo hasta el tono m\u00e1s alto de 4 a 7. La octava debe dejarse fuera de la notaci\u00f3n en el caso de un descanso o pausa en el patr\u00f3n.</p> <p>En el ejemplo siguiente suena un politono u otro dependiendo del bot\u00f3n que pulsemos en la micro:STEAMakers.  <p> Ejemplo b\u00e1sico de politonos Descargar programa</p> <p></p>"},{"location":"guiamb/ublocks/#abrir-archivos-de-sonido-o-musica","title":"Abrir archivos de Sonido o m\u00fasica","text":"<p>En MicroBlocks tenemos disponibles una serie de ejemplos resueltos a los que se puede acceder desde el men\u00fa \"Fichero\" escogiendo la opci\u00f3n \"Abre\" y dirigiendonos a la carpeta ejemplos, si no estamos ya en ella.</p> <p>ADVERTENCIA</p> <p>Los ejemplos est\u00e1n desarrollados para micro:bit por lo que para hacer que funcionen hay que realizar ciertas adaptaciones de los mismos.</p> <p>Veremos solamente algunos de ellos.</p> <p> <p> Ejemplos de m\u00fasica y sonido en MicroBlocks</p> <p></p> <p>Podemos abrir cualquiera de los ejemplos de los directorios indicados. En el directorio \"Sonido\" basicamente hay diferentes ejemplos que trabajan con sonidos y vamos a abrir SoundLevel, que es un programa que simula v\u00fametros sencillos con la pantalla y/o tiras de LEDs. El programa, como hemos dicho est\u00e1 pensado para micro:bit y, tal cual lo cargamos, no funcionar\u00e1 en la micro:STEAMakers. El programa original lo vemos en la imagen siguiente:</p> <p> <p> Ejemplo de nivel de sonido con los dos programas que lo forman</p> <p></p> <p>En la imagen siguiente podemos ver las modificaciones realizadas para hacer que el ejemplo funcione. Se han dejado sacadas de los bloques funcionales los que venian en el original y se han colocado los nuevos bloques.</p> <p> <p> Ejemplo de nivel de sonido modificado con los dos programas que lo forman Descargar programa</p> <p></p> <p>La imagen siguiente, en formato svg, es una comparativa entre el antes y el despu\u00e9s del programa.</p> <p> <p> Comparativa ejemplo de nivel de sonido Clic sobre la imagen para agrandar</p> <p></p> <p>En el directorio \"Music\" hay varios ejemplos en los que se utilizan bloques propios. En la figura vemos el ejemplo HarryPotter mostrando la definici\u00f3n de uno de los bloques.</p> <p> <p> Ejemplo de sonido HarryPotter original</p> <p></p> <p>El programa modificado lo tenemos a continuaci\u00f3n. En este caso solamente hay que a\u00f1adir el bloque de inicializar audio de la libreria micro:STEAMakers.</p> <p> <p> Ejemplo de sonido HarryPotter modificado Descargar programa</p> <p></p> <p>A simple vista se aprecia la utilidad de las funciones para simplificar el c\u00f3digo y hacer mas sencilla la depuraci\u00f3n del mismo.</p> <p>Otro ejemplo con todos los bloques desplegados lo vemos para el caso de Bach Bouree, que se corresponden con la pieza musical integrada como quinto movimiento en la Suite en Mi menor para La\u00fad BWV 996 Bourr\u00e9e en mi menor compuesta por Johann Sebastian Bach. En la imagen siguiente vemos el archivo orginal.</p> <p> <p> Ejemplo de sonido Bach Bouree</p> <p></p> <p>El programa sin los bloques expandidos, con la inicializaci\u00f3n del audio y sin los comentarios es tan simple como:</p> <p> <p> Ejemplo de sonido Bach Bouree</p> <p></p>"},{"location":"guiamb/ublocks/#sensor-de-temperatura-y-humedad","title":"Sensor de temperatura y humedad","text":"<p>La micro:STEAMakers incorpora un sensor de temperatura y humedad AHT20 y en MicroBlocks se han contemplado dos bloques que nos devuelven sus lecturas. Estos bloques son:</p> <ul> <li>m:s temperatura \u00baC El bloque devuelve la temperatura medida por el sensor expresada en \u00baC. El aspecto del bloque es:</li> </ul> <p> <p>. Bloque m:s temperatura \u00baC %</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque m:s temperatura \u00baC</p> <p></p> <ul> <li>m:s temperatura \u00baC El bloque devuelve la humedad medida por el sensor expresada en porcentaje. El aspecto del bloque es:</li> </ul> <p> <p>. Bloque m:s humidity %</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque m:s humidity %</p> <p></p> <p>El siguiente ejemplo muestra el uso de estos bloques.</p> <p> <p> Ejemplo de uso de m:s temperature y m:s humidity Descargar programa</p> <p></p>"},{"location":"guiamb/ublocks/#acelerometro-y-giroscopio","title":"Aceler\u00f3metro y giroscopio","text":"<p>La micro:STEAMakers incorpora un giroscopio acelerometro de seis ejes MPU6050 con Velocidad m\u00e1xima de rotaci\u00f3n de 2000\u00b0/s y un Rango de aceleraci\u00f3n de \u00b12g\uff0c\u00b14g\uff0c\u00b18g\uff0c\u00b116g. Hemos visto detalles sobre el mismo en el apartado Aceler\u00f3metro + giroscopio.</p> <p>MicroBlocks nos da dos bloques en la libreria micro:STEAMakers para trabajar con el mismo:</p> <ul> <li>m:s accel m/s2. Nos devuelve la aceleraci\u00f3n respecto al eje escogido medida en m/s2. El aspecto del bloque es:</li> </ul> <p> <p>. Bloque m:s accel m/s2</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque m:s accel m/s2</p> <p></p> <p>El siguiente ejemplo muestra la captura de un programa que hace uso de este bloque.</p> <p> <p> Ejemplo de uso de m:s accel m/s2 Descargar programa</p> <p></p> <ul> <li>m:s gyro deg/s. Nos devuelve la velocidad angular respecto al eje escogido medida en deg/s. El aspecto del bloque es:</li> </ul> <p> <p>. Bloque m:s gyro deg/s</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque gyro deg/s</p> <p></p> <p>El siguiente ejemplo muestra la captura de un programa que hace uso de este bloque.</p> <p> <p> Ejemplo de uso de m:s gyro deg/s Descargar programa</p> <p></p> <ul> <li>m:s inclination towards. Nos devuelve la inclinaci\u00f3n respecto al eje escogido medida en grados. El aspecto del bloque es:</li> </ul> <p> <p>. Bloque m:s inclination towards</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque inclination towards</p> <p></p> <p>El siguiente ejemplo muestra la captura de un programa que hace uso de este bloque.</p> <p> <p> Ejemplo de uso de m:s inclination towards Descargar programa</p> <p></p>"},{"location":"guiamb/ublocks/#sensor-de-energia","title":"Sensor de energia","text":"<p>La micro:STEAMakers incorpora un circuito integrado con encapsulado SOT-23 de 5 pines que es un monitor de corriente, tensi\u00f3n y potencia. Esto nos permite trabajar con valores de energia a partir de los bloques que incorpora MicroBlocks, que son:</p> <ul> <li>m:s energy. El bloque devuelve el par\u00e1metro que indica la unidad seleccionada, es decir: corriente en mA, tensi\u00f3n en mV o potencia en mW. El aspecto del bloque es:</li> </ul> <p> <p>. Bloque m:s energy</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque energy</p> <p></p> <ul> <li>m:s <code>estado</code> energy meter.  Bloque que permite poner en marcha (aaranca), detener (det\u00e9n) o reiniciar (reset) la monitorizaci\u00f3n del consumo energ\u00e9tico que se est\u00e1 produciendo en la placa micro:STEAMakers. El aspecto del bloque es:</li> </ul> <p> <p>. Bloque m:s <code>estado</code> energy meter</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque <code>estado</code> energy meter</p> <p></p> <ul> <li>m:s energy consumption (\\(\\mu Wh\\)).  El bloque devuelve el consumo energ\u00e9tico en \\(\\mu Wh\\) que se produce desde el momento en que se arranca el medidor (bloque anterior) hasta que se detiene o se resetea. El aspecto del bloque es:</li> </ul> <p> <p>. Bloque m:s energy consumption (\\(\\mu Wh\\))</p> <p></p> <p>La definici\u00f3n del bloque es la siguiente:</p> <p> <p>. Definici\u00f3n del bloque energy consumption (\\(\\mu Wh\\))</p> <p></p> <p>El siguiente ejemplo muestra un programa que hace uso de estos bloques. En la animaci\u00f3n podemos apreciar como el consumo energ\u00e9tico no retorna un valor distinto de cero hasta que no se pone en marcha el medidor. Se ha incluido un c\u00e1lculo de la potencia en mW a partir de las medidas de tensi\u00f3n y corriente.</p> <p> <p> Ejemplo de uso de m:s energy consumption (\\(\\mu Wh\\)) Descargar programa</p> <p></p>"},{"location":"guiamb/ublocks/#libreria-ble-scanner","title":"Libreria BLE Scanner","text":"<p>Vamos a describir los bloques de la libreria para finalmente ver un ejemplo de uso.</p>"},{"location":"guiamb/ublocks/#scan-received","title":"scan received","text":"<p>Este bloque se utiliza para detectar avisos BLE. Cuando se detecta una exploraci\u00f3n, la variable interna  se rellena con toda la informaci\u00f3n BLE relevante. Todos los dem\u00e1s bloques de la biblioteca extraen partes de la informaci\u00f3n BLE del contenido de esta variable.</p>"},{"location":"guiamb/ublocks/#rssi","title":"RSSI","text":"<p>RSSI son las siglas en ingl\u00e9s de Indicador de Intensidad de Se\u00f1al Recibida. Es la intensidad de la se\u00f1al tal y como se ve en el dispositivo receptor, por ejemplo, un smartphone. La intensidad de la se\u00f1al depende de la distancia y del valor de la potencia de emisi\u00f3n. Con la m\u00e1xima potencia de emisi\u00f3n (+4 dBm), el RSSI oscila entre -26 (unos pocos cent\u00edmetros) y -100 (40-50 m de distancia).  Esta informaci\u00f3n puede utilizarse para calcular la distancia entre el dispositivo emisor y el dispositivo receptor. Un ejemplo de ello puede verse en la imagen Dispositivos emparejados y resultado BLE Scanner de la secci\u00f3n \"Libreria BLE Scanner\" del apartado \"Gu\u00eda de MicroBlocks\", donde la aplicaci\u00f3n BLE Scanner muestra las distancias reales de los dispositivos detectados.</p>"},{"location":"guiamb/ublocks/#address","title":"address","text":"<p> Una direcci\u00f3n Bluetooth, a veces denominada direcci\u00f3n MAC Bluetooth, es un valor de 48 bits que identifica de forma exclusiva un dispositivo Bluetooth.</p> <p>Una direcci\u00f3n p\u00fablica de dispositivo es un identificador \u00fanico global de 48 bits, que consta de dos campos:</p> <ul> <li>Los 24 bits m\u00e1s significativos se denominan Identificador \u00danico Organizativo, y su finalidad es identificar a cada empresa. Es administrado por la Autoridad de Registro del IEEE.</li> <li>Los 24 bits menos significativos son asignados por la empresa, y sirven para identificar cada dispositivo.</li> </ul>"},{"location":"guiamb/ublocks/#address-type","title":"address type","text":"<p>Existen dos tipos principales de direcciones Bluetooth: p\u00fablicas y aleatorias.</p> <p>Una direcci\u00f3n p\u00fablica Bluetooth es una direcci\u00f3n fija global que debe registrarse en el IEEE. Esta direcci\u00f3n nunca cambia y se garantiza que es \u00fanica para un dispositivo Bluetooth.</p> <p>Las direcciones aleatorias son m\u00e1s populares que las p\u00fablicas, ya que no requieren registro en el IEEE. Una direcci\u00f3n aleatoria es un identificador que est\u00e1</p> <ul> <li>programado en el dispositivo o</li> <li>generado en tiempo de ejecuci\u00f3n (dependiendo del subtipo).</li> </ul> <p>Direcci\u00f3n est\u00e1tica aleatoria</p> <p>Este tipo espec\u00edfico de direcci\u00f3n Bluetooth es una alternativa popular a las direcciones p\u00fablicas, ya que su uso no conlleva ning\u00fan coste.</p> <p>Las direcciones est\u00e1ticas aleatorias pueden utilizarse de dos maneras:</p> <ul> <li>Puede ser asignada y fijada para toda la vida del dispositivo.</li> <li>Puede cambiarse en el arranque. Sin embargo, no se puede cambiar durante el tiempo de ejecuci\u00f3n.</li> </ul> <p>Una Direcci\u00f3n de Dispositivo Aleatoria es una caracter\u00edstica de privacidad del protocolo BLE, y ayuda a prevenir el rastreo de un dispositivo.</p>"},{"location":"guiamb/ublocks/#device-name","title":"device name","text":"<p>Dado que ser\u00eda bastante dif\u00edcil para un usuario identificar un dispositivo utilizando s\u00f3lo su direcci\u00f3n, BLE proporciona la propiedad Nombre de dispositivo, que es un nombre amigable utilizado para etiquetar un dispositivo.</p> <p>Las especificaciones BLE definen el nombre del dispositivo como un campo de 20 bytes. Sin embargo, debido a las limitaciones de longitud de los paquetes, a menudo puede ser necesario utilizar un nombre m\u00e1s corto.</p> <p>Existen dos tipos de nombre para BLE:</p> <ul> <li>Nombre local completo: tipo 9</li> <li>Nombre local abreviado: tipo 8</li> </ul>"},{"location":"guiamb/ublocks/#hastype","title":"hasType","text":"<p>Este bloque se utiliza internamente para escanear el paquete BLE y ver si contiene un nombre del tipo deseado.</p>"},{"location":"guiamb/ublocks/#ejemplo","title":"Ejemplo","text":"<p>Este programa est\u00e1 basado en el programa de ejemplo proporcionado en el Fichero/Abre/Ejemplos/Red/BLE Scanner Demo. Se ha mejorado para mostrar toda la informaci\u00f3n encontrada, as\u00ed como una lista de todos los dispositivos detectados al final.</p> <p> <p> Ejemplo BLE Scanner Demo mejorado Descargar programa</p> <p></p>"},{"location":"guiamb/ublocks/#comunicacion-ble-bidireccional-basica","title":"Comunicaci\u00f3n BLE bidireccional b\u00e1sica","text":"<p>Veamos algunos ejemplos de uso de Bluetooth para comunicarnos con la placa desde un m\u00f3vil. Utilizaremos la APP Serial Bluetooth Terminal vista.</p> <p>Importante</p> <p>Para que el programa creado en MicroBlocks se guarde en la placa es necesario tener establecida la conexi\u00f3n entre el IDE y la placa. Cuando queremos transmitir datos entre la APP y la placa debemos establecer la conexi\u00f3n entre ambas y para ello no podemos tener establecida la conexi\u00f3n entre el IDE y la placa. No es posible tener dos conexiones establecidas con la misma placa. Si se da esta circunstancia cuando tratemos de establecer la conexi\u00f3n esta se perder\u00e1 de manera inmediata.</p> <p> <p> Comunicaci\u00f3n APP a placa perdida </p> <p></p> <p>Desde MicroBlocks creamos y llevamos a la placa el siguiente programa:</p> <p> <p> Comunicaci\u00f3n bidireccional b\u00e1sica Descargar programa</p> <p></p> <p>El programa realiza un desplazamiento de la cadena de texto recibida en la pantalla de la micro:STEAMakers y envia la cadena que se muestra al pulsar el bot\u00f3n A. El intercambio de mensajes se realiza desde la APP citada.</p> <p>Con la APP abierta y la conexi\u00f3n realizada enviamos el mensaje que vemos en la captura.</p> <p> <p> Comunicaci\u00f3n APP a placa </p> <p></p> <p>Tras pulsar el bot\u00f3n de enviar el mensaje comienza a aparecer en la pantalla.</p> <p> <p> Comunicaci\u00f3n placa a APP </p> <p></p> <p>Si ahora pulsamos el bot\u00f3n de la placa en la APP se recivbe e mensaje que esta envia:</p> <p> <p> Comunicaci\u00f3n placa a APP </p> <p></p>"},{"location":"guiamb/webserial/","title":"Web Serial ESPTool","text":""},{"location":"guiamb/webserial/#compatibilidad-y-configuraciones","title":"Compatibilidad y configuraciones","text":"<p>Esta herramienta se ha dise\u00f1ado para ser una opci\u00f3n web para programar placas microcontroladoras de la familia ESP de Espressif. Es una herramienta que nos permite cargar cualquier firmware sin necesidad de usar el conector y cable USB nativo de la placa.</p> <p>Web serial funciona en el navegador Chrome, Chromium o navegadores que son Chromium como Microsoft Edge y Opera. Safari, Firefox y otros sistemas no son compatibles porque no implementan Web Serial! (they have not implemented Web Serial!). En la imagen vemos una captura de la web anterior que muestra la compatibilidad de navegadores tanto en ordenadores como en dispositivos m\u00f3viles:</p> <p> <p> Compatibilidad de navegadores</p> <p></p> <p>Es muy posible que debamos habilitar la API serie, lo cual es realmente sencillo. Visitamos chrome://flags desde la barra de navegaci\u00f3n de Chrome o Chromium. En la imagen vemos como localizar Experimental Web Platform features y el estado actual.</p> <p> <p> Experimental Web Platform features</p> <p></p> <p>Cuando habilitamos la caracter\u00edstica se nos avisa de que los cambios se aplican al reiniciar el navegador y nos muestra un bot\u00f3n para realizar la tarea.</p> <p> <p> Experimental Web Platform features</p> <p></p> <p>Con esto ya tendremos disponible el dispositivo para la conexi\u00f3n v\u00eda web.</p>"},{"location":"program/RTTTL/","title":"Formato RTTTL","text":""},{"location":"program/RTTTL/#el-formato-rtttl","title":"El formato RTTTL","text":"<p>Ring Tone Text Transfer Language (RTTTL) es un formato basado en texto que fue desarrollado por Nokia para transferir tonos de llamada entre tel\u00e9fonos m\u00f3viles Nokia.</p> <p>El formato RTTTL es una cadena dividida en tres secciones: \"nombre\", \"valor predeterminado\" y \"datos\".</p> <p>La secci\u00f3n \"nombre\" es una cadena que describe el nombre del tono de llamada. No puede tener m\u00e1s de 10 caracteres y no puede contener dos puntos \":\".</p> <p>La secci\u00f3n \"valor predeterminado\" es un conjunto de valores separados por comas, donde cada valor contiene una clave y un valor separados por un car\u00e1cter =, que describe ciertos valores por defecto que deben respetarse durante la ejecuci\u00f3n del tono. Los nombres posibles son:</p> <ul> <li>d - duraci\u00f3n</li> <li>o - octava</li> <li>b - beat, tempo.</li> </ul> <p>La secci\u00f3n \"datos\" es un conjunto de cadenas de caracteres separadas por comas, donde cada cadena contiene una duraci\u00f3n, afinaci\u00f3n, octava y un punto opcional, que si se pone aumenta la duraci\u00f3n de la nota en una mitad.</p> <p>Por ejemplo, la siguiente cadena de texto se corresponde con la Intro de Donkey Kong:</p> <p>Intro Donkey Kong</p> <p>d=4,o=5,b=140:8a#,8p,8d6,16p,16f.6,16g.6,16f.6,8a#,8p,8d6,16p,16f.6,16g.6,16f.6,8a#,8p,8d6,16p,16f.6,16g.6,16f.6, 8a#,8p,8d6,16p,16f.6,16g.6,16f.6</p> <p>Lo \u00fanico que tenemos que hacer para reproducir la melodia es pegar la cadena en la zona de texto del bloque.</p> <p>Arduinoblocks nos suministra informaci\u00f3n y enlaces referentes al tema accediendo desde nuestro proyecto a 'herramientas' y escogiendo 'RTTTL Info', tal y como vemos en la imagen siguiente:</p> <p> <p> Acceso a RTTTL Info</p> <p></p> <p>En la imagen siguiente tenemos desplegada la informaci\u00f3n que nos ofrece esta herramienta.</p> <p> <p> Informaci\u00f3n RTTTL</p> <p></p>"},{"location":"program/RTTTL/#bloques-rtttl","title":"Bloques RTTTL","text":"<p>El bloque de la imagen permite reproducir cualquier melodia RTTTL que peguemos en el campo 'song'.</p> <p> <p> Bloque Zumbador Reproducir RTTTL</p> <p></p> <p>Existen un bloque en el que est\u00e1n definidas varias melodias t\u00edpicas y es el que vemos en la imagen siguiente:</p> <p> <p> Bloque Zumbador Reproducir RTTTL con listado de melodias</p> <p></p>"},{"location":"program/espnow/","title":"ESP-NOW","text":""},{"location":"program/espnow/#referencias","title":"Referencias","text":"<p>Los contenidos de este apartado van a estar basados en:</p> <ul> <li>Manual Comunicaci\u00f3n ESP-NOW con ESP32 STEAMakers creado por Juanjo L\u00f3pez.</li> <li>Apuntes ESP-NOW de Pedro Ruiz.</li> <li>Wireless Communication Protocol (ESP-NOW) de Espressif.</li> <li>Getting Started with ESP-NOW (ESP32 with Arduino IDE) de Random Nerd Tutorials.</li> </ul>"},{"location":"program/espnow/#introduccion-a-esp-now","title":"Introducci\u00f3n a ESP-NOW","text":"<p>ESP-NOW es un protocolo de comunicaci\u00f3n inal\u00e1mbrica desarrollado por Espressif para los microcontroladores ESP32, que permte que varios dispositivos se comuniquen entre s\u00ed sin utilizar una red Wi-Fi. Trabaja con baja potencia y baja latencia en la banda de 2.4 GHz para transmitir peque\u00f1os paquetes de datos directamente entre dispositivos ESP32.</p> <p>Este funcionamiento permite la comunicaci\u00f3n directa entre m\u00faltiples dispositivos, formando una red red inal\u00e1mbrica descentralizada ad-hoc (todos los dispositivos est\u00e1n en igualdad de condiciones), y soporta tanto unicast (direcci\u00f3n destino a un \u00fanico destino) como multicast (direcci\u00f3n destino a multiples destinos), permitiendo la transmisi\u00f3n de datos a uno o varios dispositivos simult\u00e1neamente.</p> <p>Es necesario el emparejamiento entre dispositivos antes de establecer su comunicaci\u00f3n. Una vez realizado el emparejamiento, la conexi\u00f3n es segura y de igual a igual, sin necesidad de mas presentaciones. Esto significa que despu\u00e9s de emparejar un dispositivo con otro, la conexi\u00f3n es persistente. En otras palabras, si de repente una de tus placas pierde potencia o se reinicia, al reiniciarse se conectar\u00e1 autom\u00e1ticamente a su par para continuar la comunicaci\u00f3n.</p> <p> <p> Logotipo ESP-NOW</p> <p></p>"},{"location":"program/espnow/#caracteristicas-de-esp-now","title":"Caracter\u00edsticas de ESP-NOW","text":"<ul> <li>Comunicaci\u00f3n unididireccional encriptada y no encriptada;</li> <li>Dispositivos emparejados encriptados y no encriptados;</li> <li>Puede transportarse una carga \u00fatil de hasta 250 bytes;</li> <li>Funci\u00f3n de devoluci\u00f3n de llamada al env\u00edo que puede configurarse para informar a la capa de aplicaci\u00f3n del \u00e9xito o fracaso de la transmisi\u00f3n.</li> </ul> <p>ESP-NOW es un protocolo de comunicaci\u00f3n inal\u00e1mbrica basado en la capa de enlace de datos, que reduce las cinco capas del modelo OSI a una sola.</p> <p> <p> Logotipo ESP-NOW</p> <p></p>"},{"location":"program/espnow/#ventajas-e-inconvenientes","title":"Ventajas e inconvenientes","text":""},{"location":"program/espnow/#ventajas","title":"Ventajas","text":"<ul> <li>Coexistencia con WiFi y Bluetooth LE.</li> <li>Ocupa menos recursos de memoria flash y de CPU.</li> <li>Aplicaciones en tiempo real por la transmisi\u00f3n de datos casi instant\u00e1nea, con una latencia muy baja.</li> <li>Algoritmos ECDH y AES de encriptaci\u00f3n de datos mediante claves precompartidas, asegurando la comunicaci\u00f3n.</li> <li>Gran eficiencia energ\u00e9tica.</li> <li>Facil de implementar dada su simplicidad.</li> <li>Proyectos colaborativos dado que m\u00faltiples robots pueden comunicarse entre s\u00ed de manera eficiente.</li> <li>El no depende de una infraestructura WiFi le dota de una gran portabilidad y flexibilidad.</li> </ul>"},{"location":"program/espnow/#inconvenientes","title":"Inconvenientes","text":"<ul> <li>N\u00famero limitado de pares cifrados.</li> <li>Se admiten 10 pares cifrados como m\u00e1ximo.</li> <li>Se admiten varios pares no cifrados, pero su n\u00famero total debe ser inferior a 20, incluidos los pares cifrados.</li> <li>La carga \u00fatil est\u00e1 limitada a 250 bytes.</li> </ul> <p>Resumiendo:</p> <p>ESP-NOW es un protocolo de comunicaci\u00f3n r\u00e1pida que se puede utilizar para intercambiar mensajes peque\u00f1os (hasta 250 bytes) entre placas ESP32.</p>"},{"location":"program/espnow/#comunicaciones-esp-now","title":"Comunicaciones ESP-NOW","text":"<p>ESP-NOW es muy vers\u00e1til y se puede tener una comunicaci\u00f3n unidireccional o bidireccional en diferentes configuraciones.</p> <p>Nota</p> <p>En la documentaci\u00f3n no hablaremos de \"sender/master (emisor/maestro)\" y \"receiver/slave (receptor/esclavo)\". Cada placa puede ser emisora o receptora. Sin embargo, para mantener las cosas claras utilizaremos los t\u00e9rminos \"emisor\" y \"receptor\" o \"maestro\" y \"esclavo\" o \"master\" y \"slave\".</p>"},{"location":"program/espnow/#unidireccionales","title":"Unidireccionales","text":""},{"location":"program/espnow/#un-master-un-slave","title":"Un master un slave","text":"<p>Esta configuraci\u00f3n es la m\u00e1s f\u00e1cil de implementar y es ideal para enviar datos de una placa a otra. Se trata de una ESP32 micro:STEAMakers enviando datos a otra ESP32 micro:STEAMakers o cualquier otra placa ESP32.</p> <p> <p> Comunicaci\u00f3n unidireccional</p> <p></p>"},{"location":"program/espnow/#un-master-multiples-slaves","title":"Un master multiples slaves","text":"<p>Una placa ESP32 micro:STEAMakers enviando el mismo o diferentes comandos a diferentes placas ESP32 micro:STEAMakers. Esta configuraci\u00f3n es ideal para construir algo parecido a un mando a distancia. Se pueden tener varias placas ESP32 micro:STEAMakers (slaves o esclavas) que son controladas por una placa ESP32 micro:STEAMakers (master o maestra o principal).</p> <p> <p> Un master multiples slaves</p> <p></p>"},{"location":"program/espnow/#un-slave-multiples-masters","title":"Un slave multiples masters","text":"<p>Esta configuraci\u00f3n es ideal si queremos recopilar datos de varios nodos sensorizados en una placa ESP32 micro:STEAMakers. La placa receptora se puede configurarse como servidor web para mostrar los datos de todas las dem\u00e1s placas, por ejemplo.</p> <p> <p> Un slave multiples masters</p> <p></p>"},{"location":"program/espnow/#comunicacion-bidireccional","title":"Comunicaci\u00f3n bidireccional","text":"<p>Con ESP-NOW, cada placa puede ser emisora y receptora al mismo tiempo. As\u00ed, se puede establecer una comunicaci\u00f3n bidireccional entre placas.</p> <p> <p> Comunicaci\u00f3n bidireccional</p> <p></p>"},{"location":"program/espnow/#direccion-mac","title":"Direcci\u00f3n MAC","text":"<p>Para comunicarse a trav\u00e9s de ESP-NOW, se necesita conocer la Direcci\u00f3n MAC del receptor ESP32. As\u00ed sabr\u00e1 a qu\u00e9 dispositivo enviar\u00e1 los datos.</p> <p>Cada ESP32 micro:STEAMakers tiene una direcci\u00f3n MAC \u00fanica y as\u00ed es como podemos identificar cada placa para enviarle datos mediante ESP-NOW.</p> <p>Pero \u00bfQue es una direcci\u00f3n MAC?. MAC son iniciales de MediaAccessControl que significa control de acceso al medio y es un identificador \u00fanico de hardware que identifica cada dispositivo de una red. <p>Las direcciones MAC est\u00e1n formadas por seis grupos (6 bytes) de dos d\u00edgitos hexadecimales, separados por dos puntos o, a veces, un gui\u00f3n, por ejemplo: 34:98:7A:A9:D1:A8.</p> <p>Las direcciones MAC son asignadas por los fabricantes, aunque se pueden cambiar a una direcci\u00f3n MAC personalizada. Pero hay que tener muy presente que cada vez que la placa se reinicie, volver\u00e1 a su direcci\u00f3n MAC original.</p> <p>En el caso de las placas ESP32, la direcci\u00f3n MAC se utiliza tanto para la conexi\u00f3n Wi-Fi como para la comunicaci\u00f3n ESP-NOW.</p>"},{"location":"program/espnowAB/","title":"ESP-NOW","text":""},{"location":"program/espnowAB/#referencias","title":"Referencias","text":"<p>Los contenidos de este apartado van a estar basados en:</p> <ul> <li>Manual Comunicaci\u00f3n ESP-NOW con ESP32 STEAMakers creado por Juanjo L\u00f3pez.</li> <li>Apuntes ESP-NOW de Pedro Ruiz.</li> </ul>"},{"location":"program/espnowAB/#obtener-mac-placa-microsteamakers","title":"Obtener MAC placa micro:STEAMakers","text":"<p>Para obtener la direcci\u00f3n MAC por consola se puede usar el siguiente programa:</p> <p> <p> Programa para obtener MAC placa micro:STEAMakers</p> <p></p> <p>El resultado en consola es el de la imagen siguiente:</p> <p> <p> Consola del programa para obtener MAC placa micro:STEAMakers</p> <p></p> <p>Si al hacer clic en el bot\u00f3n verde Conectar de la consola no aparece nada en pantalla ser\u00e1 necesario pulsar el bot\u00f3n de reset de la placa.</p> <p>Otra posibilidad es conectar una pantalla a la micro:STEAMakers y sacar la MAC por ella. En este caso el programa para una OLED I2C ser\u00eda:</p> <p> <p> Programa para obtener MAC placa micro:STEAMakers</p> <p></p> <p>Que da como resultado:</p> <p> <p> Resultado en OLED del programa para obtener MAC placa micro:STEAMakers</p> <p></p> <p>Consejo</p> <p>A la hora de trabajar con proyectos ESP-NOW es recomendable etiquetar f\u00edsicamente cada placa con la direcci\u00f3n MAC obtenida para poder f\u00e1cilmente identificar cada una de ellas durante la programaci\u00f3n. </p> <p></p>"},{"location":"program/espnowAB/#bloques-esp-now","title":"Bloques ESP-NOW","text":""},{"location":"program/espnowAB/#bloque-iniciar","title":"Bloque iniciar","text":"<p>Es obligatorio para iniciar el protocolo ESP-NOW y lo pondremos en el bloque de inicializaci\u00f3n de nuestros programas.</p> <p>El bloque permite activar o no la encriptaci\u00f3n de las comunicaciones. La encriptaci\u00f3n es muy importante para hacer proyectos seguros y evitar que espien nuestras comunicaciones, o que puedan inundarnos (flooding) con paquetes de datos ajenos. Los dos tipos de claves son:</p> <ul> <li> <p>PMK (Private Master Key) o clave maestra: es la usada para encriptar la clave LMK con cifrado AES128. Es obligatorio definir esta clave, por lo que si no modificamos nada la clave son los 16 guiones (bytes) por defecto (\"----------------\"). Ya que vamos a a\u00f1adir seguridad lo suyo es cambiarla.</p> </li> <li> <p>LMK (Local Master Key) o clave local: es la clave que se utiliza para encriptar action frames (tipo de trama de gesti\u00f3n que se utiliza para desencadenar una acci\u00f3n) con el m\u00e9todo de criptograf\u00eda CCMP. Es la encriptaci\u00f3n a nivel de dispositivo. Tiene la misma composici\u00f3n que la clave PMK.</p> </li> </ul> <p>Importante</p> <p>En los dispositivos emparejados en la red ESP-NOW deber\u00e1n coincidir las claves para poder establecer comunicaci\u00f3n.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque iniciar</p> <p></p>"},{"location":"program/espnowAB/#bloque-establecer-canal","title":"Bloque establecer canal","text":"<p>Bloque para establecer el canal WiFi de nuestra red ESP-NOW.</p> <p>Sin entrar en detalles diremos como simil que un canal de una red inal\u00e1mbrica y las diferentes frecuencias que utiliza funciona de manera similar a la radio y sus frecuencias. Las redes WiFi trabajan en frecuencia de GHz, indicando la frecuencia a la que se transmiten los datos. Si cambiamos de canal estamos cambiando la frecuencia de transmisi\u00f3n.</p> <p>El est\u00e1ndar WiFi 802.11 b/g/n indica que en redes WiFi de 2.4GHz se pueden configurar anchos de canal de 20 y 40 MHz.</p> <p>En la banda de 2.4 GHz el est\u00e1ndar WiFi establece la separaci\u00f3n de canales en 5 MHz. Si representamos cada canal por un cono truncado con su base inferior de 20MHz (para 40MHz se daria la misma situaci\u00f3n) y su base superior de 5MHz. Cada canal empieza 5MHz por encima del anterior. Si representamos esto obtenemos, de forma simplificada, una representaci\u00f3n de los canales WiFi del espectro de 2.4GHz que vemos a continuaci\u00f3n:</p> <p> <p> Canales Wifi en 2.4GHz Imagen obtenida de \u00bfPor qu\u00e9 se utilizan los canales WiFi 1, 6 y 11 en 2.4GHz? de ACRYLIC</p> <p></p> <p>Cuando por ejemplo situamos la banda en el canal 6, este se solapa con parte del 4,5,7 y 8; en concreto 15MHz de solapamiento.</p> <p>En la figura se aprecia el motivo de por qu\u00e9 se dice que los mejores canales son el 1,6,11 o 2,6,10 o 1,5,9 o 3,7,11 ya que para un ancho de banda de 20MHz no se solaparian. Pero la imagen es una representaci\u00f3n idealizada y en realidad es mas complejo tal y como se explica en los art\u00edculos (ambos en ingl\u00e9s) citados en la imagen siguiente:</p> <p> <p> Representaci\u00f3n gr\u00e1fica del solapamiento de canales de 22 MHz en la banda de 2,4 GHz Imagen obtenida del enlace Electromagnetic interference at 2.4 GHz \u00a7 Wi-Fi en el art\u00edculo List of WLAN channels de Wikipedia</p> <p></p> <p>Atribuci\u00f3n imagen anterior</p> <p>By Michael Gauthier, Wireless Networking in the Developing WorldKelleyCook, image improvementsWhidou, French translation - This file was derived from: 2.4 GHz Wi-Fi channels (802.11b,g WLAN).png\u00a0by Michael Gauthier, CC BY-SA 3.0, https://commons.wikimedia.org/w/index.php?curid=8353678</p> <p>Vemos que en realidad el ancho de banda es 22MHz por lo que se produce un peque\u00f1o solapamiento. En la imagen anterior vemos tambi\u00e9n que aparecen los canales 12 y 13, lo que tiene que ver con la zona geogr\u00e1fica en que nos encontremos. En USA va del 1 al 11, Jap\u00f3n del 1 al 14 y el resto del mundo del 1 al 13.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque establecer canal</p> <p></p>"},{"location":"program/espnowAB/#emparejar-nodo-remoto","title":"Emparejar nodo remoto","text":"<p>Bloque para a\u00f1adir un nodo a partir de su direcci\u00f3n MAC. Una vez emparejado ya podemos enviar datos a ese nodo.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque Emparejar nodo remoto</p> <p></p> <p>En las especificaciones de ESP-NOW (limitations) indica que el n\u00famero de pares cifrados m\u00e1ximo es de 10 en modo emisor; 6 en modo receptor y emisor. Se admiten varios (sin indicar n\u00famero) pares no cifrados, pero el n\u00famero total debe ser inferior a 20, incluidos los cifrados.</p>"},{"location":"program/espnowAB/#enviar-a-un-nodo","title":"Enviar a un nodo","text":"<p>Bloque para enviar datos (en forma de trama de texto) a un nodo remoto con una longitud m\u00e1xima de 250 caracteres.</p> <p>Muy importante</p> <p>El nodo debe estar previamente emparejado.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque enviar a nodo remoto</p> <p></p>"},{"location":"program/espnowAB/#enviar-a-todos","title":"Enviar a todos","text":"<p>Bloque para enviar datos (en forma de trama de texto) a todos los nodos emparejados con una longitud m\u00e1xima de 250 caracteres.</p> <p>Muy importante</p> <p>Todos los nodos deben estar previamente emparejados.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Bloque enviar a todos</p> <p></p>"},{"location":"program/espnowAB/#ultimo-envio-correcto","title":"\u00bf\u00daltimo envio correcto?","text":"<p>Bloque para comprobar si el \u00faltimo envio de datos se ha realizado correctamente. Con el podemos detectar si ha habido acuse de recibo del nodo remoto o no.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> \u00bf\u00daltimo envio correcto?</p> <p></p>"},{"location":"program/espnowAB/#evento-al-recibir-datos","title":"Evento al recibir datos","text":"<p>Evento que se produce cuando se reciben datos de un nodo remoto.</p> <p>El aspecto del bloque es el siguiente:</p> <p> <p> Evento al recibir datos</p> <p></p> <p>Dentro del evento podemos utilizar el bloque de la imagen siguiente para tener los valores v\u00e1lidos tanto de los datos recibidos como la direcci\u00f3n MAC del nodo remitente.</p> <p> <p> Datos recibidos</p> <p></p> <p>Importante</p> <p>El evento \u201cAl recibir datos\u201d se puede bloquear internamente si realizamos esperas bloqueantes en nuestro programa. Por tanto evitar usar el bloque \u201cesperar\u201d, y en su lugar utilizar el \u201cejecutar cada\u201d u otros esquemas de programaci\u00f3n similares no bloqueantes.</p>"},{"location":"program/inicio/","title":"Programaci\u00f3n de micro:STEAMakers","text":""},{"location":"program/inicio/#introduccion-a-la-programacion-de-microsteamakers-con-arduinoblocks","title":"Introducci\u00f3n a la programaci\u00f3n de micro:STEAMakers con arduinoblocks","text":"<p>El tipo de proyecto a escoger lo vemos en la imagen siguiente:</p> <p> <p> Tipo de proyecto ESP32 microSTEAMakers</p> <p></p> <p>En los bloques vamos a tener disponible la categoria micro:STEAMakers siguiente:</p> <p> <p> Categoria de bloques microSTEAMakers</p> <p></p>"},{"location":"program/inicio/#sensores-integrados","title":"Sensores integrados","text":"<p>En esta categoria aparecen todos los sensores disponibles por defecto en la placa. Vemos la lista en la imagen siguiente:</p> <p> <p> Sensores integrados</p> <p></p> <p>A continuaci\u00f3n se describen brevemente los bloques de la categoria.</p> <ul> <li>Bloque Pulsador pulsado para saber el estado de los pulsadores de manera individual o ambos al mismo tiempo.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Pulsador se ha pulsado para analizar el evento de si se ha pulsado o se ha soltado el pulsador A o el B.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Pulsador t\u00e1ctil para comprobar si el pulsador t\u00e1ctil se ha activado.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Nivel de luz que permite medir la luminosidad ambiente bien en porcentaje o bien en valor num\u00e9rico entre 0 y 4095.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Temperatura y humedad para medir los citados par\u00e1metros directamente desde la placa ESP32 micro:STEAMakers.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Nivel de sonido para obtener el nivel de ruido ambiente bien en porcentaje o bien en valor num\u00e9rico entre 0 y 4095.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Accel+Gyro (MPU6050) devuelve los datos del giroscopio integrado en el MPU6050 referentes a aceleraci\u00f3n y giro en los tres ejes X, Y, Z.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Medidor de energia para medir el consumo que est\u00e1 teniendo nuestra placa.</li> </ul> <p> <p></p> <p></p> <ul> <li>Bloque Medidor de energia &gt; Reset Wh=0 para resetear el sensor.</li> </ul> <p> <p></p> <p></p>"},{"location":"program/inicio/#actuadores","title":"Actuadores","text":"<p>Como actuador tenemos el Buzzer o zumbador y los bloques disponibles son los siguientes:</p> <p> <p> Actuadores</p> <p></p> <p>Los bloques que vemos son los cl\u00e1sico para reproducir tonos o para reproducir melodias.</p> <ul> <li>El bloque zumbador siguiente nos permite reproducir durante el tiempo que indiquemos (expresado en milisegundos) en Ms la frecuencia especificada en Hz.</li> </ul> <p> <p> Bloque Ms Hz</p> <p></p> <ul> <li>Al bloque anterior le podemos indicar como frecuencia directamente cualquiera de los tonos de la nota \"La\" central que tiene una frecuencia de 440 Hz.</li> </ul> <p> <p> Bloque Ms Hz con tonos</p> <p></p>"},{"location":"program/inicio/#neomatrix","title":"NeoMatrix","text":"<p>Los bloques para la matriz de 5x5 LEDs RGB los vemos en la imagen siguiente:</p> <p> <p> Bloques NeoMatrix</p> <p></p> <p>Los bloques de inicializaci\u00f3n general son los tres que vemos en la imagen siguiente:</p> <p> <p> Bloques de inicializaci\u00f3n de la matriz</p> <p></p> <p>El bloque Bitmap nos permite dibujar directamente en la matriz escogiendo pixel a pixel el color de la paleta que se muestra. En la animaci\u00f3n siguiente vemos un primer ejemplo de dibujar una carita con los labios rojos, los ojos azules y el pelo rubio.</p> <p> <p> Ejemplo carita</p> <p></p> <p>Veamos ahora los bloques de texto. Los disponibles los vemos en la imagen siguiente:</p> <p> <p> Bloques de texto</p> <p></p> <p>En el tema de texto con scroll debemos saber que ese no bloquea el funcionamiento del programa por lo que hay un bloque denominado \u00bftexto desplazandose? para saber si el scroll est\u00e1 en proceso. El par\u00e1metro Ms se refiere a la velocidad del desplazamiento o scroll medida en milisegundos. Un sencillo ejemplo como el de la imagen siguiente no aclara el uso de esto.</p> <p> <p> Ejemplo scroll de texto</p> <p></p> <p>En el ejemplo siguiente vemos el uso b\u00e1sico del resto de bloques de la categoria. Observamos como posicionar una \"H\" en una coordenada, mostrar un texto, rellenar de un color, poner los pixeles de las esquinas de dos colores en diagonal, sibujar una X con dos l\u00edneas cruzadas blancas, crear dos rect\u00e1ngulos, uno con relleno y el otro sin el y dibujar un circulo.</p> <p> <p> Ejemplo bloques NeoMatrix</p> <p></p> <p>En la animaci\u00f3n siguiente podemos observar el funcionamiento del programa.</p> <p> <p> Funcionamiento del ejemplo bloques NeoMatrix</p> <p></p> <p>El recuadro blanco es una especie de filtro impreso en 3D para que los LEDs deslumbren menos a la c\u00e1mara. Aunque su dise\u00f1o es muy simple aqu\u00ed dejo el archivo STL por si te interesa.</p>"},{"location":"program/inicio/#tarjeta-microsd","title":"Tarjeta microSD","text":"<p>Los bloques para tarjeta SD disponibles los vemos en la imagen siguiente:</p> <p> <p> Tarjeta SD</p> <p></p> <p>Son los t\u00edpicos de iniciar, leer y escribir en tarjetas SD y que se describen en el apartado Tarjeta SD del arduinoblocks FreeBook - ES.</p> <p>Para almacenar datos en una tarjeta microSD y posteriormente abrirlos en una hoja de c\u00e1lculo existe un bloque denominado 'Crear texto CSV', que encontramos en el men\u00fa 'Texto', que nos permite unir varios datos en formato CSV utilizando un caracter delimitador.</p> <p> <p> Bloque crear texto CSV</p> <p></p>"},{"location":"program/iotAB/","title":"IoT","text":""},{"location":"program/iotAB/#introduccion","title":"Introducci\u00f3n","text":"<p>Como se puede ver en la secci\u00f3n Teor\u00eda b\u00e1sica de IoT el broker que vamos a utilizar utiliza un dispositivo MQTT para trabajar, por lo que en arduinoblocks necesitamos bloques MQTT que se comuniquen con el MQTT del broker.</p> <p>Antes de entrar en los bloques de programaci\u00f3n tenemos que saber que el broker MQTT de Thinspeak esta en la direcci\u00f3n mqtt3.thingspeak.com y el puerto que utiliza para comunicarse es el 1883:</p> <p>Servidor MQTT de Thingspeak</p> <p>Direcci\u00f3n: mqtt3.thingspeak.com Puerto: 1883</p>"},{"location":"program/iotAB/#bloques-mqtt","title":"Bloques MQTT","text":"<p>Los bloques MQTT est\u00e1n explicados en en el libro online Arduinoblocks free edition y aqu\u00ed veremos muy brevemente los que vamos a utilizar:</p> <ul> <li>Iniciar WiFi. Aunque no es un bloque MQTT lo primero que debemos hacer es dar conectividad WiFi a nuestra placa para poder comunicarnos via MQTT con el broker.</li> </ul> <p> <p> Conectar a red WiFi</p> <p></p> <ul> <li>Iniciar. La primera tarea a realizar ser\u00e1 iniciar el broker con los datos anteriores y las credenciales que nos ha suministrado Thingspeak.</li> </ul> <p> <p> Iniciar broker</p> <p></p> <ul> <li>Publicar. Para enviar datos a los campos del canal creado.</li> </ul> <p> <p> Publicar en el broker</p> <p></p> <ul> <li>Thingspeak publish. Define la parte \"Tema\" del bloque anterior. Tenemos que indicarle el ID del canal y el campo en el que lo haremos. Tengase en cuenta que Thingspeak ordenada los campos de field1 ... field8 de manera invariable por lo que tenemos nosotros que saber que variable hemos puesto en cada campo.</li> </ul> <p> <p> Thingspeak publish</p> <p></p> <p>Publicar campo a campo</p> <p>Con los bloques anteriores ya podemos trabajar perfectamente enviando de uno en uno los datos al broker por MQTT. En cuentas gratuitas debemos tener presente que debemos dejar transcurrir un tiempo de 15 segundos entre envios.</p>"},{"location":"program/iotAB/#ejemplo-de-subida-dato-a-dato","title":"Ejemplo de subida dato a dato","text":"<p>Vamos a ver un ejemplo de envio de datos al canal. Vamos a enviar el nivel de luz y la humedad que dan los sensores que monta la placa micro:STEAMakers. El programa es el siguiente:</p> <p> <p> Ejemplo de subida dato a dato</p> <p></p> <p>Mas adelante veremos diferentes formas de visualizar los resultados, pero por ahora, en el canal tenemos lo siguiente:</p> <p> <p> Resultados de ejemplo de subida dato a dato</p> <p></p>"},{"location":"program/iotAB/#mas-bloques-mqtt","title":"Mas bloques MQTT","text":"<p>A veces puede resultar tedioso y lento el subir los datos uno a uno. En arduinoblocks existe la posibilidad de utilizar los bloques \"multi publish\" que realizan una publicaci\u00f3n de todos los datos en una sola subida.</p> <ul> <li>Thingspeak multi publish con ID. Para publicar a partir del ID del canal.</li> </ul> <p> <p> Thingspeak multi publish con ID</p> <p></p> <ul> <li>Thingspeak multi publish Values. El bloque concatena los valores a publicar como una cadena y los sube de una sola vez. La parte difuminada del bloque indica claramente que debemos usarlo en conjunto con el siguiente que vamos a ver: Thingspeak multi publish Field</li> </ul> <p> <p> Thingspeak multi publish Values</p> <p></p> <ul> <li>Thingspeak multi publish Field. Permite definir el valor y el campo en el que se publicar\u00e1. Debemos usarlo en conjunto con el anterior: Thingspeak multi publish Values</li> </ul> <p> <p> Thingspeak multi publish Field</p> <p></p> <p>En la actividad A04-Temperatura y Humedad con Thingspeak se utilizan estos bloques.</p>"},{"location":"program/mesh/","title":"WiFiMesh","text":"<p>El contenido de esta secci\u00f3n est\u00e1 basado en el apartado WiFiMesh del manual ESP32 STEAMakers - nuevos bloques - WiFi \u00b7 IoT \u00b7 WifiMesh de arduinoblocks.</p> <p>\u00a1\u00a1 ADVERTENCIA !!</p> <p>WiFiMesh presente, en algunas ocasiones, un problema, y es se pierden m\u00e1s mensajes de los que deber\u00edan, y a veces a unos les llegan y a otros no, o incluso no le llegan a ning\u00fan nodo. Es posible que en el momento que leas esto los bloques para WiFiMesh de arduinoblocks est\u00e9n considerados como obsoletos (deprecated) y por lo tanto est\u00e9n desabilitados. Pero las mismas o similares actividades se pueden realizar con ESPNOW.</p> <p>WifiMesh implementa una malla WiFi de dispositivos descentralizada, de manera que todas las placas micro:STEAMakers estar\u00e1n interconectadas de forma sencilla y sin necesidad de una red WiFi previa o punto de acceso (la crean ellas mismas autom\u00e1ticamente). Cada dispositivo puede enviar mensajes al resto y recibir de cualquiera (\u00a1hablan todas con todas!)</p> <p> <p> Malla WiFiMesh de tres nodos</p> <p></p> <p>En arduinoblocks el proceso de intercambio de mensajes entre placas ESP32 micro:STEAMakers es muy f\u00e1cil de utilizar. No necesitamos una red previa donde conectarnos, los propios dispositivos crean un red propia entre ellos para intercambiar informaci\u00f3n.</p> <p>Todos los dispositivos (nodos) que vayan a formar parte de la red Mesh (malla) deben compartir la misma configuraci\u00f3n de nombre, clave de la red y puerto.</p> <p>Analizamos en este mismo apartado los bloques de arduinoblocks que tenemos disponibles para WiFiMesh.</p> <p> Bloque Descripci\u00f3n breve Crea o une el dispositivo a una red \"mesh\" Enviar un mensaje a todos los nodos de la red: env\u00eda un mensaje a todos los nodos conectados a nuestra red \u201cmesh\u201d Enviar un mensaje a todos los nodos de la red: env\u00eda un mensaje y datos (opcionales) a todos los nodos conectados a nuestra red \u201cmesh\u201d Recibi mensajes de otros nodos (evento de recepci\u00f3n), este bloque recibe todos los mensajes y ya dentro podr\u00e9 determinar el mensaje y los datos recibidos Recibi mensajes de otros nodos (evento de recepci\u00f3n), este bloque recibe todos los mensajes y ya dentro podr\u00e9 determinar el mensaje Bloque asociado al de \"Mensaje recibido\" para obtener el mensaje recibido Bloque asociado al de \"Mensaje recibido\" para obtener los datos asociados al mensaje recibido <p></p> <p>En la imagen siguiente se describen los beneficios de ESP-WiFi-Mesh seg\u00fan Espressif, la empresa creadora de los microcontroladores ESP32-WROOM:</p> <p> <p> Beneficios de ESP-WiFi-Mesh</p> <p></p>"},{"location":"program/server/","title":"Servidor web","text":""},{"location":"program/server/#introduccion","title":"Introducci\u00f3n","text":"<p>Nos basamos en el documento ESP32 STEAMakers. nuevos bloques. WiFi \u00b7 IoT \u00b7 WifiMesh dado que al portar un procesador ESP32, la micro:STEAMakers tiene capacidades WiFi, lo que nos va a permitir que la placa actue como servidor o como cliente web.</p> <p>Los bloques disponibles son los siguientes:</p> <p> <p> Bloques HTTP Server</p> <p></p> <p>En el submen\u00fa HTML tenemos disponibles bloques que nos permiten dar un poco de formato HTML a la web:</p> <p> <p> Bloques HTML</p> <p></p> <p>Para nuestros programas vamos a necesitar bloques WiFi de los que vemos a continuaci\u00f3n:</p> <p> <p> Bloques WiFi</p> <p></p>"},{"location":"program/server/#peticiones-http","title":"Peticiones HTTP","text":"<p>Simplemente vamos a extraer del manual online la forma en que se realiza una petici\u00f3n HTTP.</p> <p>Peticiones HTTP</p> <p>Las peticiones HTTP las haremos normalmente desde un navegador, poniendo la IP de nuestro dispositivo en la barra de direcciones con el protocolo http. Por ejemplo si nuestro dispositivo tiene la direcci\u00f3n IP 192.168.4.4: http://192.168.4.4.</p> <p>El formato de la URL que podemos solicitar a nuestra ESP32 STEAMakers es:</p> <p> http://direccionip/accion?parametros </p> <p>La direcci\u00f3n IP es la que tenga el dispositivo.</p> <p>La acci\u00f3n (opcional) ser\u00e1 la web o comando que queremos pedirle al servidor. En un servidor web real (este es real, me refiero a uno tradicional tipo Apache, etc\u2026) ser\u00eda el documento del servidor que estamos solicitando (ejemplo: index.html, index.php , guardardatos.jsp, \u2026.)</p> <p>Los par\u00e1metros (en este caso par\u00e1metros tipo GET) son datos adicionales que le damos al servidor normalmente como informaci\u00f3n extra a la acci\u00f3n solicitada. Los par\u00e1metros GET son opcionales, siempre van despu\u00e9s del s\u00edmbolo \u201c?\u201d y se forman con pares \u201cclave=valor\u201d separados entre ellos por \u201c&amp;\u201d.</p>"},{"location":"program/thinspeak/","title":"Teor\u00eda b\u00e1sica de IoT","text":""},{"location":"program/thinspeak/#que-es-la-internet-de-las-cosas","title":"\u00bfQu\u00e9 es la Internet de las Cosas?","text":"<p>La expresi\u00f3n \u201cInternet de las cosas\u201d o IoT (del ingl\u00e9s, Internet of Things), internet de todas las cosas o internet en las cosas, hace referencia al uso que hacen de Internet los dispositivos conectados (las cosas) para comunicarse sin intervenci\u00f3n humana directa. Tambi\u00e9n se usa el t\u00e9rmino IoT para referirse al conjunto de estos dispositivos conectados comunicando \u201centre m\u00e1quinas\u201d (M2M) sin requerir interacci\u00f3n humana. No existe una Internet especial o diferente para \u201clas cosas\u201d, en principio, se opera con las mismas redes que en otros usos de Internet. En la imagen siguiente se grafica la conexi\u00f3n de elementos con la nube a trav\u00e9s de la red.</p> <p> <p> Conexi\u00f3n de elementos IoT con la nube</p> <p></p> <p>El IoT sirve para monitorizaci\u00f3n y control electr\u00f3nico y toma de decisiones inteligente. Es decir, conectar dispositivos a Internet permite enviar y recibir informaci\u00f3n usando una infraestructura global y as\u00ed poder monitorizar y/o controlar autom\u00e1ticamente y a distancia multitud de contextos. Por ejemplo, en entornos urbanos (ciudades inteligentes) se puede conocer la actividad humana, del medio ambiente, del tr\u00e1fico\u2026 tanto para informar de su estado (como las plazas de aparcamiento disponibles, la densidad o velocidad de la circulaci\u00f3n, la contaminaci\u00f3n\u2026) como para tomar decisiones de forma manual o autom\u00e1tica para optimizar los recursos disponibles (iluminaci\u00f3n, riego de jardines, funcionamiento de los sem\u00e1foros\u2026)</p>"},{"location":"program/thinspeak/#trabajo-con-placas-tradicionales","title":"Trabajo con placas tradicionales","text":"<p>Para conectar a la red las placas tipo Arduino, sus clones o basadas en el mismo usaremos los m\u00f3dulos ESP8266. El ESP8266 es un chip de bajo costo Wi-Fi que contiene su propio microcontrolador, un Tensilica L106 de 32-bit. Es un chip de bajo bajo coste y reducido tama\u00f1o. El chip ESP8266 forma parte de multitud de m\u00f3dulos comerciales a trav\u00e9s de diferentes soluciones con distintas funciones, pines, tama\u00f1os y precios.</p> <p> <p> Modelos ESP</p> <p></p> <p>El m\u00e1s simple es el ESP-01, que solo dispone de 2 puertos digitales y necesita un adaptador USB para poder ser programado. Hay otros muchos sistemas como por ejemplo la placa ESP32 STEAMakers, ESP-12E de ESP8266, la placa de desarrollo NodeMCU, tambi\u00e9n basada en el ESP-12E, Adem\u00e1s, hay placas con WiFi que usan otros chip WiFi diferentes, como la Arduino MKR1000.</p> <p> ESP32 STEAMakers ESP-12E NodeMCU de Keyestudio Arduino MKR1000 <p></p>"},{"location":"program/thinspeak/#modulo-esp8266-esp-01","title":"M\u00f3dulo ESP8266 ESP-01","text":""},{"location":"program/thinspeak/#introduccion","title":"Introducci\u00f3n","text":"<p>El m\u00f3dulo WiFi ESP-01 es uno de las m\u00e1s populares y econ\u00f3micos, pese a no ser el m\u00e1s potente ni vers\u00e1til. Actualmente, otros modelos como la ESP-12 o el el ESP32 se est\u00e1n integrando en la mayor\u00eda de placas de desarrollo, cobrando un peso e importancia mucho mayor. Sin embargo, podemos asociar nuestro peque\u00f1o ESP-01 a, por ejemplo, una placa UNO, con el \u00fanico fin de darle conectividad WiFi.</p> <p>El ESP-01 trae instalado una versi\u00f3n de firmware con la que podemos comunicarnos con el ESP8266 mediante comandos AT (veremos a continuaci\u00f3n algunos de ellos) a trav\u00e9s del puerto serie. Este tipo de comunicaci\u00f3n nos va a permitir crear un puente entre la placa TdR STEAM y el ESP8266, consiguiendo as\u00ed conectar a una red WiFi y dar un primer paso de gigantes en el mundo IoT.</p> <p>Veamos el aspecto del ESP-01 y algunas de sus caracter\u00edsticas:</p> <p> Imagen ESP-01 Descripci\u00f3n - ESP8266 es el microcontrolador del m\u00f3dulo ESP-01.- La memoria flash es la BG25Q80A- Los LEDs informan de si est\u00e1 encendido o no y de la transmisi\u00f3n de datos (Tx y Rx).- La antena WiFi para la conexi\u00f3n a una internet.- Los pines permiten conectar alimentaci\u00f3n, sensores, \u2026Toda la informaci\u00f3n en el datasheet del fabricante <p></p> <p>Los pines est\u00e1n distribuidos de la siguiente forma:</p> <p> Pines ESP-01 Descripci\u00f3n 1 - GND2 - Pin digital n\u00famero 23 - Pin digital n\u00famero 04 - RXD es el pin por donde se van a recibir los datos del puerto serie. Trabaja a 3,3 V. Tambi\u00e9n puede ser el pin digital GPIO3 5 - TXD es el pin por donde se van a transmitir los datos del puerto serie. Trabaja a 3,3 V. Tambi\u00e9n puede ser el pin digital GPIO1 6 - CH_PD es el pin para apagar y encender el ESP-01: si lo ponemos a 0 V (LOW) se apaga, y a 3,3 V (HIGH) se enciende.7 - RESET pin a 0V resetea el ESP-01- Vcc es el pin de alimentaci\u00f3n. Funciona a 3,3V y admite un m\u00e1ximo de 3,6 V. La corriente suministrada debe ser mayor que 200 mA. <p></p> <p>GPIO (del ingl\u00e9s, General Purpose Input Output) son entradas o salidas de prop\u00f3sito general, o sea pines digitales.</p> <p>El ESP-01 soporta comunicaci\u00f3n I2C, por lo que, pese a tener solo un par de GPIOs, podemos conectarle multitud de sensores y actuadores a trav\u00e9s del mencionado bus de datos I2C.</p>"},{"location":"program/thinspeak/#programacion","title":"Programaci\u00f3n","text":"<p>El ESP-01 dispone de un microcontrolador y una memoria donde poder almacenar programas, luego es un dispositivo programable en si mismo. Cargar programas en el dispositivo es algo mas complejo de lo que hemos visto hasta ahora dado que tiene dos modos de operaci\u00f3n, el modo flash o de ejecuci\u00f3n y el modo UART o de grabaci\u00f3n y debemos ser nosotros quienes activemos un modo u otro, cosa que hasta ahora el entorno ArduinoBlocks ha sido el encargado de hacerlo. Los modos de operaci\u00f3n se configuran a trav\u00e9s de los puertos GPIO0 y GPIO2.</p> <p>Para programar el ESP-01 hay que usar los pines Rx y Tx para transmitir los datos a la memoria Flash, donde se almacenar\u00e1 el sketch o programa.</p> <p>En las placas de control los pines Rx y Tx est\u00e1n en los pines D0 y D1 respectivamente y tambi\u00e9n son los que se utilizan para cargar programas a una velocidad de 115200 baudios, as\u00ed que si estos pines los ocupamos con el ESP8266 no podremos cargar programas en nuestra placa. Ahora bien, es posible utilizar otros pines para usar WiFi y evitar este problema, pero el resto de pines digitales solamente trabajan a 9600 baudios y el ESP-01 por defecto viene a 115200, luego para utilizarlo en pines distintos a los D0 y D1 de la placa tendremos que reprogramarlo para que la velocidad sea de 9600 baudios.</p> <p>Aunque sea bastante t\u00e9cnico debemos exponer c\u00f3mo configurar los dos modos de funcionamiento de forma breve.</p> <ul> <li> <p>Modo de funcionamiento UART. Para cargar un programa en el ESP-01 debemos o bien encenderlo o bien resetearlo pero teniendo los siguientes estados de pines:GPIO0 = 0 (nivel bajo o LOW = 0 V).</p> </li> <li> <p>GPIO2 = 1 (nivel alto o HIGH = 3,3 V = Vcc).</p> </li> <li>Recordemos siempre que el ESP8266 trabaja con niveles l\u00f3gicos de 3,3 V.</li> </ul> <p>El pin GPIO2 est\u00e1 por defecto a HIGH, ya que tiene un pull-up interno, por lo que podemos dejarlo simplemente desconectado.</p> <ul> <li> <p>Modo de funcionamiento Flash. Para ejecutar un programa en el ESP-01 una vez cargado debemos tener la siguiente configuraci\u00f3n de pines:</p> </li> <li> <p>GPIO0 = 1</p> </li> <li>GPIO2 = 1</li> </ul> <p>Tanto el GPIO0 como el GPIO2 est\u00e1n por defecto a HIGH, ya que ambos tienen un pull-up interno, por lo que podemos dejarlos simplemente desconectados.</p> <p>En este momento reflexionamos sobre el uso de Rx y Tx ya que si los estamos utilizando para cargar el programa en la placa y GPIO0 y GPIO2 para indicar el modo de trabajo \u00bfc\u00f3mo conectamos los sensores y actuadores al ESP-01?. Veamos:</p> <ol> <li>Rx y Tx los utilizamos para cargar el programa. Una vez finalizada la carga los podemos utilizar como pines de entrada y salida digitales.</li> <li>Los modos de trabajo se indican cuando se resetea o reinicia la placa. Una vez que tengamos el modo de ejecuci\u00f3n podemos conectar cualquier componente a estos pines.</li> </ol> <p>Los programas los podemos subir a nuestro ESP-01 mediante el IDE de Arduino o por medio de un convertidor USB-serie igual o similar al de la imagen siguiente:</p> <p> <p> Conversor USB-serial</p> <p></p> <p>Se trata de un escudo o shield para el m\u00f3dulo WiFi ESP-01 que est\u00e1 provisto de un chip conversor de USB a puerto serie, en concreto el CH340G. El proceso de reprogramaci\u00f3n con esta placa es bastante sencillo pero requiere de comandos AT que pasamos a introducir antes de continuar.</p>"},{"location":"program/thinspeak/#comandos-at-en-el-esp8266","title":"Comandos AT en el ESP8266","text":"<p>El ESP-01 viene por defecto con el firmware AT ai-thinker V0.9.2.4. Los m\u00f3dems ven\u00edan con un conjunto de comandos que permiten que nos podamos comunicar con ellos para configurarlos y que lo podamos hacer a trav\u00e9s del puerto serie de ordenador al que est\u00e1n conectados. A estos comandos se les llama AT (de attention).</p> <p>Despu\u00e9s de cada comando AT, el ESP8266 espera los caracteres especiales de nueva linea  para ejecutar el comando. El car\u00e1cter no imprimible CR (del ingl\u00e9s, Carriage Return) significa retorno de carro y LF ( del ingl\u00e9s, Line Feed) es salto de l\u00ednea. El origen de la nomenclatura est\u00e1 en las m\u00e1quinas de escribir. <p>En el enlace tenemos un pdf de la empresa Espressif Systems con el juego de comandos AT para el ESP8266.</p> <p>En la tabla siguiente damos un resumen de los comandos con una informaci\u00f3n ampliada de los que mas vamos a usar para la configuraci\u00f3n inicial que necesitamos.</p> <p> <p> Unos comandos AT</p> <p></p>"},{"location":"program/thinspeak/#preparacion-del-modulo-esp-01","title":"Preparaci\u00f3n del m\u00f3dulo ESP-01","text":"<p>Primero conectamos el m\u00f3dulo ESP8266 a la shield USB-serie y este a su vez a un puerto USB de nuestro ordenador. Nos aseguramos de que el interruptor est\u00e1 en modo Flash Boot.</p> <p>Entramos en ArduinoBlocks con ArduinoBlocks-Connector en funcionamiento, realizamos un refresco de la lectura del puerto para que detecte a la shield del m\u00f3dulo WiFi si es necesario, abrimos la consola, escogeremos la opci\u00f3n de 115200 en baudrate y tambi\u00e9n la de NL + LF (NL + LF es igual que CR + LF) para comunicarnos con el m\u00f3dulo WiFi. Hacemos clic en Conectar y conectamos la consola, escribimos \u201cAT\u201d en ella y clic en enviar. La situaci\u00f3n es la de la imagen siguiente:</p> <p> <p> Comando AT en consola arduinoblocks</p> <p></p> <p>Si todo es correcto debe respondernos \u201cOK\u201d. Si responde algo sin sentido o no contesta, significa que est\u00e1 configurado en alguna otra velocidad. En este segundo caso deberemos cambiar la opci\u00f3n de baudrate y repetir la operaci\u00f3n con diferentes velocidades hasta que nos responda \u201cOK\u201d. La situaci\u00f3n correcta en la consola de comandos es la siguiente:</p> <p> <p> Respuesta al comando AT</p> <p></p> <p>Una vez que nos responda \u201cOK\u201d, le enviamos el texto \u201cAT+UART_DEF=9600,8,1,0,0\u201d y nos debe responder otra vez \u201cOK\u201d.</p> <p> <p> Comando AT para establecer velocidad a 9600 baudios</p> <p></p> <p>Con esto hemos cambiado la velocidad a 9600 baudios mediante el comando AT+UART_DEF que nos permite cambiar la definici\u00f3n a 9600 baudios, con 8 bits de datos, 1 bit de parada, sin paridad y sin habilitar el control de flujo.</p> <p>Una vez que hemos configurado el m\u00f3dulo WiFi a la velocidad que nos interesa debemos crear un canal en un servidor MQTT donde enviar los datos y visualizarlos. Esto lo vamos a hacer a trav\u00e9s de la web de Thingspeak, pero antes de nada vamos a describir que es MQTT.</p> <p>Para saber mas acerca de la reprogramaci\u00f3n de la velocidad de comunicaci\u00f3n con ESP8266 visita el enlace: Reprogramar la velocidad de comunicaci\u00f3n del ESP8266.</p>"},{"location":"program/thinspeak/#introduccion-al-iot-a-traves-de-mqtt","title":"Introducci\u00f3n al IoT a trav\u00e9s de MQTT","text":"<p>Si queremos trabajar en tareas de IoT debemos de utilizar alg\u00fan protocolo de comunicaci\u00f3n y hoy por hoy el principal es MQTT, pero antes de citar protocolos vamos a tratar algunos conceptos necesarios. Un protocolo de comunicaci\u00f3n no es otra cosa que una serie de normas definidas para que dos o m\u00e1s dispositivos puedan comunicarse entre si de forma comprensible para ambos.</p> <ul> <li>Requisitos del IoT</li> </ul> <p>Estamos bastante acostumbrados a realizar un tipo de comunicaci\u00f3n denominada M2M (machine-to-machine) utilizando internet, pero cuando trabajamos en IoT debemos establecer una serie de requisitos que hacen que la comunicaci\u00f3n M2M no sea la mas adecuada. Algunos de estos requisitos son:</p> <ul> <li>Cantidad: se puede llegar a tener un gran n\u00famero de dispositivos diferentes, desde sensores, actuadores, servidores, etc.</li> <li>Escalabilidad: los sistemas deben permitir a\u00f1adir o eliminar dispositivos sin que el sistema global resulte afectado.</li> <li>Variedad: normalmente necesitaremos que el sistema funcione con diferentes sistemas operativos, lenguajes de programaci\u00f3n y el mayor n\u00famero posible de dispositivos.</li> <li>Simultaneidad: gran cantidad de comunicaciones simultaneas, lo que requiere respuestas r\u00e1pidas para lo que es necesario que los mensajes transmitidos sean lo mas cortos posibles.</li> <li>Seguridad: internet no es un sitio muy seguro y estos dispositivos van a estar conectados a internet controlando dispositivos f\u00edsicos.</li> <li>Accesibilidad: tendremos que trabajar en condiciones muy variadas en lo que se refiere a ancho de banda, firewall, direccionamiento,\u2026</li> </ul> <p>La soluci\u00f3n mas com\u00fan consiste en disponer un servidor denominado \u2018broker\u2019, o a veces \u2018Router\u2019, que ser\u00e1 el que reciba los mensajes de los dispositivos emisores y los distribuir\u00e1 a los receptores.</p> <p> <p> Broker</p> <p></p> <p>El broker va a tener una direcci\u00f3n IP fija y ser\u00e1 accesible para todos los dispositivos, puede mantener un registro de los dispositivos conectados, recibir y distribuir mensajes y establecer filtros de destinatarios. Esto permite algo fundamental, y es que cada dispositivo no dependa del resto de dispositivos.</p> <p>Veamos algunos conceptos que nos permitan entender las infraestructuras de los servicios IoT:</p> <ul> <li>Message Queue o cola de mensajes. En este tipo el broker genera una cola de mensajes \u00fanica para cada uno de los clientes que inician la suscripci\u00f3n.</li> <li>Message Service o servicio de mensajer\u00eda. En este tipo el broker distribuye inmediatamente los mensajes filtrados por alg\u00fan criterio a los clientes conectados. A diferencia de Message Queue, los mensajes entregados mientras el cliente est\u00e1 desconectado se pierden. </li> <li>Publish/Susbcribe (PubSub). Se trata de un sistema de mensajer\u00eda donde el 'Subscriber' informa al broker de que quiere recibir un tipo de mensajes y el 'Publisher' entonces puede publicarlos. </li> <li>Router Remoder Procedure Calls (RRPC). Se trata de la ejecuci\u00f3n remota de procedimientos donde 'Callee' comunica al broker que proporciona un procedimiento y el 'Caller', puede llamar a este procedimiento.</li> </ul> <p>Algunos de los protocolos para IoT son:</p> <ul> <li>MQTT (del ingl\u00e9s Message Queuing Telemetry Transport) es un protocolo PubSub de servicio de mensajer\u00eda que act\u00faa sobre TCP. Es ligero y f\u00e1cil de implementar resultando apropiado para dispositivos de baja potencia, tan habituales en IoT. TCP es un protocolo de control de transmisi\u00f3n (del ingl\u00e9s, Transmission Control Protocol) fundamental en Internet.</li> <li>AMQP (Advanced Message Queuing Protocol) es un protocolo PubSub de cola de mensajes que asegura la confiabilidad e interoperabilidad necesaria en aplicaciones corporativas.</li> <li>STOMP (Streaming Text Oriented Messaging Protocol). Es un protocolo sencillo que emplea HTTP y mensajes de texto.</li> <li>XMPP (Extensible Messaging and Presence Protocol). Es un protocolo abierto basado en XML dise\u00f1ado para aplicaciones de mensajer\u00eda instant\u00e1nea.</li> <li>WAMP (Web Application Messaging Protocol). Es un protocolo abierto que se ejecuta sobre WebSockets, y provee tanto aplicaciones de PubSub como RRPC.</li> <li>CoAP (Constrained Application Protocol) es un protocolo pensado para emplearse en dispositivos de IoT de baja capacidad.</li> </ul> <p>MQTT <p>Dentro de una arquitectura de MQTT, es muy importante el concepto topic (tema en espa\u00f1ol) ya que la comunicaci\u00f3n se realiza a trav\u00e9s de topics debiendo estar los emisores y receptores subscritos a un topic com\u00fan para poder establecer la comunicaci\u00f3n. Este tipo de arquitectura permite que la comunicaci\u00f3n pueda ser de uno a uno o de uno a muchos. Los topics tienen estructura jer\u00e1rquica pudiendo establecer relaciones padre-hijo de manera que cuando nos suscribimos a un topic padre podemos recibir tambi\u00e9n la informaci\u00f3n de sus hijos. En un ejemplo lo podemos ver m\u00e1s claramente.</p> <p> <p> Estructura jerarquica de un topic</p> <p></p> <p>Un topic se representa mediante una cadena con las jerarquias separadas por /. Por ejemplo: - Vivienda/Planta baja/Cocina/Arduino/Luz - Vivienda/Planta alta/Dorm.1/Arduino/Temperatura.</p> <p>De esta forma podemos suscribirnos a un topic concActividad o a varios, por ejemplo: - Un topic: Vivienda/Planta baja/Cocina/Arduino/Luz - Varios topics: Vivienda/Planta baja/#</p> <p>Existen b\u00e1sicamente tres tipos de brokers, los privados, los p\u00fablicos y los locales. A continuaci\u00f3n citamos alguno de los m\u00e1s utilizados:</p> <p>a.- Private MQTT Broker: solamente los dispositivos que establezcamos pueden publicar o suscribirse a un topic. Se utiliza en producci\u00f3n y prototipado. Algunos de ellos son:</p> <ul> <li>Azure de Microsoft.</li> <li>AWS de Amazon.</li> <li>CloudMQTT disponible en: https://www.cloudmqtt.com/plans.html.</li> <li>ThingSpeak de Mathworks (MATLAB).</li> </ul> <p>b.- Public MQTT Broker: cualquier dispositivo puede publicar y suscribirse a topics. Algunos de ellos son:</p> <ul> <li>Eclipse</li> <li>Mosquitto</li> <li>HiveMQ: Enlace - Direcci\u00f3n del broker</li> <li>Flespi</li> <li>Dioty</li> <li>Fluux</li> <li>Thingspeak</li> </ul> <p>Si queremos instalar nuestro propio broker en una raspberry o PC, sin duda Mosquito es la opci\u00f3n m\u00e1s extendida.</p>"},{"location":"program/thinspeak/#creacion-de-un-canal-en-un-servidor-mqtt","title":"Creaci\u00f3n de un canal en un servidor MQTT","text":"<p>En nuestro caso vamos a utilizar Thingspeak en su versi\u00f3n p\u00fablica. Lo primero que debemos hacer es crear una cuenta, para lo que clicamos en Sign Up. Seguidamente, introducimos un correo electr\u00f3nico v\u00e1lido y el resto de datos que nos pide. Lo vemos en la imagen siguiente:</p> <p> <p> Pagina inicial de Thingspeaks</p> <p></p> <p>Debemos aceptar que use la direcci\u00f3n de correo electr\u00f3nico para nuestra cuenta de MathWorks, como se ve en la imagen siguiente:</p> <p> <p> Aceptaci\u00f3n a Mathwork</p> <p></p> <p>Tras esto recibiremos un correo en la direcci\u00f3n que hemos dado para confirmar la creaci\u00f3n de la cuenta y confirmarla. Debemos ver algo similar a la imagen siguiente:</p> <p> <p>   Confirmacion aceptaci\u00f3n cuenta correo*</p> <p></p> <p>Una vez confirmada la direcci\u00f3n de correo electr\u00f3nico, volvemos a la p\u00e1gina donde est\u00e1bamos y hacemos click en continuar. Nos pedir\u00e1 un nombre de usuario y una contrase\u00f1a que usaremos a partir de ahora para iniciar sesi\u00f3n.</p> <p>Finalizada la creaci\u00f3n de la cuenta iniciamos sesi\u00f3n desde la p\u00e1gina principal haciendo clic en \u201cSign In\u201d. Veremos una ventana como la de la imagen siguiente:</p> <p> <p> Ventana para identificaci\u00f3n en Thingspeaks</p> <p></p> <p>Escribimos nuestra contrase\u00f1a y hacemos clic en el bot\u00f3n Sign in.</p> <p> <p> Acceso a Thingspeaks</p> <p></p> <p>Con esto entramos en el broker y est\u00e1 todo listo para iniciar el trabajo.</p> <p> <p> Acceso correcto al broker</p> <p></p> <p>Podemos aprender mas sobre el tema visitando los siguientes enlaces:</p> <ul> <li>Primeros pasos con Wifi: Servidor sin clave y contrase\u00f1a</li> <li>Wifi con servidor gratuito con clave y contrase\u00f1a y app m\u00f3vil</li> <li>C\u00f3mo publicar y almacenar datos por Wifi en Internet con Thingspeak</li> </ul>"},{"location":"program/thinspeak/#filtrado-por-mac","title":"Filtrado por MAC","text":"<p>Si por cualquier motivo nuestra red WiFi tiene filtrado MAC debemos de dar de alta en la misma de nuestro dispositivo ESP-01. Esta es una tarea que va a depender de nuestro router y suministrador y que no resulta especialmente complicada. Lo primero que debemos hacer es averiguar la direcci\u00f3n MAC de nuestro dispositivo ESP8266. Esta tarea no la vamos a hacer desde ArduinoBlocks sino que vamos a recurrir al IDE de Arduino.</p> <p>Si necesitas ayuda para este tema seguro que la encuentras en estos tutoriales de Luis Llamas, o tambi\u00e9n puedes buscar informaci\u00f3n en tu navegador pues existen multitud de p\u00e1ginas referentes al tema de programaci\u00f3n desde el IDE de Arduino.</p>"},{"location":"program/thinspeak/#crear-un-canal-en-thingspeak","title":"Crear un canal en Thingspeak","text":"<p>Iniciamos sesi\u00f3n en Thingspeak y sos dirigimos a \"Channels\" para mostrar \"My Channels\" si no estamos ya en esa ventana. Nos aparecer\u00e1 la opci\u00f3n \"New Channel\":</p> <p> <p> Acceso a My Channels en Thingspeak</p> <p></p> <p>Elegimos un nombre para el canal, activamos los campos que necesitamos marc\u00e1ndolos y les damos un nombre. Tenemos hasta 8 campos por cada uno de los 4 canales de la versi\u00f3n gratuita de Thingspeak. Abajo del todo tenemos la opci\u00f3n para guardar los cambios realizados en el canal.</p> <p> <p> Creaci\u00f3n canal y campos en Thingspeak</p> <p></p> <p>Una vez hemos creado el canal necesitaremos conocer un poco los men\u00fas de la p\u00e1gina que nos permitir\u00e1n, entre otras cosas, obtener los datos que necesitaremos para que desde arduinoblocks y la placa ESP32 micro:STEAMakers se puedan enviar datos a este canal.</p> <ul> <li>Private View. Es lo que nosotros, y solamente nosotros, veremos.</li> <li>Public View. Es como se ver\u00e1 nuestro canal si lo hacemos p\u00fablico desde Sharing.</li> <li>Channel Settings. Es el men\u00fa de configuraci\u00f3n del canal desde el que podemos cambiar el nombre del canal, a\u00f1adir campos, renombrarlos, eliminarlos, etc. En la parte inferior del men\u00fa encontramos botones salvar los cambios, limpiar (borrar) los datos que actualmente tiene el canal almacenados o eliminar el canal.</li> </ul> <p> <p> Opciones de Channel Settings en Thingspeak</p> <p></p> <ul> <li>Sharing. Nos va a permitir las tres opciones siguiente:</li> </ul> <p> <p> Opciones de Sharing en Thingspeak</p> <p></p> <ul> <li>API Keys. Claves necesarias para leer o grabar datos en de un canal privado.</li> <li>Data Import / Export. Se pueden importar datos al canal a partir de la plantilla de importanci\u00f3n CSV. Se pueden exportar todos los datos almacenados en el canal en formato CSV para tratarlos localmente con una hoja de c\u00e1lculo, Python, etc.</li> </ul> <p>El siguiente paso es imprescindible para poder enviar datos a Thingspeak desde nuestra placa. Arduinoblocks nos pedir\u00e1 los datos (credenciales) de este dispositivo cuando hacemos el programa que env\u00ede los datos de los sensores.</p> <p>Nos dirigimos a \"Devices\" y hacemos clic en \"MQTT\". En la ventana que se abre debemos teclear un nombre para el dispositivo, si queremos una descripci\u00f3n y asigamos los canales a los que podr\u00e1 acceder el dispositivo. El ID del canal lo podemos escribir (si lo conocemos) o buscarlo en la lista de canales.</p> <p> <p> Crear dispositivo MQTT en Thingspeak</p> <p></p> <p>Despu\u00e9s de a\u00f1adir el dispositivo y guardar en sitio seguro las credenciales hacemos clic en el bot\u00f3n \"Done\" y hemos terminado con las tareas en Thingspeak. Las credenciales es importante guardarlas en un lugar seguro y conocido porque si no las recordamos no podremos enviar datos al canal. Adem\u00e1s la contrase\u00f1a no se guarda remotamente por lo que si la perdemos tendremos que, en el mejor de los casos, regenerarla o solicitar a quien nos di\u00f3 las credenciales que lo haga.</p> <p>En el apartado IoT con arduinoblocks vemos como trabajar con todo esto y se pone un sencillo ejemplo de uso.</p>"},{"location":"program/thinspeak/#visualizacion-de-resultados","title":"Visualizaci\u00f3n de resultados","text":"<p>En este apartado veremos como mostrar los resultados obtenidos desde un navegador web, desde una aplicaci\u00f3n para smathphone y desde un widget, e indicaremos como localizar las aplicaciones que vamos a ver.</p> <p>Info</p> <p>Este apartado est\u00e1 relacionado estrechamente con el apartado IoT con arduinoblocks</p>"},{"location":"program/thinspeak/#navegador","title":"Navegador","text":"<p>Para localizar un canal debemos conocer alg\u00fan Tag (etiqueta) que le habremos puesto previamente en la configuraci\u00f3n o bien el ID del autor (localizar\u00e1 todos sus canales p\u00fablicos). Si conocemos alguna de estas dos cosas, y el canal es p\u00fablico, podemos visualizar los datos del mismo localiz\u00e1ndolo, tal y como se aprecia en la imagen siguiente, desde la entrada Channels cumplimentando al menos uno de los campos indicados. En este caso hemos colocado \"microSM\" como etiqueta:</p> <p> <p> Localizar un canal Thingspeak conociendo un Tag</p> <p></p> <p>Que nos devuelve el siguiente resultado:</p> <p> <p> Resultado de la b\u00fasqueda de un canal Thingspeak conociendo un Tag</p> <p></p> <p>Si hacemos clic en la zona marcada en amarillo accederemos a los datos del canal:</p> <p> <p> Canal Thingspeak localizado por un Tag</p> <p></p> <p>Adem\u00e1s de visualizar de forma gr\u00e1fica los datos recibidos, disponemos de un bot\u00f3n que nos permite exportar los datos para trabajar con ellos de forma local. Si pulsamos el bot\u00f3n \"Export recent data\" obtendremos algo similar a la imagen siguiente:</p> <p> <p> Export recent data</p> <p></p> <p>Podemos exportar en cualquiera de los tres formatos disponibles todas las medidas o cada una de forma individual.</p> <p>Los resultados de exportar todo el canal vistos en la hoja de c\u00e1lculo de LibreOffice Calc tienen el siguiente aspecto:</p> <p> <p> Export recent data en Calc</p> <p></p>"},{"location":"program/thinspeak/#aplicaciones-para-android","title":"Aplicaciones para Android","text":"<p>MATLAB a trav\u00e9s de su servidor (broker) thingspeak ofrece varias aplicaciones para dispositivos smartphone. En la imagen siguiente vemos el resultado de una b\u00fasqueda en Play Store.</p> <p> <p> Apps de Thingspeak</p> <p></p>"},{"location":"program/thinspeak/#thingview","title":"ThingView","text":"<p>Una vez instalada la App podemos a\u00f1adir los canales que deseemos, simplemente clicando sobre el signo m\u00e1s, seguir los pasos y dando el identificador del canal. En la imagen siguiente observamos el  canal creado para el ejemplo anterior.</p> <p> <p> Thingview con canal a\u00f1adido</p> <p></p> <p>Tocando sobre el mismo accedemos a los datos del canal:</p> <p> <p> Datos en Thingview del canal a\u00f1adido</p> <p></p> <p>Si tocamos sobre alguna de las gr\u00e1ficas, accedemos a las opciones disponibles para esa variable concreta, tal y como vemos en la imagen siguiente:</p> <p> <p> Datos en Thingview del canal a\u00f1adido</p> <p></p>"},{"location":"program/thinspeak/#widget","title":"Widget","text":"<p>La segunda opci\u00f3n de descarga es una microaplicaci\u00f3n widget para la pantalla de nuestro m\u00f3vil que nos va a permitir estar viendo dos de las variables que tengamos en nuestro canal. En este caso, adem\u00e1s del n\u00famero de canal debemos conocer la API key de lectura. El widget permite establecer alarmas cuando se superan, por encima o por abajo, los valores de la variable establecidos. En la imagen siguiente vemos el aspecto del mismo con una variable. Las tres l\u00edneas de la esquina superior derecha nos permiten entrar en la configuraci\u00f3n del widget.</p> <p> <p> Widget en la pantalla de un m\u00f3bil</p> <p></p> <p>El icono de la esquina inferior derecha nos da acceso a los datos del canal y la variable mostrada en formato gr\u00e1fico, tal y como observamos en la imagen siguiente:</p> <p> <p> Gr\u00e1fica de humedad desde el Widget</p> <p></p>"},{"location":"program/tm/","title":"micro:STEAMakers + Telegram","text":""},{"location":"program/tm/#introduccion","title":"Introducci\u00f3n","text":"<p>Contenidos basados en los documentos de referencia de Libros &amp; Documentaci\u00f3n:</p> <ul> <li>ESP32 STEAMakers Telegram Bot.pdf</li> <li>ESP32STEAMakers_telegram.pdf</li> </ul> <p>Telegram es una aplicaci\u00f3n de mensajeria instant\u00e1nea y VOIP (Voz sobre Protocolo de Internet) gratuita, de software libre, desarrollada por los hermanos Nikol\u00e1i D\u00farov y P\u00e1vel D\u00farov. Permite enviar y recibir mensajes, im\u00e1genes y v\u00eddeos a trav\u00e9s de internet de persona a persona o a trav\u00e9s de grupos y canales.</p> <p>Con esta aplicaci\u00f3n nos podemos comunicar de forma sencilla con nuestra placa micro:STEAMakers consiguiendo as\u00ed un nuevo canal de comunicaci\u00f3n con ella. Aunque Telegram dispone de una aplicaci\u00f3n de escritorio y otra online, lo m\u00e1s habitual es utilizarla desde un tel\u00e9fono m\u00f3bil (Android o iPhone) por lo que centraremos aqu\u00ed las explicaciones con sistema operativo Android.</p>"},{"location":"program/tm/#bot-de-telegram","title":"Bot de Telegram","text":"<p>Un bot es una aplicaci\u00f3n que se ejecuta dentro de Telegram. No hay que instalarlos y se usan como si estuviesemos hablando con una persona. Utilizan una interfaz de texto por lo que se controlan enviandoles mensajes que contengan los comandos que soportan. Los comandos son las instrucciones o palabras que tenemos que escribir para comunicarnos con el bot y dependen de cada uno de ellos.</p> <p>Se buscan como cualquier otro usuario, utilizando @nombre o con el buscador de Telegram. Cuando entablamos una conversaci\u00f3n con un bot veremos una descripci\u00f3n de su funcionamiento, debajo de la cual habr\u00e1 un bot\u00f3n \"Start\" que sirve para enviar el comando de inicio al bot. Cuando hagamos esto el bot responder\u00e1 explicando de nuevo su funcionamiento y listando los comandos para empezar a utilizarlo.</p> <p>Existe un bot, llamado BotFather, que es el padre de todos los bots y que sirve para crear otros bots. Una vez encontrado entramos en el chat del mismo y ya podemos comenzar a trabajar.</p> <p>Inicialmente se muestra un cuadro de opciones, un bot\u00f3n nombrado \"Menu\" y la entrada de texto del chat. Si hacemos clic sobre \"Menu\" o escribimos en el chat la barra inclinada (/) sin pulsar la tecla enter se nos mostrar\u00e1n todas las opciones disponibles u ordenes que el bot puede recibir.</p> <p> <p> Botfather inicial</p> <p></p> <p>A continuaci\u00f3n vemos los comandos mas importantes disponibles brevemente explicados:</p> <ul> <li>/newbot - crea un nuevo bot.</li> <li>/mybots - lista los bost existentes y permite administrar su configuraci\u00f3n.</li> <li>/token - genera un token de autorizaci\u00f3n. Un token es un c\u00f3digo alfanum\u00e9rico necesario para que el bot utilice la API (interfaz de programaci\u00f3n de aplicaciones) de Telegram.</li> <li>/revoke - genera un nuevo token quedando revocados todos los derechos del anterior.</li> <li>/setname - para cambiar nombre a los bots.</li> <li>/setdescription - cambia la descripci\u00f3n del bot.</li> <li>/setuserpic - cambia la foto de perfil del bot.</li> <li>/setcommands - cambia la lista de comandos del bot.</li> <li>/delebot - para borrar un bot.</li> <li>/cancel - cancela la operaci\u00f3n actual.</li> </ul> <p>Vamos a comenzar creando un bot que vamos a denominar micro:STEAMakers. Hacemos:</p> <p> <p> /newbot</p> <p></p> <p>Cuando damos Enter tras teclear el nombre se realiza la comprobaci\u00f3n de que dicho bot no existe, y si es as\u00ed, nos invita a teclear un nombre de usuario para nuestro bot. Este nombre debe terminar con la palabra bot o Bot. Hemos probado con \"docu_bot\", pero est\u00e1 en uso, as\u00ed que se ha cambiado por \"docuuSM_bot\". Si tenemos \u00e9xito nos devuelve esto:</p> \u00a1Clic para mostrar! <p>Done! Congratulations on your new bot. You will find it at t.me/docuuSM_bot. You can now add a description, about section and profile picture for your bot, see /help for a list of commands. By the way, when you've finished creating your cool bot, ping our Bot Support if you want a better username for it. Just make sure the bot is fully operational before you do this.</p> <p>Use this token to access the HTTP API: 7436809274:AAFloQ8QhUsf2dBnqL3iroTKQq_Ho7zdQtw Keep your token secure and store it safely, it can be used by anyone to control your bot.</p> <p>For a description of the Bot API, see this page: https://core.telegram.org/bots/api</p> <p> <p> /newbot creado</p> <p></p> <p>El API Token es muy importante por lo que debemos guardarlo a buen recaudo y no difundirlo. En este caso se hace para documentar y cuando se finalice la actividad de uso ser\u00e1 eliminado.</p> <p>Una vez tenemos la conversaci\u00f3n abierta con BotFather, podemos teclear Start o Empezar o Help o Ayuda para iniciarla y veremos una lista con todos los comandos que entiende BotFather. Con esos comandos, crearemos nuestro propio bot y haremos todo lo necesario para configurarlo y ponerlo en marcha.</p> <p> <p> Ayuda de BotFather</p> <p></p> <p>Para modificar o completar la informaci\u00f3n de nuestro bot \"docuSM_bot\" primero debemos seleccionarlo, lo que podemos hacer con el comando \"/mybots\" y haciendo clic sobre el mismo:</p> <p> <p> mybots</p> <p></p> <p>En la animaci\u00f3n siguiente vemos como acceder al usuario del nuevo bot para poder iniciarlo y lo hacemos como si acabasemos de entrar en BotFather que, l\u00f3gicamente, tambi\u00e9n debemos iniciar.</p> <p> <p> Inicio de los bots</p> <p></p> <p>Para el trabajo con el bot tambi\u00e9n se ha creado un grupo (docu_microSTEAMakers) al que a\u00f1adimos el usuario de nuestro bot.</p> <p> <p> Agregar a grupo</p> <p></p> <p>Observamos como en ese grupo ya est\u00e1 @IDBot que ahora vemos el motivo.</p> <p>Una vez que accedemos al bot podemos escoger las opciones de configuraci\u00f3n adecuadas a nuestras necesidades, como consultar (o cambiar) el \"API Token\", editar el bot, configirar el bot, etc.</p> <p>Con esto nuestro bot ya puede responder mensajes, pero si queremos enviar mensajes a un chat vamos a necesitar el ID de dicho chat o del grupo. Para obtener el ID vamos a hacer uso de un bot que se llama @myidbot:</p> <p> <p> @myidbot</p> <p></p> <p>Nos aseguramos que seleccionamos el bot con la imagen se\u00f1alada.</p> <p>Entramos en el chat del bot y el men\u00fa nos indica las dos opciones que tenemos disponibles:</p> <p> <p> Menu @myidbot</p> <p></p> <ul> <li>/getid - devuelve nuestro ID de telegram</li> </ul> <p> <p> /getid</p> <p></p> <ul> <li>/getgroupid - devuelve el ID del grupo al que este bot (myidbot) se ha a\u00f1adido.</li> </ul> <p>Si hacemos la consulta /getgroupid desde IDBot obtenemos el siguiente mensaje:</p> <p> <p> /getgroupid desde IDBot</p> <p></p> <p>Para que nos resulte sencillo, a continuaci\u00f3n vemos la traducci\u00f3n del mensaje:</p> Traducci\u00f3n del mensaje <p>Para obtener el ID de un grupo o canal, tienes que hacer una de las siguientes cosas:   - A\u00f1adirme a un grupo o canal del que quieras obtener el ID, y enviar /getgroupid en el grupo.   - Otra opci\u00f3n es reenviar un mensaje del grupo, pero ten en cuenta que este mensaje tiene que ser de un administrador an\u00f3nimo, de lo contrario obtendr\u00e1s el ID del usuario que envi\u00f3 el mensaje.</p> <p>Si ahora realizamos la consulta desde el grupo obtenemos:</p> <p> <p> /getgroupid desde grupo</p> <p></p> <p>Vamos a establecer los comando que va a reconocer nuestro bot, que van a ser:</p> <p> <p> Configurar comandos</p> <p></p> <p>Podemos seguir profundizando en las configuraciones de Telegram, pero no es el objetivo aqu\u00ed y con todo lo realizado vamos a tener suficiente para desarrollar la actividad propuesta.</p>"},{"location":"program/tm/#bloques-telegram-bot","title":"Bloques Telegram-Bot","text":"<p>Los encontramos en el men\u00fa WiFi / IoT \u2192 Telegram Bot y son los siguientes:</p> <p> <p> Bloques Telegram-Bot</p> <p></p> <p>Trabajar con Telegram requiere estar conectado a una red WiFi, lo que podemos hacer con el bloque:</p> <p> <p> Bloques Telegram-Bot</p> <p></p> <p>L\u00f3gicamente tenemos que conocer el nombre de la red y la contrase\u00f1a de acceso a la misma.</p>"}]}